import{j as n}from"./motion-BxWOwN3p.js";import{r as a}from"./vendor-CwvKdLiM.js";import{Y as N,Z as b,_ as p,c as y}from"./index-CjsGZNGd.js";import{G as v}from"./GlassModal-VHtYX9KY.js";import{i as w,I}from"./icons-BPTnPYzs.js";import"./heroui-m--SptfW.js";import"./state-LdY94aua.js";import"./i18n-fyWXc1Nl.js";import"./virtuoso-ZIEdzwmB.js";function z(){const{type:h,data:g,closeModal:r}=N(),[l,i]=a.useState(""),[o,d]=a.useState(!1),[u,c]=a.useState(null),f=a.useRef(null),m=h==="rename",e=g;a.useEffect(()=>{if(m&&e){const s=e.name,t=s.lastIndexOf(".");!e.isFolder&&t>0?i(s.substring(0,t)):i(s),c(null),setTimeout(()=>{f.current?.select()},100)}},[m,e]);const x=async()=>{if(!e||!l.trim())return;let s=l.trim();if(!e.isFolder){const t=e.name.substring(e.name.lastIndexOf("."));t&&t!==e.name&&(s=`${s}${t}`)}if(s===e.name){r();return}d(!0),c(null);try{await y.rename(e.path,s),r(),window.location.reload()}catch(t){c(t instanceof Error?t.message:"Umbenennen fehlgeschlagen")}finally{d(!1)}},j=s=>{s.key==="Enter"&&!o&&x()};return n.jsx(v,{isOpen:m,onClose:r,title:"Umbenennen",size:"sm",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50",children:[e?.isFolder?n.jsx(w,{size:24,className:"text-cyan-400"}):n.jsx(I,{size:24,className:"text-cyan-400"}),n.jsx("span",{className:"text-sm text-slate-400 truncate",children:e?.name})]}),n.jsx(b,{ref:f,value:l,onChange:s=>i(s.target.value),onKeyDown:j,placeholder:"Neuer Name",autoFocus:!0}),u&&n.jsx("p",{className:"text-sm text-red-400",children:u}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(p,{variant:"ghost",onClick:r,disabled:o,children:"Abbrechen"}),n.jsx(p,{variant:"accent",onClick:x,disabled:o||!l.trim(),children:o?"Umbenennen...":"Umbenennen"})]})]})})}export{z as RenameModal};
