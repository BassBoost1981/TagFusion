const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Lightbox-Ggcts8RM.js","assets/motion-BxWOwN3p.js","assets/vendor-CwvKdLiM.js","assets/i18n-fyWXc1Nl.js","assets/heroui-m--SptfW.js","assets/icons-BPTnPYzs.js","assets/state-LdY94aua.js","assets/virtuoso-ZIEdzwmB.js","assets/TagManagerModal-Vroyxu_G.js","assets/RenameModal-C4WK33MZ.js","assets/GlassModal-B1dwxNXx.js","assets/DeleteConfirmModal-B4nN0yhN.js","assets/PropertiesModal-l-0cQkr9.js"])))=>i.map(i=>d[i]);
import{j as c,b as he,A as un}from"./motion-BxWOwN3p.js";import{b as nt,r as d,c as vc,R as yc}from"./vendor-CwvKdLiM.js";import{s as Xf,a as zi,c as Gf,b as qf,t as Kf,d as Qf,_ as ts,H as Zf}from"./heroui-m--SptfW.js";import{c as mn,w as Jf}from"./state-LdY94aua.js";import{u as Nt,i as ci,B as ep,a as tp}from"./i18n-fyWXc1Nl.js";import{X as dn,S as rr,P as np,M as rp,L as sp,C as Vi,H as Br,F as sr,a as op,I as oo,b as wc,c as Sc,d as Rc,T as Ec,e as ip,f as Hi,g as or,h as kr,i as Ga,j as ap,k as lp,l as cp,m as up,N as dp,U as fp,D as pp,n as gp,o as mp,p as Cc,G as hp,q as xp,r as Ic,s as Tc,t as Pc,u as bp,v as vp,Z as yp,w as wp,x as Sp,A as qa,y as Ka,R as Rp,z as Ep,B as Oc,E as Cp,J as Ip,K as Tp,O as Pp,Q as Op,V as Mc,W as Mp,Y as kp}from"./icons-BPTnPYzs.js";import{Q as Np}from"./virtuoso-ZIEdzwmB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ui={},Qa=nt;ui.createRoot=Qa.createRoot,ui.hydrateRoot=Qa.hydrateRoot;const Za={};function ut(e,t){const n=d.useRef(Za);return n.current===Za&&(n.current=e(t)),n}const $o=vc[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],jp=$o&&$o!==d.useLayoutEffect?$o:e=>e();function Z(e){const t=ut(Ap).current;return t.next=e,jp(t.effect),t.trampoline}function Ap(){const e={next:void 0,callback:Fp,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function Fp(){}function qe(e,...t){const n=new URL(`https://base-ui.com/production-error/${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${e}; visit ${n} for the full message.`}function fn(e,t,n,r){const s=ut(kc).current;return Dp(s,e,t,n,r)&&Nc(s,[e,t,n,r]),s.callback}function Lp(e){const t=ut(kc).current;return _p(t,e)&&Nc(t,e),t.callback}function kc(){return{callback:null,cleanup:null,refs:[]}}function Dp(e,t,n,r,s){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==s}function _p(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function Nc(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=o(n);typeof i=="function"&&(r[s]=i);break}case"object":{o.current=n;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=r[s];typeof i=="function"?i():o(null);break}case"object":{o.current=null;break}}}}}}}const zp=parseInt(d.version,10);function $i(e){return zp>=e}function Ja(e){if(!d.isValidElement(e))return null;const t=e,n=t.props;return($i(19)?n?.ref:t.ref)??null}function di(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function Vp(e,t){const n={};for(const r in e){const s=e[r];if(t?.hasOwnProperty(r)){const o=t[r](s);o!=null&&Object.assign(n,o);continue}s===!0?n[`data-${r.toLowerCase()}`]="":s&&(n[`data-${r.toLowerCase()}`]=s.toString())}return n}function Hp(e,t){return typeof e=="function"?e(t):e}function $p(e,t){return typeof e=="function"?e(t):e}const Fr={};function io(e,t,n,r,s){let o={...fi(e,Fr)};return t&&(o=Ns(o,t)),n&&(o=Ns(o,n)),r&&(o=Ns(o,r)),o}function Bp(e){if(e.length===0)return Fr;if(e.length===1)return fi(e[0],Fr);let t={...fi(e[0],Fr)};for(let n=1;n<e.length;n+=1)t=Ns(t,e[n]);return t}function Ns(e,t){return jc(t)?t(e):Wp(e,t)}function Wp(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=di(e.style,r);break}case"className":{e[n]=Ac(e.className,r);break}default:Up(n,r)?e[n]=Yp(e[n],r):e[n]=r}}return e}function Up(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),s=e.charCodeAt(2);return n===111&&r===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function jc(e){return typeof e=="function"}function fi(e,t){return jc(e)?e(t):e??Fr}function Yp(e,t){return t?e?n=>{if(Xp(n)){const s=n;pi(s);const o=t(s);return s.baseUIHandlerPrevented||e?.(s),o}const r=t(n);return e?.(n),r}:t:e}function pi(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Ac(e,t){return t?e?t+" "+e:t:e}function Xp(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Xe(){}const Xt=Object.freeze([]),He=Object.freeze({}),Gp=500,Fc=500,qp={style:{transition:"none"}},Lc="data-base-ui-click-trigger",Dc={fallbackAxisSide:"none"},Kp={fallbackAxisSide:"end"},Qp={clipPath:"inset(50%)",position:"fixed",top:0,left:0};function $e(e,t,n={}){const r=t.render,s=Zp(t,n);if(n.enabled===!1)return null;const o=n.state??He;return Jp(e,r,s,o)}function Zp(e,t={}){const{className:n,style:r,render:s}=e,{state:o=He,ref:i,props:a,stateAttributesMapping:l,enabled:u=!0}=t,f=u?Hp(n,o):void 0,p=u?$p(r,o):void 0,g=u?Vp(o,l):He,m=u?di(g,Array.isArray(a)?Bp(a):a)??He:He;return typeof document<"u"&&(u?Array.isArray(i)?m.ref=Lp([m.ref,Ja(s),...i]):m.ref=fn(m.ref,Ja(s),i):fn(null,null)),u?(f!==void 0&&(m.className=Ac(m.className,f)),p!==void 0&&(m.style=di(m.style,p)),m):He}function Jp(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const s=io(n,t.props);return s.ref=n.ref,d.cloneElement(t,s)}if(e&&typeof e=="string")return eg(e,n);throw new Error(qe(8))}function eg(e,t){return e==="button"?d.createElement("button",{type:"button",...t,key:t.key}):e==="img"?d.createElement("img",{alt:"",...t,key:t.key}):d.createElement(e,t)}function js({controlled:e,default:t,name:n,state:r="value"}){const{current:s}=d.useRef(e!==void 0),[o,i]=d.useState(t),a=s?e:o,l=d.useCallback(u=>{s||i(u)},[]);return[a,l]}const tg=()=>{},ne=typeof document<"u"?d.useLayoutEffect:tg,ng={...vc};let el=0;function rg(e,t="mui"){const[n,r]=d.useState(e),s=e||n;return d.useEffect(()=>{n==null&&(el+=1,r(`${t}-${el}`))},[n,t]),s}const tl=ng.useId;function Ln(e,t){if(tl!==void 0){const n=tl();return e??(t?`${t}-${n}`:n)}return rg(e,t)}function Dn(e){return Ln(e,"base-ui")}const yt="none",Mt="trigger-press",ot="trigger-hover",$s="trigger-focus",Bi="outside-press",Wi="item-press",sg="close-press",nl="clear-press",kn="input-change",Jt="input-clear",qt="focus-out",ns="escape-key",As="list-navigation",og="cancel-open",Nr="sibling-open",_c="imperative-action";function me(e,t,n,r){let s=!1,o=!1;const i=He;return{reason:e,event:t??new Event("base-ui"),cancel(){s=!0},allowPropagation(){o=!0},get isCanceled(){return s},get isPropagationAllowed(){return o},trigger:n,...i}}function Cr(e,t,n){const r=n??He;return{reason:e,event:t??new Event("base-ui"),...r}}const ig=[];function ao(e){d.useEffect(e,ig)}const xs=null;class ag{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)n[s]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const bs=new ag;class Ye{static create(){return new Ye}static request(t){return bs.request(t)}static cancel(t){return bs.cancel(t)}currentId=xs;request(t){this.cancel(),this.currentId=bs.request(()=>{this.currentId=xs,t()})}cancel=()=>{this.currentId!==xs&&(bs.cancel(this.currentId),this.currentId=xs)};disposeEffect=()=>this.cancel}function gr(){const e=ut(Ye.create).current;return ao(e.disposeEffect),e}function On(e){return e==null?e:"current"in e?e.current:e}function lo(e,t=!1,n=!0){const r=gr();return Z((s,o=null)=>{r.cancel();const i=On(e);i!=null&&(typeof i.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?s():r.request(()=>{function a(){i&&Promise.all(i.getAnimations().map(l=>l.finished)).then(()=>{o!=null&&o.aborted||nt.flushSync(s)}).catch(()=>{if(n){if(o!=null&&o.aborted)return;nt.flushSync(s)}else i.getAnimations().length>0&&i.getAnimations().some(l=>l.pending||l.playState!=="finished")&&a()})}t?r.request(a):a()}))})}function co(e,t=!1,n=!1){const[r,s]=d.useState(e&&t?"idle":void 0),[o,i]=d.useState(e);return e&&!o&&(i(!0),s("starting")),!e&&o&&r!=="ending"&&!n&&s("ending"),!e&&!o&&r==="ending"&&s(void 0),ne(()=>{if(!e&&o&&r!=="ending"&&n){const a=Ye.request(()=>{s("ending")});return()=>{Ye.cancel(a)}}},[e,o,r,n]),ne(()=>{if(!e||t)return;const a=Ye.request(()=>{nt.flushSync(()=>{s(void 0)})});return()=>{Ye.cancel(a)}},[t,e]),ne(()=>{if(!e||!t)return;e&&o&&r!=="idle"&&s("starting");const a=Ye.request(()=>{s("idle")});return()=>{Ye.cancel(a)}},[t,e,o,s,r]),d.useMemo(()=>({mounted:o,setMounted:i,transitionStatus:r}),[o,r])}function lg(e){const{open:t,defaultOpen:n,onOpenChange:r,disabled:s}=e,o=t!==void 0,[i,a]=js({controlled:t,default:n,name:"Collapsible",state:"open"}),{mounted:l,setMounted:u,transitionStatus:f}=co(i,!0,!0),[p,g]=d.useState(i),[{height:m,width:y},b]=d.useState({height:void 0,width:void 0}),v=Dn(),[x,h]=d.useState(),S=x??v,[R,w]=d.useState(!1),[T,E]=d.useState(!1),I=d.useRef(null),j=d.useRef(null),M=d.useRef(null),N=d.useRef(null),P=lo(N,!1),C=Z(A=>{const O=!i,F=me(Mt,A.nativeEvent);if(r(O,F),F.isCanceled)return;const L=N.current;j.current==="css-animation"&&L!=null&&L.style.removeProperty("animation-name"),!R&&!T&&(j.current!=null&&j.current!=="css-animation"&&!l&&O&&u(!0),j.current==="css-animation"&&(!p&&O&&g(!0),!l&&O&&u(!0))),a(O),j.current==="none"&&l&&!O&&u(!1)});return ne(()=>{o&&j.current==="none"&&!T&&!i&&u(!1)},[o,T,i,t,u]),d.useMemo(()=>({abortControllerRef:I,animationTypeRef:j,disabled:s,handleTrigger:C,height:m,mounted:l,open:i,panelId:S,panelRef:N,runOnceAnimationsFinish:P,setDimensions:b,setHiddenUntilFound:w,setKeepMounted:E,setMounted:u,setOpen:a,setPanelIdState:h,setVisible:g,transitionDimensionRef:M,transitionStatus:f,visible:p,width:y}),[I,j,s,C,m,l,i,S,N,P,b,w,E,u,a,g,M,f,p,y])}const zc=d.createContext(void 0);function cg(){const e=d.useContext(zc);if(e===void 0)throw new Error(qe(15));return e}let ir=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const ug={[ir.startingStyle]:""},dg={[ir.endingStyle]:""},rs={transitionStatus(e){return e==="starting"?ug:e==="ending"?dg:null}};let Lr=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=ir.startingStyle]="startingStyle",e[e.endingStyle=ir.endingStyle]="endingStyle",e}({});const fg={[Lr.open]:""},pg={[Lr.closed]:""},gg={open(e){return e?fg:pg}},Vc={...gg,...rs},mg=d.forwardRef(function(t,n){const{render:r,className:s,defaultOpen:o=!1,disabled:i=!1,onOpenChange:a,open:l,...u}=t,f=Z(a),p=lg({open:l,defaultOpen:o,onOpenChange:f,disabled:i}),g=d.useMemo(()=>({open:p.open,disabled:p.disabled,transitionStatus:p.transitionStatus}),[p.open,p.disabled,p.transitionStatus]),m=d.useMemo(()=>({...p,onOpenChange:f,state:g}),[p,f,g]),y=$e("div",t,{state:g,ref:n,props:u,stateAttributesMapping:Vc});return c.jsx(zc.Provider,{value:m,children:y})});function uo(){return typeof window<"u"}function hn(e){return Ui(e)?(e.nodeName||"").toLowerCase():"#document"}function tt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ht(e){var t;return(t=(Ui(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ui(e){return uo()?e instanceof Node||e instanceof tt(e).Node:!1}function Fe(e){return uo()?e instanceof Element||e instanceof tt(e).Element:!1}function ze(e){return uo()?e instanceof HTMLElement||e instanceof tt(e).HTMLElement:!1}function gi(e){return!uo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tt(e).ShadowRoot}const hg=new Set(["inline","contents"]);function _n(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=gt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hg.has(s)}const xg=new Set(["table","td","th"]);function bg(e){return xg.has(hn(e))}const vg=[":popover-open",":modal"];function fo(e){return vg.some(t=>{try{return e.matches(t)}catch{return!1}})}const yg=["transform","translate","scale","rotate","perspective"],wg=["transform","translate","scale","rotate","perspective","filter"],Sg=["paint","layout","strict","content"];function Yi(e){const t=po(),n=Fe(e)?gt(e):e;return yg.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||wg.some(r=>(n.willChange||"").includes(r))||Sg.some(r=>(n.contain||"").includes(r))}function Rg(e){let t=zt(e);for(;ze(t)&&!Dt(t);){if(Yi(t))return t;if(fo(t))return null;t=zt(t)}return null}function po(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Eg=new Set(["html","body","#document"]);function Dt(e){return Eg.has(hn(e))}function gt(e){return tt(e).getComputedStyle(e)}function go(e){return Fe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zt(e){if(hn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gi(e)&&e.host||Ht(e);return gi(t)?t.host:t}function Hc(e){const t=zt(e);return Dt(t)?e.ownerDocument?e.ownerDocument.body:e.body:ze(t)&&_n(t)?t:Hc(t)}function sn(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Hc(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=tt(s);if(o){const a=mi(i);return t.concat(i,i.visualViewport||[],_n(s)?s:[],a&&n?sn(a):[])}return t.concat(s,sn(s,[],n))}function mi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Cg=d.createContext(void 0);function Xi(e=!1){const t=d.useContext(Cg);if(t===void 0&&!e)throw new Error(qe(16));return t}function Ig(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:s=0,isNativeButton:o}=e,i=r&&t!==!1,a=r&&t===!1;return{props:d.useMemo(()=>{const u={onKeyDown(f){n&&t&&f.key!=="Tab"&&f.preventDefault()}};return r||(u.tabIndex=s,!o&&n&&(u.tabIndex=t?s:-1)),(o&&(t||i)||!o&&n)&&(u["aria-disabled"]=n),o&&(!t||a)&&(u.disabled=n),u},[r,n,t,i,a,o,s])}}function mr(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:s=!0}=e,o=d.useRef(null),i=Xi(!0)!==void 0,a=Z(()=>{const g=o.current;return!!(g?.tagName==="A"&&g?.href)}),{props:l}=Ig({focusableWhenDisabled:n,disabled:t,composite:i,tabIndex:r,isNativeButton:s}),u=d.useCallback(()=>{const g=o.current;Tg(g)&&i&&t&&l.disabled===void 0&&g.disabled&&(g.disabled=!1)},[t,l.disabled,i]);ne(u,[u]);const f=d.useCallback((g={})=>{const{onClick:m,onMouseDown:y,onKeyUp:b,onKeyDown:v,onPointerDown:x,...h}=g;return io({type:s?"button":void 0,onClick(R){if(t){R.preventDefault();return}m?.(R)},onMouseDown(R){t||y?.(R)},onKeyDown(R){if(t||(pi(R),v?.(R)),R.baseUIHandlerPrevented)return;const w=R.target===R.currentTarget&&!s&&!a()&&!t,T=R.key==="Enter",E=R.key===" ";w&&((E||T)&&R.preventDefault(),T&&m?.(R))},onKeyUp(R){t||(pi(R),b?.(R)),!R.baseUIHandlerPrevented&&R.target===R.currentTarget&&!s&&!t&&R.key===" "&&m?.(R)},onPointerDown(R){if(t){R.preventDefault();return}x?.(R)}},s?void 0:{role:"button"},l,h)},[t,l,s,a]),p=Z(g=>{o.current=g,u()});return{getButtonProps:f,buttonRef:p}}function Tg(e){return ze(e)&&e.tagName==="BUTTON"}let Pg=function(e){return e.disabled="data-disabled",e.orientation="data-orientation",e}({});function Og(e){const{abortControllerRef:t,animationTypeRef:n,externalRef:r,height:s,hiddenUntilFound:o,keepMounted:i,id:a,mounted:l,onOpenChange:u,open:f,panelRef:p,runOnceAnimationsFinish:g,setDimensions:m,setMounted:y,setOpen:b,setVisible:v,transitionDimensionRef:x,visible:h,width:S}=e,R=d.useRef(!1),w=d.useRef(null),T=d.useRef(f),E=d.useRef(f),I=gr(),j=d.useMemo(()=>n.current==="css-animation"?!h:!f&&!l,[f,l,h,n]),M=Z(P=>{if(!P)return;if(n.current==null||x.current==null){const O=getComputedStyle(P),F=O.animationName!=="none"&&O.animationName!=="",L=O.transitionDuration!=="0s"&&O.transitionDuration!=="";F&&L||(O.animationName==="none"&&O.transitionDuration!=="0s"?n.current="css-transition":O.animationName!=="none"&&O.transitionDuration==="0s"?n.current="css-animation":n.current="none"),P.getAttribute(Pg.orientation)==="horizontal"||O.transitionProperty.indexOf("width")>-1?x.current="width":x.current="height"}if(n.current!=="css-transition")return;(s===void 0||S===void 0)&&(m({height:P.scrollHeight,width:P.scrollWidth}),E.current&&P.style.setProperty("transition-duration","0s"));let C=-1,A=-1;return C=Ye.request(()=>{E.current=!1,A=Ye.request(()=>{setTimeout(()=>{P.style.removeProperty("transition-duration")})})}),()=>{Ye.cancel(C),Ye.cancel(A)}}),N=fn(r,p,M);return ne(()=>{if(n.current!=="css-transition")return;const P=p.current;if(!P)return;let C=-1;if(t.current!=null&&(t.current.abort(),t.current=null),f){const A={"justify-content":P.style.justifyContent,"align-items":P.style.alignItems,"align-content":P.style.alignContent,"justify-items":P.style.justifyItems};Object.keys(A).forEach(O=>{P.style.setProperty(O,"initial","important")}),!E.current&&!i&&P.setAttribute(Lr.startingStyle,""),m({height:P.scrollHeight,width:P.scrollWidth}),C=Ye.request(()=>{Object.entries(A).forEach(([O,F])=>{F===""?P.style.removeProperty(O):P.style.setProperty(O,F)})})}else{if(P.scrollHeight===0&&P.scrollWidth===0)return;m({height:P.scrollHeight,width:P.scrollWidth});const A=new AbortController;t.current=A;const O=A.signal;let F=null;const L=Lr.endingStyle;return F=new MutationObserver(k=>{k.some(z=>z.type==="attributes"&&z.attributeName===L)&&(F?.disconnect(),F=null,g(()=>{m({height:0,width:0}),P.style.removeProperty("content-visibility"),y(!1),t.current===A&&(t.current=null)},O))}),F.observe(P,{attributes:!0,attributeFilter:[L]}),()=>{F?.disconnect(),I.cancel(),t.current===A&&(A.abort(),t.current=null)}}return()=>{Ye.cancel(C)}},[t,n,I,o,i,l,f,p,g,m,y]),ne(()=>{if(n.current!=="css-animation")return;const P=p.current;P&&(w.current=P.style.animationName||w.current,P.style.setProperty("animation-name","none"),m({height:P.scrollHeight,width:P.scrollWidth}),!T.current&&!R.current&&P.style.removeProperty("animation-name"),f?(t.current!=null&&(t.current.abort(),t.current=null),y(!0),v(!0)):(t.current=new AbortController,g(()=>{y(!1),v(!1),t.current=null},t.current.signal)))},[t,n,f,p,g,m,y,v,h]),ao(()=>{const P=Ye.request(()=>{T.current=!1});return()=>Ye.cancel(P)}),ne(()=>{if(!o)return;const P=p.current;if(!P)return;let C=-1,A=-1;return f&&R.current&&(P.style.transitionDuration="0s",m({height:P.scrollHeight,width:P.scrollWidth}),C=Ye.request(()=>{R.current=!1,A=Ye.request(()=>{setTimeout(()=>{P.style.removeProperty("transition-duration")})})})),()=>{Ye.cancel(C),Ye.cancel(A)}},[o,f,p,m]),ne(()=>{const P=p.current;P&&o&&j&&(P.setAttribute("hidden","until-found"),n.current==="css-transition"&&P.setAttribute(Lr.startingStyle,""))},[o,j,n,p]),d.useEffect(function(){const C=p.current;if(!C)return;function A(O){R.current=!0,b(!0),u(!0,me(yt,O))}return C.addEventListener("beforematch",A),()=>{C.removeEventListener("beforematch",A)}},[u,p,b]),d.useMemo(()=>({props:{hidden:j,id:a,ref:N}}),[j,a,N])}let rl=function(e){return e.collapsiblePanelHeight="--collapsible-panel-height",e.collapsiblePanelWidth="--collapsible-panel-width",e}({});function rt(e){const t=ut(Mg,e).current;return t.next=e,ne(t.effect),t}function Mg(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}function zn(e){const{enabled:t=!0,open:n,ref:r,onComplete:s}=e,o=rt(n),i=Z(s),a=lo(r,n);d.useEffect(()=>{t&&a(()=>{n===o.current&&i()})},[t,n,i,a,o])}const kg=d.forwardRef(function(t,n){const{className:r,hiddenUntilFound:s,keepMounted:o,render:i,id:a,...l}=t,{abortControllerRef:u,animationTypeRef:f,height:p,mounted:g,onOpenChange:m,open:y,panelId:b,panelRef:v,runOnceAnimationsFinish:x,setDimensions:h,setHiddenUntilFound:S,setKeepMounted:R,setMounted:w,setPanelIdState:T,setOpen:E,setVisible:I,state:j,transitionDimensionRef:M,visible:N,width:P,transitionStatus:C}=cg(),A=s??!1,O=o??!1;ne(()=>{if(a)return T(a),()=>{T(void 0)}},[a,T]),ne(()=>{S(A)},[S,A]),ne(()=>{R(O)},[R,O]);const{props:F}=Og({abortControllerRef:u,animationTypeRef:f,externalRef:n,height:p,hiddenUntilFound:A,id:b,keepMounted:O,mounted:g,onOpenChange:m,open:y,panelRef:v,runOnceAnimationsFinish:x,setDimensions:h,setMounted:w,setOpen:E,setVisible:I,transitionDimensionRef:M,visible:N,width:P});zn({open:y&&C==="idle",ref:v,onComplete(){y&&h({height:void 0,width:void 0})}});const L=d.useMemo(()=>({...j,transitionStatus:C}),[j,C]),k=$e("div",t,{state:L,ref:[n,v],props:[F,{style:{[rl.collapsiblePanelHeight]:p===void 0?"auto":`${p}px`,[rl.collapsiblePanelWidth]:P===void 0?"auto":`${P}px`}},l],stateAttributesMapping:Vc});return O||A||!O&&g?k:null}),Ir=0;class pn{static create(){return new pn}currentId=Ir;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Ir,n()},t)}isStarted(){return this.currentId!==Ir}clear=()=>{this.currentId!==Ir&&(clearTimeout(this.currentId),this.currentId=Ir)};disposeEffect=()=>this.clear}function it(){const e=ut(pn.create).current;return ao(e.disposeEffect),e}const $c=d.createContext(void 0);function Gi(){const e=d.useContext($c);if(e===void 0)throw new Error(qe(53));return e}let Bs=function(e){return e.scrollAreaCornerHeight="--scroll-area-corner-height",e.scrollAreaCornerWidth="--scroll-area-corner-width",e}({});const vs=500,sl=16;function Et(e,t,n){if(!e)return 0;const r=getComputedStyle(e),s=n==="x"?"Inline":"Block";return n==="x"&&t==="margin"?parseFloat(r[`${t}InlineStart`])*2:parseFloat(r[`${t}${s}Start`])+parseFloat(r[`${t}${s}End`])}let Ng=function(e){return e.orientation="data-orientation",e.hovering="data-hovering",e.scrolling="data-scrolling",e.hasOverflowX="data-has-overflow-x",e.hasOverflowY="data-has-overflow-y",e.overflowXStart="data-overflow-x-start",e.overflowXEnd="data-overflow-x-end",e.overflowYStart="data-overflow-y-start",e.overflowYEnd="data-overflow-y-end",e}({});const ys="base-ui-disable-scrollbar",Bc={className:ys,element:c.jsx("style",{href:ys,precedence:"base-ui:low",children:`.${ys}{scrollbar-width:none}.${ys}::-webkit-scrollbar{display:none}`})};let Un=function(e){return e.hasOverflowX="data-has-overflow-x",e.hasOverflowY="data-has-overflow-y",e.overflowXStart="data-overflow-x-start",e.overflowXEnd="data-overflow-x-end",e.overflowYStart="data-overflow-y-start",e.overflowYEnd="data-overflow-y-end",e}({});const qi={hasOverflowX:e=>e?{[Un.hasOverflowX]:""}:null,hasOverflowY:e=>e?{[Un.hasOverflowY]:""}:null,overflowXStart:e=>e?{[Un.overflowXStart]:""}:null,overflowXEnd:e=>e?{[Un.overflowXEnd]:""}:null,overflowYStart:e=>e?{[Un.overflowYStart]:""}:null,overflowYEnd:e=>e?{[Un.overflowYEnd]:""}:null,cornerHidden:()=>null},Vn=typeof navigator<"u",Bo=Fg(),Wc=Dg(),Ki=Lg(),Uc=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),jg=Bo.platform==="MacIntel"&&Bo.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(Bo.platform),ol=Vn&&/firefox/i.test(Ki),Yc=Vn&&/apple/i.test(navigator.vendor),Ws=Vn&&/android/i.test(Wc)||/android/i.test(Ki),Ag=Vn&&Wc.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,Xc=Ki.includes("jsdom/");function Fg(){if(!Vn)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function Lg(){if(!Vn)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function Dg(){if(!Vn)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const hi="data-base-ui-focusable",Gc="active",qc="selected",Kc="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",on="ArrowLeft",an="ArrowRight",Qi="ArrowUp",ss="ArrowDown";function Lt(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Oe(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&gi(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function st(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Tt(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _g(e){return e.matches("html,body")}function Ge(e){return e?.ownerDocument||document}function Zi(e){return ze(e)&&e.matches(Kc)}function xi(e){return e?e.getAttribute("role")==="combobox"&&Zi(e):!1}function zg(e){if(!e||Xc)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function Us(e){return e?e.hasAttribute(hi)?e:e.querySelector(`[${hi}]`)||e:null}function Nn(e,t,n=!0){return e.filter(s=>s.parentId===t&&(!n||s.context?.open)).flatMap(s=>[s,...Nn(e,s.id,n)])}function il(e,t){let n=[],r=e.find(s=>s.id===t)?.parentId;for(;r;){const s=e.find(o=>o.id===r);r=s?.parentId,s&&(n=n.concat(s))}return n}function Je(e){e.preventDefault(),e.stopPropagation()}function Vg(e){return"nativeEvent"in e}function Qc(e){return e.mozInputSource===0&&e.isTrusted?!0:Ws&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Zc(e){return Xc?!1:!Ws&&e.width===0&&e.height===0||Ws&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function ar(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Jc(e){const t=e.type;return t==="click"||t==="mousedown"||t==="keydown"||t==="keyup"}const Hg=["top","right","bottom","left"],lr=Math.min,mt=Math.max,cr=Math.round,Gn=Math.floor,_t=e=>({x:e,y:e}),$g={left:"right",right:"left",bottom:"top",top:"bottom"},Bg={start:"end",end:"start"};function bi(e,t,n){return mt(e,lr(t,n))}function Kt(e,t){return typeof e=="function"?e(t):e}function pt(e){return e.split("-")[0]}function xn(e){return e.split("-")[1]}function Ji(e){return e==="x"?"y":"x"}function ea(e){return e==="y"?"height":"width"}const Wg=new Set(["top","bottom"]);function Ct(e){return Wg.has(pt(e))?"y":"x"}function ta(e){return Ji(Ct(e))}function Ug(e,t,n){n===void 0&&(n=!1);const r=xn(e),s=ta(e),o=ea(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Ys(i)),[i,Ys(i)]}function Yg(e){const t=Ys(e);return[vi(e),t,vi(t)]}function vi(e){return e.replace(/start|end/g,t=>Bg[t])}const al=["left","right"],ll=["right","left"],Xg=["top","bottom"],Gg=["bottom","top"];function qg(e,t,n){switch(e){case"top":case"bottom":return n?t?ll:al:t?al:ll;case"left":case"right":return t?Xg:Gg;default:return[]}}function Kg(e,t,n,r){const s=xn(e);let o=qg(pt(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(vi)))),o}function Ys(e){return e.replace(/left|right|bottom|top/g,t=>$g[t])}function Qg(e){return{top:0,right:0,bottom:0,left:0,...e}}function eu(e){return typeof e!="number"?Qg(e):{top:e,right:e,bottom:e,left:e}}function Xs(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ws(e,t,n){return Math.floor(e/t)!==n}function Dr(e,t){return t<0||t>=e.current.length}function Wo(e,t){return lt(e,{disabledIndices:t})}function cl(e,t){return lt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function lt(e,{startingIndex:t=-1,decrement:n=!1,disabledIndices:r,amount:s=1}={}){let o=t;do o+=n?-s:s;while(o>=0&&o<=e.current.length-1&&_r(e,o,r));return o}function Zg(e,{event:t,orientation:n,loopFocus:r,rtl:s,cols:o,disabledIndices:i,minIndex:a,maxIndex:l,prevIndex:u,stopEvent:f=!1}){let p=u;const g=[],m={};let y=!1;{let x=null,h=-1;e.current.forEach((S,R)=>{if(S==null)return;const w=S.closest('[role="row"]');w&&(y=!0),(w!==x||h===-1)&&(x=w,h+=1,g[h]=[]),g[h].push(R),m[R]=h})}const b=y&&g.length>0&&g.some(x=>x.length!==o);function v(x){if(!b||u===-1)return;const h=m[u];if(h==null)return;const S=g[h].indexOf(u);let R=x==="up"?h-1:h+1;r&&(R<0?R=g.length-1:R>=g.length&&(R=0));const w=new Set;for(;R>=0&&R<g.length&&!w.has(R);){w.add(R);const T=g[R];if(T.length===0){R=x==="up"?R-1:R+1;continue}const E=Math.min(S,T.length-1);for(let I=E;I>=0;I-=1){const j=T[I];if(!_r(e,j,i))return j}R=x==="up"?R-1:R+1,r&&(R<0?R=g.length-1:R>=g.length&&(R=0))}}if(t.key===Qi){const x=v("up");if(x!==void 0)f&&Je(t),p=x;else{if(f&&Je(t),u===-1)p=l;else if(p=lt(e,{startingIndex:p,amount:o,decrement:!0,disabledIndices:i}),r&&(u-o<a||p<0)){const h=u%o,S=l%o,R=l-(S-h);S===h?p=l:p=S>h?R:R-o}Dr(e,p)&&(p=u)}}if(t.key===ss){const x=v("down");x!==void 0?(f&&Je(t),p=x):(f&&Je(t),u===-1?p=a:(p=lt(e,{startingIndex:u,amount:o,disabledIndices:i}),r&&u+o>l&&(p=lt(e,{startingIndex:u%o-o,amount:o,disabledIndices:i}))),Dr(e,p)&&(p=u))}if(n==="both"){const x=Gn(u/o);t.key===(s?on:an)&&(f&&Je(t),u%o!==o-1?(p=lt(e,{startingIndex:u,disabledIndices:i}),r&&ws(p,o,x)&&(p=lt(e,{startingIndex:u-u%o-1,disabledIndices:i}))):r&&(p=lt(e,{startingIndex:u-u%o-1,disabledIndices:i})),ws(p,o,x)&&(p=u)),t.key===(s?an:on)&&(f&&Je(t),u%o!==0?(p=lt(e,{startingIndex:u,decrement:!0,disabledIndices:i}),r&&ws(p,o,x)&&(p=lt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i}))):r&&(p=lt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i})),ws(p,o,x)&&(p=u));const h=Gn(l/o)===x;Dr(e,p)&&(r&&h?p=t.key===(s?an:on)?l:lt(e,{startingIndex:u-u%o-1,disabledIndices:i}):p=u)}return p}function Jg(e,t,n){const r=[];let s=0;return e.forEach(({width:o,height:i},a)=>{let l=!1;for(n&&(s=0);!l;){const u=[];for(let f=0;f<o;f+=1)for(let p=0;p<i;p+=1)u.push(s+f+p*t);s%t+o<=t&&u.every(f=>r[f]==null)?(u.forEach(f=>{r[f]=a}),l=!0):s+=1}}),[...r]}function em(e,t,n,r,s){if(e===-1)return-1;const o=n.indexOf(e),i=t[e];switch(s){case"tl":return o;case"tr":return i?o+i.width-1:o;case"bl":return i?o+(i.height-1)*r:o;case"br":return n.lastIndexOf(e);default:return-1}}function tm(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function _r(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nm=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Gs=nm.join(","),tu=typeof Element>"u",ur=tu?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qs=!tu&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Wr=function(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=s===""||s==="true",i=o||n&&t&&Wr(t.parentNode);return i},rm=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},nu=function(t,n,r){if(Wr(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Gs));return n&&ur.call(t,Gs)&&s.unshift(t),s=s.filter(r),s},Ks=function(t,n,r){for(var s=[],o=Array.from(t);o.length;){var i=o.shift();if(!Wr(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,u=Ks(l,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:i,candidates:u})}else{var f=ur.call(i,Gs);f&&r.filter(i)&&(n||!t.includes(i))&&s.push(i);var p=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),g=!Wr(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(p&&g){var m=Ks(p===!0?i.children:p.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:i,candidates:m})}else o.unshift.apply(o,i.children)}}return s},ru=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},su=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||rm(t))&&!ru(t)?0:t.tabIndex},sm=function(t,n){var r=su(t);return r<0&&n&&!ru(t)?0:r},om=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},ou=function(t){return t.tagName==="INPUT"},im=function(t){return ou(t)&&t.type==="hidden"},am=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},lm=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},cm=function(t){if(!t.name)return!0;var n=t.form||qs(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=lm(s,t.form);return!o||o===t},um=function(t){return ou(t)&&t.type==="radio"},dm=function(t){return um(t)&&!cm(t)},fm=function(t){var n,r=t&&qs(t),s=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var i,a,l;for(o=!!((i=s)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(s)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&s;){var u,f,p;r=qs(s),s=(u=r)===null||u===void 0?void 0:u.host,o=!!((f=s)!==null&&f!==void 0&&(p=f.ownerDocument)!==null&&p!==void 0&&p.contains(s))}}return o},ul=function(t){var n=t.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},pm=function(t,n){var r=n.displayCheck,s=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var o=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(t).visibility==="hidden")return!0;var i=ur.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(ur.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var u=t.parentElement,f=qs(t);if(u&&!u.shadowRoot&&s(u)===!0)return ul(t);t.assignedSlot?t=t.assignedSlot:!u&&f!==t.ownerDocument?t=f.host:t=u}t=l}if(fm(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return ul(t);return!1},gm=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return ur.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},yi=function(t,n){return!(n.disabled||Wr(n)||im(n)||pm(n,t)||am(n)||gm(n))},wi=function(t,n){return!(dm(n)||su(n)<0||!yi(t,n))},mm=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},iu=function(t){var n=[],r=[];return t.forEach(function(s,o){var i=!!s.scopeParent,a=i?s.scopeParent:s,l=sm(a,i),u=i?iu(s.candidates):a;l===0?i?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:l,item:s,isScope:i,content:u})}),r.sort(om).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},os=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ks([t],n.includeContainer,{filter:wi.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:mm}):r=nu(t,n.includeContainer,wi.bind(null,n)),iu(r)},hm=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Ks([t],n.includeContainer,{filter:yi.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=nu(t,n.includeContainer,yi.bind(null,n)),r},au=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ur.call(t,Gs)===!1?!1:wi(n,t)};const hr=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function lu(e,t){const n=os(e,hr()),r=n.length;if(r===0)return;const s=Lt(Ge(e)),o=n.indexOf(s),i=o===-1?t===1?0:r-1:o+t;return n[i]}function mo(e){return lu(Ge(e).body,1)||e}function cu(e){return lu(Ge(e).body,-1)||e}function uu(e,t){if(!e)return null;const n=os(Ge(e).body,hr()),r=n.length;if(r===0)return null;const s=n.indexOf(e);if(s===-1)return null;const o=(s+t+r)%r;return n[o]}function du(e){return uu(e,1)}function fu(e){return uu(e,-1)}function jn(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Oe(n,r)}function xm(e){os(e,hr()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function dl(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const fl={width:0,height:0},bm={xStart:!1,xEnd:!1,yStart:!1,yEnd:!1},pu=d.forwardRef(function(t,n){const{render:r,className:s,overflowEdgeThreshold:o,...i}=t,[a,l]=d.useState(!1),[u,f]=d.useState(!1),[p,g]=d.useState(!1),[m,y]=d.useState(fl),[b,v]=d.useState(fl),[x,h]=d.useState(!1),[S,R]=d.useState(bm),w=Dn(),T=d.useRef(null),E=d.useRef(null),I=d.useRef(null),j=d.useRef(null),M=d.useRef(null),N=d.useRef(null),P=d.useRef(null),C=d.useRef(!1),A=d.useRef(0),O=d.useRef(0),F=d.useRef(0),L=d.useRef(0),k=d.useRef("vertical"),_=it(),z=it(),X=d.useRef({x:0,y:0}),[H,B]=d.useState({scrollbarYHidden:!1,scrollbarXHidden:!1,cornerHidden:!1}),Q=vm(o),re=Z(ae=>{const W=ae.x-X.current.x,U=ae.y-X.current.y;X.current=ae,U!==0&&(g(!0),_.start(vs,()=>{g(!1)})),W!==0&&(f(!0),z.start(vs,()=>{f(!1)}))}),le=Z(ae=>{ae.button===0&&(C.current=!0,A.current=ae.clientY,O.current=ae.clientX,k.current=ae.currentTarget.getAttribute(Ng.orientation),E.current&&(F.current=E.current.scrollTop,L.current=E.current.scrollLeft),M.current&&k.current==="vertical"&&M.current.setPointerCapture(ae.pointerId),N.current&&k.current==="horizontal"&&N.current.setPointerCapture(ae.pointerId))}),ue=Z(ae=>{if(!C.current)return;const W=ae.clientY-A.current,U=ae.clientX-O.current;if(E.current){const Y=E.current.scrollHeight,ve=E.current.clientHeight,xe=E.current.scrollWidth,Re=E.current.clientWidth;if(M.current&&I.current&&k.current==="vertical"){const ee=Et(I.current,"padding","y"),fe=Et(M.current,"margin","y"),te=M.current.offsetHeight,de=I.current.offsetHeight-te-ee-fe,oe=W/de;E.current.scrollTop=F.current+oe*(Y-ve),ae.preventDefault(),g(!0),_.start(vs,()=>{g(!1)})}if(N.current&&j.current&&k.current==="horizontal"){const ee=Et(j.current,"padding","x"),fe=Et(N.current,"margin","x"),te=N.current.offsetWidth,de=j.current.offsetWidth-te-ee-fe,oe=U/de;E.current.scrollLeft=L.current+oe*(xe-Re),ae.preventDefault(),f(!0),z.start(vs,()=>{f(!1)})}}}),J=Z(ae=>{C.current=!1,M.current&&k.current==="vertical"&&M.current.releasePointerCapture(ae.pointerId),N.current&&k.current==="horizontal"&&N.current.releasePointerCapture(ae.pointerId)});function ce(ae){const W=ae.pointerType==="touch";if(h(W),!W){const U=Oe(T.current,ae.target);l(U)}}const V=d.useMemo(()=>({hasOverflowX:!H.scrollbarXHidden,hasOverflowY:!H.scrollbarYHidden,overflowXStart:S.xStart,overflowXEnd:S.xEnd,overflowYStart:S.yStart,overflowYEnd:S.yEnd,cornerHidden:H.cornerHidden}),[H.scrollbarXHidden,H.scrollbarYHidden,H.cornerHidden,S]),D={role:"presentation",onPointerEnter:ce,onPointerMove:ce,onPointerDown({pointerType:ae}){h(ae==="touch")},onPointerLeave(){l(!1)},style:{position:"relative",[Bs.scrollAreaCornerHeight]:`${m.height}px`,[Bs.scrollAreaCornerWidth]:`${m.width}px`}},se=$e("div",t,{state:V,ref:[n,T],props:[D,i],stateAttributesMapping:qi}),K=d.useMemo(()=>({handlePointerDown:le,handlePointerMove:ue,handlePointerUp:J,handleScroll:re,cornerSize:m,setCornerSize:y,thumbSize:b,setThumbSize:v,touchModality:x,cornerRef:P,scrollingX:u,setScrollingX:f,scrollingY:p,setScrollingY:g,hovering:a,setHovering:l,viewportRef:E,rootRef:T,scrollbarYRef:I,scrollbarXRef:j,thumbYRef:M,thumbXRef:N,rootId:w,hiddenState:H,setHiddenState:B,overflowEdges:S,setOverflowEdges:R,viewportState:V,overflowEdgeThreshold:Q}),[le,ue,J,re,m,b,x,P,u,f,p,g,a,l,E,T,I,j,M,N,w,H,S,V,Q]);return c.jsxs($c.Provider,{value:K,children:[Bc.element,se]})});function vm(e){if(typeof e=="number"){const t=Math.max(0,e);return{xStart:t,xEnd:t,yStart:t,yEnd:t}}return{xStart:Math.max(0,e?.xStart||0),xEnd:Math.max(0,e?.xEnd||0),yStart:Math.max(0,e?.yStart||0),yEnd:Math.max(0,e?.yEnd||0)}}const ym=d.createContext(void 0),wm=d.createContext(void 0);function xr(){return d.useContext(wm)?.direction??"ltr"}function Ut(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Sm(e,t){if(typeof IntersectionObserver>"u")return()=>{};const n=new IntersectionObserver(r=>{r.forEach(s=>{s.intersectionRatio>0&&(t(),n.disconnect())})});return n.observe(e),()=>{n.disconnect()}}let en=function(e){return e.scrollAreaOverflowXStart="--scroll-area-overflow-x-start",e.scrollAreaOverflowXEnd="--scroll-area-overflow-x-end",e.scrollAreaOverflowYStart="--scroll-area-overflow-y-start",e.scrollAreaOverflowYEnd="--scroll-area-overflow-y-end",e}({}),pl=!1;function Rm(){pl||Uc||(typeof CSS<"u"&&"registerProperty"in CSS&&[en.scrollAreaOverflowXStart,en.scrollAreaOverflowXEnd,en.scrollAreaOverflowYStart,en.scrollAreaOverflowYEnd].forEach(e=>{try{CSS.registerProperty({name:e,syntax:"<length>",inherits:!1,initialValue:"0px"})}catch{}}),pl=!0)}const gu=d.forwardRef(function(t,n){const{render:r,className:s,...o}=t,{viewportRef:i,scrollbarYRef:a,scrollbarXRef:l,thumbYRef:u,thumbXRef:f,cornerRef:p,setCornerSize:g,setThumbSize:m,rootId:y,setHiddenState:b,hiddenState:v,handleScroll:x,setHovering:h,setOverflowEdges:S,overflowEdges:R,overflowEdgeThreshold:w}=Gi(),T=xr(),E=d.useRef(!0),I=it(),j=it();function M(){const L=i.current,k=a.current,_=l.current,z=u.current,X=f.current,H=p.current;if(!L)return;const B=L.scrollHeight,Q=L.scrollWidth,re=L.clientHeight,le=L.clientWidth,ue=L.scrollTop,J=L.scrollLeft;if(B===0||Q===0)return;const ce=re>=B,V=le>=Q,D=le/Q,se=re/B,K=Math.max(0,Q-le),ae=Math.max(0,B-re);let W=0,U=0;V||(T==="rtl"?W=Ut(-J,0,K):W=Ut(J,0,K),U=K-W);const Y=ce?0:Ut(ue,0,ae),ve=ce?0:ae-Y,xe=V?0:le,Re=ce?0:re,ee=Et(_,"padding","x"),fe=Et(k,"padding","y"),te=Et(X,"margin","x"),de=Et(z,"margin","y"),oe=xe-ee-te,Ee=Re-fe-de,Pe=_?Math.min(_.offsetWidth,oe):oe,ye=k?Math.min(k.offsetHeight,Ee):Ee,je=Math.max(sl,Pe*D),_e=Math.max(sl,ye*se);if(m(be=>be.height===_e&&be.width===je?be:{width:je,height:_e}),k&&z){const be=k.offsetHeight-_e-fe-de,Se=B-re,Qe=Se===0?0:ue/Se,ke=Math.min(be,Math.max(0,Qe*be));z.style.transform=`translate3d(0,${ke}px,0)`}if(_&&X){const be=_.offsetWidth-je-ee-te,Se=Q-le,Qe=Se===0?0:J/Se,ke=T==="rtl"?Ut(Qe*be,-be,0):Ut(Qe*be,0,be);X.style.transform=`translate3d(${ke}px,0,0)`}const Be=Ut(W,0,K),Ke=Ut(U,0,K),Le=Ut(Y,0,ae),q=Ut(ve,0,ae),Ae=[[en.scrollAreaOverflowXStart,Be],[en.scrollAreaOverflowXEnd,Ke],[en.scrollAreaOverflowYStart,Le],[en.scrollAreaOverflowYEnd,q]];for(const[be,Se]of Ae)L.style.setProperty(be,`${Se}px`);if(H){if(V||ce)g({width:0,height:0});else if(!V&&!ce){const be=k?.offsetWidth||0,Se=_?.offsetHeight||0;g({width:be,height:Se})}}b(be=>{const Se=ce||V;return be.scrollbarYHidden===ce&&be.scrollbarXHidden===V&&be.cornerHidden===Se?be:{scrollbarYHidden:ce,scrollbarXHidden:V,cornerHidden:Se}});const De={xStart:!V&&Be>w.xStart,xEnd:!V&&Ke>w.xEnd,yStart:!ce&&Le>w.yStart,yEnd:!ce&&q>w.yEnd};S(be=>be.xStart===De.xStart&&be.xEnd===De.xEnd&&be.yStart===De.yStart&&be.yEnd===De.yEnd?be:De)}const N=Z(()=>{nt.flushSync(M)});ne(()=>i.current?(Rm(),Sm(i.current,N)):void 0,[N,i]),ne(()=>{queueMicrotask(N)},[N,v,T]),ne(()=>{i.current?.matches(":hover")&&h(!0)},[i,h]),d.useEffect(()=>{const L=i.current;if(typeof ResizeObserver>"u"||!L)return;const k=new ResizeObserver(N);return k.observe(L),j.start(0,()=>{Promise.all(L.getAnimations({subtree:!0}).map(_=>_.finished)).then(N).catch(()=>{})}),()=>{k.disconnect(),j.clear()}},[N,i,j]);function P(){E.current=!1}const C={role:"presentation",...y&&{"data-id":`${y}-viewport`},...(!v.scrollbarXHidden||!v.scrollbarYHidden)&&{tabIndex:0},className:Bc.className,style:{overflow:"scroll"},onScroll(){i.current&&(N(),E.current||x({x:i.current.scrollLeft,y:i.current.scrollTop}),I.start(100,()=>{E.current=!0}))},onWheel:P,onTouchMove:P,onPointerMove:P,onPointerEnter:P,onKeyDown:P},A=d.useMemo(()=>({hasOverflowX:!v.scrollbarXHidden,hasOverflowY:!v.scrollbarYHidden,overflowXStart:R.xStart,overflowXEnd:R.xEnd,overflowYStart:R.yStart,overflowYEnd:R.yEnd,cornerHidden:v.cornerHidden}),[v.scrollbarXHidden,v.scrollbarYHidden,v.cornerHidden,R]),O=$e("div",t,{ref:[n,i],state:A,props:[C,o],stateAttributesMapping:qi}),F=d.useMemo(()=>({computeThumbPosition:N}),[N]);return c.jsx(ym.Provider,{value:F,children:O})}),mu=d.createContext(void 0);function Em(){const e=d.useContext(mu);if(e===void 0)throw new Error(qe(54));return e}let Qs=function(e){return e.scrollAreaThumbHeight="--scroll-area-thumb-height",e.scrollAreaThumbWidth="--scroll-area-thumb-width",e}({});const hu=d.forwardRef(function(t,n){const{render:r,className:s,orientation:o="vertical",keepMounted:i=!1,...a}=t,{hovering:l,scrollingX:u,scrollingY:f,hiddenState:p,overflowEdges:g,scrollbarYRef:m,scrollbarXRef:y,viewportRef:b,thumbYRef:v,thumbXRef:x,handlePointerDown:h,handlePointerUp:S,rootId:R,thumbSize:w}=Gi(),T=d.useMemo(()=>({hovering:l,scrolling:{horizontal:u,vertical:f}[o],orientation:o,hasOverflowX:!p.scrollbarXHidden,hasOverflowY:!p.scrollbarYHidden,overflowXStart:g.xStart,overflowXEnd:g.xEnd,overflowYStart:g.yStart,overflowYEnd:g.yEnd,cornerHidden:p.cornerHidden}),[l,u,f,o,p,g]),E=xr();d.useEffect(()=>{const C=b.current,A=o==="vertical"?m.current:y.current;if(!A)return;function O(F){if(!(!C||!A||F.ctrlKey)){if(F.preventDefault(),o==="vertical"){if(C.scrollTop===0&&F.deltaY<0)return}else if(C.scrollLeft===0&&F.deltaX<0)return;if(o==="vertical"){if(C.scrollTop===C.scrollHeight-C.clientHeight&&F.deltaY>0)return}else if(C.scrollLeft===C.scrollWidth-C.clientWidth&&F.deltaX>0)return;o==="vertical"?C.scrollTop+=F.deltaY:C.scrollLeft+=F.deltaX}}return A.addEventListener("wheel",O,{passive:!1}),()=>{A.removeEventListener("wheel",O)}},[o,y,m,b]);const I={...R&&{"data-id":`${R}-scrollbar`},onPointerDown(C){if(C.button===0&&C.currentTarget===C.target&&b.current){if(v.current&&m.current&&o==="vertical"){const A=Et(v.current,"margin","y"),O=Et(m.current,"padding","y"),F=v.current.offsetHeight,L=m.current.getBoundingClientRect(),k=C.clientY-L.top-F/2-O+A/2,_=b.current.scrollHeight,z=b.current.clientHeight,X=m.current.offsetHeight-F-O-A,B=k/X*(_-z);b.current.scrollTop=B}if(x.current&&y.current&&o==="horizontal"){const A=Et(x.current,"margin","x"),O=Et(y.current,"padding","x"),F=x.current.offsetWidth,L=y.current.getBoundingClientRect(),k=C.clientX-L.left-F/2-O+A/2,_=b.current.scrollWidth,z=b.current.clientWidth,X=y.current.offsetWidth-F-O-A,H=k/X;let B;E==="rtl"?(B=(1-H)*(_-z),b.current.scrollLeft<=0&&(B=-B)):B=H*(_-z),b.current.scrollLeft=B}h(C)}},onPointerUp:S,style:{position:"absolute",touchAction:"none",WebkitUserSelect:"none",userSelect:"none",...o==="vertical"&&{top:0,bottom:`var(${Bs.scrollAreaCornerHeight})`,insetInlineEnd:0,[Qs.scrollAreaThumbHeight]:`${w.height}px`},...o==="horizontal"&&{insetInlineStart:0,insetInlineEnd:`var(${Bs.scrollAreaCornerWidth})`,bottom:0,[Qs.scrollAreaThumbWidth]:`${w.width}px`}}},j=$e("div",t,{ref:[n,o==="vertical"?m:y],state:T,props:[I,a],stateAttributesMapping:qi}),M=d.useMemo(()=>({orientation:o}),[o]),N=o==="vertical"?p.scrollbarYHidden:p.scrollbarXHidden;return i||!N?c.jsx(mu.Provider,{value:M,children:j}):null}),xu=d.forwardRef(function(t,n){const{render:r,className:s,...o}=t,{thumbYRef:i,thumbXRef:a,handlePointerDown:l,handlePointerMove:u,handlePointerUp:f,setScrollingX:p,setScrollingY:g}=Gi(),{orientation:m}=Em(),y=d.useMemo(()=>({orientation:m}),[m]);return $e("div",t,{ref:[n,m==="vertical"?i:a],state:y,props:[{onPointerDown:l,onPointerMove:u,onPointerUp(v){m==="vertical"&&g(!1),m==="horizontal"&&p(!1),f(v)},style:{...m==="vertical"&&{height:`var(${Qs.scrollAreaThumbHeight})`},...m==="horizontal"&&{width:`var(${Qs.scrollAreaThumbWidth})`}}},o]})}),Fs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Si=new Map,Ss=e=>{const t=Si.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Cm=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=Si.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return Si.set(n.name,s),{type:"tracked",store:e,...s}},Im=(e,t={})=>(n,r,s)=>{const{enabled:o,anonymousActionType:i,store:a,...l}=t;let u;try{u=(o??(Fs?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(Fs?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,s);const{connection:f,...p}=Cm(a,u,l);let g=!0;s.setState=(b,v,x)=>{const h=n(b,v);if(!g)return h;const S=x===void 0?{type:i||"anonymous"}:typeof x=="string"?{type:x}:x;return a===void 0?(f?.send(S,r()),h):(f?.send({...S,type:`${a}/${S.type}`},{...Ss(l.name),[a]:s.getState()}),h)};const m=(...b)=>{const v=g;g=!1,n(...b),g=v},y=e(s.setState,r,s);if(p.type==="untracked"?f?.init(y):(p.stores[p.store]=s,f?.init(Object.fromEntries(Object.entries(p.stores).map(([b,v])=>[b,b===p.store?y:v.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let b=!1;const v=s.dispatch;s.dispatch=(...x)=>{(Fs?"production":void 0)!=="production"&&x[0].type==="__setState"&&!b&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),b=!0),v(...x)}}return f.subscribe(b=>{var v;switch(b.type){case"ACTION":if(typeof b.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Uo(b.payload,x=>{if(x.type==="__setState"){if(a===void 0){m(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const h=x.state[a];if(h==null)return;JSON.stringify(s.getState())!==JSON.stringify(h)&&m(h);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(x)});case"DISPATCH":switch(b.payload.type){case"RESET":return m(y),a===void 0?f?.init(s.getState()):f?.init(Ss(l.name));case"COMMIT":if(a===void 0){f?.init(s.getState());return}return f?.init(Ss(l.name));case"ROLLBACK":return Uo(b.state,x=>{if(a===void 0){m(x),f?.init(s.getState());return}m(x[a]),f?.init(Ss(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Uo(b.state,x=>{if(a===void 0){m(x);return}JSON.stringify(s.getState())!==JSON.stringify(x[a])&&m(x[a])});case"IMPORT_STATE":{const{nextLiftedState:x}=b.payload,h=(v=x.computedStates.slice(-1)[0])==null?void 0:v.state;if(!h)return;m(a===void 0?h:h[a]),f?.send(null,x);return}case"PAUSE_RECORDING":return g=!g}return}}),y},Tm=Im,Uo=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function Pm(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const i=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(s))!=null?o:null;return a instanceof Promise?a.then(i):i(a)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Ur=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ur(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ur(r)(n)}}}},Om=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...t},i=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...v)},r,s);const f=Ur(o.serialize),p=()=>{const v=o.partialize({...r()});let x;const h=f({state:v,version:o.version}).then(S=>u.setItem(o.name,S)).catch(S=>{x=S});if(x)throw x;return h},g=s.setState;s.setState=(v,x)=>{g(v,x),p()};const m=e((...v)=>{n(...v),p()},r,s);let y;const b=()=>{var v;if(!u)return;i=!1,a.forEach(h=>h(r()));const x=((v=o.onRehydrateStorage)==null?void 0:v.call(o,r()))||void 0;return Ur(u.getItem.bind(u))(o.name).then(h=>{if(h)return o.deserialize(h)}).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return o.migrate(h.state,h.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return h.state}).then(h=>{var S;return y=o.merge(h,(S=r())!=null?S:m),n(y,!0),p()}).then(()=>{x?.(y,void 0),i=!0,l.forEach(h=>h(y))}).catch(h=>{x?.(void 0,h)})};return s.persist={setOptions:v=>{o={...o,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},b(),y||m},Mm=(e,t)=>(n,r,s)=>{let o={storage:Pm(()=>localStorage),partialize:b=>b,version:0,merge:(b,v)=>({...v,...b}),...t},i=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},r,s);const f=()=>{const b=o.partialize({...r()});return u.setItem(o.name,{state:b,version:o.version})},p=s.setState;s.setState=(b,v)=>{p(b,v),f()};const g=e((...b)=>{n(...b),f()},r,s);s.getInitialState=()=>g;let m;const y=()=>{var b,v;if(!u)return;i=!1,a.forEach(h=>{var S;return h((S=r())!=null?S:g)});const x=((v=o.onRehydrateStorage)==null?void 0:v.call(o,(b=r())!=null?b:g))||void 0;return Ur(u.getItem.bind(u))(o.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return[!0,o.migrate(h.state,h.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var S;const[R,w]=h;if(m=o.merge(w,(S=r())!=null?S:g),n(m,!0),R)return f()}).then(()=>{x?.(m,void 0),m=r(),i=!0,l.forEach(h=>h(m))}).catch(h=>{x?.(void 0,h)})};return s.persist={setOptions:b=>{o={...o,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},o.skipHydration||y(),m||g},km=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Fs?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Om(e,t)):Mm(e,t),Nm=km;function jm(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const{useRef:Am}=yc;function ho(e){const t=Am();return n=>{const r=e(n);return jm(t.current,r)?t.current:t.current=r}}const Yn=()=>{};class Fm{pendingRequests=new Map;eventListeners=new Map;isWebView;constructor(){this.isWebView=typeof window<"u"&&!!window.chrome?.webview,Yn("isWebView:",this.isWebView),this.isWebView&&window.chrome.webview.addEventListener("message",t=>{Yn("Received message:",t.data),this.handleMessage(t.data)})}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}handleMessage(t){try{const n=typeof t=="string"?JSON.parse(t):t;if(Yn("Parsed message:",JSON.stringify(n,null,2)),Yn("Message id:",n.id,"Pending IDs:",Array.from(this.pendingRequests.keys())),n.id&&this.pendingRequests.has(n.id)){const{resolve:r,reject:s}=this.pendingRequests.get(n.id);this.pendingRequests.delete(n.id);const o=n;Yn("Response for id:",n.id,"success:",o.success),o.success?r(o.data):s(new Error(o.error||"Unknown error"))}else if(n.event){const r=n,s=this.eventListeners.get(r.event);s&&s.forEach(o=>o(r.data))}else Yn("Unhandled - id not in pending:",n.id)}catch(n){console.error("Failed to parse bridge message:",n)}}async send(t,n){const r=this.generateId(),s={id:r,action:t,payload:n};return new Promise((o,i)=>{if(!this.isWebView){setTimeout(()=>{o(this.getMockResponse(t,n))},100);return}this.pendingRequests.set(r,{resolve:o,reject:i});const a=JSON.stringify(s);window.chrome.webview.postMessage(a),setTimeout(()=>{this.pendingRequests.has(r)&&(this.pendingRequests.delete(r),console.error("[Bridge] Timeout for:",t,"id:",r),i(new Error("Request timeout")))},12e4)})}on(t,n){return this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t).add(n),()=>{this.eventListeners.get(t)?.delete(n)}}async getDrives(){return this.send("getDrives")}async getFolders(t){return this.send("getFolders",{path:t})}async getImages(t){return this.send("getImages",{folderPath:t})}async getFolderContents(t){return this.send("getFolderContents",{folderPath:t})}async selectFolder(){return this.send("selectFolder")}async readTags(t){return this.send("readTags",{imagePath:t})}async writeTags(t,n){return this.send("writeTags",{imagePath:t,tags:n})}async getThumbnail(t){return this.send("getThumbnail",{imagePath:t})}async getFullImage(t,n=1920){return this.send("getFullImage",{imagePath:t,maxSize:n})}async getThumbnailsBatch(t){return this.send("getThumbnailsBatch",{imagePaths:t})}async getRating(t){return this.send("getRating",{imagePath:t})}async setRating(t,n){return this.send("setRating",{imagePath:t,rating:n})}async getAllTags(){return this.send("getAllTags")}async getTagLibrary(){return this.send("getTagLibrary")}async saveTagLibrary(t){return this.send("saveTagLibrary",{library:t})}async rotateImages(t,n){return this.send("rotateImages",{paths:t,angle:n})}async flipImages(t,n){return this.send("flipImages",{paths:t,horizontal:n})}async copyFiles(t,n){return this.send("copyFiles",{paths:t,targetFolder:n})}async moveFiles(t,n){return this.send("moveFiles",{paths:t,targetFolder:n})}async deleteFiles(t){return this.send("deleteFiles",{paths:t})}async rename(t,n){return this.send("renameFile",{path:t,newName:n})}async openInExplorer(t){return this.send("openInExplorer",{path:t})}async getProperties(t){return this.send("getProperties",{path:t})}getMockResponse(t,n){switch(t){case"getDrives":return[{name:"Lokaler Datentrger (C:)",path:"C:\\",type:"Drive",hasSubfolders:!0,totalSize:500*1024**3,freeSpace:200*1024**3,driveFormat:"NTFS",driveType:"Fixed"},{name:"Daten (D:)",path:"D:\\",type:"Drive",hasSubfolders:!0,totalSize:2e3*1024**3,freeSpace:1500*1024**3,driveFormat:"NTFS",driveType:"Fixed"},{name:"Backup (E:)",path:"E:\\",type:"Drive",hasSubfolders:!0,totalSize:4e3*1024**3,freeSpace:500*1024**3,driveFormat:"NTFS",driveType:"Fixed"}];case"getFolders":return[{name:"Pictures",path:"C:\\Pictures",type:"Folder",hasSubfolders:!0},{name:"Documents",path:"C:\\Documents",type:"Folder",hasSubfolders:!1}];case"getImages":return[];case"selectFolder":return"C:\\Pictures";case"readTags":return["landscape","nature","sunset"];case"getAllTags":return[{name:"landscape",usageCount:42,isFavorite:!0},{name:"nature",usageCount:38,isFavorite:!1}];default:return null}}}const et=new Fm,Lm=()=>{try{const e=localStorage.getItem("tagfusion-favorites");return e?JSON.parse(e):[]}catch{return[]}},gl=e=>{localStorage.setItem("tagfusion-favorites",JSON.stringify(e))},Dm=(e,t)=>({currentFolder:null,folders:[],drives:[],favorites:Lm(),expandedPaths:new Set,folderCache:new Map,loadingPaths:new Set,isLoadingDrives:!1,setCurrentFolder:n=>e({currentFolder:n}),loadDrives:async()=>{try{e({isLoadingDrives:!0});const n=await et.getDrives();e({drives:n,isLoadingDrives:!1})}catch(n){e({isLoadingDrives:!1}),t().setError(n.message)}},loadFolders:async n=>{try{const r=await et.getFolders(n);e({folders:r})}catch(r){t().setError(r.message)}},toggleFolder:async n=>{const{expandedPaths:r,folderCache:s,loadingPaths:o}=t(),i=new Set(r);if(i.has(n))i.delete(n),e({expandedPaths:i});else if(i.add(n),e({expandedPaths:i}),!s.has(n)){const a=new Set(o);a.add(n),e({loadingPaths:a});try{const l=await et.getFolders(n),u=new Map(t().folderCache);u.set(n,l);const f=new Set(t().loadingPaths);f.delete(n),e({folderCache:u,loadingPaths:f})}catch(l){const u=new Set(t().loadingPaths);u.delete(n),e({loadingPaths:u}),t().setError(l.message)}}},expandToPath:async n=>{const{expandedPaths:r,folderCache:s}=t(),o=new Set(r),i=new Map(s),l=n.replace(/\\/g,"/").replace(/\/$/,"").split("/").filter(Boolean),u=[];for(let f=0;f<l.length;f++){let p;f===0?p=l[f]+"\\":p=l[0]+"\\"+l.slice(1,f+1).join("\\"),u.push(p)}for(const f of u)if(o.add(f),!i.has(f))try{const p=await et.getFolders(f);i.set(f,p)}catch(p){console.error("expandToPath error for",f,p)}e({expandedPaths:o,folderCache:i})},navigateToFolder:async n=>{await t().expandToPath(n),await t().loadImages(n)},navigateUp:async()=>{const{currentFolder:n}=t();if(!n)return;const s=n.replace(/\\/g,"/").split("/").filter(Boolean);if(s.length<=1)return;s.pop();let o=s.join("\\");s.length===1&&o.endsWith(":")&&(o+="\\"),await t().navigateToFolder(o)},addFavorite:(n,r)=>{const{favorites:s}=t();if(!s.some(o=>o.path===n)){const o=[...s,{path:n,name:r}];gl(o),e({favorites:o})}},removeFavorite:n=>{const{favorites:r}=t(),s=r.filter(o=>o.path!==n);gl(s),e({favorites:s})},addCurrentFolderToFavorites:()=>{const{currentFolder:n}=t();if(n){const r=n.split("\\").pop()||n;t().addFavorite(n,r)}},openFolderDialog:async()=>{try{const n=await et.selectFolder();n&&await t().loadImages(n)}catch(n){t().setError(n.message)}}}),ml=e=>e.filter(t=>!t.isFolder&&t.imageData).map(t=>({...t.imageData,tags:t.imageData.tags||[],rating:t.imageData.rating||0})),jr=(e,t)=>{const n=new Map(t.map(r=>[r.path,r]));return e.map(r=>{if(r.isFolder)return r;const s=n.get(r.path);return s?{...r,imageData:s}:r})},_m=(e,t)=>({gridItems:[],images:[],selectedImages:new Set,lastSelectedImage:null,isLoadingImages:!1,loadImages:async n=>{try{e({isLoadingImages:!0,currentFolder:n}),t().setCurrentFolder(n);const r=await et.getFolderContents(n),s=ml(r);e({gridItems:jr(r,s),images:s,selectedImages:new Set,lastSelectedImage:null,isLoadingImages:!1})}catch(r){e({isLoadingImages:!1}),t().setError(r.message)}},refreshImages:async()=>{const{currentFolder:n}=t();if(n){const r=t().selectedImages;try{const s=await et.getFolderContents(n),o=ml(s),i=new Set(o.map(l=>l.path)),a=new Set(Array.from(r).filter(l=>i.has(l)));e({gridItems:jr(s,o),images:o,selectedImages:a})}catch(s){console.error("refreshImages error:",s)}}},selectImage:(n,r=!1,s=!1)=>{const{selectedImages:o,lastSelectedImage:i,images:a}=t();if(s&&i){const l=a.findIndex(f=>f.path===i),u=a.findIndex(f=>f.path===n);if(l!==-1&&u!==-1){const f=Math.min(l,u),p=Math.max(l,u),g=new Set(r?o:[]);for(let m=f;m<=p;m++)g.add(a[m].path);e({selectedImages:g});return}}if(r){const l=new Set(o);l.has(n)?l.delete(n):l.add(n),e({selectedImages:l,lastSelectedImage:n});return}e({selectedImages:new Set([n]),lastSelectedImage:n})},selectAllImages:()=>{const{images:n}=t(),r=n.length>0?n[0].path:null;e({selectedImages:new Set(n.map(s=>s.path)),lastSelectedImage:r})},clearSelection:()=>e({selectedImages:new Set,lastSelectedImage:null}),updateImageTags:async(n,r)=>{try{await et.writeTags(n,r);const{images:s,gridItems:o}=t(),i=s.map(a=>a.path===n?{...a,tags:r}:a);e({images:i,gridItems:jr(o,i)})}catch(s){t().setError(s.message)}},updateImageRating:async(n,r)=>{try{await et.setRating(n,r);const{images:s,gridItems:o}=t(),i=s.map(a=>a.path===n?{...a,rating:r}:a);e({images:i,gridItems:jr(o,i)})}catch(s){t().setError(s.message)}}}),hl=50,xl=200,bl=10,zm=100,vl=50,yl=300,wl=25,Tn=100,Vm=280,Hm=180,$m=500,Bm=320,Wm=200,Um=600,Ym=4e3,Xm=6e3,Gm=5e3,qm=(e,t)=>({tags:[],error:null,sidebarWidth:Vm,tagPanelWidth:Bm,zoomLevel:zm,searchQuery:"",sortBy:"name",sortOrder:"asc",filterRating:null,filterTags:[],loadAllTags:async()=>{try{const n=await et.getAllTags();e({tags:n})}catch(n){e({error:n.message})}},setSidebarWidth:n=>e({sidebarWidth:n}),setTagPanelWidth:n=>e({tagPanelWidth:n}),setError:n=>e({error:n}),setZoomLevel:n=>e({zoomLevel:Math.min(xl,Math.max(hl,n))}),zoomIn:()=>e(n=>({zoomLevel:Math.min(xl,n.zoomLevel+bl)})),zoomOut:()=>e(n=>({zoomLevel:Math.max(hl,n.zoomLevel-bl)})),setSearchQuery:n=>e({searchQuery:n}),setSortBy:n=>e({sortBy:n}),setSortOrder:n=>e({sortOrder:n}),toggleSortOrder:()=>e(n=>({sortOrder:n.sortOrder==="asc"?"desc":"asc"})),setFilterRating:n=>e({filterRating:n}),setFilterTags:n=>e({filterTags:n}),clearFilters:()=>e({searchQuery:"",filterRating:null,filterTags:[],sortBy:"name",sortOrder:"asc"}),setupSubscriptions:()=>{et.on("metadataUpdated",n=>{if(console.log("metadataUpdated received",n),!n||typeof n!="object")return;const{images:r,gridItems:s}=t(),o=n;let i=!1;const a=new Map;for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&a.set(u.toLowerCase(),o[u]);const l=r.map(u=>{let f=o[u.path];return f||(f=a.get(u.path.toLowerCase())),f?(i=!0,{...u,tags:f.tags||[],rating:f.rating||0}):u});i&&e({images:l,gridItems:jr(s,l)})})}}),Me=mn()(Tm((...e)=>({...Dm(...e),..._m(...e),...qm(...e)}),{name:"TagFusion AppStore",enabled:!1})),na=()=>Me(e=>e.currentFolder),Km=()=>Me(e=>e.setCurrentFolder),Qm=()=>Me(e=>e.navigateToFolder),bu=()=>Me(e=>e.navigateUp),Zm=()=>Me(e=>e.drives),Jm=()=>Me(e=>e.loadDrives),eh=()=>Me(e=>e.loadFolders),vu=()=>Me(e=>e.loadImages),th=()=>Me(e=>e.addCurrentFolderToFavorites),yu=()=>Me(e=>e.gridItems),is=()=>Me(e=>e.images),wu=()=>Me(e=>e.isLoadingImages),as=()=>Me(e=>e.selectedImages),nh=()=>Me(e=>e.clearSelection),rh=()=>Me(e=>e.zoomLevel),sh=()=>Me(ho(e=>({zoomLevel:e.zoomLevel,zoomIn:e.zoomIn,zoomOut:e.zoomOut,setZoomLevel:e.setZoomLevel}))),Su=()=>Me(ho(e=>({searchQuery:e.searchQuery,sortBy:e.sortBy,sortOrder:e.sortOrder,filterRating:e.filterRating,filterTags:e.filterTags,setSearchQuery:e.setSearchQuery,setSortBy:e.setSortBy,setSortOrder:e.setSortOrder,toggleSortOrder:e.toggleSortOrder,setFilterRating:e.setFilterRating,setFilterTags:e.setFilterTags,clearFilters:e.clearFilters}))),oh=()=>Me(e=>e.refreshImages),ih=()=>Me(e=>e.tags),Ru=()=>Me(e=>e.updateImageTags),ah=()=>Me(ho(e=>({drives:e.drives,favorites:e.favorites,expandedPaths:e.expandedPaths,folderCache:e.folderCache,loadingPaths:e.loadingPaths,sidebarWidth:e.sidebarWidth,isLoadingDrives:e.isLoadingDrives,loadDrives:e.loadDrives,toggleFolder:e.toggleFolder,setSidebarWidth:e.setSidebarWidth,addFavorite:e.addFavorite,removeFavorite:e.removeFavorite}))),lh=()=>Me(ho(e=>({selectedImages:e.selectedImages,images:e.images,tags:e.tags,tagPanelWidth:e.tagPanelWidth,filterTags:e.filterTags,setTagPanelWidth:e.setTagPanelWidth,updateImageTags:e.updateImageTags,setFilterTags:e.setFilterTags}))),ch=()=>Me(e=>e.error),ra=()=>Me(e=>e.setError),Dw={type:"spring",damping:15,stiffness:300,mass:.8},ls={type:"spring",damping:25,stiffness:400,mass:.5},Eu={type:"spring",damping:30,stiffness:200,mass:1},uh={initial:{scale:1,y:0,opacity:1},hover:{scale:1.01,y:-2,transition:Eu},tap:{scale:.99,transition:ls}},dh={sm:"backdrop-blur-glass-sm",md:"backdrop-blur-glass-md",lg:"backdrop-blur-glass-lg",xl:"backdrop-blur-glass-xl"},fh={none:"p-0",sm:"p-2",md:"p-4",lg:"p-6"},ph={md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl"},gh={cyan:"hover:shadow-[0_8px_32px_rgba(6,182,212,0.2),0_0_0_1px_rgba(6,182,212,0.15)]",purple:"hover:shadow-[0_8px_32px_rgba(139,92,246,0.2),0_0_0_1px_rgba(139,92,246,0.15)]",pink:"hover:shadow-[0_8px_32px_rgba(236,72,153,0.2),0_0_0_1px_rgba(236,72,153,0.15)]"},mh=d.forwardRef(({children:e,className:t="",blur:n="md",hover:r=!0,glow:s=!1,glowColor:o="cyan",padding:i="md",rounded:a="xl",...l},u)=>c.jsxs(he.div,{ref:u,className:`
          ${dh[n]}
          ${fh[i]}
          ${ph[a]}
          bg-[var(--glass-bg)]
          border border-[var(--glass-border)]
          shadow-glass
          transition-colors duration-200
          ${s?gh[o]:""}
          ${t}
        `,variants:r?uh:void 0,initial:"initial",whileHover:r?"hover":void 0,whileTap:r?"tap":void 0,transition:Eu,...l,children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent opacity-50 pointer-events-none",style:{borderRadius:"inherit"}}),c.jsx("div",{className:"relative z-10",children:e})]}));mh.displayName="GlassCard";const hh={sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2.5"},xh={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"},bh={default:`
    bg-[var(--glass-bg)]
    hover:bg-[var(--glass-bg-hover)]
    active:bg-[var(--glass-bg-active)]
    border-[var(--glass-border)]
    hover:border-[var(--glass-border-hover)]
    text-slate-100
  `,accent:`
    bg-cyan-500/20
    hover:bg-cyan-500/30
    active:bg-cyan-500/40
    border-cyan-500/30
    hover:border-cyan-500/50
    text-cyan-300
  `,danger:`
    bg-red-500/20
    hover:bg-red-500/30
    active:bg-red-500/40
    border-red-500/30
    hover:border-red-500/50
    text-red-300
  `,ghost:`
    bg-transparent
    hover:bg-[var(--glass-bg)]
    active:bg-[var(--glass-bg-hover)]
    border-transparent
    hover:border-[var(--glass-border)]
    text-slate-300
    hover:text-slate-100
  `},Cu=d.forwardRef(({children:e,className:t="",variant:n="default",size:r="md",fullWidth:s=!1,disabled:o=!1,iconOnly:i=!1,...a},l)=>c.jsxs(he.button,{ref:l,className:`
          relative inline-flex items-center justify-center
          ${i?xh[r]:hh[r]}
          ${s?"w-full":""}
          rounded-lg
          backdrop-blur-glass-sm
          border
          font-medium
          transition-all duration-150
          ${bh[n]}
          ${o?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer"}
          focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900
          hover:brightness-110 hover:shadow-lg
          ${t}
        `,initial:{scale:1},whileTap:o?void 0:{scale:.97},transition:ls,disabled:o,...a,children:[c.jsx(he.div,{className:"absolute inset-0 rounded-lg bg-white/0 pointer-events-none",whileTap:{backgroundColor:"rgba(255, 255, 255, 0.1)"},transition:{duration:.1}}),c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent pointer-events-none rounded-t-lg"}),c.jsx("span",{className:"relative z-10 flex items-center gap-inherit",children:e})]}));Cu.displayName="GlassButton";const vh={xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-9 w-9 text-base",lg:"h-11 w-11 text-lg"},yh={default:`
    bg-[var(--glass-bg)]
    hover:bg-[var(--glass-bg-hover)]
    active:bg-[var(--glass-bg-active)]
    border-[var(--glass-border)]
    hover:border-[var(--glass-border-hover)]
    text-slate-300
    hover:text-slate-100
  `,accent:`
    bg-cyan-500/15
    hover:bg-cyan-500/25
    active:bg-cyan-500/35
    border-cyan-500/25
    hover:border-cyan-500/40
    text-cyan-400
    hover:text-cyan-300
  `,danger:`
    bg-red-500/15
    hover:bg-red-500/25
    active:bg-red-500/35
    border-red-500/25
    hover:border-red-500/40
    text-red-400
    hover:text-red-300
  `,ghost:`
    bg-transparent
    hover:bg-[var(--glass-bg)]
    active:bg-[var(--glass-bg-hover)]
    border-transparent
    hover:border-[var(--glass-border)]
    text-slate-400
    hover:text-slate-200
  `},wh={default:"bg-[var(--glass-bg-active)] border-[var(--glass-border-hover)] text-slate-100",accent:"bg-cyan-500/30 border-cyan-500/50 text-cyan-300",danger:"bg-red-500/30 border-red-500/50 text-red-300",ghost:"bg-[var(--glass-bg-hover)] border-[var(--glass-border)] text-slate-100"},wt=d.forwardRef(({children:e,className:t="",size:n="md",variant:r="default",disabled:s=!1,active:o=!1,title:i,...a},l)=>c.jsxs(he.button,{ref:l,className:`
          relative inline-flex items-center justify-center
          ${vh[n]}
          rounded-lg
          backdrop-blur-glass-xs
          border
          transition-all duration-150
          ${o?wh[r]:yh[r]}
          ${s?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer"}
          focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900
          hover:brightness-110 hover:shadow-md
          ${t}
        `,initial:{scale:1},whileTap:s?void 0:{scale:.95},transition:ls,disabled:s,title:i,...a,children:[c.jsx(he.div,{className:"absolute inset-0 rounded-lg bg-white/0 pointer-events-none",whileTap:{backgroundColor:"rgba(255, 255, 255, 0.15)"},transition:{duration:.08}}),c.jsx("span",{className:"relative z-10 flex items-center justify-center",children:e})]}));wt.displayName="GlassIconButton";const Sh={sm:"h-8 text-sm px-3",md:"h-10 text-sm px-4",lg:"h-12 text-base px-5"},Sl={sm:{left:"pl-8",right:"pr-8"},md:{left:"pl-10",right:"pr-10"},lg:{left:"pl-12",right:"pr-12"}},Rl={sm:"w-8",md:"w-10",lg:"w-12"},Iu=d.forwardRef(({className:e="",size:t="md",leftIcon:n,rightIcon:r,error:s=!1,fullWidth:o=!1,disabled:i,...a},l)=>c.jsxs(he.div,{className:`relative ${o?"w-full":"inline-flex"}`,initial:{scale:1},whileFocus:{scale:1.01},transition:ls,children:[n&&c.jsx("div",{className:`
              absolute left-0 top-0 bottom-0 ${Rl[t]}
              flex items-center justify-center
              text-slate-400 pointer-events-none
            `,children:n}),c.jsx("input",{ref:l,className:`
            w-full
            ${Sh[t]}
            ${n?Sl[t].left:""}
            ${r?Sl[t].right:""}
            rounded-lg
            backdrop-blur-glass-sm
            bg-[var(--glass-bg)]
            border
            ${s?"border-red-500/50 focus-visible:border-red-500/70 focus-visible:ring-red-500/20":"border-[var(--glass-border)] focus-visible:border-cyan-500/50 focus-visible:ring-cyan-500/20"}
            text-slate-100
            placeholder:text-slate-500
            outline-none
            focus-visible:ring-2
            transition-all duration-150
            ${i?"opacity-50 cursor-not-allowed":""}
            ${e}
          `,disabled:i,...a}),r&&c.jsx("div",{className:`
              absolute right-0 top-0 bottom-0 ${Rl[t]}
              flex items-center justify-center
              text-slate-400
            `,children:r}),c.jsx("div",{className:`
            absolute inset-0 rounded-lg pointer-events-none
            opacity-0 focus-within:opacity-100
            transition-opacity duration-200
            ${s?"shadow-[0_0_0_2px_rgba(239,68,68,0.15)]":"shadow-[0_0_0_2px_rgba(6,182,212,0.15)]"}
          `})]}));Iu.displayName="GlassInput";const Tu=d.createContext(void 0);function Pu(e){const t=d.useContext(Tu);if(t===void 0&&!e)throw new Error(qe(33));return t}const Ou=d.createContext(void 0);function Hn(e){const t=d.useContext(Ou);if(t===void 0&&!e)throw new Error(qe(36));return t}let sa=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=ir.startingStyle]="startingStyle",e[e.endingStyle=ir.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),Ri=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const Rh={[Ri.popupOpen]:""},Eh={[Ri.popupOpen]:"",[Ri.pressed]:""},Ch={[sa.open]:""},Ih={[sa.closed]:""},Th={[sa.anchorHidden]:""},Mu={open(e){return e?Rh:null}},Zs={open(e){return e?Eh:null}},br={open(e){return e?Ch:Ih},anchorHidden(e){return e?Th:null}},Ph=d.createContext(void 0);function xo(e=!0){const t=d.useContext(Ph);if(t===void 0&&!e)throw new Error(qe(25));return t}const Oh={type:"regular-item"};function Mh(e){const{closeOnClick:t,disabled:n=!1,highlighted:r,id:s,store:o,nativeButton:i,itemMetadata:a,nodeId:l}=e,u=d.useRef(null),f=xo(!0),p=f!==void 0,{events:g}=o.useState("floatingTreeRoot"),{getButtonProps:m,buttonRef:y}=mr({disabled:n,focusableWhenDisabled:!0,native:i}),b=d.useCallback(x=>io({id:s,role:"menuitem",tabIndex:r?0:-1,onMouseMove(h){l&&g.emit("itemhover",{nodeId:l,target:h.currentTarget})},onMouseEnter(){a.type==="submenu-trigger"&&a.setActive()},onKeyUp(h){h.key===" "&&o.context.typingRef.current&&h.preventBaseUIHandler()},onClick(h){t&&g.emit("close",{domEvent:h,reason:Wi})},onMouseUp(h){if(f){const S=f.initialCursorPointRef.current;if(f.initialCursorPointRef.current=null,p&&S&&Math.abs(h.clientX-S.x)<=1&&Math.abs(h.clientY-S.y)<=1)return}u.current&&o.context.allowMouseUpTriggerRef.current&&(!p||h.button===2)&&a.type==="regular-item"&&u.current.click()}},x,m),[s,r,m,t,g,o,p,f,a,l]),v=fn(u,y);return d.useMemo(()=>({getItemProps:b,itemRef:v}),[b,v])}const ku=d.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function kh(){return d.useContext(ku)}let Nu=function(e){return e[e.None=0]="None",e[e.GuessFromOrder=1]="GuessFromOrder",e}({});function oa(e={}){const{label:t,metadata:n,textRef:r,indexGuessBehavior:s,index:o}=e,{register:i,unregister:a,subscribeMapChange:l,elementsRef:u,labelsRef:f,nextIndexRef:p}=kh(),g=d.useRef(-1),[m,y]=d.useState(o??(s===Nu.GuessFromOrder?()=>{if(g.current===-1){const x=p.current;p.current+=1,g.current=x}return g.current}:-1)),b=d.useRef(null),v=d.useCallback(x=>{if(b.current=x,m!==-1&&x!==null&&(u.current[m]=x,f)){const h=t!==void 0;f.current[m]=h?t:r?.current?.textContent??x.textContent}},[m,u,f,t,r]);return ne(()=>{if(o!=null)return;const x=b.current;if(x)return i(x,n),()=>{a(x)}},[o,i,a,n]),ne(()=>{if(o==null)return l(x=>{const h=b.current?x.get(b.current)?.index:null;h!=null&&y(h)})},[o,l,y]),d.useMemo(()=>({ref:v,index:m}),[m,v])}const Nh=d.forwardRef(function(t,n){const{render:r,className:s,id:o,label:i,nativeButton:a=!1,disabled:l=!1,closeOnClick:u=!0,...f}=t,p=oa({label:i}),g=Pu(!0),m=Dn(o),{store:y}=Hn(),b=y.useState("isActive",p.index),v=y.useState("itemProps"),{getItemProps:x,itemRef:h}=Mh({closeOnClick:u,disabled:l,highlighted:b,id:m,store:y,nativeButton:a,nodeId:g?.nodeId,itemMetadata:Oh}),S=d.useMemo(()=>({disabled:l,highlighted:b}),[l,b]);return $e("div",t,{state:S,props:[v,f,x],ref:[h,n,p.ref]})});function ju(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(r=>r(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}class ia{nodesRef={current:[]};events=ju();addNode(t){this.nodesRef.current.push(t)}removeNode(t){const n=this.nodesRef.current.findIndex(r=>r===t);n!==-1&&this.nodesRef.current.splice(n,1)}}const Au=d.createContext(null),Fu=d.createContext(null),$t=()=>d.useContext(Au)?.id||null,bn=e=>{const t=d.useContext(Fu);return e??t};function aa(e){const t=Ln(),n=bn(e),r=$t();return ne(()=>{if(!t)return;const s={id:t,parentId:r};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,t,r]),t}function Lu(e){const{children:t,id:n}=e,r=$t();return c.jsx(Au.Provider,{value:d.useMemo(()=>({id:n,parentId:r}),[n,r]),children:t})}function Du(e){const{children:t,externalTree:n}=e,r=ut(()=>n??new ia).current;return c.jsx(Fu.Provider,{value:r,children:t})}function dr(e){return`data-base-ui-${e}`}function Yo(e,t,n){if(n&&!ar(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r?.[t]}return e?.[t]}const la={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};function Qt(e){return e?.ownerDocument||document}const gn=d.forwardRef(function(t,n){const[r,s]=d.useState();ne(()=>{Yc&&s("button")},[]);const o={tabIndex:0,role:r};return c.jsx("span",{...t,ref:n,style:la,"aria-hidden":r?void 0:!0,...o,"data-base-ui-focus-guard":""})});let El=0;function Ls(e,t={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(El);const o=()=>e?.focus({preventScroll:n});s?o():El=requestAnimationFrame(o)}const Kn={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Cl(e){return e==="inert"?Kn.inert:e==="aria-hidden"?Kn["aria-hidden"]:Kn.none}let Rs=new WeakSet,Es={},Xo=0;const _u=e=>e&&(e.host||_u(e.parentNode)),jh=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=_u(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Ah(e,t,n,r){const s="data-base-ui-inert",o=r?"inert":n?"aria-hidden":null,i=jh(t,e),a=new Set,l=new Set(i),u=[];Es[s]||(Es[s]=new WeakMap);const f=Es[s];i.forEach(p),g(t),a.clear();function p(m){!m||a.has(m)||(a.add(m),m.parentNode&&p(m.parentNode))}function g(m){!m||l.has(m)||[].forEach.call(m.children,y=>{if(hn(y)!=="script")if(a.has(y))g(y);else{const b=o?y.getAttribute(o):null,v=b!==null&&b!=="false",x=Cl(o),h=(x.get(y)||0)+1,S=(f.get(y)||0)+1;x.set(y,h),f.set(y,S),u.push(y),h===1&&v&&Rs.add(y),S===1&&y.setAttribute(s,""),!v&&o&&y.setAttribute(o,o==="inert"?"":"true")}})}return Xo+=1,()=>{u.forEach(m=>{const y=Cl(o),v=(y.get(m)||0)-1,x=(f.get(m)||0)-1;y.set(m,v),f.set(m,x),v||(!Rs.has(m)&&o&&m.removeAttribute(o),Rs.delete(m)),x||m.removeAttribute(s)}),Xo-=1,Xo||(Kn.inert=new WeakMap,Kn["aria-hidden"]=new WeakMap,Kn.none=new WeakMap,Rs=new WeakSet,Es={})}}function Fh(e,t=!1,n=!1){const r=Ge(e[0]).body;return Ah(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const zu=d.createContext(null),Vu=()=>d.useContext(zu),Lh=dr("portal");function Dh(e={}){const{ref:t,container:n,componentProps:r=He,elementProps:s,elementState:o}=e,i=Ln(),l=Vu()?.portalNode,[u,f]=d.useState(null),[p,g]=d.useState(null),m=d.useRef(null);ne(()=>{if(n===null){m.current&&(m.current=null,g(null),f(null));return}if(i==null)return;const v=(n&&(Ui(n)?n:n.current))??l??document.body;if(v==null){m.current&&(m.current=null,g(null),f(null));return}m.current!==v&&(m.current=v,g(null),f(v))},[n,l,i]);const y=$e("div",r,{ref:[t,g],state:o,props:[{id:i,[Lh]:""},s]});return{portalNode:p,portalSubtree:u&&y?nt.createPortal(y,u):null}}const ca=d.forwardRef(function(t,n){const{children:r,container:s,className:o,render:i,renderGuards:a,...l}=t,{portalNode:u,portalSubtree:f}=Dh({container:s,ref:n,componentProps:t,elementProps:l}),p=d.useRef(null),g=d.useRef(null),m=d.useRef(null),y=d.useRef(null),[b,v]=d.useState(null),x=b?.modal,h=b?.open,S=typeof a=="boolean"?a:!!b&&!b.modal&&b.open&&!!u;d.useEffect(()=>{if(!u||x)return;function w(T){u&&jn(T)&&(T.type==="focusin"?dl:xm)(u)}return u.addEventListener("focusin",w,!0),u.addEventListener("focusout",w,!0),()=>{u.removeEventListener("focusin",w,!0),u.removeEventListener("focusout",w,!0)}},[u,x]),d.useEffect(()=>{!u||h||dl(u)},[h,u]);const R=d.useMemo(()=>({beforeOutsideRef:p,afterOutsideRef:g,beforeInsideRef:m,afterInsideRef:y,portalNode:u,setFocusManagerState:v}),[u]);return c.jsxs(d.Fragment,{children:[f,c.jsxs(zu.Provider,{value:R,children:[S&&u&&c.jsx(gn,{"data-type":"outside",ref:p,onFocus:w=>{if(jn(w,u))m.current?.focus();else{const T=b?b.domReference:null;cu(T)?.focus()}}}),S&&u&&c.jsx("span",{"aria-owns":u.id,style:Qp}),u&&nt.createPortal(r,u),S&&u&&c.jsx(gn,{"data-type":"outside",ref:g,onFocus:w=>{if(jn(w,u))y.current?.focus();else{const T=b?b.domReference:null;mo(T)?.focus(),b?.closeOnFocusOut&&b?.onOpenChange(!1,me(qt,w.nativeEvent))}}})]})]})});function _h(e,t){const n=tt(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Il=20;let tn=[];function ua(){tn=tn.filter(e=>e.isConnected)}function zh(e){ua(),e&&hn(e)!=="body"&&(tn.push(e),tn.length>Il&&(tn=tn.slice(-Il)))}function Go(){return ua(),tn[tn.length-1]}function Vh(e){if(!e)return null;const t=hr();return au(e,t)?e:os(e,t)[0]||e}function Hh(e){return!e||!e.isConnected?!1:typeof e.checkVisibility=="function"?e.checkVisibility():gt(e).display!=="none"}function Tl(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=hr(),s=hm(e,n).filter(i=>{const a=i.getAttribute("data-tabindex")||"";return au(i,n)||i.hasAttribute("data-tabindex")&&!a.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function da(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],initialFocus:o=!0,returnFocus:i=!0,restoreFocus:a=!1,modal:l=!0,closeOnFocusOut:u=!0,openInteractionType:f="",getInsideElements:p=()=>[],nextFocusableElement:g,previousFocusableElement:m,beforeContentFocusGuardRef:y,externalTree:b}=e,v="rootStore"in t?t.rootStore:t,x=v.useState("open"),h=v.useState("domReferenceElement"),S=v.useState("floatingElement"),{events:R,dataRef:w}=v.context,T=Z(()=>w.current.floatingContext?.nodeId),E=Z(p),I=o===!1,j=xi(h)&&I,M=rt(s),N=rt(o),P=rt(i),C=rt(f),A=bn(b),O=Vu(),F=d.useRef(null),L=d.useRef(null),k=d.useRef(!1),_=d.useRef(!1),z=d.useRef(!1),X=d.useRef(-1),H=d.useRef(""),B=d.useRef(""),Q=it(),re=it(),le=gr(),ue=O!=null,J=Us(S),ce=Z((U=J)=>U?os(U,hr()):[]),V=Z(U=>{const Y=ce(U);return M.current.map(()=>Y).filter(Boolean).flat()});d.useEffect(()=>{if(r||!l)return;function U(ve){ve.key==="Tab"&&Oe(J,Lt(Ge(J)))&&ce().length===0&&!j&&Je(ve)}const Y=Ge(J);return Y.addEventListener("keydown",U),()=>{Y.removeEventListener("keydown",U)}},[r,h,J,l,M,j,ce,V]),d.useEffect(()=>{if(r||!S)return;function U(Y){const ve=st(Y),Re=ce().indexOf(ve);Re!==-1&&(X.current=Re)}return S.addEventListener("focusin",U),()=>{S.removeEventListener("focusin",U)}},[r,S,ce]),d.useEffect(()=>{if(r||!x)return;const U=Ge(J);function Y(){z.current=!1}function ve(Re){const ee=st(Re),fe=Oe(S,ee)||Oe(h,ee)||Oe(O?.portalNode,ee);z.current=!fe,B.current=Re.pointerType||"keyboard"}function xe(){B.current="keyboard"}return U.addEventListener("pointerdown",ve,!0),U.addEventListener("pointerup",Y,!0),U.addEventListener("pointercancel",Y,!0),U.addEventListener("keydown",xe,!0),()=>{U.removeEventListener("pointerdown",ve,!0),U.removeEventListener("pointerup",Y,!0),U.removeEventListener("pointercancel",Y,!0),U.removeEventListener("keydown",xe,!0)}},[r,S,h,J,x,O]),d.useEffect(()=>{if(r||!u)return;function U(){_.current=!0,re.start(0,()=>{_.current=!1})}function Y(ee){const fe=ee.relatedTarget,te=ee.currentTarget,de=st(ee);queueMicrotask(()=>{const oe=T(),Ee=v.context.triggerElements,Pe=!(Oe(h,fe)||Oe(S,fe)||Oe(fe,S)||Oe(O?.portalNode,fe)||fe!=null&&Ee.hasElement(fe)||Ee.hasMatchingElement(ye=>Oe(ye,fe))||fe?.hasAttribute(dr("focus-guard"))||A&&(Nn(A.nodesRef.current,oe).find(ye=>Oe(ye.context?.elements.floating,fe)||Oe(ye.context?.elements.domReference,fe))||il(A.nodesRef.current,oe).find(ye=>[ye.context?.elements.floating,Us(ye.context?.elements.floating)].includes(fe)||ye.context?.elements.domReference===fe)));if(te===h&&J&&Tl(J,M),a&&te!==h&&!Hh(de)&&Lt(Ge(J))===Ge(J).body){if(ze(J)&&(J.focus(),a==="popup")){le.request(()=>{J.focus()});return}const ye=X.current,je=ce(),_e=je[ye]||je[je.length-1]||J;ze(_e)&&_e.focus()}if(w.current.insideReactTree){w.current.insideReactTree=!1;return}(j||!l)&&fe&&Pe&&!_.current&&(j||fe!==Go())&&(k.current=!0,v.setOpen(!1,me(qt,ee)))})}function ve(){z.current||(w.current.insideReactTree=!0,Q.start(0,()=>{w.current.insideReactTree=!1}))}const xe=ze(h)?h:null,Re=[];if(!(!S&&!xe))return xe&&(xe.addEventListener("focusout",Y),xe.addEventListener("pointerdown",U),Re.push(()=>{xe.removeEventListener("focusout",Y),xe.removeEventListener("pointerdown",U)})),S&&(S.addEventListener("focusout",Y),O&&(S.addEventListener("focusout",ve,!0),Re.push(()=>{S.removeEventListener("focusout",ve,!0)})),Re.push(()=>{S.removeEventListener("focusout",Y)})),()=>{Re.forEach(ee=>{ee()})}},[r,h,S,J,l,A,O,v,u,a,ce,j,T,M,w,Q,re,le]);const D=d.useRef(null),se=d.useRef(null),K=fn(D,y,O?.beforeInsideRef),ae=fn(se,O?.afterInsideRef);d.useEffect(()=>{if(r||!S||!x)return;const U=Array.from(O?.portalNode?.querySelectorAll(`[${dr("portal")}]`)||[]),ve=(A?il(A.nodesRef.current,T()):[]).find(ee=>xi(ee.context?.elements.domReference||null))?.context?.elements.domReference,xe=[S,ve,...U,...E(),F.current,L.current,D.current,se.current,O?.beforeOutsideRef.current,O?.afterOutsideRef.current,On(m),On(g),j?h:null].filter(ee=>ee!=null),Re=Fh(xe,l||j);return()=>{Re()}},[x,r,h,S,l,M,O,j,A,T,E,g,m]),ne(()=>{if(!x||r||!ze(J))return;const U=Ge(J),Y=Lt(U);queueMicrotask(()=>{const ve=V(J),xe=N.current,Re=typeof xe=="function"?xe(C.current||""):xe;if(Re===void 0||Re===!1)return;let ee;Re===!0||Re===null?ee=ve[0]||J:ee=On(Re),ee=ee||ve[0]||J,!Oe(J,Y)&&Ls(ee,{preventScroll:ee===J})})},[r,x,J,I,V,N,C]),ne(()=>{if(r||!J)return;const U=Ge(J),Y=Lt(U);zh(Y);function ve(ee){if(ee.open||(H.current=_h(ee.nativeEvent,B.current)),ee.reason===ot&&ee.nativeEvent.type==="mouseleave"&&(k.current=!0),ee.reason===Bi)if(ee.nested)k.current=!1;else if(Qc(ee.nativeEvent)||Zc(ee.nativeEvent))k.current=!1;else{let fe=!1;document.createElement("div").focus({get preventScroll(){return fe=!0,!1}}),fe?k.current=!1:k.current=!0}}R.on("openchange",ve);const xe=U.createElement("span");xe.setAttribute("tabindex","-1"),xe.setAttribute("aria-hidden","true"),Object.assign(xe.style,la),ue&&h&&h.insertAdjacentElement("afterend",xe);function Re(){const ee=P.current;let fe=typeof ee=="function"?ee(H.current):ee;if(fe===void 0||fe===!1)return null;if(fe===null&&(fe=!0),typeof fe=="boolean"){const de=h||Go();return de&&de.isConnected?de:xe}const te=h||Go()||xe;return On(fe)||te}return()=>{R.off("openchange",ve);const ee=Lt(U),fe=Oe(S,ee)||A&&Nn(A.nodesRef.current,T(),!1).some(de=>Oe(de.context?.elements.floating,ee)),te=Re();queueMicrotask(()=>{const de=Vh(te),oe=typeof P.current!="boolean";P.current&&!k.current&&ze(de)&&(!(!oe&&de!==ee&&ee!==U.body)||fe)&&de.focus({preventScroll:!0}),xe.remove()})}},[r,S,J,P,w,R,A,ue,h,T]),d.useEffect(()=>{queueMicrotask(()=>{k.current=!1})},[r]),d.useEffect(()=>{if(r||!x)return;function U(ve){st(ve)?.closest(`[${Lc}]`)&&(_.current=!0)}const Y=Ge(J);return Y.addEventListener("pointerdown",U,!0),()=>{Y.removeEventListener("pointerdown",U,!0)}},[r,x,J]),ne(()=>{if(!r&&O)return O.setFocusManagerState({modal:l,closeOnFocusOut:u,open:x,onOpenChange:v.setOpen,domReference:h}),()=>{O.setFocusManagerState(null)}},[r,O,l,x,v,u,h]),ne(()=>{if(!(r||!J))return Tl(J,M),()=>{queueMicrotask(ua)}},[r,J,M]);const W=!r&&(l?!j:!0)&&(ue||l);return c.jsxs(d.Fragment,{children:[W&&c.jsx(gn,{"data-type":"inside",ref:K,onFocus:U=>{if(l){const Y=V();Ls(Y[Y.length-1])}else O?.portalNode&&(k.current=!1,jn(U,O.portalNode)?mo(h)?.focus():On(m??O.beforeOutsideRef)?.focus())}}),n,W&&c.jsx(gn,{"data-type":"inside",ref:ae,onFocus:U=>{l?Ls(V()[0]):O?.portalNode&&(u&&(k.current=!0),jn(U,O.portalNode)?cu(h)?.focus():On(g??O.afterOutsideRef)?.focus())}})]})}function fa(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,{enabled:s=!0,event:o="click",toggle:i=!0,ignoreMouse:a=!1,stickIfOpen:l=!0,touchOpenDelay:u=0}=t,f=d.useRef(void 0),p=gr(),g=it(),m=d.useMemo(()=>({onPointerDown(y){f.current=y.pointerType},onMouseDown(y){const b=f.current,v=y.nativeEvent,x=n.select("open");if(y.button!==0||o==="click"||ar(b,!0)&&a)return;const h=r.current.openEvent,S=h?.type,R=n.select("domReferenceElement")!==y.currentTarget,w=x&&R||!(x&&i&&(!(h&&l)||S==="click"||S==="mousedown"));if(Zi(v.target)){const E=me(Mt,v,v.target);w&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,E)}):n.setOpen(w,E);return}const T=y.currentTarget;p.request(()=>{const E=me(Mt,v,T);w&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,E)}):n.setOpen(w,E)})},onClick(y){if(o==="mousedown-only")return;const b=f.current;if(o==="mousedown"&&b){f.current=void 0;return}if(ar(b,!0)&&a)return;const v=n.select("open"),x=r.current.openEvent,h=n.select("domReferenceElement")!==y.currentTarget,S=v&&h||!(v&&i&&(!(x&&l)||Jc(x))),R=me(Mt,y.nativeEvent,y.currentTarget);S&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,R)}):n.setOpen(S,R)},onKeyDown(){f.current=void 0}}),[r,o,a,n,l,i,p,g,u]);return d.useMemo(()=>s?{reference:m}:He,[s,m])}function Pl(e,t,n){let{reference:r,floating:s}=e;const o=Ct(t),i=ta(t),a=ea(i),l=pt(t),u=o==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:f,y:r.y-s.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:p};break;case"left":m={x:r.x-s.width,y:p};break;default:m={x:r.x,y:r.y}}switch(xn(t)){case"start":m[i]-=g*(n&&u?-1:1);break;case"end":m[i]+=g*(n&&u?-1:1);break}return m}const $h=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:p}=Pl(u,r,l),g=r,m={},y=0;for(let b=0;b<a.length;b++){const{name:v,fn:x}=a[b],{x:h,y:S,data:R,reset:w}=await x({x:f,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:e,floating:t}});f=h??f,p=S??p,m={...m,[v]:{...m[v],...R}},w&&y<=50&&(y++,typeof w=="object"&&(w.placement&&(g=w.placement),w.rects&&(u=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:f,y:p}=Pl(u,g,l)),b=-1)}return{x:f,y:p,placement:g,strategy:s,middlewareData:m}};async function Yr(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=Kt(t,e),y=eu(m),v=a[g?p==="floating"?"reference":"floating":p],x=Xs(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:l})),h=p==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),R=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},w=Xs(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:h,offsetParent:S,strategy:l}):h);return{top:(x.top-w.top+y.top)/R.y,bottom:(w.bottom-x.bottom+y.bottom)/R.y,left:(x.left-w.left+y.left)/R.x,right:(w.right-x.right+y.right)/R.x}}const Bh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=Kt(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=pt(s),h=Ct(a),S=pt(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=g||(S||!b?[Ys(a)]:Yg(a)),T=y!=="none";!g&&T&&w.push(...Kg(a,b,y,R));const E=[a,...w],I=await Yr(t,v),j=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&j.push(I[x]),p){const A=Ug(s,i,R);j.push(I[A[0]],I[A[1]])}if(M=[...M,{placement:s,overflows:j}],!j.every(A=>A<=0)){var N,P;const A=(((N=o.flip)==null?void 0:N.index)||0)+1,O=E[A];if(O&&(!(p==="alignment"?h!==Ct(O):!1)||M.every(k=>Ct(k.placement)===h?k.overflows[0]>0:!0)))return{data:{index:A,overflows:M},reset:{placement:O}};let F=(P=M.filter(L=>L.overflows[0]<=0).sort((L,k)=>L.overflows[1]-k.overflows[1])[0])==null?void 0:P.placement;if(!F)switch(m){case"bestFit":{var C;const L=(C=M.filter(k=>{if(T){const _=Ct(k.placement);return _===h||_==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(_=>_>0).reduce((_,z)=>_+z,0)]).sort((k,_)=>k[1]-_[1])[0])==null?void 0:C[0];L&&(F=L);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function Ol(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ml(e){return Hg.some(t=>e[t]>=0)}const Wh=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Kt(e,t);switch(r){case"referenceHidden":{const o=await Yr(t,{...s,elementContext:"reference"}),i=Ol(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ml(i)}}}case"escaped":{const o=await Yr(t,{...s,altBoundary:!0}),i=Ol(o,n.floating);return{data:{escapedOffsets:i,escaped:Ml(i)}}}default:return{}}}}},Hu=new Set(["left","top"]);async function Uh(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=pt(n),a=xn(n),l=Ct(n)==="y",u=Hu.has(i)?-1:1,f=o&&l?-1:1,p=Kt(t,e);let{mainAxis:g,crossAxis:m,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*f,y:g*u}:{x:g*u,y:m*f}}const Yh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await Uh(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},Xh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:v=>{let{x,y:h}=v;return{x,y:h}}},...l}=Kt(e,t),u={x:n,y:r},f=await Yr(t,l),p=Ct(pt(s)),g=Ji(p);let m=u[g],y=u[p];if(o){const v=g==="y"?"top":"left",x=g==="y"?"bottom":"right",h=m+f[v],S=m-f[x];m=bi(h,m,S)}if(i){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",h=y+f[v],S=y-f[x];y=bi(h,y,S)}const b=a.fn({...t,[g]:m,[p]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:o,[p]:i}}}}}},Gh=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Kt(e,t),f={x:n,y:r},p=Ct(s),g=Ji(p);let m=f[g],y=f[p];const b=Kt(a,t),v=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const S=g==="y"?"height":"width",R=o.reference[g]-o.floating[S]+v.mainAxis,w=o.reference[g]+o.reference[S]-v.mainAxis;m<R?m=R:m>w&&(m=w)}if(u){var x,h;const S=g==="y"?"width":"height",R=Hu.has(pt(s)),w=o.reference[p]-o.floating[S]+(R&&((x=i.offset)==null?void 0:x[p])||0)+(R?0:v.crossAxis),T=o.reference[p]+o.reference[S]+(R?0:((h=i.offset)==null?void 0:h[p])||0)-(R?v.crossAxis:0);y<w?y=w:y>T&&(y=T)}return{[g]:m,[p]:y}}}},qh=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...u}=Kt(e,t),f=await Yr(t,u),p=pt(s),g=xn(s),m=Ct(s)==="y",{width:y,height:b}=o.floating;let v,x;p==="top"||p==="bottom"?(v=p,x=g===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(x=p,v=g==="end"?"top":"bottom");const h=b-f.top-f.bottom,S=y-f.left-f.right,R=lr(b-f[v],h),w=lr(y-f[x],S),T=!t.middlewareData.shift;let E=R,I=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=h),T&&!g){const M=mt(f.left,0),N=mt(f.right,0),P=mt(f.top,0),C=mt(f.bottom,0);m?I=y-2*(M!==0||N!==0?M+N:mt(f.left,f.right)):E=b-2*(P!==0||C!==0?P+C:mt(f.top,f.bottom))}await l({...t,availableWidth:I,availableHeight:E});const j=await i.getDimensions(a.floating);return y!==j.width||b!==j.height?{reset:{rects:!0}}:{}}}};function $u(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ze(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=cr(n)!==o||cr(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function pa(e){return Fe(e)?e:e.contextElement}function Qn(e){const t=pa(e);if(!ze(t))return _t(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=$u(t);let i=(o?cr(n.width):n.width)/r,a=(o?cr(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Kh=_t(0);function Bu(e){const t=tt(e);return!po()||!t.visualViewport?Kh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qh(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tt(e)?!1:t}function An(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=pa(e);let i=_t(1);t&&(r?Fe(r)&&(i=Qn(r)):i=Qn(e));const a=Qh(o,n,r)?Bu(o):_t(0);let l=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,f=s.width/i.x,p=s.height/i.y;if(o){const g=tt(o),m=r&&Fe(r)?tt(r):r;let y=g,b=mi(y);for(;b&&r&&m!==y;){const v=Qn(b),x=b.getBoundingClientRect(),h=gt(b),S=x.left+(b.clientLeft+parseFloat(h.paddingLeft))*v.x,R=x.top+(b.clientTop+parseFloat(h.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,p*=v.y,l+=S,u+=R,y=tt(b),b=mi(y)}}return Xs({width:f,height:p,x:l,y:u})}function bo(e,t){const n=go(e).scrollLeft;return t?t.left+n:An(Ht(e)).left+n}function Wu(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-bo(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function Zh(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Ht(r),a=t?fo(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=_t(1);const f=_t(0),p=ze(r);if((p||!p&&!o)&&((hn(r)!=="body"||_n(i))&&(l=go(r)),ze(r))){const m=An(r);u=Qn(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const g=i&&!p&&!o?Wu(i,l):_t(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+g.x,y:n.y*u.y-l.scrollTop*u.y+f.y+g.y}}function Jh(e){return Array.from(e.getClientRects())}function ex(e){const t=Ht(e),n=go(e),r=e.ownerDocument.body,s=mt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=mt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+bo(e);const a=-n.scrollTop;return gt(r).direction==="rtl"&&(i+=mt(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const kl=25;function tx(e,t){const n=tt(e),r=Ht(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const f=po();(!f||f&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const u=bo(r);if(u<=0){const f=r.ownerDocument,p=f.body,g=getComputedStyle(p),m=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(r.clientWidth-p.clientWidth-m);y<=kl&&(o-=y)}else u<=kl&&(o+=u);return{width:o,height:i,x:a,y:l}}const nx=new Set(["absolute","fixed"]);function rx(e,t){const n=An(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=ze(e)?Qn(e):_t(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,u=r*o.y;return{width:i,height:a,x:l,y:u}}function Nl(e,t,n){let r;if(t==="viewport")r=tx(e,n);else if(t==="document")r=ex(Ht(e));else if(Fe(t))r=rx(t,n);else{const s=Bu(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Xs(r)}function Uu(e,t){const n=zt(e);return n===t||!Fe(n)||Dt(n)?!1:gt(n).position==="fixed"||Uu(n,t)}function sx(e,t){const n=t.get(e);if(n)return n;let r=sn(e,[],!1).filter(a=>Fe(a)&&hn(a)!=="body"),s=null;const o=gt(e).position==="fixed";let i=o?zt(e):e;for(;Fe(i)&&!Dt(i);){const a=gt(i),l=Yi(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&nx.has(s.position)||_n(i)&&!l&&Uu(e,i))?r=r.filter(f=>f!==i):s=a,i=zt(i)}return t.set(e,r),r}function ox(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?fo(t)?[]:sx(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((u,f)=>{const p=Nl(t,f,s);return u.top=mt(p.top,u.top),u.right=lr(p.right,u.right),u.bottom=lr(p.bottom,u.bottom),u.left=mt(p.left,u.left),u},Nl(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ix(e){const{width:t,height:n}=$u(e);return{width:t,height:n}}function ax(e,t,n){const r=ze(t),s=Ht(t),o=n==="fixed",i=An(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=_t(0);function u(){l.x=bo(s)}if(r||!r&&!o)if((hn(t)!=="body"||_n(s))&&(a=go(t)),r){const m=An(t,!0,o,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else s&&u();o&&!r&&s&&u();const f=s&&!r&&!o?Wu(s,a):_t(0),p=i.left+a.scrollLeft-l.x-f.x,g=i.top+a.scrollTop-l.y-f.y;return{x:p,y:g,width:i.width,height:i.height}}function qo(e){return gt(e).position==="static"}function jl(e,t){if(!ze(e)||gt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ht(e)===n&&(n=n.ownerDocument.body),n}function Yu(e,t){const n=tt(e);if(fo(e))return n;if(!ze(e)){let s=zt(e);for(;s&&!Dt(s);){if(Fe(s)&&!qo(s))return s;s=zt(s)}return n}let r=jl(e,t);for(;r&&bg(r)&&qo(r);)r=jl(r,t);return r&&Dt(r)&&qo(r)&&!Yi(r)?n:r||Rg(e)||n}const lx=async function(e){const t=this.getOffsetParent||Yu,n=this.getDimensions,r=await n(e.floating);return{reference:ax(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cx(e){return gt(e).direction==="rtl"}const ux={convertOffsetParentRelativeRectToViewportRelativeRect:Zh,getDocumentElement:Ht,getClippingRect:ox,getOffsetParent:Yu,getElementRects:lx,getClientRects:Jh,getDimensions:ix,getScale:Qn,isElement:Fe,isRTL:cx};function Xu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dx(e,t){let n=null,r;const s=Ht(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:f,top:p,width:g,height:m}=u;if(a||t(),!g||!m)return;const y=Gn(p),b=Gn(s.clientWidth-(f+g)),v=Gn(s.clientHeight-(p+m)),x=Gn(f),S={rootMargin:-y+"px "+-b+"px "+-v+"px "+-x+"px",threshold:mt(0,lr(1,l))||1};let R=!0;function w(T){const E=T[0].intersectionRatio;if(E!==l){if(!R)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!Xu(u,e.getBoundingClientRect())&&i(),R=!1}try{n=new IntersectionObserver(w,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(w,S)}n.observe(e)}return i(!0),o}function Al(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=pa(e),f=s||o?[...u?sn(u):[],...sn(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const p=u&&a?dx(u,n):null;let g=-1,m=null;i&&(m=new ResizeObserver(x=>{let[h]=x;h&&h.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),n()}),u&&!l&&m.observe(u),m.observe(t));let y,b=l?An(e):null;l&&v();function v(){const x=An(e);b&&!Xu(b,x)&&n(),b=x,y=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(h=>{s&&h.removeEventListener("scroll",n),o&&h.removeEventListener("resize",n)}),p?.(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const fx=Yh,px=Xh,gx=Bh,mx=qh,hx=Wh,xx=Gh,bx=(e,t,n)=>{const r=new Map,s={platform:ux,...n},o={...s.platform,_c:r};return $h(e,t,{...s,platform:o})};var vx=typeof document<"u",yx=function(){},Ds=vx?d.useLayoutEffect:yx;function Js(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Js(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Js(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Gu(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fl(e,t){const n=Gu(e);return Math.round(t*n)/n}function Ko(e){const t=d.useRef(e);return Ds(()=>{t.current=e}),t}function wx(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[f,p]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,m]=d.useState(r);Js(g,r)||m(r);const[y,b]=d.useState(null),[v,x]=d.useState(null),h=d.useCallback(k=>{k!==T.current&&(T.current=k,b(k))},[]),S=d.useCallback(k=>{k!==E.current&&(E.current=k,x(k))},[]),R=o||y,w=i||v,T=d.useRef(null),E=d.useRef(null),I=d.useRef(f),j=l!=null,M=Ko(l),N=Ko(s),P=Ko(u),C=d.useCallback(()=>{if(!T.current||!E.current)return;const k={placement:t,strategy:n,middleware:g};N.current&&(k.platform=N.current),bx(T.current,E.current,k).then(_=>{const z={..._,isPositioned:P.current!==!1};A.current&&!Js(I.current,z)&&(I.current=z,nt.flushSync(()=>{p(z)}))})},[g,t,n,N,P]);Ds(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(k=>({...k,isPositioned:!1})))},[u]);const A=d.useRef(!1);Ds(()=>(A.current=!0,()=>{A.current=!1}),[]),Ds(()=>{if(R&&(T.current=R),w&&(E.current=w),R&&w){if(M.current)return M.current(R,w,C);C()}},[R,w,C,M,j]);const O=d.useMemo(()=>({reference:T,floating:E,setReference:h,setFloating:S}),[h,S]),F=d.useMemo(()=>({reference:R,floating:w}),[R,w]),L=d.useMemo(()=>{const k={position:n,left:0,top:0};if(!F.floating)return k;const _=Fl(F.floating,f.x),z=Fl(F.floating,f.y);return a?{...k,transform:"translate("+_+"px, "+z+"px)",...Gu(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:z}},[n,a,F.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:C,refs:O,elements:F,floatingStyles:L}),[f,C,O,F,L])}const Sx=(e,t)=>({...fx(e),options:[e,t]}),Rx=(e,t)=>({...px(e),options:[e,t]}),Ex=(e,t)=>({...xx(e),options:[e,t]}),Cx=(e,t)=>({...gx(e),options:[e,t]}),Ix=(e,t)=>({...mx(e),options:[e,t]}),Tx=(e,t)=>({...hx(e),options:[e,t]}),Px={intentional:"onClick",sloppy:"onPointerDown"};function Ox(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function ga(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("referenceElement"),i=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:l}=n.context,{enabled:u=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:g="sloppy",referencePress:m=!1,referencePressEvent:y="sloppy",ancestorScroll:b=!1,bubbles:v,externalTree:x}=t,h=bn(x),S=Z(typeof p=="function"?p:()=>!1),R=typeof p=="function"?S:p,w=d.useRef(!1),{escapeKey:T,outsidePress:E}=Ox(v),I=d.useRef(null),j=it(),M=it(),N=Z(()=>{M.clear(),l.current.insideReactTree=!1}),P=d.useRef(!1),C=d.useRef(""),A=Z(D=>{C.current=D.pointerType}),O=Z(()=>{const D=C.current,se=D==="pen"||!D?"mouse":D,K=typeof g=="function"?g():g;return typeof K=="string"?K:K[se]}),F=Z(D=>{if(!r||!u||!f||D.key!=="Escape"||P.current)return;const se=l.current.floatingContext?.nodeId,K=h?Nn(h.nodesRef.current,se):[];if(!T&&K.length>0){let U=!0;if(K.forEach(Y=>{Y.context?.open&&!Y.context.dataRef.current.__escapeKeyBubbles&&(U=!1)}),!U)return}const ae=Vg(D)?D.nativeEvent:D,W=me(ns,ae);n.setOpen(!1,W),!T&&!W.isPropagationAllowed&&D.stopPropagation()}),L=Z(D=>{const se=O();return se==="intentional"&&D.type!=="click"||se==="sloppy"&&D.type==="click"}),k=Z(()=>{l.current.insideReactTree=!0,M.start(0,N)}),_=Z((D,se=!1)=>{if(L(D)){N();return}if(l.current.insideReactTree){N();return}if(O()==="intentional"&&se||typeof R=="function"&&!R(D))return;const K=st(D),ae=`[${dr("inert")}]`,W=Ge(n.select("floatingElement")).querySelectorAll(ae),U=n.context.triggerElements;if(K&&(U.hasElement(K)||U.hasMatchingElement(ee=>Oe(ee,K))))return;let Y=Fe(K)?K:null;for(;Y&&!Dt(Y);){const ee=zt(Y);if(Dt(ee)||!Fe(ee))break;Y=ee}if(W.length&&Fe(K)&&!_g(K)&&!Oe(K,n.select("floatingElement"))&&Array.from(W).every(ee=>!Oe(Y,ee)))return;if(ze(K)&&!("touches"in D)){const ee=Dt(K),fe=gt(K),te=/auto|scroll/,de=ee||te.test(fe.overflowX),oe=ee||te.test(fe.overflowY),Ee=de&&K.clientWidth>0&&K.scrollWidth>K.clientWidth,Pe=oe&&K.clientHeight>0&&K.scrollHeight>K.clientHeight,ye=fe.direction==="rtl",je=Pe&&(ye?D.offsetX<=K.offsetWidth-K.clientWidth:D.offsetX>K.clientWidth),_e=Ee&&D.offsetY>K.clientHeight;if(je||_e)return}const ve=l.current.floatingContext?.nodeId,xe=h&&Nn(h.nodesRef.current,ve).some(ee=>Tt(D,ee.context?.elements.floating));if(Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||xe)return;const Re=h?Nn(h.nodesRef.current,ve):[];if(Re.length>0){let ee=!0;if(Re.forEach(fe=>{fe.context?.open&&!fe.context.dataRef.current.__outsidePressBubbles&&(ee=!1)}),!ee)return}n.setOpen(!1,me(Bi,D)),N()}),z=Z(D=>{O()!=="sloppy"||D.pointerType==="touch"||!n.select("open")||!u||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||_(D)}),X=Z(D=>{if(O()!=="sloppy"||!n.select("open")||!u||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement")))return;const se=D.touches[0];se&&(I.current={startTime:Date.now(),startX:se.clientX,startY:se.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},j.start(1e3,()=>{I.current&&(I.current.dismissOnTouchEnd=!1,I.current.dismissOnMouseDown=!1)}))}),H=Z(D=>{const se=st(D);function K(){X(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)}),B=Z(D=>{const se=w.current;if(w.current=!1,j.clear(),D.type==="mousedown"&&I.current&&!I.current.dismissOnMouseDown)return;const K=st(D);function ae(){D.type==="pointerdown"?z(D):_(D,se),K?.removeEventListener(D.type,ae)}K?.addEventListener(D.type,ae)}),Q=Z(D=>{if(O()!=="sloppy"||!I.current||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement")))return;const se=D.touches[0];if(!se)return;const K=Math.abs(se.clientX-I.current.startX),ae=Math.abs(se.clientY-I.current.startY),W=Math.sqrt(K*K+ae*ae);W>5&&(I.current.dismissOnTouchEnd=!0),W>10&&(_(D),j.clear(),I.current=null)}),re=Z(D=>{const se=st(D);function K(){Q(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)}),le=Z(D=>{O()!=="sloppy"||!I.current||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||(I.current.dismissOnTouchEnd&&_(D),j.clear(),I.current=null)}),ue=Z(D=>{const se=st(D);function K(){le(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)});d.useEffect(()=>{if(!r||!u)return;l.current.__escapeKeyBubbles=T,l.current.__outsidePressBubbles=E;const D=new pn;function se(Y){n.setOpen(!1,me(yt,Y))}function K(){D.clear(),P.current=!0}function ae(){D.start(po()?5:0,()=>{P.current=!1})}const W=Ge(s);W.addEventListener("pointerdown",A,!0),f&&(W.addEventListener("keydown",F),W.addEventListener("compositionstart",K),W.addEventListener("compositionend",ae)),R&&(W.addEventListener("click",B,!0),W.addEventListener("pointerdown",B,!0),W.addEventListener("touchstart",H,!0),W.addEventListener("touchmove",re,!0),W.addEventListener("touchend",ue,!0),W.addEventListener("mousedown",B,!0));let U=[];return b&&(Fe(i)&&(U=sn(i)),Fe(s)&&(U=U.concat(sn(s))),!Fe(o)&&o&&o.contextElement&&(U=U.concat(sn(o.contextElement)))),U=U.filter(Y=>Y!==W.defaultView?.visualViewport),U.forEach(Y=>{Y.addEventListener("scroll",se,{passive:!0})}),()=>{W.removeEventListener("pointerdown",A,!0),f&&(W.removeEventListener("keydown",F),W.removeEventListener("compositionstart",K),W.removeEventListener("compositionend",ae)),R&&(W.removeEventListener("click",B,!0),W.removeEventListener("pointerdown",B,!0),W.removeEventListener("touchstart",H,!0),W.removeEventListener("touchmove",re,!0),W.removeEventListener("touchend",ue,!0),W.removeEventListener("mousedown",B,!0)),U.forEach(Y=>{Y.removeEventListener("scroll",se)}),D.clear()}},[l,s,o,i,f,R,r,a,b,u,T,E,F,_,B,z,H,re,ue,A,n]),d.useEffect(N,[R,N]);const J=d.useMemo(()=>({onKeyDown:F,...m&&{[Px[y]]:D=>{n.setOpen(!1,me(Mt,D.nativeEvent))},...y!=="intentional"&&{onClick(D){n.setOpen(!1,me(Mt,D.nativeEvent))}}}}),[F,n,m,y]),ce=Z(D=>{const se=st(D.nativeEvent);!Oe(n.select("floatingElement"),se)||D.button!==0||(w.current=!0)}),V=d.useMemo(()=>({onKeyDown:F,onPointerDown:ce,onMouseDown:ce,onMouseUp:ce,onClickCapture:k,onMouseDownCapture:k,onPointerDownCapture:k,onMouseUpCapture:k,onTouchEndCapture:k,onTouchMoveCapture:k}),[F,ce,k]);return d.useMemo(()=>u?{reference:J,floating:V,trigger:J}:{},[u,J,V])}var eo=Symbol("NOT_FOUND");function Mx(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function kx(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Nx(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Ll=e=>Array.isArray(e)?e:[e];function jx(e){const t=Array.isArray(e[0])?e[0]:e;return Nx(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ax(e,t){const n=[],{length:r}=e;for(let s=0;s<r;s++)n.push(e[s].apply(null,t));return n}function Fx(e){let t;return{get(n){return t&&e(t.key,n)?t.value:eo},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Lx(e,t){let n=[];function r(a){const l=n.findIndex(u=>t(a,u.key));if(l>-1){const u=n[l];return l>0&&(n.splice(l,1),n.unshift(u)),u.value}return eo}function s(a,l){r(a)===eo&&(n.unshift({key:a,value:l}),n.length>e&&n.pop())}function o(){return n}function i(){n=[]}return{get:r,put:s,getEntries:o,clear:i}}var Dx=(e,t)=>e===t;function _x(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:s}=n;for(let o=0;o<s;o++)if(!e(n[o],r[o]))return!1;return!0}}function zx(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=Dx,maxSize:s=1,resultEqualityCheck:o}=n,i=_x(r);let a=0;const l=s<=1?Fx(i):Lx(s,i);function u(){let f=l.get(arguments);if(f===eo){if(f=e.apply(null,arguments),a++,o){const g=l.getEntries().find(m=>o(m.value,f));g&&(f=g.value,a!==0&&a--)}l.put(arguments,f)}return f}return u.clearCache=()=>{l.clear(),u.resetResultsCount()},u.resultsCount=()=>a,u.resetResultsCount=()=>{a=0},u}var Vx=class{constructor(e){this.value=e}deref(){return this.value}},Hx=typeof WeakRef<"u"?WeakRef:Vx,$x=0,Dl=1;function Cs(){return{s:$x,v:void 0,o:null,p:null}}function qu(e,t={}){let n=Cs();const{resultEqualityCheck:r}=t;let s,o=0;function i(){let a=n;const{length:l}=arguments;for(let p=0,g=l;p<g;p++){const m=arguments[p];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const b=y.get(m);b===void 0?(a=Cs(),y.set(m,a)):a=b}else{let y=a.p;y===null&&(a.p=y=new Map);const b=y.get(m);b===void 0?(a=Cs(),y.set(m,a)):a=b}}const u=a;let f;if(a.s===Dl)f=a.v;else if(f=e.apply(null,arguments),o++,r){const p=s?.deref?.()??s;p!=null&&r(p,f)&&(f=p,o!==0&&o--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Hx(f):f}return u.s=Dl,u.v=f,f}return i.clearCache=()=>{n=Cs(),i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function Ku(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...s)=>{let o=0,i=0,a,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),Mx(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...l},{memoize:p,memoizeOptions:g=[],argsMemoize:m=qu,argsMemoizeOptions:y=[]}=f,b=Ll(g),v=Ll(y),x=jx(s),h=p(function(){return o++,u.apply(null,arguments)},...b),S=m(function(){i++;const w=Ax(x,arguments);return a=h.apply(null,w),a},...v);return Object.assign(S,{resultFunc:u,memoizedResultFunc:h,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var Bx=Ku(qu),Wx=Object.assign((e,t=Bx)=>{kx(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((i,a,l)=>(i[n[l]]=a,i),{}))},{withTypes:()=>Wx});Ku({memoize:zx,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const $=(e,t,n,r,s,o,...i)=>{if(i.length>0)throw new Error(qe(1));let a;if(e)a=e;else throw new Error("Missing arguments");return a},Ux=$i(19),Yx=Ux?Xx:Gx;function pe(e,t,n,r,s){return Yx(e,t,n,r,s)}function Xx(e,t,n,r,s){const o=d.useCallback(()=>t(e.getSnapshot(),n,r,s),[e,t,n,r,s]);return Xf.useSyncExternalStore(e.subscribe,o,o)}function Gx(e,t,n,r,s){return Jf.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,o=>t(o,n,r,s))}class Zn{constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){if(this.state===t)return;this.state=t,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){Zn.prototype.setState.call(this,{...this.state,...t});return}}set(t,n){Object.is(this.state[t],n)||Zn.prototype.setState.call(this,{...this.state,[t]:n})}notifyAll(){const t={...this.state};Zn.prototype.setState.call(this,t)}}class ma extends Zn{constructor(t,n={},r){super(t),this.context=n,this.selectors=r}controlledValues=new Map;useSyncedValue(t,n){d.useDebugValue(t),ne(()=>{this.state[t]!==n&&this.set(t,n)},[t,n])}useSyncedValueWithCleanup(t,n){ne(()=>(this.state[t]!==n&&this.set(t,n),()=>{this.set(t,void 0)}),[t,n])}useSyncedValues(t){const n=Object.values(t);ne(()=>{this.update(t)},n)}useControlledProp(t,n,r){d.useDebugValue(t);const s=n!==void 0;this.controlledValues.has(t)||(this.controlledValues.set(t,s),!s&&!Object.is(this.state[t],r)&&super.setState({...this.state,[t]:r})),ne(()=>{s&&!Object.is(this.state[t],n)&&super.setState({...this.state,[t]:n})},[t,n,r,s])}set(t,n){this.controlledValues.get(t)!==!0&&super.set(t,n)}update(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.update(n)}setState(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.setState({...this.state,...n})}select=(t,n,r,s)=>{const o=this.selectors[t];return o(this.state,n,r,s)};useState=(t,n,r,s)=>{d.useDebugValue(t);const o=this.selectors[t];return pe(this,o,n,r,s)};useContextCallback(t,n){d.useDebugValue(t);const r=Z(n??Xe);this.context[t]=r}useStateSetter(t){const n=d.useRef(void 0);return n.current===void 0&&(n.current=r=>{this.set(t,r)}),n.current}observe(t,n){let r;typeof t=="function"?r=t:r=this.selectors[t];let s=r(this.state);return n(s,s,this),this.subscribe(o=>{const i=r(o);if(!Object.is(s,i)){const a=s;s=i,n(i,a,this)}})}}const qx={open:$(e=>e.open),domReferenceElement:$(e=>e.domReferenceElement),referenceElement:$(e=>e.positionReference??e.referenceElement),floatingElement:$(e=>e.floatingElement),floatingId:$(e=>e.floatingId)};class ha extends ma{constructor(t){const{nested:n,noEmit:r,onOpenChange:s,triggerElements:o,...i}=t;super({...i,positionReference:i.referenceElement,domReferenceElement:i.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:ju(),nested:n,noEmit:r,triggerElements:o},qx)}setOpen=(t,n)=>{if((!t||!this.state.open||Jc(n.event))&&(this.context.dataRef.current.openEvent=t?n.event:void 0),!this.context.noEmit){const r={open:t,reason:n.reason,nativeEvent:n.event,nested:this.context.nested,triggerElement:n.trigger};this.context.events.emit("openchange",r)}this.context.onOpenChange?.(t,n)}}function Kx(e,t){const n=d.useRef(null);return d.useCallback(r=>{if(e!==void 0&&(n.current!==null&&(t.context.triggerElements.delete(n.current),n.current=null),r!==null))return n.current=e,t.context.triggerElements.add(e,r),()=>{n.current!==null&&(t.context.triggerElements.delete(n.current),n.current=null)}},[t,e])}function Qu(e,t,n,r){const s=n.useState("isMountedByTrigger",e),o=Kx(e,n),i=Z(a=>{const l=o(a);return a!==null&&n.select("open")&&n.select("activeTriggerId")==null&&n.update({activeTriggerId:e,activeTriggerElement:a,...r}),l});return ne(()=>{s&&n.update({activeTriggerElement:t.current,...r})},[s,n,t,...Object.values(r)]),{registerTrigger:i,isMountedByThisTrigger:s}}function Zu(e){const t=e.useState("open");ne(()=>{if(t&&!e.select("activeTriggerId")&&e.context.triggerElements.size===1){const n=e.context.triggerElements.entries().next();if(!n.done){const[r,s]=n.value;e.update({activeTriggerId:r,activeTriggerElement:s})}}},[t,e])}function Ju(e,t,n){const{mounted:r,setMounted:s,transitionStatus:o}=co(e);t.useSyncedValues({mounted:r,transitionStatus:o});const i=Z(()=>{s(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n?.(),t.context.onOpenChangeComplete?.(!1)}),a=t.useState("preventUnmountingOnClose");return zn({enabled:!a,open:e,ref:t.context.popupRef,onComplete(){e||i()}}),{forceUnmount:i,transitionStatus:o}}class vo{constructor(){this.elements=new Set,this.idMap=new Map}add(t,n){const r=this.idMap.get(t);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(t,n))}delete(t){const n=this.idMap.get(t);n&&(this.elements.delete(n),this.idMap.delete(t))}hasElement(t){return this.elements.has(t)}hasMatchingElement(t){for(const n of this.elements)if(t(n))return!0;return!1}getById(t){return this.idMap.get(t)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function Qx(){return new ha({open:!1,floatingElement:null,referenceElement:null,triggerElements:new vo,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function ed(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:Qx(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:He,inactiveTriggerProps:He,popupProps:He}}const td={open:$(e=>e.open),mounted:$(e=>e.mounted),transitionStatus:$(e=>e.transitionStatus),floatingRootContext:$(e=>e.floatingRootContext),preventUnmountingOnClose:$(e=>e.preventUnmountingOnClose),payload:$(e=>e.payload),activeTriggerId:$(e=>e.activeTriggerId),activeTriggerElement:$(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:$((e,t)=>t!==void 0&&e.activeTriggerId===t),isOpenedByTrigger:$((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.open),isMountedByTrigger:$((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.mounted),triggerProps:$((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:$(e=>e.popupProps),popupElement:$(e=>e.popupElement),positionerElement:$(e=>e.positionerElement)};function nd(e){const{open:t=!1,onOpenChange:n,elements:r={}}=e,s=Ln(),o=$t()!=null,i=ut(()=>new ha({open:t,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new vo,floatingId:s,nested:o,noEmit:e.noEmit||!1})).current;return ne(()=>{const a={open:t,floatingId:s};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=Fe(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),i.update(a)},[t,s,r.reference,r.floating,i]),i.context.onOpenChange=n,i.context.nested=o,i.context.noEmit=e.noEmit||!1,i}function Zx(e={}){const{nodeId:t,externalTree:n}=e,r=nd(e),s=e.rootContext||r,o={reference:s.useState("referenceElement"),floating:s.useState("floatingElement"),domReference:s.useState("domReferenceElement")},[i,a]=d.useState(null),l=d.useRef(null),u=bn(n);ne(()=>{o.domReference&&(l.current=o.domReference)},[o.domReference]);const f=wx({...e,elements:{...o,...i&&{reference:i}}}),p=d.useCallback(E=>{const I=Fe(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),getClientRects:()=>E.getClientRects(),contextElement:E}:E;a(I),f.refs.setReference(I)},[f.refs]),[g,m]=d.useState(null),[y,b]=d.useState(null);s.useSyncedValue("referenceElement",g),s.useSyncedValue("domReferenceElement",Fe(g)?g:null),s.useSyncedValue("floatingElement",y);const v=d.useCallback(E=>{(Fe(E)||E===null)&&(l.current=E,m(E)),(Fe(f.refs.reference.current)||f.refs.reference.current===null||E!==null&&!Fe(E))&&f.refs.setReference(E)},[f.refs,m]),x=d.useCallback(E=>{b(E),f.refs.setFloating(E)},[f.refs]),h=d.useMemo(()=>({...f.refs,setReference:v,setFloating:x,setPositionReference:p,domReference:l}),[f.refs,v,x,p]),S=d.useMemo(()=>({...f.elements,domReference:o.domReference}),[f.elements,o.domReference]),R=s.useState("open"),w=s.useState("floatingId"),T=d.useMemo(()=>({...f,dataRef:s.context.dataRef,open:R,onOpenChange:s.setOpen,events:s.context.events,floatingId:w,refs:h,elements:S,nodeId:t,rootStore:s}),[f,h,S,t,s,R,w]);return ne(()=>{s.context.dataRef.current.floatingContext=T;const E=u?.nodesRef.current.find(I=>I.id===t);E&&(E.context=T)}),d.useMemo(()=>({...f,context:T,refs:h,elements:S,rootStore:s}),[f,h,S,T,s])}function rd(e){const{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:s}=e,o=Ln(),i=$t()!=null,a=t.useState("open"),l=t.useState("activeTriggerElement"),u=t.useState(r?"popupElement":"positionerElement"),f=t.context.triggerElements,p=ut(()=>new ha({open:a,referenceElement:l,floatingElement:u,triggerElements:f,onOpenChange:s,floatingId:o,nested:i,noEmit:n})).current;return ne(()=>{const g={open:a,floatingId:o,referenceElement:l,floatingElement:u};Fe(l)&&(g.domReferenceElement=l),p.update(g)},[a,o,l,u,p]),p.context.onOpenChange=s,p.context.nested=i,p.context.noEmit=n,p}const Qo=Ag&&Yc;function Jx(e,t={}){const n="rootStore"in e?e.rootStore:e,{events:r,dataRef:s}=n.context,{enabled:o=!0,visibleOnly:i=!0}=t,a=d.useRef(!1),l=it(),u=d.useRef(!0);d.useEffect(()=>{const p=n.select("domReferenceElement");if(!o)return;const g=tt(p);function m(){!n.select("open")&&ze(p)&&p===Lt(Ge(p))&&(a.current=!0)}function y(){u.current=!0}function b(){u.current=!1}return g.addEventListener("blur",m),Qo&&(g.addEventListener("keydown",y,!0),g.addEventListener("pointerdown",b,!0)),()=>{g.removeEventListener("blur",m),Qo&&(g.removeEventListener("keydown",y,!0),g.removeEventListener("pointerdown",b,!0))}},[n,o]),d.useEffect(()=>{if(!o)return;function p(g){(g.reason===Mt||g.reason===ns)&&(a.current=!0)}return r.on("openchange",p),()=>{r.off("openchange",p)}},[r,o]);const f=d.useMemo(()=>({onMouseLeave(){a.current=!1},onFocus(p){if(a.current)return;const g=st(p.nativeEvent);if(i&&Fe(g)){if(Qo&&!p.relatedTarget){if(!u.current&&!Zi(g))return}else if(!zg(g))return}n.setOpen(!0,me($s,p.nativeEvent,p.currentTarget))},onBlur(p){a.current=!1;const g=p.relatedTarget,m=p.nativeEvent,y=Fe(g)&&g.hasAttribute(dr("focus-guard"))&&g.getAttribute("data-type")==="outside";l.start(0,()=>{const b=n.select("domReferenceElement"),v=Lt(b?b.ownerDocument:document);!g&&v===b||Oe(s.current.floatingContext?.refs.floating.current,v)||Oe(b,v)||y||n.context.triggerElements.hasElement(p.relatedTarget)||n.setOpen(!1,me($s,m))})}}),[s,n,i,l]);return d.useMemo(()=>o?{reference:f,trigger:f}:{},[o,f])}const Ei=dr("safe-polygon"),e0=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${Kc}`;function t0(e){return e?!!e.closest(e0):!1}function sd(e){const t=d.useRef(void 0),n=d.useRef(!1),r=d.useRef(void 0),s=d.useRef(!0),o=d.useRef(!1),i=d.useRef(()=>{}),a=d.useRef(!1),l=it(),u=it(),f=d.useRef(void 0);return d.useMemo(()=>{const p=e.context.dataRef.current;return p.hoverInteractionState||(p.hoverInteractionState={pointerTypeRef:t,interactedInsideRef:n,handlerRef:r,blockMouseMoveRef:s,performedPointerEventsMutationRef:o,unbindMouseMoveRef:i,restTimeoutPendingRef:a,openChangeTimeout:l,restTimeout:u,handleCloseOptionsRef:f}),p.hoverInteractionState},[e,t,n,r,s,o,i,a,l,u,f])}const n0=new Set(["click","mousedown"]);function od(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),{dataRef:i}=n.context,{enabled:a=!0,closeDelay:l=0,externalTree:u}=t,{pointerTypeRef:f,interactedInsideRef:p,handlerRef:g,performedPointerEventsMutationRef:m,unbindMouseMoveRef:y,restTimeoutPendingRef:b,openChangeTimeout:v,handleCloseOptionsRef:x}=sd(n),h=bn(u),S=$t(),R=Z(()=>p.current?!0:i.current.openEvent?n0.has(i.current.openEvent.type):!1),w=Z(()=>{const M=i.current.openEvent?.type;return M?.includes("mouse")&&M!=="mousedown"}),T=d.useCallback((M,N=!0)=>{const P=r0(l,f.current);P&&!g.current?v.start(P,()=>n.setOpen(!1,me(ot,M))):N&&(v.clear(),n.setOpen(!1,me(ot,M)))},[l,g,n,f,v]),E=Z(()=>{y.current(),g.current=void 0}),I=Z(()=>{if(m.current){const M=Ge(s).body;M.style.pointerEvents="",M.removeAttribute(Ei),m.current=!1}}),j=Z(M=>{const N=st(M);if(!t0(N)){p.current=!1;return}p.current=!0});ne(()=>{r||(f.current=void 0,b.current=!1,p.current=!1,E(),I())},[r,f,b,p,E,I]),d.useEffect(()=>()=>{E()},[E]),d.useEffect(()=>I,[I]),ne(()=>{if(a&&r&&x.current?.blockPointerEvents&&w()&&Fe(o)&&s){m.current=!0;const M=Ge(s).body;M.setAttribute(Ei,"");const N=o,P=s,C=h?.nodesRef.current.find(A=>A.id===S)?.context?.elements.floating;return C&&(C.style.pointerEvents=""),M.style.pointerEvents="none",N.style.pointerEvents="auto",P.style.pointerEvents="auto",()=>{M.style.pointerEvents="",N.style.pointerEvents="",P.style.pointerEvents=""}}},[a,r,o,s,x,w,h,S,m]),d.useEffect(()=>{if(!a)return;function M(A){if(R()||!i.current.floatingContext)return;const O=n.context.triggerElements;A.relatedTarget&&O.hasElement(A.relatedTarget)||(I(),E(),R()||T(A))}function N(A){v.clear(),I(),g.current?.(A),E()}function P(A){R()||T(A,!1)}const C=s;return C&&(C.addEventListener("mouseleave",M),C.addEventListener("mouseenter",N),C.addEventListener("mouseleave",P),C.addEventListener("pointerdown",j,!0)),()=>{C&&(C.removeEventListener("mouseleave",M),C.removeEventListener("mouseenter",N),C.removeEventListener("mouseleave",P),C.removeEventListener("pointerdown",j,!0))}})}function r0(e,t){return t&&!ar(t)?0:typeof e=="function"?e():e}function Zo(e){return typeof e=="function"?e():e}const s0={current:null};function id(e,t={}){const n="rootStore"in e?e.rootStore:e,{dataRef:r,events:s}=n.context,{enabled:o=!0,delay:i=0,handleClose:a=null,mouseOnly:l=!1,restMs:u=0,move:f=!0,triggerElementRef:p=s0,externalTree:g,isActiveTrigger:m=!0}=t,y=bn(g),{pointerTypeRef:b,interactedInsideRef:v,handlerRef:x,blockMouseMoveRef:h,performedPointerEventsMutationRef:S,unbindMouseMoveRef:R,restTimeoutPendingRef:w,openChangeTimeout:T,restTimeout:E,handleCloseOptionsRef:I}=sd(n),j=rt(a),M=rt(i),N=rt(u);m&&(I.current=j.current?.__options);const P=Z(()=>v.current?!0:r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1),C=d.useCallback((L,k=!0)=>{const _=Yo(M.current,"close",b.current);_&&!x.current?T.start(_,()=>n.setOpen(!1,me(ot,L))):k&&(T.clear(),n.setOpen(!1,me(ot,L)))},[M,x,n,b,T]),A=Z(()=>{R.current(),x.current=void 0}),O=Z(()=>{if(S.current){const L=Ge(n.select("domReferenceElement")).body;L.style.pointerEvents="",L.removeAttribute(Ei),S.current=!1}});d.useEffect(()=>{if(!o)return;function L(k){k.open||(T.clear(),E.clear(),h.current=!0,w.current=!1)}return s.on("openchange",L),()=>{s.off("openchange",L)}},[o,s,T,E,h,w]);const F=Z(L=>{if(P()||!r.current.floatingContext)return;const k=n.context.triggerElements;L.relatedTarget&&k.hasElement(L.relatedTarget)||j.current?.({...r.current.floatingContext,tree:y,x:L.clientX,y:L.clientY,onClose(){O(),A(),P()||C(L)}})(L)});return d.useEffect(()=>{if(!o)return;const L=p.current??(m?n.select("domReferenceElement"):null);if(!Fe(L))return;function k(X){if(T.clear(),h.current=!1,l&&!ar(b.current)||Zo(N.current)>0&&!Yo(M.current,"open"))return;const H=Yo(M.current,"open",b.current),B=n.select("domReferenceElement"),Q=n.context.triggerElements,re=(Q.hasElement(X.target)||Q.hasMatchingElement(ue=>Oe(ue,X.target)))&&(!B||!Oe(B,X.target)),le=X.currentTarget??null;H?T.start(H,()=>{n.select("open")||n.setOpen(!0,me(ot,X,le))}):(!n.select("open")||re)&&n.setOpen(!0,me(ot,X,le))}function _(X){if(P()){O();return}R.current();const H=n.select("domReferenceElement"),B=Ge(H);E.clear(),w.current=!1;const Q=n.context.triggerElements;if(X.relatedTarget&&Q.hasElement(X.relatedTarget))return;if(j.current&&r.current.floatingContext){n.select("open")||T.clear(),x.current=j.current({...r.current.floatingContext,tree:y,x:X.clientX,y:X.clientY,onClose(){O(),A(),P()||C(X,!0)}});const le=x.current;le(X),B.addEventListener("mousemove",le),R.current=()=>{B.removeEventListener("mousemove",le)};return}(b.current==="touch"?!Oe(n.select("floatingElement"),X.relatedTarget):!0)&&C(X)}function z(X){F(X)}return n.select("open")&&L.addEventListener("mouseleave",z),f&&L.addEventListener("mousemove",k,{once:!0}),L.addEventListener("mouseenter",k),L.addEventListener("mouseleave",_),()=>{L.removeEventListener("mouseleave",z),f&&L.removeEventListener("mousemove",k),L.removeEventListener("mouseenter",k),L.removeEventListener("mouseleave",_)}},[A,O,h,r,M,C,n,o,j,F,m,P,l,f,b,N,E,w,T,p,y,R,x]),d.useMemo(()=>{function L(k){b.current=k.pointerType}return{onPointerDown:L,onPointerEnter:L,onMouseMove(k){const{nativeEvent:_}=k,z=k.currentTarget,X=n.select("domReferenceElement"),H=n.context.triggerElements,B=n.select("open"),Q=(H.hasElement(k.target)||H.hasMatchingElement(le=>Oe(le,k.target)))&&(!X||!Oe(X,k.target));if(l&&!ar(b.current)||B&&!Q||Zo(N.current)===0||!Q&&w.current&&k.movementX**2+k.movementY**2<2)return;E.clear();function re(){!h.current&&(!B||Q)&&n.setOpen(!0,me(ot,_,z))}b.current==="touch"?nt.flushSync(()=>{re()}):Q&&B?re():(w.current=!0,E.start(Zo(N.current),re))}}},[h,l,n,b,N,E,w])}function cs(e=[]){const t=e.map(u=>u?.reference),n=e.map(u=>u?.floating),r=e.map(u=>u?.item),s=e.map(u=>u?.trigger),o=d.useCallback(u=>Is(u,e,"reference"),t),i=d.useCallback(u=>Is(u,e,"floating"),n),a=d.useCallback(u=>Is(u,e,"item"),r),l=d.useCallback(u=>Is(u,e,"trigger"),s);return d.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a,getTriggerProps:l}),[o,i,a,l])}function Is(e,t,n){const r=new Map,s=n==="item",o={};n==="floating"&&(o.tabIndex=-1,o[hi]="");for(const i in e)s&&e&&(i===Gc||i===qc)||(o[i]=e[i]);for(let i=0;i<t.length;i+=1){let a;const l=t[i]?.[n];typeof l=="function"?a=e?l(e):null:a=l,a&&_l(o,a,s,r)}return _l(o,e,s,r),o}function _l(e,t,n,r){for(const s in t){const o=t[s];n&&(s===Gc||s===qc)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof o=="function"&&(r.get(s)?.push(o),e[s]=(...i)=>r.get(s)?.map(a=>a(...i)).find(a=>a!==void 0))):e[s]=o)}}const o0="Escape";function yo(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Ts(e,t){return yo(t,e===Qi||e===ss,e===on||e===an)}function Jo(e,t,n){return yo(t,e===ss,n?e===on:e===an)||e==="Enter"||e===" "||e===""}function i0(e,t,n){return yo(t,n?e===on:e===an,e===ss)}function a0(e,t,n,r){const s=n?e===an:e===on,o=e===Qi;return t==="both"||t==="horizontal"&&r&&r>1?e===o0:yo(t,s,o)}function ad(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),i=n.context.dataRef,{listRef:a,activeIndex:l,onNavigate:u=()=>{},enabled:f=!0,selectedIndex:p=null,allowEscape:g=!1,loopFocus:m=!1,nested:y=!1,rtl:b=!1,virtual:v=!1,focusItemOnOpen:x="auto",focusItemOnHover:h=!0,openOnArrowKeyDown:S=!0,disabledIndices:R=void 0,orientation:w="vertical",parentOrientation:T,cols:E=1,scrollItemIntoView:I=!0,itemSizes:j,dense:M=!1,id:N,resetOnPointerLeave:P=!0,externalTree:C}=t,A=Us(s),O=rt(A),F=$t(),L=bn(C);ne(()=>{i.current.orientation=w},[i,w]);const k=xi(o),_=d.useRef(x),z=d.useRef(p??-1),X=d.useRef(null),H=d.useRef(!0),B=Z(te=>{u(z.current===-1?null:z.current,te)}),Q=d.useRef(B),re=d.useRef(!!s),le=d.useRef(r),ue=d.useRef(!1),J=d.useRef(!1),ce=rt(R),V=rt(r),D=rt(I),se=rt(p),K=rt(P),ae=Z(()=>{function te(Pe){v?L?.events.emit("virtualfocus",Pe):Ls(Pe,{sync:ue.current,preventScroll:!0})}const de=a.current[z.current],oe=J.current;de&&te(de),(ue.current?Pe=>Pe():requestAnimationFrame)(()=>{const Pe=a.current[z.current]||de;if(!Pe)return;de||te(Pe);const ye=D.current;ye&&U&&(oe||!H.current)&&Pe.scrollIntoView?.(typeof ye=="boolean"?{block:"nearest",inline:"nearest"}:ye)})});ne(()=>{f&&(r&&s?(z.current=p??-1,_.current&&p!=null&&(J.current=!0,B())):re.current&&(z.current=-1,Q.current()))},[f,r,s,p,B]),ne(()=>{if(f){if(!r){ue.current=!1;return}if(s)if(l==null){if(ue.current=!1,se.current!=null)return;if(re.current&&(z.current=-1,ae()),(!le.current||!re.current)&&_.current&&(X.current!=null||_.current===!0&&X.current==null)){let te=0;const de=()=>{a.current[0]==null?(te<2&&(te?requestAnimationFrame:queueMicrotask)(de),te+=1):(z.current=X.current==null||Jo(X.current,w,b)||y?Wo(a):cl(a),X.current=null,B())};de()}}else Dr(a,l)||(z.current=l,ae(),J.current=!1)}},[f,r,s,l,se,y,a,w,b,B,ae,ce]),ne(()=>{if(!f||s||!L||v||!re.current)return;const te=L.nodesRef.current,de=te.find(Pe=>Pe.id===F)?.context?.elements.floating,oe=Lt(Ge(s)),Ee=te.some(Pe=>Pe.context&&Oe(Pe.context.elements.floating,oe));de&&!Ee&&H.current&&de.focus({preventScroll:!0})},[f,s,L,F,v]),ne(()=>{Q.current=B,le.current=r,re.current=!!s}),ne(()=>{r||(X.current=null,_.current=x)},[r,x]);const W=l!=null,U=d.useMemo(()=>{function te(oe){if(!V.current)return;const Ee=a.current.indexOf(oe.currentTarget);Ee!==-1&&z.current!==Ee&&(z.current=Ee,B(oe))}return{onFocus(oe){ue.current=!0,te(oe)},onClick:({currentTarget:oe})=>oe.focus({preventScroll:!0}),onMouseMove(oe){ue.current=!0,J.current=!1,h&&te(oe)},onPointerLeave(oe){if(!V.current||!H.current||oe.pointerType==="touch")return;ue.current=!0;const Ee=oe.relatedTarget;!h||a.current.includes(Ee)||K.current&&(z.current=-1,B(oe),v||O.current?.focus({preventScroll:!0}))}}},[V,O,h,a,B,K,v]),Y=d.useCallback(()=>T??L?.nodesRef.current.find(te=>te.id===F)?.context?.dataRef?.current.orientation,[F,L,T]),ve=Z(te=>{if(H.current=!1,ue.current=!0,te.which===229||!V.current&&te.currentTarget===O.current)return;if(y&&a0(te.key,w,b,E)){Ts(te.key,Y())||Je(te),n.setOpen(!1,me(As,te.nativeEvent)),ze(o)&&(v?L?.events.emit("virtualfocus",o):o.focus());return}const de=z.current,oe=Wo(a,R),Ee=cl(a,R);if(k||(te.key==="Home"&&(Je(te),z.current=oe,B(te)),te.key==="End"&&(Je(te),z.current=Ee,B(te))),E>1){const Pe=j||Array.from({length:a.current.length},()=>({width:1,height:1})),ye=Jg(Pe,E,M),je=ye.findIndex(Ke=>Ke!=null&&!_r(a,Ke,R)),_e=ye.reduce((Ke,Le,q)=>Le!=null&&!_r(a,Le,R)?q:Ke,-1),Be=ye[Zg({current:ye.map(Ke=>Ke!=null?a.current[Ke]:null)},{event:te,orientation:w,loopFocus:m,rtl:b,cols:E,disabledIndices:tm([...(typeof R!="function"?R:null)||a.current.map((Ke,Le)=>_r(a,Le,R)?Le:void 0),void 0],ye),minIndex:je,maxIndex:_e,prevIndex:em(z.current>Ee?oe:z.current,Pe,ye,E,te.key===ss?"bl":te.key===(b?on:an)?"tr":"tl"),stopEvent:!0})];if(Be!=null&&(z.current=Be,B(te)),w==="both")return}if(Ts(te.key,w)){if(Je(te),r&&!v&&Lt(te.currentTarget.ownerDocument)===te.currentTarget){z.current=Jo(te.key,w,b)?oe:Ee,B(te);return}Jo(te.key,w,b)?m?de>=Ee?g&&de!==a.current.length?z.current=-1:(ue.current=!1,z.current=oe):z.current=lt(a,{startingIndex:de,disabledIndices:R}):z.current=Math.min(Ee,lt(a,{startingIndex:de,disabledIndices:R})):m?de<=oe?g&&de!==-1?z.current=a.current.length:(ue.current=!1,z.current=Ee):z.current=lt(a,{startingIndex:de,decrement:!0,disabledIndices:R}):z.current=Math.max(oe,lt(a,{startingIndex:de,decrement:!0,disabledIndices:R})),Dr(a,z.current)&&(z.current=-1),B(te)}}),xe=d.useMemo(()=>v&&r&&W&&{"aria-activedescendant":`${N}-${l}`},[v,r,W,N,l]),Re=d.useMemo(()=>({"aria-orientation":w==="both"?void 0:w,...k?{}:xe,onKeyDown(te){if(te.key==="Tab"&&te.shiftKey&&r&&!v){const de=st(te.nativeEvent);if(de&&!Oe(O.current,de))return;Je(te),n.setOpen(!1,me(qt,te.nativeEvent)),ze(o)&&o.focus();return}ve(te)},onPointerMove(){H.current=!0}}),[xe,ve,O,w,k,n,r,v,o]),ee=d.useMemo(()=>{function te(oe){x==="auto"&&Qc(oe.nativeEvent)&&(_.current=!v)}function de(oe){_.current=x,x==="auto"&&Zc(oe.nativeEvent)&&(_.current=!0)}return{onKeyDown(oe){const Ee=n.select("open");H.current=!1;const Pe=oe.key.startsWith("Arrow"),ye=i0(oe.key,Y(),b),je=Ts(oe.key,w),_e=(y?ye:je)||oe.key==="Enter"||oe.key.trim()==="";if(v&&Ee)return ve(oe);if(!(!Ee&&!S&&Pe)){if(_e){const Be=Ts(oe.key,Y());X.current=y&&Be?null:oe.key}if(y){ye&&(Je(oe),Ee?(z.current=Wo(a,ce.current),B(oe)):n.setOpen(!0,me(As,oe.nativeEvent,oe.currentTarget)));return}je&&(se.current!=null&&(z.current=se.current),Je(oe),!Ee&&S?n.setOpen(!0,me(As,oe.nativeEvent,oe.currentTarget)):ve(oe),Ee&&B(oe))}},onFocus(oe){n.select("open")&&!v&&(z.current=-1,B(oe))},onPointerDown:de,onPointerEnter:de,onMouseDown:te,onClick:te}},[ve,ce,x,a,y,B,n,S,w,Y,b,se,v]),fe=d.useMemo(()=>({...xe,...ee}),[xe,ee]);return d.useMemo(()=>f?{reference:fe,floating:Re,item:U,trigger:ee}:{},[f,fe,Re,ee,U])}const l0=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ld(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingId"),o=n.useState("domReferenceElement"),i=n.useState("floatingElement"),{enabled:a=!0,role:l="dialog"}=t,u=Ln(),f=o?.id||u,p=d.useMemo(()=>Us(i)?.id||s,[i,s]),g=l0.get(l)??l,y=$t()!=null,b=d.useMemo(()=>g==="tooltip"||l==="label"?He:{"aria-haspopup":g==="alertdialog"?"dialog":g,"aria-expanded":"false",...g==="listbox"&&{role:"combobox"},...g==="menu"&&y&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[g,y,l]),v=d.useMemo(()=>g==="tooltip"||l==="label"?{[`aria-${l==="label"?"labelledby":"describedby"}`]:r?p:void 0}:{...b,"aria-expanded":r?"true":"false","aria-controls":r?p:void 0,...g==="menu"&&{id:f}},[g,p,r,f,l,b]),x=d.useMemo(()=>{const S={id:p,...g&&{role:g}};return g==="tooltip"||l==="label"?S:{...S,...g==="menu"&&{"aria-labelledby":f}}},[g,p,f,l]),h=d.useCallback(({active:S,selected:R})=>{const w={role:"option",...S&&{id:`${p}-fui-option`}};switch(l){case"select":case"combobox":return{...w,"aria-selected":R}}return{}},[p,l]);return d.useMemo(()=>a?{reference:v,floating:x,item:h,trigger:b}:{},[a,v,x,b,h])}function c0(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.context.dataRef,{listRef:o,activeIndex:i,onMatch:a,onTypingChange:l,enabled:u=!0,findMatch:f=null,resetMs:p=750,ignoreKeys:g=Xt,selectedIndex:m=null}=t,y=it(),b=d.useRef(""),v=d.useRef(m??i??-1),x=d.useRef(null);ne(()=>{r&&(y.clear(),x.current=null,b.current="")},[r,y]),ne(()=>{r&&b.current===""&&(v.current=m??i??-1)},[r,m,i]);const h=Z(T=>{T?s.current.typing||(s.current.typing=T,l?.(T)):s.current.typing&&(s.current.typing=T,l?.(T))}),S=Z(T=>{function E(P,C,A){const O=f?f(C,A):C.find(F=>F?.toLocaleLowerCase().indexOf(A.toLocaleLowerCase())===0);return O?P.indexOf(O):-1}const I=o.current;if(b.current.length>0&&b.current[0]!==" "&&(E(I,I,b.current)===-1?h(!1):T.key===" "&&Je(T)),I==null||g.includes(T.key)||T.key.length!==1||T.ctrlKey||T.metaKey||T.altKey)return;r&&T.key!==" "&&(Je(T),h(!0)),I.every(P=>P?P[0]?.toLocaleLowerCase()!==P[1]?.toLocaleLowerCase():!0)&&b.current===T.key&&(b.current="",v.current=x.current),b.current+=T.key,y.start(p,()=>{b.current="",v.current=x.current,h(!1)});const M=v.current,N=E(I,[...I.slice((M||0)+1),...I.slice(0,(M||0)+1)],b.current);N!==-1?(a?.(N),x.current=N):T.key!==" "&&(b.current="",h(!1))}),R=d.useMemo(()=>({onKeyDown:S}),[S]),w=d.useMemo(()=>({onKeyDown:S,onKeyUp(T){T.key===" "&&h(!1)}}),[S,h]);return d.useMemo(()=>u?{reference:R,floating:w}:{},[u,R,w])}function zl(e,t){const[n,r]=e;let s=!1;const o=t.length;for(let i=0,a=o-1;i<o;a=i++){const[l,u]=t[i]||[0,0],[f,p]=t[a]||[0,0];u>=r!=p>=r&&n<=(f-l)*(r-u)/(p-u)+l&&(s=!s)}return s}function u0(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function cd(e={}){const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e,s=new pn;let o=!1,i=null,a=null,l=typeof performance<"u"?performance.now():0;function u(p,g){const m=performance.now(),y=m-l;if(i===null||a===null||y===0)return i=p,a=g,l=m,null;const b=p-i,v=g-a,h=Math.sqrt(b*b+v*v)/y;return i=p,a=g,l=m,h}const f=({x:p,y:g,placement:m,elements:y,onClose:b,nodeId:v,tree:x})=>function(S){function R(){s.clear(),b()}if(s.clear(),!y.domReference||!y.floating||m==null||p==null||g==null)return;const{clientX:w,clientY:T}=S,E=[w,T],I=st(S),j=S.type==="mouseleave",M=Oe(y.floating,I),N=Oe(y.domReference,I),P=y.domReference.getBoundingClientRect(),C=y.floating.getBoundingClientRect(),A=m.split("-")[0],O=p>C.right-C.width/2,F=g>C.bottom-C.height/2,L=u0(E,P),k=C.width>P.width,_=C.height>P.height,z=(k?P:C).left,X=(k?P:C).right,H=(_?P:C).top,B=(_?P:C).bottom;if(M&&(o=!0,!j))return;if(N&&(o=!1),N&&!j){o=!0;return}if(j&&Fe(S.relatedTarget)&&Oe(y.floating,S.relatedTarget)||x&&Nn(x.nodesRef.current,v).some(({context:le})=>le?.open))return;if(A==="top"&&g>=P.bottom-1||A==="bottom"&&g<=P.top+1||A==="left"&&p>=P.right-1||A==="right"&&p<=P.left+1)return R();let Q=[];switch(A){case"top":Q=[[z,P.top+1],[z,C.bottom-1],[X,C.bottom-1],[X,P.top+1]];break;case"bottom":Q=[[z,C.top+1],[z,P.bottom-1],[X,P.bottom-1],[X,C.top+1]];break;case"left":Q=[[C.right-1,B],[C.right-1,H],[P.left+1,H],[P.left+1,B]];break;case"right":Q=[[P.right-1,B],[P.right-1,H],[C.left+1,H],[C.left+1,B]];break}function re([le,ue]){switch(A){case"top":{const J=[k?le+t/2:O?le+t*4:le-t*4,ue+t+1],ce=[k?le-t/2:O?le+t*4:le-t*4,ue+t+1],V=[[C.left,O||k?C.bottom-t:C.top],[C.right,O?k?C.bottom-t:C.top:C.bottom-t]];return[J,ce,...V]}case"bottom":{const J=[k?le+t/2:O?le+t*4:le-t*4,ue-t],ce=[k?le-t/2:O?le+t*4:le-t*4,ue-t],V=[[C.left,O||k?C.top+t:C.bottom],[C.right,O?k?C.top+t:C.bottom:C.top+t]];return[J,ce,...V]}case"left":{const J=[le+t+1,_?ue+t/2:F?ue+t*4:ue-t*4],ce=[le+t+1,_?ue-t/2:F?ue+t*4:ue-t*4];return[...[[F||_?C.right-t:C.left,C.top],[F?_?C.right-t:C.left:C.right-t,C.bottom]],J,ce]}case"right":{const J=[le-t,_?ue+t/2:F?ue+t*4:ue-t*4],ce=[le-t,_?ue-t/2:F?ue+t*4:ue-t*4],V=[[F||_?C.left+t:C.right,C.top],[F?_?C.left+t:C.right:C.left+t,C.bottom]];return[J,ce,...V]}default:return[]}}if(!zl([w,T],Q)){if(o&&!L)return R();if(!j&&r){const le=u(S.clientX,S.clientY);if(le!==null&&le<.1)return R()}zl([w,T],re([p,g]))?!o&&r&&s.start(40,R):R()}};return f.__options={blockPointerEvents:n},f}const d0=d.createContext(void 0);function ud(e){return d.useContext(d0)}const dd="ArrowUp",fd="ArrowDown",pd="ArrowLeft",gd="ArrowRight",md="Home",hd="End",f0=new Set([pd,gd]),p0=new Set([dd,fd]),g0=new Set([...f0,...p0]);[...g0];const xd=new Set([dd,fd,pd,gd,md,hd]);function wo(e){return e==="starting"?qp:He}const m0={...br,...rs},bd=d.forwardRef(function(t,n){const{render:r,className:s,finalFocus:o,...i}=t,{store:a}=Hn(),{side:l,align:u}=Pu(),f=ud()!=null,p=a.useState("open"),g=a.useState("transitionStatus"),m=a.useState("popupProps"),y=a.useState("mounted"),b=a.useState("instantType"),v=a.useState("activeTriggerElement"),x=a.useState("parent"),h=a.useState("lastOpenChangeReason"),S=a.useState("rootId"),R=a.useState("floatingRootContext"),w=a.useState("floatingTreeRoot"),T=a.useState("closeDelay"),E=a.useState("activeTriggerElement");zn({open:p,ref:a.context.popupRef,onComplete(){p&&a.context.onOpenChangeComplete?.(!0)}}),d.useEffect(()=>{function C(A){a.setOpen(!1,me(A.reason,A.domEvent))}return w.events.on("close",C),()=>{w.events.off("close",C)}},[w.events,a]);const I=a.useState("hoverEnabled"),j=a.useState("disabled");od(R,{enabled:I&&!j&&x.type!=="context-menu"&&x.type!=="menubar",closeDelay:T});const M=d.useMemo(()=>({transitionStatus:g,side:l,align:u,open:p,nested:x.type==="menu",instant:b}),[g,l,u,p,x.type,b]),N=$e("div",t,{state:M,ref:[n,a.context.popupRef],stateAttributesMapping:m0,props:[m,{onKeyDown(C){f&&xd.has(C.key)&&C.stopPropagation()}},wo(g),i,{"data-rootownerid":S}]});let P=x.type===void 0||x.type==="context-menu";return(v||x.type==="menubar"&&h!==Bi)&&(P=!0),c.jsx(da,{context:R,modal:!1,disabled:!y,returnFocus:o===void 0?P:o,initialFocus:x.type!=="menu",restoreFocus:!0,externalTree:x.type!=="menubar"?w:void 0,previousFocusableElement:E,nextFocusableElement:x.type===void 0?a.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:x.type===void 0?a.context.beforeContentFocusGuardRef:void 0,children:N})}),vd=d.createContext(void 0);function h0(){const e=d.useContext(vd);if(e===void 0)throw new Error(qe(32));return e}const yd=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,{store:o}=Hn();return o.useState("mounted")||r?c.jsx(vd.Provider,{value:r,children:c.jsx(ca,{ref:n,...s})}):null});function xa(e){return $i(19)?e:e?"true":void 0}const x0=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:f=0,offsetParent:p="real"}=Kt(e,t)||{};if(u==null)return{};const g=eu(f),m={x:n,y:r},y=ta(s),b=ea(y),v=await i.getDimensions(u),x=y==="y",h=x?"top":"left",S=x?"bottom":"right",R=x?"clientHeight":"clientWidth",w=o.reference[b]+o.reference[y]-m[y]-o.floating[b],T=m[y]-o.reference[y],E=p==="real"?await i.getOffsetParent?.(u):a.floating;let I=a.floating[R]||o.floating[b];(!I||!await i.isElement?.(E))&&(I=a.floating[R]||o.floating[b]);const j=w/2-T/2,M=I/2-v[b]/2-1,N=Math.min(g[h],M),P=Math.min(g[S],M),C=N,A=I-v[b]-P,O=I/2-v[b]/2+j,F=bi(C,O,A),L=!l.arrow&&xn(s)!=null&&O!==F&&o.reference[b]/2-(O<C?N:P)-v[b]/2<0,k=L?O<C?O-C:O-A:0;return{[y]:m[y]+k,data:{[y]:F,centerOffset:O-F-k,...L&&{alignmentOffset:k}},reset:L}}}),b0=(e,t)=>({...x0(e),options:[e,t]}),v0={name:"hide",async fn(e){const{width:t,height:n,x:r,y:s}=e.rects.reference,o=t===0&&n===0&&r===0&&s===0;return{data:{referenceHidden:(await Tx().fn(e)).data?.referenceHidden||o}}}},_s={sideX:"left",sideY:"top"},y0={name:"adaptiveOrigin",async fn(e){const{x:t,y:n,rects:{floating:r},elements:{floating:s},platform:o,strategy:i,placement:a}=e,l=tt(s),u=l.getComputedStyle(s);if(!(u.transitionDuration!=="0s"&&u.transitionDuration!==""))return{x:t,y:n,data:_s};const p=await o.getOffsetParent?.(s);let g={width:0,height:0};if(i==="fixed"&&l?.visualViewport)g={width:l.visualViewport.width,height:l.visualViewport.height};else if(p===l){const h=Qt(s);g={width:h.documentElement.clientWidth,height:h.documentElement.clientHeight}}else await o.isElement?.(p)&&(g=await o.getDimensions(p));const m=pt(a);let y=t,b=n;m==="left"&&(y=g.width-(t+r.width)),m==="top"&&(b=g.height-(n+r.height));const v=m==="left"?"right":_s.sideX,x=m==="top"?"bottom":_s.sideY;return{x:y,y:b,data:{sideX:v,sideY:x}}}};function wd(e,t,n){const r=e==="inline-start"||e==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[t]}function Vl(e,t,n){const{rects:r,placement:s}=e;return{side:wd(t,pt(s),n),align:xn(s)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function ba(e){const{anchor:t,positionMethod:n="absolute",side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,collisionBoundary:a,collisionPadding:l=5,sticky:u=!1,arrowPadding:f=5,disableAnchorTracking:p=!1,keepMounted:g=!1,floatingRootContext:m,mounted:y,collisionAvoidance:b,shiftCrossAxis:v=!1,nodeId:x,adaptiveOrigin:h,lazyFlip:S=!1,externalTree:R}=e,[w,T]=d.useState(null);!y&&w!==null&&T(null);const E=b.side||"flip",I=b.align||"flip",j=b.fallbackAxisSide||"end",M=typeof t=="function"?t:void 0,N=Z(M),P=M?N:t,C=rt(t),O=xr()==="rtl",F=w||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":O?"left":"right","inline-start":O?"right":"left"}[r],L=o==="center"?F:`${F}-${o}`;let k=l;const _=1,z=r==="bottom"?_:0,X=r==="top"?_:0,H=r==="right"?_:0,B=r==="left"?_:0;typeof k=="number"?k={top:k+z,right:k+B,bottom:k+X,left:k+H}:k&&(k={top:(k.top||0)+z,right:(k.right||0)+B,bottom:(k.bottom||0)+X,left:(k.left||0)+H});const Q={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:k},re=d.useRef(null),le=rt(s),ue=rt(i),V=[Sx(be=>{const Se=Vl(be,r,O),Qe=typeof le.current=="function"?le.current(Se):le.current,ke=typeof ue.current=="function"?ue.current(Se):ue.current;return{mainAxis:Qe,crossAxis:ke,alignmentAxis:ke}},[typeof s!="function"?s:0,typeof i!="function"?i:0,O,r])],D=I==="none"&&E!=="shift",se=!D&&(u||v||E==="shift"),K=E==="none"?null:Cx({...Q,padding:{top:k.top+_,right:k.right+_,bottom:k.bottom+_,left:k.left+_},mainAxis:!v&&E==="flip",crossAxis:I==="flip"?"alignment":!1,fallbackAxisSideDirection:j}),ae=D?null:Rx(be=>{const Se=Qt(be.elements.floating).documentElement;return{...Q,rootBoundary:v?{x:0,y:0,width:Se.clientWidth,height:Se.clientHeight}:void 0,mainAxis:I!=="none",crossAxis:se,limiter:u||v?void 0:Ex(Qe=>{if(!re.current)return{};const{width:ke,height:It}=re.current.getBoundingClientRect(),We=Ct(pt(Qe.placement)),Ue=We==="y"?ke:It,yn=We==="y"?k.left+k.right:k.top+k.bottom;return{offset:Ue/2+yn/2}})}},[Q,u,v,k,I]);E==="shift"||I==="shift"||o==="center"?V.push(ae,K):V.push(K,ae),V.push(Ix({...Q,apply({elements:{floating:be},rects:{reference:Se},availableWidth:Qe,availableHeight:ke}){Object.entries({"--available-width":`${Qe}px`,"--available-height":`${ke}px`,"--anchor-width":`${Se.width}px`,"--anchor-height":`${Se.height}px`}).forEach(([It,We])=>{be.style.setProperty(It,We)})}}),b0(()=>({element:re.current||document.createElement("div"),padding:f,offsetParent:"floating"}),[f]),{name:"transformOrigin",fn(be){const{elements:Se,middlewareData:Qe,placement:ke,rects:It,y:We}=be,Ue=pt(ke),yn=Ct(Ue),wr=re.current,wn=Qe.arrow?.x||0,fs=Qe.arrow?.y||0,jt=wr?.clientWidth||0,Sn=wr?.clientHeight||0,ct=wn+jt/2,Ce=fs+Sn/2,Rn=Math.abs(Qe.shift?.y||0),Sr=It.reference.height/2,Bt=typeof s=="function"?s(Vl(be,r,O)):s,Bn=Rn>Bt,ko={top:`${ct}px calc(100% + ${Bt}px)`,bottom:`${ct}px ${-Bt}px`,left:`calc(100% + ${Bt}px) ${Ce}px`,right:`${-Bt}px ${Ce}px`}[Ue],Wn=`${ct}px ${It.reference.y+Sr-We}px`;return Se.floating.style.setProperty("--transform-origin",se&&yn==="y"&&Bn?Wn:ko),{}}},v0,h),ne(()=>{!y&&m&&m.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[y,m]);const W=d.useMemo(()=>({elementResize:!p&&typeof ResizeObserver<"u",layoutShift:!p&&typeof IntersectionObserver<"u"}),[p]),{refs:U,elements:Y,x:ve,y:xe,middlewareData:Re,update:ee,placement:fe,context:te,isPositioned:de,floatingStyles:oe}=Zx({rootContext:m,placement:L,middleware:V,strategy:n,whileElementsMounted:g?void 0:(...be)=>Al(...be,W),nodeId:x,externalTree:R}),{sideX:Ee,sideY:Pe}=Re.adaptiveOrigin||_s,ye=de?n:"fixed",je=d.useMemo(()=>h?{position:ye,[Ee]:ve,[Pe]:xe}:{position:ye,...oe},[h,ye,Ee,ve,Pe,xe,oe]),_e=d.useRef(null);ne(()=>{if(!y)return;const be=C.current,Se=typeof be=="function"?be():be,ke=(Hl(Se)?Se.current:Se)||null||null;ke!==_e.current&&(U.setPositionReference(ke),_e.current=ke)},[y,U,P,C]),d.useEffect(()=>{if(!y)return;const be=C.current;typeof be!="function"&&Hl(be)&&be.current!==_e.current&&(U.setPositionReference(be.current),_e.current=be.current)},[y,U,P,C]),d.useEffect(()=>{if(g&&y&&Y.domReference&&Y.floating)return Al(Y.domReference,Y.floating,ee,W)},[g,y,Y,ee,W]);const Be=pt(fe),Ke=wd(r,Be,O),Le=xn(fe)||"center",q=!!Re.hide?.referenceHidden;ne(()=>{S&&y&&de&&T(Be)},[S,y,de,Be]);const Ae=d.useMemo(()=>({position:"absolute",top:Re.arrow?.y,left:Re.arrow?.x}),[Re.arrow]),De=Re.arrow?.centerOffset!==0;return d.useMemo(()=>({positionerStyles:je,arrowStyles:Ae,arrowRef:re,arrowUncentered:De,side:Ke,align:Le,physicalSide:Be,anchorHidden:q,refs:U,context:te,isPositioned:de,update:ee}),[je,Ae,re,De,Ke,Le,Be,q,U,te,de,ee])}function Hl(e){return e!=null&&"current"in e}function Sd(e){const{children:t,elementsRef:n,labelsRef:r,onMapChange:s}=e,o=Z(s),i=d.useRef(0),a=ut(S0).current,l=ut(w0).current,[u,f]=d.useState(0),p=d.useRef(u),g=Z((x,h)=>{l.set(x,h??null),p.current+=1,f(p.current)}),m=Z(x=>{l.delete(x),p.current+=1,f(p.current)}),y=d.useMemo(()=>{const x=new Map;return Array.from(l.keys()).filter(S=>S.isConnected).sort(R0).forEach((S,R)=>{const w=l.get(S)??{};x.set(S,{...w,index:R})}),x},[l,u]);ne(()=>{if(typeof MutationObserver!="function"||y.size===0)return;const x=new MutationObserver(h=>{const S=new Set,R=w=>S.has(w)?S.delete(w):S.add(w);h.forEach(w=>{w.removedNodes.forEach(R),w.addedNodes.forEach(R)}),S.size===0&&(p.current+=1,f(p.current))});return y.forEach((h,S)=>{S.parentElement&&x.observe(S.parentElement,{childList:!0})}),()=>{x.disconnect()}},[y]),ne(()=>{p.current===u&&(n.current.length!==y.size&&(n.current.length=y.size),r&&r.current.length!==y.size&&(r.current.length=y.size),i.current=y.size),o(y)},[o,y,n,r,u]),ne(()=>()=>{n.current=[]},[n]),ne(()=>()=>{r&&(r.current=[])},[r]);const b=Z(x=>(a.add(x),()=>{a.delete(x)}));ne(()=>{a.forEach(x=>x(y))},[a,y]);const v=d.useMemo(()=>({register:g,unregister:m,subscribeMapChange:b,elementsRef:n,labelsRef:r,nextIndexRef:i}),[g,m,b,n,r,i]);return c.jsx(ku.Provider,{value:v,children:t})}function w0(){return new Map}function S0(){return new Set}function R0(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const va=d.forwardRef(function(t,n){const{cutout:r,...s}=t;let o;if(r){const i=r?.getBoundingClientRect();o=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${i.left}px ${i.top}px,
      ${i.left}px ${i.bottom}px,
      ${i.right}px ${i.bottom}px,
      ${i.right}px ${i.top}px,
      ${i.left}px ${i.top}px
    )`}return c.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:o}})}),Rd=d.forwardRef(function(t,n){const{anchor:r,positionMethod:s="absolute",className:o,render:i,side:a,align:l,sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=Dc,...x}=t,{store:h}=Hn(),S=h0(),R=xo(!0),w=h.useState("parent"),T=h.useState("floatingRootContext"),E=h.useState("floatingTreeRoot"),I=h.useState("mounted"),j=h.useState("open"),M=h.useState("modal"),N=h.useState("activeTriggerElement"),P=h.useState("lastOpenChangeReason"),C=h.useState("floatingNodeId"),A=h.useState("floatingParentNodeId");let O=r,F=u,L=f,k=l;w.type==="context-menu"&&(O=r??w.context?.anchor,k=k??"start",!a&&k!=="center"&&(L=t.alignOffset??2,F=t.sideOffset??-5));let _=a,z=k;w.type==="menu"?(_=_??"inline-end",z=z??"start"):w.type==="menubar"&&(_=_??"bottom",z=z??"start");const X=w.type==="context-menu",H=ba({anchor:O,floatingRootContext:T,positionMethod:R?"fixed":s,mounted:I,side:_,sideOffset:F,align:z,alignOffset:L,arrowPadding:X?0:m,collisionBoundary:p,collisionPadding:g,sticky:y,nodeId:C,keepMounted:S,disableAnchorTracking:b,collisionAvoidance:v,shiftCrossAxis:X,externalTree:E}),B=d.useMemo(()=>{const ce={};return j||(ce.pointerEvents="none"),{role:"presentation",hidden:!I,style:{...H.positionerStyles,...ce}}},[j,I,H.positionerStyles]);d.useEffect(()=>{function ce(V){V.open?(V.parentNodeId===C&&h.set("hoverEnabled",!1),V.nodeId!==C&&V.parentNodeId===h.select("floatingParentNodeId")&&h.setOpen(!1,me(Nr))):V.parentNodeId===C&&V.reason!==Nr&&h.set("hoverEnabled",!0)}return E.events.on("menuopenchange",ce),()=>{E.events.off("menuopenchange",ce)}},[h,E.events,C]),d.useEffect(()=>{if(h.select("floatingParentNodeId")==null)return;function ce(V){if(V.open||V.nodeId!==h.select("floatingParentNodeId"))return;const D=V.reason??Nr;h.setOpen(!1,me(D))}return E.events.on("menuopenchange",ce),()=>{E.events.off("menuopenchange",ce)}},[E.events,h]),d.useEffect(()=>{function ce(V){!j||V.nodeId!==h.select("floatingParentNodeId")||V.target&&N&&N!==V.target&&h.setOpen(!1,me(Nr))}return E.events.on("itemhover",ce),()=>{E.events.off("itemhover",ce)}},[E.events,j,N,h]),d.useEffect(()=>{const ce={open:j,nodeId:C,parentNodeId:A,reason:h.select("lastOpenChangeReason")};E.events.emit("menuopenchange",ce)},[E.events,j,h,C,A]);const Q=d.useMemo(()=>({open:j,side:H.side,align:H.align,anchorHidden:H.anchorHidden,nested:w.type==="menu"}),[j,H.side,H.align,H.anchorHidden,w.type]),re=d.useMemo(()=>({side:H.side,align:H.align,arrowRef:H.arrowRef,arrowUncentered:H.arrowUncentered,arrowStyles:H.arrowStyles,nodeId:H.context.nodeId}),[H.side,H.align,H.arrowRef,H.arrowUncentered,H.arrowStyles,H.context.nodeId]),le=$e("div",t,{state:Q,stateAttributesMapping:br,ref:[n,h.useStateSetter("positionerElement")],props:[B,x]}),ue=I&&w.type!=="menu"&&(w.type!=="menubar"&&M&&P!==ot||w.type==="menubar"&&w.context.modal);let J=null;return w.type==="menubar"?J=w.context.contentElement:w.type===void 0&&(J=N),c.jsxs(Tu.Provider,{value:re,children:[ue&&c.jsx(va,{ref:w.type==="context-menu"||w.type==="nested-context-menu"?w.context.internalBackdropRef:null,inert:xa(!j),cutout:J}),c.jsx(Lu,{id:C,children:c.jsx(Sd,{elementsRef:h.context.itemDomElements,labelsRef:h.context.itemLabels,children:le})})]})});let $l={},Bl={},Wl="";function E0(e){if(typeof document>"u")return!1;const t=Qt(e);return tt(t).innerWidth-t.documentElement.clientWidth>0}function C0(e){const t=Qt(e),n=t.documentElement,r=t.body,s=_n(n)?n:r,o=s.style.overflow;return s.style.overflow="hidden",()=>{s.style.overflow=o}}function I0(e){const t=Qt(e),n=t.documentElement,r=t.body,s=tt(n);let o=0,i=0;const a=Ye.create(),l=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable");if(Uc&&(s.visualViewport?.scale??1)!==1)return()=>{};function u(){const g=s.getComputedStyle(n),m=s.getComputedStyle(r),v=(g.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";o=n.scrollTop,i=n.scrollLeft,$l={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},Wl=n.style.scrollBehavior,Bl={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const x=n.scrollHeight>n.clientHeight,h=n.scrollWidth>n.clientWidth,S=g.overflowY==="scroll"||m.overflowY==="scroll",R=g.overflowX==="scroll"||m.overflowX==="scroll",w=Math.max(0,s.innerWidth-n.clientWidth),T=Math.max(0,s.innerHeight-n.clientHeight),E=parseFloat(m.marginTop)+parseFloat(m.marginBottom),I=parseFloat(m.marginLeft)+parseFloat(m.marginRight),j=_n(n)?n:r;if(l){n.style.scrollbarGutter=v,j.style.overflowY="hidden",j.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:v,overflowY:"hidden",overflowX:"hidden"}),(x||S)&&(n.style.overflowY="scroll"),(h||R)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:E||T?`calc(100dvh - ${E+T}px)`:"100dvh",width:I||w?`calc(100vw - ${I+w}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=o,r.scrollLeft=i,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function f(){Object.assign(n.style,$l),Object.assign(r.style,Bl),l||(n.scrollTop=o,n.scrollLeft=i,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=Wl)}function p(){f(),a.request(u)}return u(),s.addEventListener("resize",p),()=>{a.cancel(),f(),typeof s.removeEventListener=="function"&&s.removeEventListener("resize",p)}}class T0{lockCount=0;restore=null;timeoutLock=pn.create();timeoutUnlock=pn.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const r=Qt(t).documentElement,s=tt(r).getComputedStyle(r).overflowY;if(s==="hidden"||s==="clip"){this.restore=Xe;return}const o=jg||!E0(t);this.restore=o?C0(t):I0(t)}}const P0=new T0;function ya(e=!0,t=null){ne(()=>{if(e)return P0.acquire(t)},[e,t])}const O0=d.createContext(null);function Ed(e){return d.useContext(O0)}function M0(e){const t=d.useRef(""),n=d.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:d.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function wa(e){const[t,n]=d.useState(null),r=Z((a,l)=>{e||n(l)}),s=d.useCallback(()=>{n(null)},[]),{onClick:o,onPointerDown:i}=M0(r);return d.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:o,onPointerDown:i}}),[t,s,o,i])}const k0={...td,disabled:$(e=>e.parent.type==="menubar"&&e.parent.context.disabled||e.disabled),modal:$(e=>(e.parent.type===void 0||e.parent.type==="context-menu")&&(e.modal??!0)),allowMouseEnter:$(e=>e.parent.type==="menu"?e.parent.store.select("allowMouseEnter"):e.allowMouseEnter),stickIfOpen:$(e=>e.stickIfOpen),parent:$(e=>e.parent),rootId:$(e=>e.parent.type==="menu"?e.parent.store.select("rootId"):e.parent.type!==void 0?e.parent.context.rootId:e.rootId),activeIndex:$(e=>e.activeIndex),isActive:$((e,t)=>e.activeIndex===t),hoverEnabled:$(e=>e.hoverEnabled),instantType:$(e=>e.instantType),lastOpenChangeReason:$(e=>e.openChangeReason),floatingTreeRoot:$(e=>e.parent.type==="menu"?e.parent.store.select("floatingTreeRoot"):e.floatingTreeRoot),floatingNodeId:$(e=>e.floatingNodeId),floatingParentNodeId:$(e=>e.floatingParentNodeId),itemProps:$(e=>e.itemProps),closeDelay:$(e=>e.closeDelay),keyboardEventRelay:$(e=>{if(e.keyboardEventRelay)return e.keyboardEventRelay;if(e.parent.type==="menu")return e.parent.store.select("keyboardEventRelay")})};class Sa extends ma{constructor(t){super({...N0(),...t},{positionerRef:d.createRef(),popupRef:d.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:d.createRef(),beforeContentFocusGuardRef:d.createRef(),onOpenChangeComplete:void 0,triggerElements:new vo},k0),this.observe($(n=>n.allowMouseEnter),(n,r)=>{this.state.parent.type==="menu"&&n!==r&&this.state.parent.store.set("allowMouseEnter",n)}),this.unsubscribeParentListener=this.observe("parent",n=>{if(this.unsubscribeParentListener?.(),n.type==="menu"){this.unsubscribeParentListener=n.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=n.store.context.allowMouseUpTriggerRef;return}n.type!==void 0&&(this.context.allowMouseUpTriggerRef=n.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(t,n){this.state.floatingRootContext.context.events.emit("setOpen",{open:t,eventDetails:n})}static useStore(t,n){return ut(()=>t??new Sa(n)).current}unsubscribeParentListener=null}function N0(){return{...ed(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new ia,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:He,keyboardEventRelay:void 0,closeDelay:0}}const j0=d.createContext(void 0);function A0(){return d.useContext(j0)}function Cd(e){const{children:t,open:n,onOpenChange:r,onOpenChangeComplete:s,defaultOpen:o=!1,disabled:i=!1,modal:a,loopFocus:l=!0,orientation:u="vertical",actionsRef:f,closeParentOnEsc:p=!0,handle:g,triggerId:m,defaultTriggerId:y=null,highlightItemOnHover:b=!0}=e,v=xo(!0),x=Hn(!0),h=Ed(),S=A0(),R=d.useMemo(()=>S&&x?{type:"menu",store:x.store}:h?{type:"menubar",context:h}:v&&!x?{type:"context-menu",context:v}:{type:void 0},[v,x,h,S]),w=Sa.useStore(g?.store,{parent:R}),T=w.useState("floatingTreeRoot"),E=aa(T),I=$t();ne(()=>{v&&!x?w.update({parent:{type:"context-menu",context:v},floatingNodeId:E,floatingParentNodeId:I}):x&&w.update({floatingNodeId:E,floatingParentNodeId:I})},[v,x,E,I,w]),w.useControlledProp("open",n,o),w.useControlledProp("activeTriggerId",m,y),w.useContextCallback("onOpenChangeComplete",s);const j=w.useState("open"),M=w.useState("activeTriggerElement"),N=w.useState("positionerElement"),P=w.useState("hoverEnabled"),C=w.useState("modal"),A=w.useState("disabled"),O=w.useState("lastOpenChangeReason"),F=w.useState("parent"),L=w.useState("activeIndex"),k=w.useState("payload"),_=w.useState("floatingParentNodeId"),z=d.useRef(null),X=_!=null;let H;w.useSyncedValues({disabled:i,modal:F.type===void 0?a:void 0,rootId:Ln()});const{openMethod:B,triggerProps:Q,reset:re}=wa(j);Zu(w);const{forceUnmount:le}=Ju(j,w,()=>{w.update({allowMouseEnter:!1,stickIfOpen:!0}),re()}),ue=d.useRef(F.type!=="context-menu"),J=it();d.useEffect(()=>{if(j||(z.current=null),F.type==="context-menu"){if(!j){J.clear(),ue.current=!1;return}J.start(500,()=>{ue.current=!0})}},[J,j,F.type]),ya(j&&C&&O!==ot&&B!=="touch",N),ne(()=>{!j&&!P&&w.set("hoverEnabled",!0)},[j,P,w]);const ce=d.useRef(!0),V=it(),D=Z((q,Ae)=>{const De=Ae.reason;if(j===q&&Ae.trigger===M||(Ae.preventUnmountOnClose=()=>{w.set("preventUnmountingOnClose",!0)},!q&&Ae.trigger==null&&(Ae.trigger=M??void 0),r?.(q,Ae),Ae.isCanceled))return;const be={open:q,nativeEvent:Ae.event,reason:Ae.reason,nested:X};H?.emit("openchange",be);const Se=Ae.event;if(q===!1&&Se?.type==="click"&&Se.pointerType==="touch"&&!ce.current)return;if(!q&&L!==null){const We=w.context.itemDomElements.current[L];queueMicrotask(()=>{We?.setAttribute("tabindex","-1")})}q&&De===$s?(ce.current=!1,V.start(300,()=>{ce.current=!0})):(ce.current=!0,V.clear());const Qe=(De===Mt||De===Wi)&&Se.detail===0&&Se?.isTrusted,ke=!q&&(De===ns||De==null);function It(){const We={open:q,openChangeReason:De};z.current=Ae.event??null;const Ue=Ae.trigger?.id??null;(Ue||q)&&(We.activeTriggerId=Ue,We.activeTriggerElement=Ae.trigger??null),w.update(We)}De===ot?nt.flushSync(It):It(),F.type==="menubar"&&(De===$s||De===qt||De===ot||De===As||De===Nr)?w.set("instantType","group"):Qe||ke?w.set("instantType",Qe?"click":"dismiss"):w.set("instantType",void 0)}),se=d.useCallback(q=>{const Ae=me(q);return Ae.preventUnmountOnClose=()=>{w.set("preventUnmountingOnClose",!0)},Ae},[w]),K=d.useCallback(()=>{w.setOpen(!1,se(_c))},[w,se]);d.useImperativeHandle(f,()=>({unmount:le,close:K}),[le,K]);let ae;F.type==="context-menu"&&(ae=F.context),d.useImperativeHandle(ae?.positionerRef,()=>N,[N]),d.useImperativeHandle(ae?.actionsRef,()=>({setOpen:D}),[D]);const W=rd({popupStore:w,onOpenChange:D});H=W.context.events,d.useEffect(()=>{const q=({open:Ae,eventDetails:De})=>D(Ae,De);return H.on("setOpen",q),()=>{H?.off("setOpen",q)}},[H,D]);const U=ga(W,{enabled:!A,bubbles:p&&F.type==="menu",outsidePress(){return F.type!=="context-menu"||z.current?.type==="contextmenu"?!0:ue.current},externalTree:X?T:void 0}),Y=ld(W,{role:"menu"}),ve=xr(),xe=d.useCallback(q=>{w.select("activeIndex")!==q&&w.set("activeIndex",q)},[w]),Re=ad(W,{enabled:!A,listRef:w.context.itemDomElements,activeIndex:L,nested:F.type!==void 0,loopFocus:l,orientation:u,parentOrientation:F.type==="menubar"?F.context.orientation:void 0,rtl:ve==="rtl",disabledIndices:Xt,onNavigate:xe,openOnArrowKeyDown:F.type!=="context-menu",externalTree:X?T:void 0,focusItemOnHover:b}),ee=d.useCallback(q=>{w.context.typingRef.current=q},[w]),fe=c0(W,{listRef:w.context.itemLabels,activeIndex:L,resetMs:Gp,onMatch:q=>{j&&q!==L&&w.set("activeIndex",q)},onTypingChange:ee}),{getReferenceProps:te,getFloatingProps:de,getItemProps:oe,getTriggerProps:Ee}=cs([U,Y,Re,fe]),Pe=d.useMemo(()=>{const q=io(te(),{onMouseEnter(){w.set("hoverEnabled",!0)},onMouseMove(){w.set("allowMouseEnter",!0)}},Q);return delete q.role,q},[te,w,Q]),ye=d.useMemo(()=>{const q=Ee();if(!q)return q;const{role:Ae,["aria-controls"]:De,...be}=q;return be},[Ee]),je=gr(),_e=d.useMemo(()=>de({onMouseEnter(){F.type==="menu"&&je.request(()=>w.set("hoverEnabled",!1))},onMouseMove(){w.set("allowMouseEnter",!0)},onClick(){w.select("hoverEnabled")&&w.set("hoverEnabled",!1)},onKeyDown(q){const Ae=w.select("keyboardEventRelay");Ae&&!q.isPropagationStopped()&&Ae(q)}}),[de,F.type,je,w]),Be=d.useMemo(()=>oe(),[oe]);w.useSyncedValues({floatingRootContext:W,activeTriggerProps:Pe,inactiveTriggerProps:ye,popupProps:_e,itemProps:Be});const Ke=d.useMemo(()=>({store:w,parent:R}),[w,R]),Le=c.jsx(Ou.Provider,{value:Ke,children:typeof t=="function"?t({payload:k}):t});return F.type===void 0||F.type==="context-menu"?c.jsx(Du,{externalTree:T,children:Le}):Le}function F0(e){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e,"::before"),r=window.getComputedStyle(e,"::after");if(!(n.content!=="none"||r.content!=="none"))return t;const o=parseFloat(n.width)||0,i=parseFloat(n.height)||0,a=parseFloat(r.width)||0,l=parseFloat(r.height)||0,u=Math.max(t.width,o,a),f=Math.max(t.height,i,l),p=u-t.width,g=f-t.height;return{left:t.left-p/2,right:t.right+p/2,top:t.top-g/2,bottom:t.bottom+g/2}}function L0(e={}){const{highlightItemOnHover:t,highlightedIndex:n,onHighlightedIndexChange:r}=Xi(),{ref:s,index:o}=oa(e),i=n===o,a=d.useRef(null),l=fn(s,a);return{compositeProps:d.useMemo(()=>({tabIndex:i?0:-1,onFocus(){r(o)},onMouseMove(){const f=a.current;if(!t||!f)return;const p=f.hasAttribute("disabled")||f.ariaDisabled==="true";!i&&!p&&f.focus()}}),[i,r,o,t]),compositeRef:l,index:o}}function D0(e){const{render:t,className:n,state:r=He,props:s=Xt,refs:o=Xt,metadata:i,stateAttributesMapping:a,tag:l="div",...u}=e,{compositeProps:f,compositeRef:p}=L0({metadata:i});return $e(l,e,{state:r,ref:[...o,p],props:[f,...s,u],stateAttributesMapping:a})}function Id(e){if(ze(e)&&e.hasAttribute("data-rootownerid"))return e.getAttribute("data-rootownerid")??void 0;if(!Dt(e))return Id(zt(e))}function _0(e){const{enabled:t=!0,mouseDownAction:n,open:r}=e,s=d.useRef(!1);return d.useMemo(()=>t?{onMouseDown:o=>{(n==="open"&&!r||n==="close"&&r)&&(s.current=!0,Qt(o.currentTarget).addEventListener("click",()=>{s.current=!1},{once:!0}))},onClick:o=>{s.current&&(s.current=!1,o.preventBaseUIHandler())}}:He,[t,n,r])}const Ps=2,Td=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,id:a,openOnHover:l,delay:u=100,closeDelay:f=0,handle:p,payload:g,...m}=t,y=Hn(!0),b=p?.store??y?.store;if(!b)throw new Error(qe(85));const v=Dn(a),x=b.useState("isTriggerActive",v),h=b.useState("floatingRootContext"),S=b.useState("isOpenedByTrigger",v),R=d.useRef(null),w=V0(),T=Xi(!0),E=bn(),I=d.useMemo(()=>E??new ia,[E]),j=aa(I),M=$t(),{registerTrigger:N,isMountedByThisTrigger:P}=Qu(v,R,b,{payload:g,closeDelay:f,parent:w,floatingTreeRoot:I,floatingNodeId:j,floatingParentNodeId:M,keyboardEventRelay:T?.relayKeyboardEvent}),C=b.useState("disabled"),A=o||C||w.type==="menubar"&&w.context.disabled,{getButtonProps:O,buttonRef:F}=mr({disabled:A,native:i});d.useEffect(()=>{!S&&w.type===void 0&&(b.context.allowMouseUpTriggerRef.current=!1)},[b,S,w.type]);const L=d.useRef(null),k=it(),_=Z(Y=>{if(!L.current)return;k.clear(),b.context.allowMouseUpTriggerRef.current=!1;const ve=Y.target;if(Oe(L.current,ve)||Oe(b.select("positionerElement"),ve)||ve===L.current||ve!=null&&Id(ve)===b.select("rootId"))return;const xe=F0(L.current);Y.clientX>=xe.left-Ps&&Y.clientX<=xe.right+Ps&&Y.clientY>=xe.top-Ps&&Y.clientY<=xe.bottom+Ps||I.events.emit("close",{domEvent:Y,reason:og})});d.useEffect(()=>{S&&b.select("lastOpenChangeReason")===ot&&Qt(L.current).addEventListener("mouseup",_,{once:!0})},[S,_,b]);const z=w.type==="menubar"&&w.context.hasSubmenuOpen,H=id(h,{enabled:(l??z??!1)&&!A&&w.type!=="context-menu"&&(w.type!=="menubar"||z&&!P),handleClose:cd({blockPointerEvents:w.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:w.type===void 0?u:void 0,delay:{close:f},triggerElementRef:R,externalTree:I,isActiveTrigger:x}),B=z0(S,b.select("lastOpenChangeReason")),Q=fa(h,{enabled:!A&&w.type!=="context-menu",event:S&&w.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:w.type===void 0?B:!1}),re=Jx(h,{enabled:!A&&(w.type!=="menubar"&&S||z)}),le=_0({open:S,enabled:w.type==="menubar",mouseDownAction:"open"}),ue=cs([Q,re]),J=w.type==="menubar",ce=d.useMemo(()=>({disabled:A,open:S}),[A,S]),V=b.useState("triggerProps",P),D=[L,n,F,N,R],se=[ue.getReferenceProps(),H??He,V,{"aria-haspopup":"menu",id:v,onMouseDown:Y=>{if(b.select("open"))return;k.start(200,()=>{b.context.allowMouseUpTriggerRef.current=!0}),Qt(Y.currentTarget).addEventListener("mouseup",_,{once:!0})}},J?{role:"menuitem"}:{},le,m,O],K=d.useRef(null),ae=Z(Y=>{nt.flushSync(()=>{b.setOpen(!1,me(qt,Y.nativeEvent,Y.currentTarget))}),fu(K.current)?.focus()}),W=Z(Y=>{const ve=b.select("positionerElement");if(ve&&jn(Y,ve))b.context.beforeContentFocusGuardRef.current?.focus();else{nt.flushSync(()=>{b.setOpen(!1,me(qt,Y.nativeEvent,Y.currentTarget))});let xe=du(R.current);for(;xe!==null&&Oe(ve,xe)||xe?.hasAttribute("aria-hidden");){const Re=xe;if(xe=mo(xe),xe===Re)break}xe?.focus()}}),U=$e("button",t,{enabled:!J,stateAttributesMapping:Zs,state:ce,ref:D,props:se});return J?c.jsx(D0,{tag:"button",render:r,className:s,state:ce,refs:D,props:se,stateAttributesMapping:Zs}):S?c.jsxs(d.Fragment,{children:[c.jsx(gn,{ref:K,onFocus:ae},`${v}-pre-focus-guard`),c.jsx(d.Fragment,{children:U},v),c.jsx(gn,{ref:b.context.triggerFocusTargetRef,onFocus:W},`${v}-post-focus-guard`)]}):c.jsx(d.Fragment,{children:U},v)});function z0(e,t){const n=it(),[r,s]=d.useState(!1);return ne(()=>{e&&t==="trigger-hover"?(s(!0),n.start(Fc,()=>{s(!1)})):e||(n.clear(),s(!1))},[e,t,n]),r}function V0(){const e=xo(!0),t=Hn(!0),n=Ed();return d.useMemo(()=>n?{type:"menubar",context:n}:e&&!t?{type:"context-menu",context:e}:{type:void 0},[e,t,n])}const H0={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-xs gap-1.5",lg:"px-3 py-1.5 text-sm gap-2"},$0={default:{bg:"rgba(255, 255, 255, 0.10)",bgActive:"rgba(255, 255, 255, 0.20)",border:"rgba(255, 255, 255, 0.15)",borderActive:"rgba(255, 255, 255, 0.30)",text:"text-slate-200",textActive:"text-white"},cyan:{bg:"rgba(6, 182, 212, 0.15)",bgActive:"rgba(6, 182, 212, 0.35)",border:"rgba(6, 182, 212, 0.25)",borderActive:"rgba(6, 182, 212, 0.50)",text:"text-cyan-300",textActive:"text-cyan-200"},purple:{bg:"rgba(139, 92, 246, 0.15)",bgActive:"rgba(139, 92, 246, 0.35)",border:"rgba(139, 92, 246, 0.25)",borderActive:"rgba(139, 92, 246, 0.50)",text:"text-purple-300",textActive:"text-purple-200"},pink:{bg:"rgba(236, 72, 153, 0.15)",bgActive:"rgba(236, 72, 153, 0.35)",border:"rgba(236, 72, 153, 0.25)",borderActive:"rgba(236, 72, 153, 0.50)",text:"text-pink-300",textActive:"text-pink-200"},green:{bg:"rgba(34, 197, 94, 0.15)",bgActive:"rgba(34, 197, 94, 0.35)",border:"rgba(34, 197, 94, 0.25)",borderActive:"rgba(34, 197, 94, 0.50)",text:"text-green-300",textActive:"text-green-200"},amber:{bg:"rgba(251, 191, 36, 0.15)",bgActive:"rgba(251, 191, 36, 0.35)",border:"rgba(251, 191, 36, 0.25)",borderActive:"rgba(251, 191, 36, 0.50)",text:"text-amber-300",textActive:"text-amber-200"}};function B0({children:e,count:t,active:n=!1,variant:r="cyan",size:s="md",onClick:o,removable:i=!1,onRemove:a,icon:l,delay:u=0}){const f=$0[r];return c.jsxs(he.span,{initial:{opacity:0,scale:.9,y:8},animate:{opacity:1,scale:1,y:0},whileTap:{scale:.95},transition:{delay:u*.03,...ls},onClick:o,className:`
        inline-flex items-center rounded-full
        backdrop-blur-glass-xs
        ${H0[s]}
        ${n?f.textActive:f.text}
        ${o?"cursor-pointer hover:brightness-110":""}
        focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50
        select-none
        transition-[filter] duration-150
      `,style:{background:n?f.bgActive:f.bg,border:`1px solid ${n?f.borderActive:f.border}`,boxShadow:n?`0 4px 12px ${f.bg}, inset 0 1px 0 rgba(255,255,255,0.15)`:"0 2px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.08)"},children:[l&&c.jsx("span",{className:"flex-shrink-0",children:l}),c.jsx("span",{className:"truncate",children:e}),t!==void 0&&c.jsx("span",{className:"text-[10px] opacity-70 font-medium",children:t}),i&&a&&c.jsx(he.button,{onClick:p=>{p.stopPropagation(),a()},className:"p-0.5 -mr-1 rounded-full hover:bg-red-500/30 transition-colors",whileHover:{scale:1.2,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:s==="sm"?10:s==="md"?12:14,className:"text-red-400"})})]})}const Ra=mn(e=>({isOpen:!1,x:0,y:0,sections:[],show:(t,n,r)=>e({isOpen:!0,x:t,y:n,sections:r}),hide:()=>e({isOpen:!1,sections:[]})}));function W0(){const{isOpen:e,x:t,y:n,sections:r,hide:s}=Ra(),o=d.useRef(null),[i,a]=d.useState({x:0,y:0}),[l,u]=d.useState(-1),f=document.documentElement.classList.contains("light-mode");console.log("[GlassContextMenu] render - isOpen:",e,"x:",t,"y:",n,"sections:",r.length);const p=r.flatMap(b=>b.items.filter(v=>!v.disabled));d.useEffect(()=>{e&&a({x:t,y:n})},[e,t,n]),d.useEffect(()=>{if(!e||!o.current)return;const v=o.current.getBoundingClientRect(),x=8;let h=t,S=n;t+v.width>window.innerWidth-x&&(h=window.innerWidth-v.width-x),h<x&&(h=x),n+v.height>window.innerHeight-x&&(S=window.innerHeight-v.height-x),S<x&&(S=x),(h!==i.x||S!==i.y)&&a({x:h,y:S})},[e,t,n,i.x,i.y]),d.useEffect(()=>{if(!e)return;const b=setTimeout(()=>{const h=S=>{o.current&&!o.current.contains(S.target)&&s()};document.addEventListener("mousedown",h),window.__contextMenuCleanup=()=>{document.removeEventListener("mousedown",h)}},10),v=()=>s(),x=()=>s();return document.addEventListener("scroll",v,!0),window.addEventListener("resize",x),()=>{clearTimeout(b),window.__contextMenuCleanup&&(window.__contextMenuCleanup(),delete window.__contextMenuCleanup),document.removeEventListener("scroll",v,!0),window.removeEventListener("resize",x)}},[e,s]);const g=d.useCallback(b=>{if(e)switch(b.key){case"Escape":b.preventDefault(),s();break;case"ArrowDown":b.preventDefault(),u(v=>(v+1)%p.length);break;case"ArrowUp":b.preventDefault(),u(v=>(v-1+p.length)%p.length);break;case"Enter":b.preventDefault(),l>=0&&l<p.length&&(p[l].onClick(),s());break}},[e,s,p,l]);if(d.useEffect(()=>(document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)),[g]),d.useEffect(()=>{e&&u(-1)},[e]),!e)return null;let m=0;const y=f?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.75) 0%, rgba(248, 250, 252, 0.70) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(8, 145, 178, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(255, 255, 255, 0.5) inset"}:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.60) 0%, rgba(15, 23, 42, 0.50) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(6, 182, 212, 0.25)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05) inset"};return nt.createPortal(c.jsx(un,{children:e&&c.jsxs(he.div,{ref:o,initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},transition:{duration:.15,ease:"easeOut"},className:"fixed z-[9999] min-w-[200px] py-2 rounded-xl overflow-hidden",style:{left:i.x,top:i.y,...y},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:f?"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.8) 50%, transparent 100%)":"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%)"}}),r.map((b,v)=>c.jsxs("div",{children:[v>0&&c.jsx("div",{className:"my-1.5 mx-3 h-px bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent"}),b.items.map(x=>{const S=m++===l;return c.jsxs(he.button,{onClick:()=>{x.disabled||(x.onClick(),s())},disabled:x.disabled,className:`
                      w-full px-3 py-2 flex items-center gap-3 text-left text-sm transition-colors
                      ${x.disabled?"opacity-40 cursor-not-allowed":f?"cursor-pointer hover:bg-cyan-500/10":"cursor-pointer hover:bg-white/10"}
                      ${x.danger?"text-red-500 hover:text-red-600":f?"text-slate-700":"text-slate-200"}
                      ${S?"bg-cyan-500/20":""}
                    `,whileHover:x.disabled?void 0:{x:2},children:[x.icon&&c.jsx("span",{className:`w-4 h-4 flex items-center justify-center ${x.danger?"text-red-500":"text-cyan-500"}`,children:x.icon}),c.jsx("span",{className:"flex-1",children:x.label}),x.shortcut&&c.jsx("span",{className:`text-xs font-mono ${f?"text-slate-400":"text-slate-500"}`,children:x.shortcut})]},x.id)})]},v))]})}),document.body)}function ln({className:e="",animate:t=!0}){return c.jsx("div",{className:`
        relative overflow-hidden rounded-lg
        bg-gradient-to-r from-slate-800/50 via-slate-700/50 to-slate-800/50
        ${e}
      `,children:t&&c.jsx(he.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"}})})}function U0({size:e=200}){return c.jsxs("div",{className:"rounded-xl overflow-hidden bg-gradient-to-br from-slate-900/80 to-slate-900/60 border border-cyan-500/10",style:{height:e},children:[c.jsx(ln,{className:"h-[70%] rounded-none"}),c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsx(ln,{className:"h-3 w-3/4"}),c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((t,n)=>c.jsx(ln,{className:"h-3 w-3 rounded-full"},n))})]})]})}function Y0({size:e=200}){return c.jsxs("div",{className:"rounded-xl overflow-hidden bg-gradient-to-br from-slate-900/80 to-slate-900/60 border border-cyan-500/10",style:{height:e},children:[c.jsx("div",{className:"h-[70%] flex items-center justify-center",children:c.jsx(ln,{className:"w-14 h-14 rounded-xl"})}),c.jsxs("div",{className:"p-3 space-y-1",children:[c.jsx(ln,{className:"h-3 w-2/3"}),c.jsx(ln,{className:"h-2 w-1/3"})]})]})}function X0({count:e=12,itemSize:t=200}){return c.jsx("div",{className:"grid gap-5",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${t}px, 1fr))`},children:[...Array(e)].map((n,r)=>c.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.05,duration:.3},children:r%4===0?c.jsx(Y0,{size:t}):c.jsx(U0,{size:t})},r))})}function G0(){const{t:e}=Nt(),{drives:t,favorites:n,expandedPaths:r,folderCache:s,loadingPaths:o,sidebarWidth:i,isLoadingDrives:a,setSidebarWidth:l,loadDrives:u,toggleFolder:f,removeFavorite:p}=ah(),g=na(),m=vu(),y=Qm(),b=th(),[v,x]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{u()},[u]);const S=d.useCallback(R=>{R.preventDefault(),x(!0);const w=R.clientX,T=i,E=j=>{const M=j.clientX-w,N=Math.min($m,Math.max(Hm,T+M));l(N)},I=()=>{x(!1),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",I)},[i,l]);return c.jsxs("aside",{ref:h,className:"h-full flex flex-col glass-sidebar relative",style:{width:i},"data-testid":"sidebar",children:[c.jsx("div",{onMouseDown:S,className:`absolute right-0 top-0 bottom-0 w-1 cursor-ew-resize group hover:bg-cyan-500/30 transition-colors z-10 ${v?"bg-cyan-500/40":""}`,children:c.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-full bg-[var(--glass-border)] group-hover:bg-cyan-500/50 transition-colors"})}),c.jsxs("div",{className:"p-2 m-2 mb-0 flex-shrink-0 glass-section",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(rr,{size:14,className:"text-cyan-400"}),c.jsx("h3",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("sidebar.favorites")})]}),c.jsx(wt,{onClick:b,disabled:!g,title:e("sidebar.favorites"),size:"xs",variant:"ghost",children:c.jsx(np,{size:14})})]}),c.jsxs("ul",{"aria-label":e("sidebar.favorites"),className:"space-y-0.5",children:[n.map(R=>c.jsx(q0,{path:R.path,name:R.name,isActive:g===R.path,onSelect:y,onRemove:p},R.path)),n.length===0&&c.jsx("li",{className:"px-2 py-2 text-xs text-[var(--color-text-muted)] italic",children:e("sidebar.noFavorites")})]})]}),c.jsxs(pu,{className:"flex-1 overflow-hidden",children:[c.jsx(gu,{className:"h-full w-full p-2",children:c.jsxs("div",{className:"glass-section p-2 flex-1",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[c.jsx(rp,{size:14,className:"text-cyan-400"}),c.jsx("h3",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("sidebar.recentFolders")})]}),c.jsx("ul",{role:"tree","aria-label":e("sidebar.recentFolders"),className:"space-y-0.5",children:a?c.jsx("div",{className:"space-y-1.5 px-2 py-1",children:[...Array(4)].map((R,w)=>c.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:w*.08,duration:.3},className:"flex items-center gap-2",children:[c.jsx(ln,{className:"w-4 h-4 rounded"}),c.jsx(ln,{className:`h-3 rounded ${w%2===0?"w-3/4":"w-1/2"}`})]},w))}):t.map(R=>c.jsx(Pd,{item:R,level:0,currentFolder:g,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:f,onSelect:m},R.path))})]})}),c.jsx(hu,{orientation:"vertical",className:"w-2 p-0.5 flex touch-none select-none transition-colors bg-transparent hover:bg-white/5",children:c.jsx(xu,{className:"flex-1 rounded-full bg-cyan-500/30 hover:bg-cyan-500/50 transition-colors"})})]})]})}function q0({path:e,name:t,isActive:n,onSelect:r,onRemove:s}){return c.jsxs(he.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},whileHover:{x:4},transition:{type:"spring",damping:25,stiffness:400},className:`
        group flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer text-sm
        transition-colors duration-150
        ${n?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] hover:text-[var(--color-text-primary)] border border-transparent"}
      `,onClick:()=>r(e),children:[c.jsx(he.div,{whileHover:{scale:1.2,rotate:15},children:c.jsx(rr,{size:16,className:"text-cyan-400 flex-shrink-0",fill:"currentColor"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"truncate font-medium",children:t}),c.jsx("div",{className:"truncate text-xs text-[var(--color-text-muted)]",children:e})]}),c.jsx(he.button,{onClick:o=>{o.stopPropagation(),s(e)},className:"opacity-0 group-hover:opacity-100 p-1 rounded-lg hover:bg-red-500/20 text-[var(--color-text-secondary)] hover:text-red-400 transition-all",title:"Remove from favorites",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:14})})]})}function Pd({item:e,level:t,currentFolder:n,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:i,onSelect:a}){const l=d.useRef(null),u=r.has(e.path),f=o.has(e.path),p=n===e.path,g=s.get(e.path)||[],m=e.driveType!==void 0&&e.driveType!=="";d.useEffect(()=>{if(p&&l.current){const x=setTimeout(()=>{l.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},300);return()=>clearTimeout(x)}},[p]);const y=()=>{const x={size:16,className:"flex-shrink-0",strokeWidth:2};return m?c.jsx(he.div,{whileHover:{scale:1.15,rotateY:15},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.4))"},children:c.jsx(Br,{...x,className:"text-cyan-400 flex-shrink-0"})}):u?c.jsx(he.div,{animate:{rotateY:[0,10,0]},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.4))"},children:c.jsx(sr,{...x,className:"text-cyan-400 flex-shrink-0"})}):p?c.jsx(he.div,{animate:{scale:[1,1.1,1]},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.5))"},children:c.jsx(sr,{...x,className:"text-cyan-300 flex-shrink-0"})}):c.jsx(he.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d"},children:c.jsx(op,{...x,className:"text-[var(--color-text-secondary)] flex-shrink-0"})})},b=async x=>{x.stopPropagation(),e.hasSubfolders&&await i(e.path)},v=async()=>{await a(e.path)};return c.jsx(mg,{open:u,children:c.jsxs("li",{role:"treeitem","aria-expanded":e.hasSubfolders?u:void 0,"aria-selected":p,"aria-level":t+1,"aria-label":e.name,children:[c.jsxs(he.div,{ref:l,whileHover:{x:3},transition:{type:"spring",damping:25,stiffness:400},tabIndex:0,className:`
            flex items-center gap-1 py-1.5 px-2 rounded-lg cursor-pointer text-sm
            transition-colors duration-150 outline-none
            focus-visible:ring-2 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent
            ${p?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] hover:text-[var(--color-text-primary)] border border-transparent"}
          `,style:{paddingLeft:`calc(var(--sidebar-indent-base) + ${t} * var(--sidebar-indent-step))`},onClick:v,onKeyDown:x=>{x.key==="Enter"||x.key===" "?(x.preventDefault(),v()):(x.key==="ArrowRight"&&e.hasSubfolders&&!u||x.key==="ArrowLeft"&&u)&&(x.preventDefault(),i(e.path))},children:[c.jsx(he.button,{onClick:b,className:"w-4 h-4 flex items-center justify-center flex-shrink-0",whileHover:{scale:1.2},whileTap:{scale:.9},children:f?c.jsx(sp,{size:12,className:"text-[var(--color-text-secondary)] animate-spin"}):e.hasSubfolders?c.jsx(he.div,{animate:{rotateZ:u?0:-90},transition:{duration:.2},children:c.jsx(Vi,{size:14,className:"text-[var(--color-text-secondary)]"})}):c.jsx("span",{className:"w-3"})}),y(),c.jsx("span",{className:"flex-1 truncate",children:e.name})]}),g.length>0&&c.jsx(kg,{className:"overflow-hidden transition-all duration-200 data-[ending-style]:h-0 data-[ending-style]:opacity-0 data-[starting-style]:h-0 data-[starting-style]:opacity-0",children:c.jsx("ul",{role:"group",children:g.map(x=>c.jsx(Pd,{item:x,level:t+1,currentFolder:n,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:i,onSelect:a},x.path))})})]})})}const Od=mn((e,t)=>({isOpen:!1,currentImage:null,currentIndex:0,images:[],zoomLevel:Tn,open:(n,r)=>{const s=r.findIndex(o=>o.path===n.path);e({isOpen:!0,currentImage:n,currentIndex:s>=0?s:0,images:r,zoomLevel:Tn})},close:()=>{e({isOpen:!1,currentImage:null,zoomLevel:Tn})},next:()=>{const{images:n,currentIndex:r}=t();if(n.length===0)return;const s=(r+1)%n.length;e({currentIndex:s,currentImage:n[s],zoomLevel:Tn})},previous:()=>{const{images:n,currentIndex:r}=t();if(n.length===0)return;const s=r===0?n.length-1:r-1;e({currentIndex:s,currentImage:n[s],zoomLevel:Tn})},goToIndex:n=>{const{images:r}=t();n>=0&&n<r.length&&e({currentIndex:n,currentImage:r[n],zoomLevel:Tn})},setZoom:n=>{e({zoomLevel:Math.max(vl,Math.min(yl,n))})},zoomIn:()=>{const{zoomLevel:n}=t();e({zoomLevel:Math.min(yl,n+wl)})},zoomOut:()=>{const{zoomLevel:n}=t();e({zoomLevel:Math.max(vl,n-wl)})},resetZoom:()=>{e({zoomLevel:Tn})}})),Gt=mn(e=>({toasts:[],addToast:(t,n,r=Ym)=>{const s=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e(o=>({toasts:[...o.toasts,{id:s,type:t,message:n,duration:r}]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(i=>i.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))},success:t=>{const{addToast:n}=Gt.getState();n("success",t)},error:t=>{const{addToast:n}=Gt.getState();n("error",t,Xm)},info:t=>{const{addToast:n}=Gt.getState();n("info",t)},warning:t=>{const{addToast:n}=Gt.getState();n("warning",t,Gm)}}));function K0({thumbnail:e,thumbnailUrl:t,fileName:n,isLoading:r,thumbnailSize:s,onThumbnailError:o}){const i=e?`data:image/jpeg;base64,${e}`:t||null;return c.jsxs("div",{className:"bg-[var(--glass-bg)] relative overflow-hidden",style:{height:s?`${s}px`:void 0,aspectRatio:s?void 0:"1/1"},children:[r&&c.jsx("div",{className:"absolute inset-0 bg-[var(--glass-bg-hover)] animate-pulse"}),!r&&i&&c.jsx("div",{className:"absolute inset-0 scale-110 blur-xl opacity-50 saturate-150",style:{backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center"}}),r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:c.jsx(zi,{size:"md",color:"secondary"})}),!r&&t?c.jsx("img",{src:t,alt:n,className:"relative z-[1] w-full h-full object-contain transition-opacity duration-300",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"},loading:"lazy",onError:o}):!r&&e?c.jsx("img",{src:`data:image/jpeg;base64,${e}`,alt:n,className:"relative z-[1] w-full h-full object-contain transition-opacity duration-300",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}}):!r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(oo,{size:32,className:"text-[var(--color-text-muted)]"})})]})}function Q0({rating:e,isSaving:t,onRate:n,onClear:r}){const[s,o]=d.useState(0),[i,a]=d.useState(null),l=(u,f)=>{a(f),setTimeout(()=>a(null),600),n(u,f)};return c.jsxs("div",{className:"flex items-center justify-center gap-0.5 flex-shrink-0",onMouseLeave:()=>o(0),children:[[0,1,2,3,4].map(u=>{const f=u<(s||e),p=i===u;return c.jsxs(he.button,{onClick:g=>l(g,u),onMouseEnter:()=>o(u+1),className:"p-1 transition-all relative",whileHover:{scale:1.2,y:-1},whileTap:{scale:.9},style:{filter:f?"drop-shadow(0 1px 2px rgba(6,182,212,0.5))":"none"},children:[c.jsx(rr,{size:16,"data-testid":"star-icon",className:f?"text-cyan-400":"text-white/40",fill:f?"currentColor":"none",strokeWidth:2}),p&&c.jsx(c.Fragment,{children:[0,1,2,3].map(g=>c.jsx(he.span,{className:"absolute w-1 h-1 rounded-full bg-cyan-400",initial:{opacity:1,scale:1,x:0,y:0},animate:{opacity:0,scale:0,x:[0,g===0?-12:g===1?12:0],y:[0,g===0||g===1?-6:g===2?-12:8]},transition:{duration:.5,ease:"easeOut"},style:{left:"50%",top:"50%",boxShadow:"0 0 4px 2px rgba(6,182,212,0.6)"}},g))})]},u)}),e>0&&c.jsx(he.button,{onClick:r,disabled:t,className:"ml-1 p-1 rounded hover:bg-white/10 text-white/40 hover:text-red-400 transition-colors disabled:opacity-50",title:"Rating lschen",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:12})})]})}const Ea=mn((e,t)=>({items:[],operation:null,copy:n=>e({items:n,operation:"copy"}),cut:n=>e({items:n,operation:"cut"}),paste:async n=>{const{items:r,operation:s,clear:o}=t();if(!r.length||!s)return;const i=r.map(a=>a.path);try{s==="copy"?await et.copyFiles(i,n):(await et.moveFiles(i,n),o())}catch(a){throw Me.getState().setError(a.message),a}},clear:()=>e({items:[],operation:null}),hasItems:()=>t().items.length>0})),Ca=mn(e=>({type:null,data:null,openModal:(t,n)=>e({type:t,data:n}),closeModal:()=>e({type:null,data:null})}));function Z0({image:e,allImages:t}){const{selectedImages:n,selectImage:r,images:s}=Me(),{open:o}=Od(),{show:i}=Ra(),{copy:a,cut:l}=Ea(),{openModal:u}=Ca(),f=n.has(e.path);return d.useCallback(g=>{g.preventDefault(),g.stopPropagation(),f||r(e.path,!1,!1);const m=f?Array.from(n):[e.path],y=m.length>1,b=t.length>0?t:s,v=[{items:[{id:"copy",label:"Kopieren",icon:d.createElement(wc,{size:14}),shortcut:"Strg+C",onClick:()=>a(m.map(x=>({path:x,isFolder:!1})))},{id:"cut",label:"Ausschneiden",icon:d.createElement(Sc,{size:14}),shortcut:"Strg+X",onClick:()=>l(m.map(x=>({path:x,isFolder:!1})))}]},{items:[{id:"rename",label:"Umbenennen",icon:d.createElement(Rc,{size:14}),shortcut:"F2",disabled:y,onClick:()=>u("rename",{path:e.path,name:e.fileName,isFolder:!1})},{id:"delete",label:"Lschen",icon:d.createElement(Ec,{size:14}),shortcut:"Entf",danger:!0,onClick:()=>u("deleteConfirm",{paths:m})}]},{items:[{id:"lightbox",label:"In Lightbox ffnen",icon:d.createElement(ip,{size:14}),disabled:y,onClick:()=>o(e,b)},{id:"explorer",label:"Im Explorer ffnen",icon:d.createElement(sr,{size:14}),disabled:y,onClick:()=>et.openInExplorer(e.path)},{id:"properties",label:"Eigenschaften",icon:d.createElement(Hi,{size:14}),shortcut:"Alt+Enter",disabled:y,onClick:()=>u("properties",{path:e.path})}]}];i(g.clientX,g.clientY,v)},[e,f,n,t,s,r,a,l,u,o,i])}const J0=30,Ul=50,eb=500,Ft=new Map,Jn=new Set,er=new Set,Ci=new Set;let Ii=null;function Yl(){Ci.forEach(e=>e())}function Md(e,t){for(Ft.has(e)&&Ft.delete(e),Ft.set(e,t);Ft.size>eb;){const n=Ft.keys().next().value;n!==void 0&&Ft.delete(n)}}async function tb(e){e.forEach(t=>er.add(t)),Yl();try{const t=await et.getThumbnailsBatch(e);for(const n of e)Md(n,t[n]??null),er.delete(n)}catch(t){console.error("[ThumbnailManager] Batch failed:",t),e.forEach(n=>er.delete(n))}Yl()}function nb(){if(Ii=null,Jn.size===0)return;const e=Array.from(Jn);Jn.clear();for(let t=0;t<e.length;t+=Ul){const n=e.slice(t,t+Ul);tb(n)}}function rb(){Ii===null&&(Ii=setTimeout(nb,J0))}function Xl(e){Ft.has(e)||Jn.has(e)||er.has(e)||(Jn.add(e),rb())}function sb(e){return Ci.add(e),()=>{Ci.delete(e)}}function ob(e,t){t&&!Ft.has(e)&&Md(e,t),d.useSyncExternalStore(sb,()=>{const s=Ft.has(e)?"y":"n",o=er.has(e)?"y":"n";return`${s}-${o}`});const n=Ft.get(e)??null,r=er.has(e)||Jn.has(e);return[n,r]}const ib=d.memo(function({image:t,thumbnailSize:n,allImages:r=[],isSelected:s}){const{t:o}=Nt(),i=Me(I=>I.selectImage),a=Me(I=>I.updateImageRating),l=Me(I=>I.images),u=Od(I=>I.open),[f,p]=ob(t.path,t.thumbnailBase64),[g,m]=d.useState(t.rating||0),[y,b]=d.useState(!1),v=Me(I=>s===void 0?I.selectedImages:null),x=s??v?.has(t.path)??!1,h=t.tags?.length||0,S=Z0({image:t,allImages:r});d.useEffect(()=>{m(t.rating||0)},[t.rating]),d.useEffect(()=>{Xl(t.path)},[t.path]);const R=I=>{i(t.path,I.ctrlKey||I.metaKey,I.shiftKey)},w=I=>{I.preventDefault(),I.stopPropagation();const j=r.length>0?r:l;u(t,j)},T=async(I,j)=>{I.stopPropagation();const M=j+1;m(M),b(!0);try{await a(t.path,M),Gt.getState().success(`${o("imageCard.ratingSet")} ${"".repeat(M)}${"".repeat(5-M)}`)}catch(N){console.error("Failed to save rating:",N),m(t.rating||0),Gt.getState().error(o("imageCard.ratingFailed"))}finally{b(!1)}},E=async I=>{I.stopPropagation(),m(0),b(!0);try{await a(t.path,0)}catch(j){console.error("Failed to clear rating:",j),m(t.rating||0)}finally{b(!1)}};return c.jsx("div",{onClick:R,onDoubleClick:w,onContextMenu:S,tabIndex:0,role:"gridcell","aria-selected":x,"aria-label":`${t.fileName}${h>0?`, ${h} tags`:""}${g>0?`, ${g} stars`:""}`,onKeyDown:I=>{if(I.key==="Enter"){I.preventDefault();const j=r.length>0?r:l;u(t,j)}else I.key===" "&&(I.preventDefault(),i(t.path,I.ctrlKey||I.metaKey,I.shiftKey))},className:`
        relative group cursor-pointer rounded-xl overflow-hidden w-full h-full
        transition-transform duration-200 ease-out outline-none
        hover:scale-[1.03] hover:-translate-y-1
        active:scale-[0.98]
        focus-visible:ring-2 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--color-bg-primary)]
        ${x?"ring-2 ring-cyan-400/70 ring-offset-2 ring-offset-[var(--color-bg-primary)]":""}
      `,style:{boxShadow:x?"0 8px 32px rgba(6,182,212,0.35), 0 0 0 1px rgba(6,182,212,0.3)":"0 4px 16px rgba(0,0,0,0.2)"},children:c.jsxs(Gf,{isFooterBlurred:!0,className:"relative rounded-xl overflow-hidden border-none bg-[var(--glass-bg)] w-full h-full",children:[c.jsx(K0,{thumbnail:f,thumbnailUrl:t.thumbnailUrl,fileName:t.fileName,isLoading:p,thumbnailSize:n,onThumbnailError:()=>{f||Xl(t.path)}}),c.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{bottom:"auto",height:n?`${n}px`:"100%"},children:[h>0&&c.jsxs("div",{className:"absolute top-3 left-3 z-20 px-2.5 py-1 rounded-full bg-cyan-500/95 text-white text-xs font-bold flex items-center gap-1.5 shadow-depth-near",style:{boxShadow:"0 4px 12px rgba(6,182,212,0.4), inset 0 1px 0 rgba(255,255,255,0.3)"},children:[c.jsx(or,{size:11}),h]}),c.jsx("div",{className:"absolute top-3 right-3 z-20 w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center transition-all duration-200",style:{opacity:x?1:0,transform:`scale(${x?1:.5}) rotate(${x?0:-180}deg)`,boxShadow:"0 6px 20px rgba(6,182,212,0.5), inset 0 1px 0 rgba(255,255,255,0.4)"},children:c.jsx(kr,{size:16,className:"text-white",strokeWidth:3})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[var(--glass-bg)] via-[var(--glass-bg)]/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),c.jsxs(qf,{className:"flex-col items-center gap-0 before:bg-white/10 border-white/20 border-1 overflow-hidden py-1.5 px-3 absolute before:rounded-xl rounded-large bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-10 transition-all duration-200",children:[c.jsx("p",{className:"w-full text-xs text-white/90 font-medium truncate text-center max-h-0 opacity-0 group-hover:max-h-8 group-hover:opacity-100 group-hover:mb-1 transition-all duration-200 overflow-hidden",children:t.fileName}),c.jsx(Q0,{rating:g,isSaving:y,onRate:T,onClear:E})]})]})})},(e,t)=>e.image.path===t.image.path&&e.image.rating===t.image.rating&&e.isSelected===t.isSelected&&e.thumbnailSize===t.thumbnailSize&&e.image.tags?.length===t.image.tags?.length&&e.image.tags?.join(",")===t.image.tags?.join(","));function ab({item:e}){const{navigateToFolder:t}=Me(),{show:n}=Ra(),{copy:r,cut:s}=Ea(),{openModal:o}=Ca(),i=l=>{l.preventDefault(),l.stopPropagation(),t(e.path)},a=l=>{l.preventDefault(),l.stopPropagation();const u=[{items:[{id:"copy",label:"Kopieren",icon:c.jsx(wc,{size:14}),shortcut:"Strg+C",onClick:()=>r([{path:e.path,isFolder:!0}])},{id:"cut",label:"Ausschneiden",icon:c.jsx(Sc,{size:14}),shortcut:"Strg+X",onClick:()=>s([{path:e.path,isFolder:!0}])}]},{items:[{id:"rename",label:"Umbenennen",icon:c.jsx(Rc,{size:14}),shortcut:"F2",onClick:()=>o("rename",{path:e.path,name:e.name,isFolder:!0})},{id:"delete",label:"Lschen",icon:c.jsx(Ec,{size:14}),shortcut:"Entf",danger:!0,onClick:()=>o("deleteConfirm",{paths:[e.path]})}]},{items:[{id:"explorer",label:"Im Explorer ffnen",icon:c.jsx(sr,{size:14}),onClick:()=>et.openInExplorer(e.path)},{id:"properties",label:"Eigenschaften",icon:c.jsx(Hi,{size:14}),shortcut:"Alt+Enter",onClick:()=>o("properties",{path:e.path})}]}];n(l.clientX,l.clientY,u)};return c.jsx(he.div,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onDoubleClick:i,onContextMenu:a,className:"relative group cursor-pointer rounded-xl overflow-hidden w-full h-full",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.2)"},children:c.jsxs("div",{className:"relative rounded-xl overflow-hidden backdrop-blur-glass-sm flex flex-col h-full",style:{background:"var(--glass-bg)",border:"1px solid rgba(6, 182, 212, 0.15)"},children:[c.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[var(--glass-bg)] relative overflow-hidden group-hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 blur-3xl rounded-full scale-50 group-hover:scale-100 transition-transform duration-500"}),c.jsx(Ga,{size:64,className:"text-cyan-400 drop-shadow-lg relative z-10 group-hover:text-cyan-300 transition-colors",strokeWidth:1.5,fill:"rgba(34, 211, 238, 0.1)"})]}),c.jsxs("div",{className:"p-3 relative bg-[var(--glass-bg)] border-t border-[var(--glass-border)]",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent"}),c.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-primary)] truncate mb-1.5",title:e.name,children:e.name}),c.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-[var(--color-text-muted)] h-4",children:[(e.subfolderCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.subfolderCount} Ordner`,children:[c.jsx(Ga,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.subfolderCount})]}),(e.imageCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.imageCount} Bilder`,children:[c.jsx(oo,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.imageCount})]}),(e.videoCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.videoCount} Videos`,children:[c.jsx(ap,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.videoCount})]}),e.subfolderCount===0&&e.imageCount===0&&e.videoCount===0&&c.jsx("span",{className:"opacity-50",children:"Leer"})]})]})]})})}function lb({type:e,onAction:t}){const{t:n}=Nt(),s={"no-results":{icon:c.jsx(cp,{className:"w-16 h-16"}),iconClass:"text-cyan-400/50",title:n("emptyState.noResults"),subtitle:n("emptyState.noResultsHint"),actionLabel:n("emptyState.resetFilters")},"empty-folder":{icon:c.jsx(sr,{className:"w-16 h-16"}),iconClass:"text-cyan-400/40",title:n("emptyState.folderEmpty"),subtitle:n("emptyState.noImages"),actionLabel:void 0},"no-tags":{icon:c.jsx(lp,{className:"w-16 h-16"}),iconClass:"text-cyan-400/40",title:n("emptyState.noTags"),subtitle:n("emptyState.noTagsHint"),actionLabel:n("emptyState.openTagManager")}}[e];return c.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"flex flex-col items-center justify-center h-full p-8",children:[c.jsxs("div",{className:"relative",children:[c.jsx(he.div,{className:"absolute inset-0 bg-cyan-500/20 rounded-full blur-3xl",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{width:"150%",height:"150%",left:"-25%",top:"-25%"}}),c.jsx(he.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(6,182,212,0.15) 0%, transparent 70%)",width:"200%",height:"200%",left:"-50%",top:"-50%"},animate:{scale:[.8,1.1,.8],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:.5}}),c.jsx(he.div,{className:`relative p-8 rounded-2xl backdrop-blur-sm border border-cyan-500/10 ${s.iconClass}`,style:{background:"linear-gradient(135deg, rgba(6,182,212,0.08) 0%, rgba(6,182,212,0.02) 100%)",boxShadow:"0 8px 32px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.05)"},whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},children:s.icon})]}),c.jsx(he.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.3},className:"mt-8 text-xl font-medium text-slate-200",children:s.title}),c.jsx(he.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25,duration:.3},className:"mt-2 text-sm text-slate-400 text-center max-w-xs",children:s.subtitle}),s.actionLabel&&t&&c.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35,duration:.3},className:"mt-6",children:c.jsx(Cu,{onClick:t,variant:"accent",size:"sm",children:s.actionLabel})})]})}const kd=10,Ia=kd/2,Nd=d.forwardRef(({style:e,children:t,...n},r)=>c.jsx("div",{ref:r,...n,style:{display:"flex",flexWrap:"wrap",margin:`-${Ia}px`,...e},children:t}));Nd.displayName="GridList";function cb({children:e,...t}){return c.jsx("div",{...t,style:{width:"var(--col-width)",padding:`${Ia}px`,display:"flex",flex:"none",alignContent:"stretch",boxSizing:"border-box"},children:e})}function ub({height:e,width:t}){return c.jsx("div",{style:{width:t,height:e,padding:`${Ia}px`,display:"flex",flex:"none",alignContent:"stretch",boxSizing:"border-box"},children:c.jsx("div",{className:"w-full rounded-xl overflow-hidden",style:{flex:1,aspectRatio:"1/1",background:"var(--glass-bg)",border:"1px solid rgba(6, 182, 212, 0.15)"},children:c.jsx("div",{className:"w-full h-full animate-pulse bg-cyan-500/5"})})})}const db={List:Nd,Item:cb,ScrollSeekPlaceholder:ub};function fb(){const{t:e}=Nt(),t=yu(),n=na(),r=bu(),s=is(),o=rh(),i=wu(),a=as(),{searchQuery:l,sortBy:u,sortOrder:f,filterRating:p,filterTags:g,setSearchQuery:m,setFilterRating:y,setFilterTags:b}=Su(),v=d.useRef(null),[x,h]=d.useState(0);d.useEffect(()=>{const N=v.current;if(!N)return;const P=new ResizeObserver(([C])=>{const A=C.contentBoxSize?.[0]?.inlineSize??C.contentRect.width;h(A)});return P.observe(N),()=>P.disconnect()},[]);const S=d.useMemo(()=>Math.round(200*(o/100)),[o]),{colWidthPercent:R}=d.useMemo(()=>x===0?{colWidthPercent:"100%"}:{colWidthPercent:`${100/Math.max(1,Math.floor(x/(S+kd)))}%`},[x,S]),w=d.useMemo(()=>n?n.replace(/\\/g,"/").split("/").filter(Boolean).length>1:!1,[n]),T=d.useMemo(()=>new Set(g),[g]),E=d.useMemo(()=>{let N=[...t];if(l||p!==null||T.size>0){const F=l?l.toLowerCase():"";N=N.filter(L=>{if(L.isFolder)return p!==null||T.size>0?!1:F?L.name.toLowerCase().includes(F):!0;{const k=L.imageData;if(!k)return!1;if(F){const _=(k.fileName||"").toLowerCase().includes(F),z=(k.tags||[]).some(X=>X.toLowerCase().includes(F));if(!_&&!z)return!1}return!(p!==null&&(k.rating||0)!==p||T.size>0&&!(k.tags||[]).some(z=>T.has(z)))}})}const P=N.filter(F=>F.isFolder),C=N.filter(F=>!F.isFolder),A=[...P].sort((F,L)=>(F.name||"").localeCompare(L.name||"")),O=[...C].sort((F,L)=>{const k=F.imageData,_=L.imageData;if(!k||!_)return 0;let z=0;switch(u){case"name":z=(k.fileName||"").localeCompare(_.fileName||"");break;case"date":z=new Date(k.dateModified||0).getTime()-new Date(_.dateModified||0).getTime();break;case"size":z=(k.fileSize||0)-(_.fileSize||0);break;case"rating":z=(k.rating||0)-(_.rating||0);break}return f==="asc"?z:-z});return[...A,...O]},[t,l,u,f,p,T]),I=d.useMemo(()=>{const N=[];w&&N.push({type:"navigate-up"});for(const P of E)if(P.isFolder)N.push({type:"folder",item:P});else{const C=P.imageData;if(!C)continue;const A=C.tags||[],O=T.size>0&&A.some(L=>T.has(L)),F=T.size>0&&!O;N.push({type:"image",item:P,isHighlighted:O,isDimmed:F})}return N},[w,E,T]),j=d.useCallback(()=>{m(""),y(null),b([])},[m,y,b]),M=d.useCallback(N=>{const P=I[N];if(!P)return null;const C={display:"flex",flex:1,aspectRatio:"1/1",overflow:"hidden",borderRadius:"0.75rem"};switch(P.type){case"navigate-up":return c.jsx(he.div,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onDoubleClick:()=>r(),className:"relative group cursor-pointer shadow-lg",style:C,children:c.jsxs("div",{className:"relative flex flex-col w-full h-full backdrop-blur-glass-sm bg-[var(--glass-bg)] border border-cyan-500/15 rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[var(--glass-bg)] relative overflow-hidden group-hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 blur-3xl rounded-full scale-50 group-hover:scale-100 transition-transform duration-500"}),c.jsx(up,{size:56,className:"text-cyan-400 drop-shadow-lg relative z-10 group-hover:text-cyan-300 transition-colors",strokeWidth:1.5})]}),c.jsxs("div",{className:"p-3 relative bg-[var(--glass-bg)] border-t border-[var(--glass-border)]",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent"}),c.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-primary)] truncate",children:".."}),c.jsx("p",{className:"text-[10px] text-[var(--color-text-muted)] mt-1",children:e("common.parentFolder")})]})]})});case"folder":return c.jsx("div",{style:C,children:c.jsx(ab,{item:P.item})});case"image":{const A=P.item.imageData;return c.jsx("div",{style:{...C,opacity:P.isDimmed?.3:1},className:P.isHighlighted?"ring-2 ring-cyan-400 rounded-xl":"",children:c.jsx(ib,{image:A,allImages:s,isSelected:a.has(A.path)})})}}},[I,r,s,a]);return i?c.jsx("div",{className:"h-full p-4 overflow-auto",children:c.jsxs("div",{className:"rounded-2xl p-4 backdrop-blur-glass-sm relative overflow-hidden bg-gradient-to-br from-cyan-500/08 to-cyan-500/02 border border-cyan-500/15",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent z-10"}),c.jsx(X0,{count:12,itemSize:S})]})}):E.length===0&&t.length>0?c.jsx("div",{className:"h-full flex items-center justify-center p-4",children:c.jsx(lb,{type:"no-results",onAction:j})}):c.jsx("div",{className:"h-full p-4",ref:v,children:c.jsxs("div",{className:"rounded-2xl p-4 backdrop-blur-glass-sm relative overflow-hidden bg-gradient-to-br from-cyan-500/08 to-cyan-500/02 border border-cyan-500/15 h-full flex flex-col",style:{"--col-width":R},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent z-10 pointer-events-none"}),x>0&&c.jsx(Np,{style:{flex:1,minHeight:0,overflowX:"hidden"},totalCount:I.length,overscan:600,components:db,itemContent:M,scrollSeekConfiguration:{enter:N=>Math.abs(N)>800,exit:N=>Math.abs(N)<100}},n)]})})}function pb({drive:e,onClick:t,delay:n=0}){const{t:r}=Nt(),s=e.totalSize?e.totalSize/1024**3:0,o=e.freeSpace?e.freeSpace/1024**3:0,i=s-o,a=s>0?i/s*100:0,l=()=>a>90?"bg-red-500":a>75?"bg-amber-500":"bg-cyan-500",u=()=>{switch(e.driveType){case"Fixed":return c.jsx(Br,{size:32,className:"text-cyan-400"});case"CDRom":return c.jsx(pp,{size:32,className:"text-cyan-400"});case"Removable":return c.jsx(fp,{size:32,className:"text-cyan-400"});case"Network":return c.jsx(dp,{size:32,className:"text-blue-400"});default:return c.jsx(Br,{size:32,className:"text-cyan-400"})}},f=p=>{const g=p/1073741824;return g>=1e3?`${(g/1024).toFixed(2)} TB`:`${g.toFixed(0)} GB`};return c.jsxs(he.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:25,delay:n},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t(e),className:"p-4 rounded-xl transition-all duration-300 text-left group cursor-pointer w-full backdrop-blur-glass-sm relative overflow-hidden",style:{background:"var(--glass-bg)",border:"1px solid var(--glass-border)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)"},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:"var(--glass-specular)"}}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-2 rounded-lg bg-[var(--color-cyan-subtle)] group-hover:bg-cyan-500/20 transition-colors",children:u()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-[var(--color-text-primary)] truncate mb-2 group-hover:text-cyan-300 transition-colors",children:e.name}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${a>90?"bg-red-500":"bg-green-500"}`}),c.jsx("div",{className:"flex-1 h-2 bg-[var(--color-bg-tertiary)] rounded-full overflow-hidden",children:c.jsx(he.div,{initial:{width:0},animate:{width:`${a}%`},transition:{delay:n+.2,duration:.5},className:`h-full ${l()} rounded-full`})})]}),c.jsxs("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[c.jsx("span",{className:"text-[var(--color-text-primary)]",children:f(e.freeSpace||0)})," ",r("hero.freeOf")," ",f(e.totalSize||0)]})]})]})]})}function gb(){const{t:e}=Nt(),t=Zm(),n=Jm(),r=eh(),s=vu();d.useEffect(()=>{n()},[n]);const o=async i=>{await r(i.path),await s(i.path)};return c.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative",children:c.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto space-y-12",children:[c.jsxs("div",{className:"text-center space-y-6 py-12",children:[c.jsx(he.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:25},className:"w-24 h-24 mx-auto mb-8 relative",children:c.jsx("img",{src:"/logo.png",alt:"TagFusion Logo",className:"w-full h-full object-contain"})}),c.jsx(he.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-5xl font-bold bg-gradient-to-r from-[var(--color-text-primary)] via-cyan-500 to-cyan-600 bg-clip-text text-transparent pb-2",children:e("hero.title")}),c.jsx(he.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-xl text-[var(--color-text-secondary)] max-w-2xl mx-auto pt-2",children:e("hero.subtitle")})]}),t.length>0&&c.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Br,{size:20,className:"text-cyan-400"}),c.jsx("h3",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:e("hero.drives")})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((i,a)=>c.jsx(pb,{drive:i,onClick:o,delay:.6+a*.1},i.path))})]})]})})}function mb(){const{currentFolder:e,navigateToFolder:t}=Me(),n=d.useMemo(()=>{if(!e)return[];const s=e.replace(/\\/g,"/").split("/").filter(Boolean);return s.map((o,i)=>{const a=s.slice(0,i+1);let l=a.join("\\");return a.length===1&&l.endsWith(":")&&(l+="\\"),{name:o,path:l}})},[e]);return n.length===0?null:c.jsx("div",{className:"flex items-center gap-1 text-sm overflow-hidden",children:n.map((r,s)=>c.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[s>0&&c.jsx(gp,{size:14,className:"text-slate-600 flex-shrink-0"}),c.jsxs(he.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(r.path),className:`flex items-center gap-1.5 px-2 py-1 rounded-md truncate transition-colors ${s===n.length-1?"text-cyan-400 bg-cyan-500/10 font-medium":"text-slate-400 hover:text-slate-200 hover:bg-white/5"}`,title:r.path,children:[s===0&&c.jsx(Br,{size:14,className:"flex-shrink-0"}),c.jsx("span",{className:"truncate",children:r.name})]})]},r.path))})}function hb(){const{t:e}=Nt(),t=na(),n=is(),r=yu(),s=wu(),o=as(),i=Ru(),a=bu(),l=ra(),u=d.useMemo(()=>t?t.replace(/\\/g,"/").split("/").filter(Boolean).length>1:!1,[t]),f=d.useMemo(()=>{if(o.size===0)return[];const g=n.filter(y=>o.has(y.path)),m=new Map;return g.forEach(y=>{y.tags?.forEach(b=>{m.set(b,(m.get(b)||0)+1)})}),Array.from(m.entries()).map(([y,b])=>({name:y,count:b})).sort((y,b)=>b.count-y.count)},[n,o]),p=async g=>{try{for(const m of o){const y=n.find(b=>b.path===m);y&&await i(m,y.tags?.filter(b=>b!==g)||[])}}catch(m){l(m.message)}};return c.jsx("div",{className:"flex-1 flex flex-col overflow-hidden","data-testid":"main-content",children:c.jsx(un,{mode:"wait",children:!t&&!s?c.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col overflow-hidden",children:c.jsx(gb,{})},"hero"):s?c.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex flex-col items-center gap-4",children:c.jsx(zi,{size:"lg",color:"primary",label:e("common.loadingItems")})})},"loading"):r.length===0?c.jsx(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.3},className:"flex-1 flex items-center justify-center p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-[var(--glass-bg)] flex items-center justify-center",children:c.jsx(oo,{size:36,className:"text-[var(--color-text-muted)]"})}),c.jsx("h3",{className:"text-lg font-medium text-[var(--color-text-primary)] mb-2",children:e("emptyState.folderEmpty")}),c.jsx("p",{className:"text-[var(--color-text-muted)] text-sm",children:e("emptyState.noImages")})]})},"empty"):c.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[var(--glass-border)]",style:{boxShadow:"inset 0 -1px 0 rgba(0,0,0,0.05)"},children:c.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[c.jsx(Kf,{content:e("common.parentFolder"),placement:"bottom",children:c.jsx(Qf,{isIconOnly:!0,size:"sm",variant:"flat",isDisabled:!u,onPress:()=>a(),className:"flex-shrink-0 bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] disabled:opacity-30",children:c.jsx(mp,{size:18})})}),c.jsx(mb,{}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--color-text-muted)] flex-shrink-0 ml-auto",children:[r.filter(g=>g.isFolder).length>0&&c.jsxs("span",{children:[r.filter(g=>g.isFolder).length," ",e("statusBar.folders")]}),r.filter(g=>g.isFolder).length>0&&r.filter(g=>!g.isFolder).length>0&&c.jsx("span",{children:""}),r.filter(g=>!g.isFolder).length>0&&c.jsxs("span",{children:[r.filter(g=>!g.isFolder).length," ",e("statusBar.images")]})]})]})}),c.jsx("div",{className:"flex-1 min-h-0",children:c.jsx(fb,{})}),f.length>0&&c.jsx("div",{className:"border-t border-[var(--glass-border)] bg-[var(--glass-bg)] overflow-hidden animate-slide-up",children:c.jsx("div",{className:"p-3",children:c.jsxs("div",{className:"rounded-xl p-3 relative overflow-hidden",style:{background:"linear-gradient(135deg, rgba(6, 182, 212, 0.12) 0%, rgba(6, 182, 212, 0.04) 100%)",border:"1px solid rgba(6, 182, 212, 0.20)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)"},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.25) 50%, transparent 100%)"}}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(or,{size:14,className:"text-cyan-400"}),c.jsx("span",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("mainContent.selectedTags")}),c.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["(",f.length,")"]})]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:f.map(({name:g,count:m})=>c.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs text-[var(--color-text-primary)] cursor-pointer group/tag
                                     transition-transform duration-200 ease-out hover:scale-105 hover:-translate-y-0.5 active:scale-95`,style:{background:"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:"1px solid rgba(6, 182, 212, 0.25)",boxShadow:"0 4px 12px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[c.jsx(or,{size:10,className:"text-cyan-400"}),c.jsx("span",{children:g}),o.size>1&&c.jsx("span",{className:"text-cyan-400 text-[10px] font-medium",children:m}),c.jsx("button",{onClick:y=>{y.stopPropagation(),p(g)},className:"ml-0.5 p-0.5 rounded-full hover:bg-red-500/30 hover:scale-110 transition-all",children:c.jsx(dn,{size:10,className:"text-[var(--color-text-muted)] group-hover/tag:text-red-400"})})]},g))})]})})})]},"grid")})})}const qn=()=>crypto.randomUUID(),jd="tagfusion-tag-library",xb=()=>{try{const e=localStorage.getItem(jd);if(e)return JSON.parse(e).categories.map(n=>({...n,id:n.id||qn(),subcategories:n.subcategories.map(r=>({...r,id:r.id||qn()}))}))}catch(e){console.error("Failed to load tag library:",e)}return[]},vt=e=>{const t={version:"1.0",exportDate:new Date().toISOString(),categories:e};localStorage.setItem(jd,JSON.stringify(t)),et.saveTagLibrary(t).catch(n=>{Me.getState().setError(n.message)})},Ta=mn((e,t)=>({categories:xb(),isModalOpen:!1,initialize:async()=>{const{categories:n}=t();if(n.length===0)try{const r=await et.getTagLibrary();r&&t().importLibrary(JSON.stringify(r))}catch(r){Me.getState().setError(r.message)}},openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1}),addCategory:n=>{const{categories:r}=t(),s={id:qn(),name:n,subcategories:[],isExpanded:!0},o=[...r,s];vt(o),e({categories:o})},renameCategory:(n,r)=>{const{categories:s}=t(),o=s.map(i=>i.id===n?{...i,name:r}:i);vt(o),e({categories:o})},deleteCategory:n=>{const{categories:r}=t(),s=r.filter(o=>o.id!==n);vt(s),e({categories:s})},toggleCategoryExpand:n=>{const{categories:r}=t(),s=r.map(o=>o.id===n?{...o,isExpanded:!o.isExpanded}:o);e({categories:s})},addSubcategory:(n,r)=>{const{categories:s}=t(),o={id:qn(),name:r,tags:[]},i=s.map(a=>a.id===n?{...a,subcategories:[...a.subcategories,o]}:a);vt(i),e({categories:i})},renameSubcategory:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r?{...l,name:s}:l)}:a);vt(i),e({categories:i})},deleteSubcategory:(n,r)=>{const{categories:s}=t(),o=s.map(i=>i.id===n?{...i,subcategories:i.subcategories.filter(a=>a.id!==r)}:i);vt(o),e({categories:o})},addTag:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r&&!l.tags.includes(s)?{...l,tags:[...l.tags,s]}:l)}:a);vt(i),e({categories:i})},removeTag:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r?{...l,tags:l.tags.filter(u=>u!==s)}:l)}:a);vt(i),e({categories:i})},reorderCategories:(n,r)=>{const{categories:s}=t(),o=Array.from(s),[i]=o.splice(n,1);o.splice(r,0,i),vt(o),e({categories:o})},reorderSubcategories:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>{if(a.id!==n)return a;const l=Array.from(a.subcategories),[u]=l.splice(r,1);return l.splice(s,0,u),{...a,subcategories:l}});vt(i),e({categories:i})},reorderTags:(n,r,s,o)=>{const{categories:i}=t(),a=i.map(l=>l.id!==n?l:{...l,subcategories:l.subcategories.map(u=>{if(u.id!==r)return u;const f=Array.from(u.tags),[p]=f.splice(s,1);return f.splice(o,0,p),{...u,tags:f}})});vt(a),e({categories:a})},importLibrary:n=>{try{const r=JSON.parse(n),s=r.categories||r;if(!Array.isArray(s))return!1;const o=s.map(i=>({id:i.id||qn(),name:i.name||"Unbenannte Kategorie",isExpanded:!0,subcategories:(i.subcategories||[]).map(a=>({id:a.id||qn(),name:a.name||"Unbenannte Unterkategorie",tags:a.tags||[]}))}));return vt(o),e({categories:o}),!0}catch(r){return Me.getState().setError(r.message),!1}},exportLibrary:()=>{const{categories:n}=t(),r={version:"1.0",exportDate:new Date().toISOString(),categories:n.map(({id:s,name:o,subcategories:i})=>({id:s,name:o,subcategories:i.map(({id:a,name:l,tags:u})=>({id:a,name:l,tags:u}))}))};return JSON.stringify(r,null,2)}}));let Gl=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const bb={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},vb={valid(e){return e===null?null:e?{[Gl.valid]:""}:{[Gl.invalid]:""}}},yb=d.createContext({invalid:void 0,name:void 0,validityData:{state:bb,errors:[],error:"",value:"",initialValue:null},setValidityData:Xe,disabled:void 0,touched:!1,setTouched:Xe,dirty:!1,setDirty:Xe,filled:!1,setFilled:Xe,focused:!1,setFocused:Xe,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=He)=>e,getInputValidationProps:(e=He)=>e,inputRef:{current:null},commit:async()=>{}}});function So(e=!0){const t=d.useContext(yb);if(t.setValidityData===Xe&&!e)throw new Error(qe(28));return t}const wb=d.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:Xe,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function Ad(){return d.useContext(wb)}const Sb=d.createContext({controlId:void 0,setControlId:Xe,labelId:void 0,setLabelId:Xe,messageIds:[],setMessageIds:Xe,getDescriptionProps:e=>e});function Fd(){return d.useContext(Sb)}function Rb(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function Eb(e={}){const{id:t,implicit:n=!1,controlRef:r}=e,{controlId:s,setControlId:o}=Fd(),i=Dn(t);return ne(()=>{if(!(!n&&!t||o===Xe)){if(n){const a=r?.current;Fe(a)&&a.closest("label")!=null?o(t??null):o(s??i)}else t&&o(t);return()=>{t&&o(void 0)}}},[t,r,s,o,n,i]),s??i}function Cb(e){const{enabled:t=!0,value:n,id:r,name:s,controlRef:o,commit:i}=e,{formRef:a}=Ad(),{invalid:l,markedDirtyRef:u,validityData:f,setValidityData:p}=So(),g=Z(e.getValue);ne(()=>{if(!t)return;let m=n;m===void 0&&(m=g()),f.initialValue===null&&m!==null&&p(y=>({...y,initialValue:m}))},[t,p,n,f.initialValue,g]),ne(()=>{!t||!r||a.current.fields.set(r,{getValue:g,name:s,controlRef:o,validityData:Rb(f,l),validate(){let m=n;m===void 0&&(m=g()),u.current=!0,nt.flushSync(()=>i(m))}})},[i,o,t,a,g,r,l,u,s,f,n]),ne(()=>{const m=a.current.fields;return()=>{r&&m.delete(r)}},[a,r])}var Pa=ds(),Ie=e=>us(e,Pa),Oa=ds();Ie.write=e=>us(e,Oa);var Ro=ds();Ie.onStart=e=>us(e,Ro);var Ma=ds();Ie.onFrame=e=>us(e,Ma);var ka=ds();Ie.onFinish=e=>us(e,ka);var tr=[];Ie.setTimeout=(e,t)=>{const n=Ie.now()+t,r=()=>{const o=tr.findIndex(i=>i.cancel==r);~o&&tr.splice(o,1),rn-=~o?1:0},s={time:n,handler:e,cancel:r};return tr.splice(Ld(n),0,s),rn+=1,Dd(),s};var Ld=e=>~(~tr.findIndex(t=>t.time>e)||~tr.length);Ie.cancel=e=>{Ro.delete(e),Ma.delete(e),ka.delete(e),Pa.delete(e),Oa.delete(e)};Ie.sync=e=>{Ti=!0,Ie.batchedUpdates(e),Ti=!1};Ie.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,Ie.onStart(n)}return r.handler=e,r.cancel=()=>{Ro.delete(n),t=null},r};var Na=typeof window<"u"?window.requestAnimationFrame:()=>{};Ie.use=e=>Na=e;Ie.now=typeof performance<"u"?()=>performance.now():Date.now;Ie.batchedUpdates=e=>e();Ie.catch=console.error;Ie.frameLoop="always";Ie.advance=()=>{Ie.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):zd()};var nn=-1,rn=0,Ti=!1;function us(e,t){Ti?(t.delete(e),e(0)):(t.add(e),Dd())}function Dd(){nn<0&&(nn=0,Ie.frameLoop!=="demand"&&Na(_d))}function Ib(){nn=-1}function _d(){~nn&&(Na(_d),Ie.batchedUpdates(zd))}function zd(){const e=nn;nn=Ie.now();const t=Ld(nn);if(t&&(Vd(tr.splice(0,t),n=>n.handler()),rn-=t),!rn){Ib();return}Ro.flush(),Pa.flush(e?Math.min(64,nn-e):16.667),Ma.flush(),Oa.flush(),ka.flush()}function ds(){let e=new Set,t=e;return{add(n){rn+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return rn-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,rn-=t.size,Vd(t,r=>r(n)&&e.add(r)),rn+=e.size,t=e)}}}function Vd(e,t){e.forEach(n=>{try{t(n)}catch(r){Ie.catch(r)}})}var Tb=Object.defineProperty,Pb=(e,t)=>{for(var n in t)Tb(e,n,{get:t[n],enumerable:!0})},kt={};Pb(kt,{assign:()=>Mb,colors:()=>cn,createStringInterpolator:()=>Aa,skipAnimation:()=>$d,to:()=>Hd,willAdvance:()=>Fa});function Pi(){}var Ob=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),G={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Yt(e,t){if(G.arr(e)){if(!G.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ne=(e,t)=>e.forEach(t);function Vt(e,t,n){if(G.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ht=e=>G.und(e)?[]:G.arr(e)?e:[e];function zr(e,t){if(e.size){const n=Array.from(e);e.clear(),Ne(n,t)}}var Ar=(e,...t)=>zr(e,n=>n(...t)),ja=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Aa,Hd,cn=null,$d=!1,Fa=Pi,Mb=e=>{e.to&&(Hd=e.to),e.now&&(Ie.now=e.now),e.colors!==void 0&&(cn=e.colors),e.skipAnimation!=null&&($d=e.skipAnimation),e.createStringInterpolator&&(Aa=e.createStringInterpolator),e.requestAnimationFrame&&Ie.use(e.requestAnimationFrame),e.batchedUpdates&&(Ie.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Fa=e.willAdvance),e.frameLoop&&(Ie.frameLoop=e.frameLoop)},Vr=new Set,Rt=[],ei=[],to=0,Eo={get idle(){return!Vr.size&&!Rt.length},start(e){to>e.priority?(Vr.add(e),Ie.onStart(kb)):(Bd(e),Ie(Oi))},advance:Oi,sort(e){if(to)Ie.onFrame(()=>Eo.sort(e));else{const t=Rt.indexOf(e);~t&&(Rt.splice(t,1),Wd(e))}},clear(){Rt=[],Vr.clear()}};function kb(){Vr.forEach(Bd),Vr.clear(),Ie(Oi)}function Bd(e){Rt.includes(e)||Wd(e)}function Wd(e){Rt.splice(Nb(Rt,t=>t.priority>e.priority),0,e)}function Oi(e){const t=ei;for(let n=0;n<Rt.length;n++){const r=Rt[n];to=r.priority,r.idle||(Fa(r),r.advance(e),r.idle||t.push(r))}return to=0,ei=Rt,ei.length=0,Rt=t,Rt.length>0}function Nb(e,t){const n=e.findIndex(t);return n<0?e.length:n}var jb={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ot="[-+]?\\d*\\.?\\d+",no=Ot+"%";function Co(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Ab=new RegExp("rgb"+Co(Ot,Ot,Ot)),Fb=new RegExp("rgba"+Co(Ot,Ot,Ot,Ot)),Lb=new RegExp("hsl"+Co(Ot,no,no)),Db=new RegExp("hsla"+Co(Ot,no,no,Ot)),_b=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Vb=/^#([0-9a-fA-F]{6})$/,Hb=/^#([0-9a-fA-F]{8})$/;function $b(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Vb.exec(e))?parseInt(t[1]+"ff",16)>>>0:cn&&cn[e]!==void 0?cn[e]:(t=Ab.exec(e))?(Xn(t[1])<<24|Xn(t[2])<<16|Xn(t[3])<<8|255)>>>0:(t=Fb.exec(e))?(Xn(t[1])<<24|Xn(t[2])<<16|Xn(t[3])<<8|Ql(t[4]))>>>0:(t=_b.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Hb.exec(e))?parseInt(t[1],16)>>>0:(t=zb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Lb.exec(e))?(ql(Kl(t[1]),Os(t[2]),Os(t[3]))|255)>>>0:(t=Db.exec(e))?(ql(Kl(t[1]),Os(t[2]),Os(t[3]))|Ql(t[4]))>>>0:null}function ti(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ql(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,o=ti(s,r,e+1/3),i=ti(s,r,e),a=ti(s,r,e-1/3);return Math.round(o*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function Xn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Kl(e){return(parseFloat(e)%360+360)%360/360}function Ql(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Os(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Zl(e){let t=$b(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,o=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}var Xr=(e,t,n)=>{if(G.fun(e))return e;if(G.arr(e))return Xr({range:e,output:t,extrapolate:n});if(G.str(e.output[0]))return Aa(e);const r=e,s=r.output,o=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const f=Wb(u,o);return Bb(u,o[f],o[f+1],s[f],s[f+1],l,i,a,r.map)}};function Bb(e,t,n,r,s,o,i,a,l){let u=l?l(e):e;if(u<t){if(i==="identity")return u;i==="clamp"&&(u=t)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=o(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function Wb(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Ub={linear:e=>e},Gr=Symbol.for("FluidValue.get"),fr=Symbol.for("FluidValue.observers"),St=e=>!!(e&&e[Gr]),ft=e=>e&&e[Gr]?e[Gr]():e,Jl=e=>e[fr]||null;function Yb(e,t){e.eventObserved?e.eventObserved(t):e(t)}function qr(e,t){const n=e[fr];n&&n.forEach(r=>{Yb(r,t)})}var Ud=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Xb(this,e)}},Xb=(e,t)=>Yd(e,Gr,t);function vr(e,t){if(e[Gr]){let n=e[fr];n||Yd(e,fr,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Kr(e,t){const n=e[fr];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[fr]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Yd=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),zs=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Gb=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ec=new RegExp(`(${zs.source})(%|[a-z]+)`,"i"),qb=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Io=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Xd=e=>{const[t,n]=Kb(e);if(!t||ja())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&Io.test(n))return Xd(n);if(n)return n}return e},Kb=e=>{const t=Io.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},ni,Qb=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Gd=e=>{ni||(ni=cn?new RegExp(`(${Object.keys(cn).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(o=>ft(o).replace(Io,Xd).replace(Gb,Zl).replace(ni,Zl)),n=t.map(o=>o.match(zs).map(Number)),s=n[0].map((o,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(o=>Xr({...e,output:o}));return o=>{const i=!ec.test(t[0])&&t.find(l=>ec.test(l))?.replace(zs,"");let a=0;return t[0].replace(zs,()=>`${s[a++](o)}${i||""}`).replace(qb,Qb)}},La="react-spring: ",qd=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${La}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Zb=qd(console.warn);function Jb(){Zb(`${La}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ev=qd(console.warn);function tv(){ev(`${La}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function To(e){return G.str(e)&&(e[0]=="#"||/\d/.test(e)||!ja()&&Io.test(e)||e in(cn||{}))}var Da=ja()?d.useEffect:d.useLayoutEffect,nv=()=>{const e=d.useRef(!1);return Da(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Kd(){const e=d.useState()[1],t=nv();return()=>{t.current&&e(Math.random())}}var Qd=e=>d.useEffect(e,rv),rv=[];function tc(e){const t=d.useRef(void 0);return d.useEffect(()=>{t.current=e}),t.current}var Qr=Symbol.for("Animated:node"),sv=e=>!!e&&e[Qr]===e,At=e=>e&&e[Qr],_a=(e,t)=>Ob(e,Qr,t),Po=e=>e&&e[Qr]&&e[Qr].getPayload(),Zd=class{constructor(){_a(this,this)}getPayload(){return this.payload||[]}},Oo=class Jd extends Zd{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,G.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Jd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,n){return G.num(t)&&(this.lastPosition=t,n&&(t=Math.round(t/n)*n,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,G.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},ro=class ef extends Oo{constructor(t){super(0),this._string=null,this._toString=Xr({output:[t,t]})}static create(t){return new ef(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(G.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Xr({output:[this.getValue(),t]})),this._value=0,super.reset()}},so={dependencies:null},Mo=class extends Zd{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Vt(this.source,(n,r)=>{sv(n)?t[r]=n.getValue(e):St(n)?t[r]=ft(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ne(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Vt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){so.dependencies&&St(e)&&so.dependencies.add(e);const t=Po(e);t&&Ne(t,n=>this.add(n))}},ov=class tf extends Mo{constructor(t){super(t)}static create(t){return new tf(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const n=this.getPayload();return t.length==n.length?n.map((r,s)=>r.setValue(t[s])).some(Boolean):(super.setValue(t.map(iv)),!0)}};function iv(e){return(To(e)?ro:Oo).create(e)}function Mi(e){const t=At(e);return t?t.constructor:G.arr(e)?ov:To(e)?ro:Oo}var nc=(e,t)=>{const n=!G.fun(e)||e.prototype&&e.prototype.isReactComponent;return d.forwardRef((r,s)=>{const o=d.useRef(null),i=n&&d.useCallback(y=>{o.current=cv(s,y)},[s]),[a,l]=lv(r,t),u=Kd(),f=()=>{const y=o.current;if(n&&!y)return;(y?t.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&u()},p=new av(f,l),g=d.useRef(void 0);Da(()=>(g.current=p,Ne(l,y=>vr(y,p)),()=>{g.current&&(Ne(g.current.deps,y=>Kr(y,g.current)),Ie.cancel(g.current.update))})),d.useEffect(f,[]),Qd(()=>()=>{const y=g.current;Ne(y.deps,b=>Kr(b,y))});const m=t.getComponentProps(a.getValue());return d.createElement(e,{...m,ref:i})})},av=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Ie.write(this.update)}};function lv(e,t){const n=new Set;return so.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Mo(e),so.dependencies=null,[e,n]}function cv(e,t){return e&&(G.fun(e)?e(t):e.current=t),t}var rc=Symbol.for("AnimatedComponent"),uv=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Mo(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=i=>{const a=sc(i)||"Anonymous";return G.str(i)?i=o[i]||(o[i]=nc(i,s)):i=i[rc]||(i[rc]=nc(i,s)),i.displayName=`Animated(${a})`,i};return Vt(e,(i,a)=>{G.arr(e)&&(a=sc(i)),o[a]=o(i)}),{animated:o}},sc=e=>G.str(e)?e:e&&G.str(e.displayName)?e.displayName:G.fun(e)&&e.name||null;function Mn(e,...t){return G.fun(e)?e(...t):e}var Hr=(e,t)=>e===!0||!!(t&&e&&(G.fun(e)?e(t):ht(e).includes(t))),nf=(e,t)=>G.obj(e)?t&&e[t]:e,rf=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,dv=e=>e,za=(e,t=dv)=>{let n=fv;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const o=t(e[s],s);G.und(o)||(r[s]=o)}return r},fv=["config","onProps","onStart","onChange","onPause","onResume","onRest"],pv={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function gv(e){const t={};let n=0;if(Vt(e,(r,s)=>{pv[s]||(t[s]=r,n++)}),n)return t}function sf(e){const t=gv(e);if(t){const n={to:t};return Vt(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Zr(e){return e=ft(e),G.arr(e)?e.map(Zr):To(e)?kt.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function mv(e){for(const t in e)return!0;return!1}function ki(e){return G.fun(e)||G.arr(e)&&G.obj(e[0])}function hv(e,t){e.ref?.delete(e),t?.delete(e)}function xv(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var bv={default:{tension:170,friction:26}},Ni={...bv.default,mass:1,damping:1,easing:Ub.linear,clamp:!1},vv=class{constructor(){this.velocity=0,Object.assign(this,Ni)}};function yv(e,t,n){n&&(n={...n},oc(n,t),t={...n,...t}),oc(e,t),Object.assign(e,t);for(const i in Ni)e[i]==null&&(e[i]=Ni[i]);let{frequency:r,damping:s}=e;const{mass:o}=e;return G.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*s*o/r),e}function oc(e,t){if(!G.und(t.decay))e.duration=void 0;else{const n=!G.und(t.tension)||!G.und(t.friction);(n||!G.und(t.frequency)||!G.und(t.damping)||!G.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var ic=[],wv=class{constructor(){this.changed=!1,this.values=ic,this.toValues=null,this.fromValues=ic,this.config=new vv,this.immediate=!1}};function of(e,{key:t,props:n,defaultProps:r,state:s,actions:o}){return new Promise((i,a)=>{let l,u,f=Hr(n.cancel??r?.cancel,t);if(f)m();else{G.und(n.pause)||(s.paused=Hr(n.pause,t));let y=r?.pause;y!==!0&&(y=s.paused||Hr(y,t)),l=Mn(n.delay||0,t),y?(s.resumeQueue.add(g),o.pause()):(o.resume(),g())}function p(){s.resumeQueue.add(g),s.timeouts.delete(u),u.cancel(),l=u.time-Ie.now()}function g(){l>0&&!kt.skipAnimation?(s.delayed=!0,u=Ie.setTimeout(m,l),s.pauseQueue.add(p),s.timeouts.add(u)):m()}function m(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(p),s.timeouts.delete(u),e<=(s.cancelId||0)&&(f=!0);try{o.start({...n,callId:e,cancel:f},i)}catch(y){a(y)}}})}var Va=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?nr(e.get()):t.every(n=>n.noop)?af(e.get()):Pt(e.get(),t.every(n=>n.finished)),af=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Pt=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),nr=e=>({value:e,cancelled:!0,finished:!1});function lf(e,t,n,r){const{callId:s,parentId:o,onRest:i}=t,{asyncTo:a,promise:l}=n;return!o&&e===a&&!t.reset?l:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=za(t,(v,x)=>x==="onRest"?void 0:v);let f,p;const g=new Promise((v,x)=>(f=v,p=x)),m=v=>{const x=s<=(n.cancelId||0)&&nr(r)||s!==n.asyncId&&Pt(r,!1);if(x)throw v.result=x,p(v),v},y=(v,x)=>{const h=new ac,S=new lc;return(async()=>{if(kt.skipAnimation)throw Jr(n),S.result=Pt(r,!1),p(S),S;m(h);const R=G.obj(v)?{...v}:{...x,to:v};R.parentId=s,Vt(u,(T,E)=>{G.und(R[E])&&(R[E]=T)});const w=await r.start(R);return m(h),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),w})()};let b;if(kt.skipAnimation)return Jr(n),Pt(r,!1);try{let v;G.arr(e)?v=(async x=>{for(const h of x)await y(h)})(e):v=Promise.resolve(e(y,r.stop.bind(r))),await Promise.all([v.then(f),g]),b=Pt(r.get(),!0,!1)}catch(v){if(v instanceof ac)b=v.result;else if(v instanceof lc)b=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=o,n.asyncTo=o?a:void 0,n.promise=o?l:void 0)}return G.fun(i)&&Ie.batchedUpdates(()=>{i(b,r,r.item)}),b})()}function Jr(e,t){zr(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ac=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},lc=class extends Error{constructor(){super("SkipAnimationSignal")}},ji=e=>e instanceof Ha,Sv=1,Ha=class extends Ud{constructor(){super(...arguments),this.id=Sv++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=At(this);return e&&e.getValue()}to(...e){return kt.to(this,e)}interpolate(...e){return Jb(),kt.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){qr(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Eo.sort(this),qr(this,{type:"priority",parent:this,priority:e})}},Fn=Symbol.for("SpringPhase"),cf=1,Ai=2,Fi=4,ri=e=>(e[Fn]&cf)>0,Zt=e=>(e[Fn]&Ai)>0,Tr=e=>(e[Fn]&Fi)>0,cc=(e,t)=>t?e[Fn]|=Ai|cf:e[Fn]&=~Ai,uc=(e,t)=>t?e[Fn]|=Fi:e[Fn]&=~Fi,Rv=class extends Ha{constructor(e,t){if(super(),this.animation=new wv,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!G.und(e)||!G.und(t)){const n=G.obj(e)?{...e}:{...t,from:e};G.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Zt(this)||this._state.asyncTo)||Tr(this)}get goal(){return ft(this.animation.to)}get velocity(){const e=At(this);return e instanceof Oo?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return ri(this)}get isAnimating(){return Zt(this)}get isPaused(){return Tr(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,i=Po(r.to);!i&&St(r.to)&&(s=ht(ft(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const p=u.constructor==ro?1:i?i[f].lastPosition:s[f];let g=r.immediate,m=p;if(!g){if(m=u.lastPosition,o.tension<=0){u.done=!0;return}let y=u.elapsedTime+=e;const b=r.fromValues[f],v=u.v0!=null?u.v0:u.v0=G.arr(o.velocity)?o.velocity[f]:o.velocity;let x;const h=o.precision||(b==p?.005:Math.min(1,Math.abs(p-b)*.001));if(G.und(o.duration))if(o.decay){const S=o.decay===!0?.998:o.decay,R=Math.exp(-(1-S)*y);m=b+v/(1-S)*(1-R),g=Math.abs(u.lastPosition-m)<=h,x=v*R}else{x=u.lastVelocity==null?v:u.lastVelocity;const S=o.restVelocity||h/10,R=o.clamp?0:o.bounce,w=!G.und(R),T=b==p?u.v0>0:b<p;let E,I=!1;const j=1,M=Math.ceil(e/j);for(let N=0;N<M&&(E=Math.abs(x)>S,!(!E&&(g=Math.abs(p-m)<=h,g)));++N){w&&(I=m==p||m>p==T,I&&(x=-x*R,m=p));const P=-o.tension*1e-6*(m-p),C=-o.friction*.001*x,A=(P+C)/o.mass;x=x+A*j,m=m+x*j}}else{let S=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,y=u.elapsedTime+=e)),S=(o.progress||0)+y/this._memoizedDuration,S=S>1?1:S<0?0:S,u.durationProgress=S),m=b+o.easing(S)*(p-b),x=(m-u.lastPosition)/e,g=S==1}u.lastVelocity=x,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),g=!0)}i&&!i[f].done&&(g=!1),g?u.done=!0:t=!1,u.setValue(m,o.round)&&(n=!0)});const a=At(this),l=a.getValue();if(t){const u=ft(r.to);(l!==u||n)&&!o.decay?(a.setValue(u),this._onChange(u)):n&&o.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(e){return Ie.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Zt(this)){const{to:e,config:t}=this.animation;Ie.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return G.und(e)?(n=this.queue||[],this.queue=[]):n=[G.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Va(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Jr(this._state,e&&this._lastCallId),Ie.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=G.obj(n)?n[t]:n,(n==null||ki(n))&&(n=void 0),r=G.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return ri(this)||(e.reverse&&([n,r]=[r,n]),r=ft(r),G.und(r)?At(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,za(e,(i,a)=>/^on/.test(a)?nf(i,n):i)),fc(this,e,"onProps"),Or(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return of(++this._lastCallId,{key:n,props:e,defaultProps:r,state:o,actions:{pause:()=>{Tr(this)||(uc(this,!0),Ar(o.pauseQueue),Or(this,"onPause",Pt(this,Pr(this,this.animation.to)),this))},resume:()=>{Tr(this)&&(uc(this,!1),Zt(this)&&this._resume(),Ar(o.resumeQueue),Or(this,"onResume",Pt(this,Pr(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){const a=uf(e);if(a)return this._update(a,!0)}return i})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(nr(this));const r=!G.und(e.to),s=!G.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(nr(this));const{key:o,defaultProps:i,animation:a}=this,{to:l,from:u}=a;let{to:f=l,from:p=u}=e;s&&!r&&(!t.default||G.und(f))&&(f=p),t.reverse&&([f,p]=[p,f]);const g=!Yt(p,u);g&&(a.from=p),p=ft(p);const m=!Yt(f,l);m&&this._focus(f);const y=ki(t.to),{config:b}=a,{decay:v,velocity:x}=b;(r||s)&&(b.velocity=0),t.config&&!y&&yv(b,Mn(t.config,o),t.config!==i.config?Mn(i.config,o):void 0);let h=At(this);if(!h||G.und(f))return n(Pt(this,!0));const S=G.und(t.reset)?s&&!t.default:!G.und(p)&&Hr(t.reset,o),R=S?p:this.get(),w=Zr(f),T=G.num(w)||G.arr(w)||To(w),E=!y&&(!T||Hr(i.immediate||t.immediate,o));if(m){const N=Mi(f);if(N!==h.constructor)if(E)h=this._set(w);else throw Error(`Cannot animate between ${h.constructor.name} and ${N.name}, as the "to" prop suggests`)}const I=h.constructor;let j=St(f),M=!1;if(!j){const N=S||!ri(this)&&g;(m||N)&&(M=Yt(Zr(R),w),j=!M),(!Yt(a.immediate,E)&&!E||!Yt(b.decay,v)||!Yt(b.velocity,x))&&(j=!0)}if(M&&Zt(this)&&(a.changed&&!S?j=!0:j||this._stop(l)),!y&&((j||St(l))&&(a.values=h.getPayload(),a.toValues=St(f)?null:I==ro?[1]:ht(w)),a.immediate!=E&&(a.immediate=E,!E&&!S&&this._set(l)),j)){const{onRest:N}=a;Ne(Cv,C=>fc(this,t,C));const P=Pt(this,Pr(this,l));Ar(this._pendingCalls,P),this._pendingCalls.add(n),a.changed&&Ie.batchedUpdates(()=>{a.changed=!S,N?.(P,this),S?Mn(i.onRest,P):a.onStart?.(P,this)})}S&&this._set(R),y?n(lf(t.to,t,this._state,this)):j?this._start():Zt(this)&&!m?this._pendingCalls.add(n):n(af(R))}_focus(e){const t=this.animation;e!==t.to&&(Jl(this)&&this._detach(),t.to=e,Jl(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;St(t)&&(vr(t,this),ji(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;St(e)&&Kr(e,this)}_set(e,t=!0){const n=ft(e);if(!G.und(n)){const r=At(this);if(!r||!Yt(n,r.getValue())){const s=Mi(n);!r||r.constructor!=s?_a(this,s.create(n)):r.setValue(n),r&&Ie.batchedUpdates(()=>{this._onChange(n,t)})}}return At(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Or(this,"onStart",Pt(this,Pr(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Mn(this.animation.onChange,e,this)),Mn(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;At(this).reset(ft(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Zt(this)||(cc(this,!0),Tr(this)||this._resume())}_resume(){kt.skipAnimation?this.finish():Eo.start(this)}_stop(e,t){if(Zt(this)){cc(this,!1);const n=this.animation;Ne(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),qr(this,{type:"idle",parent:this});const r=t?nr(this.get()):Pt(this.get(),Pr(this,e??n.to));Ar(this._pendingCalls,r),n.changed&&(n.changed=!1,Or(this,"onRest",r,this))}}};function Pr(e,t){const n=Zr(t),r=Zr(e.get());return Yt(r,n)}function uf(e,t=e.loop,n=e.to){const r=Mn(t);if(r){const s=r!==!0&&sf(r),o=(s||e).reverse,i=!s||s.reset;return es({...e,loop:t,default:!1,pause:void 0,to:!o||ki(n)?n:void 0,from:i?e.from:void 0,reset:i,...s})}}function es(e){const{to:t,from:n}=e=sf(e),r=new Set;return G.obj(t)&&dc(t,r),G.obj(n)&&dc(n,r),e.keys=r.size?Array.from(r):null,e}function Ev(e){const t=es(e);return G.und(t.default)&&(t.default=za(t)),t}function dc(e,t){Vt(e,(n,r)=>n!=null&&t.add(r))}var Cv=["onStart","onRest","onChange","onPause","onResume"];function fc(e,t,n){e.animation[n]=t[n]!==rf(t,n)?nf(t[n],e.key):void 0}function Or(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var Iv=["onStart","onChange","onRest"],Tv=1,Pv=class{constructor(e,t){this.id=Tv++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];G.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(es(e)),this}start(e){let{queue:t}=this;return e?t=ht(e).map(es):this.queue=[],this._flush?this._flush(this,t):(mf(this,t),Li(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Ne(ht(t),r=>n[r].stop(!!e))}else Jr(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(G.und(e))this.start({pause:!0});else{const t=this.springs;Ne(ht(e),n=>t[n].pause())}return this}resume(e){if(G.und(e))this.start({pause:!1});else{const t=this.springs;Ne(ht(e),n=>t[n].resume())}return this}each(e){Vt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,zr(e,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const o=!r&&this._started,i=s||o&&n.size?this.get():null;s&&t.size&&zr(t,([a,l])=>{l.value=i,a(l,this,this._item)}),o&&(this._started=!1,zr(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Ie.onFrame(this._onFrame)}};function Li(e,t){return Promise.all(t.map(n=>df(e,n))).then(n=>Va(e,n))}async function df(e,t,n){const{keys:r,to:s,from:o,loop:i,onRest:a,onResolve:l}=t,u=G.obj(t.default)&&t.default;i&&(t.loop=!1),s===!1&&(t.to=null),o===!1&&(t.from=null);const f=G.arr(s)||G.fun(s)?s:void 0;f?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Ne(Iv,b=>{const v=t[b];if(G.fun(v)){const x=e._events[b];t[b]=({finished:h,cancelled:S})=>{const R=x.get(v);R?(h||(R.finished=!1),S&&(R.cancelled=!0)):x.set(v,{value:null,finished:h||!1,cancelled:S||!1})},u&&(u[b]=t[b])}});const p=e._state;t.pause===!p.paused?(p.paused=t.pause,Ar(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const g=(r||Object.keys(e.springs)).map(b=>e.springs[b].start(t)),m=t.cancel===!0||rf(t,"cancel")===!0;(f||m&&p.asyncId)&&g.push(of(++e._lastAsyncId,{props:t,state:p,actions:{pause:Pi,resume:Pi,start(b,v){m?(Jr(p,e._lastAsyncId),v(nr(e))):(b.onRest=a,v(lf(f,b,p,e)))}}})),p.paused&&await new Promise(b=>{p.resumeQueue.add(b)});const y=Va(e,await Promise.all(g));if(i&&y.finished&&!(n&&y.noop)){const b=uf(t,i,s);if(b)return mf(e,[b]),df(e,b,!0)}return l&&Ie.batchedUpdates(()=>l(y,e,e.item)),y}function pc(e,t){const n={...e.springs};return t&&Ne(ht(t),r=>{G.und(r.keys)&&(r=es(r)),G.obj(r.to)||(r={...r,to:void 0}),gf(n,r,s=>pf(s))}),ff(e,n),n}function ff(e,t){Vt(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,vr(n,e))})}function pf(e,t){const n=new Rv;return n.key=e,t&&vr(n,t),n}function gf(e,t,n){t.keys&&Ne(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function mf(e,t){Ne(t,n=>{gf(e.springs,n,r=>pf(r,e))})}var Ov=d.createContext({pause:!1,immediate:!1}),Mv=()=>{const e=[],t=function(r){tv();const s=[];return Ne(e,(o,i)=>{if(G.und(r))s.push(o.start());else{const a=n(r,o,i);a&&s.push(o.start(a))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Ne(e,r=>r.pause(...arguments)),this},t.resume=function(){return Ne(e,r=>r.resume(...arguments)),this},t.set=function(r){Ne(e,(s,o)=>{const i=G.fun(r)?r(o,s):r;i&&s.set(i)})},t.start=function(r){const s=[];return Ne(e,(o,i)=>{if(G.und(r))s.push(o.start());else{const a=this._getProps(r,o,i);a&&s.push(o.start(a))}}),s},t.stop=function(){return Ne(e,r=>r.stop(...arguments)),this},t.update=function(r){return Ne(e,(s,o)=>s.update(this._getProps(r,s,o))),this};const n=function(r,s,o){return G.fun(r)?r(o,s):r};return t._getProps=n,t};function kv(e,t,n){const r=G.fun(t)&&t;r&&!n&&(n=[]);const s=d.useMemo(()=>r||arguments.length==3?Mv():void 0,[]),o=d.useRef(0),i=Kd(),a=d.useMemo(()=>({ctrls:[],queue:[],flush(x,h){const S=pc(x,h);return o.current>0&&!a.queue.length&&!Object.keys(S).some(w=>!x.springs[w])?Li(x,h):new Promise(w=>{ff(x,S),a.queue.push(()=>{w(Li(x,h))}),i()})}}),[]),l=d.useRef([...a.ctrls]),u=d.useRef([]),f=tc(e)||0;d.useMemo(()=>{Ne(l.current.slice(e,f),x=>{hv(x,s),x.stop(!0)}),l.current.length=e,p(f,e)},[e]),d.useMemo(()=>{p(0,Math.min(f,e))},n);function p(x,h){for(let S=x;S<h;S++){const R=l.current[S]||(l.current[S]=new Pv(null,a.flush)),w=r?r(S,R):t[S];w&&(u.current[S]=Ev(w))}}const g=l.current.map((x,h)=>pc(x,u.current[h])),m=d.useContext(Ov),y=tc(m),b=m!==y&&mv(m);Da(()=>{o.current++,a.ctrls=l.current;const{queue:x}=a;x.length&&(a.queue=[],Ne(x,h=>h())),Ne(l.current,(h,S)=>{s?.add(h),b&&h.start({default:m});const R=u.current[S];R&&(xv(h,R.ref),h.ref?h.queue.push(R):h.start(R))})}),Qd(()=>()=>{Ne(a.ctrls,x=>x.stop(!0))});const v=g.map(x=>({...x}));return s?[v,s]:v}function Nv(e,t){const n=G.fun(e),[[r],s]=kv(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}var jv=class extends Ha{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Xr(...t);const n=this._get(),r=Mi(n);_a(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Yt(t,n)||(At(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&gc(this._active)&&si(this)}_get(){const e=G.arr(this.source)?this.source.map(ft):ht(ft(this.source));return this.calc(...e)}_start(){this.idle&&!gc(this._active)&&(this.idle=!1,Ne(Po(this),e=>{e.done=!1}),kt.skipAnimation?(Ie.batchedUpdates(()=>this.advance()),si(this)):Eo.start(this))}_attach(){let e=1;Ne(ht(this.source),t=>{St(t)&&vr(t,this),ji(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Ne(ht(this.source),e=>{St(e)&&Kr(e,this)}),this._active.clear(),si(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ht(this.source).reduce((t,n)=>Math.max(t,(ji(n)?n.priority:0)+1),0))}};function Av(e){return e.idle!==!1}function gc(e){return!e.size||Array.from(e).every(Av)}function si(e){e.idle||(e.idle=!0,Ne(Po(e),t=>{t.done=!0}),qr(e,{type:"idle",parent:e}))}kt.assign({createStringInterpolator:Gd,to:(e,t)=>new jv(e,t)});var hf=/^--/;function Fv(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!hf.test(e)&&!($r.hasOwnProperty(e)&&$r[e])?t+"px":(""+t).trim()}var mc={};function Lv(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:o,scrollTop:i,scrollLeft:a,viewBox:l,...u}=t,f=Object.values(u),p=Object.keys(u).map(g=>n||e.hasAttribute(g)?g:mc[g]||(mc[g]=g.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));o!==void 0&&(e.textContent=o);for(const g in s)if(s.hasOwnProperty(g)){const m=Fv(g,s[g]);hf.test(g)?e.style.setProperty(g,m):e.style[g]=m}p.forEach((g,m)=>{e.setAttribute(g,f[m])}),r!==void 0&&(e.className=r),i!==void 0&&(e.scrollTop=i),a!==void 0&&(e.scrollLeft=a),l!==void 0&&e.setAttribute("viewBox",l)}var $r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dv=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),_v=["Webkit","Ms","Moz","O"];$r=Object.keys($r).reduce((e,t)=>(_v.forEach(n=>e[Dv(n,t)]=e[t]),e),$r);var zv=/^(matrix|translate|scale|rotate|skew)/,Vv=/^(translate)/,Hv=/^(rotate|skew)/,oi=(e,t)=>G.num(e)&&e!==0?e+t:e,Vs=(e,t)=>G.arr(e)?e.every(n=>Vs(n,t)):G.num(e)?e===t:parseFloat(e)===t,$v=class extends Mo{constructor({x:e,y:t,z:n,...r}){const s=[],o=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),o.push(i=>[`translate3d(${i.map(a=>oi(a,"px")).join(",")})`,Vs(i,0)])),Vt(r,(i,a)=>{if(a==="transform")s.push([i||""]),o.push(l=>[l,l===""]);else if(zv.test(a)){if(delete r[a],G.und(i))return;const l=Vv.test(a)?"px":Hv.test(a)?"deg":"";s.push(ht(i)),o.push(a==="rotate3d"?([u,f,p,g])=>[`rotate3d(${u},${f},${p},${oi(g,l)})`,Vs(g,0)]:u=>[`${a}(${u.map(f=>oi(f,l)).join(",")})`,Vs(u,a.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new Bv(s,o)),super(r)}},Bv=class extends Ud{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Ne(this.inputs,(n,r)=>{const s=ft(n[0]),[o,i]=this.transforms[r](G.arr(s)?s:n.map(ft));e+=" "+o,t=t&&i}),t?"none":e}observerAdded(e){e==1&&Ne(this.inputs,t=>Ne(t,n=>St(n)&&vr(n,this)))}observerRemoved(e){e==0&&Ne(this.inputs,t=>Ne(t,n=>St(n)&&Kr(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),qr(this,e)}},Wv=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];kt.assign({batchedUpdates:nt.unstable_batchedUpdates,createStringInterpolator:Gd,colors:jb});var Uv=uv(Wv,{applyAnimatedValues:Lv,createAnimatedStyle:e=>new $v(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Yv=Uv.animated;function Hs({value:e,duration:t=500,className:n=""}){const r=d.useRef(0),{number:s}=Nv({from:{number:r.current},to:{number:e},config:{duration:t}});return d.useEffect(()=>{r.current=e},[e]),c.jsx(Yv.span,{className:n,children:s.to(o=>Math.round(o))})}const Xv={search:"Bilder oder Tags suchen...",home:"Startseite",sort:{name:"Name",date:"Datum",size:"Gre",rating:"Bewertung"},rating:"Bewertung",clearFilters:"Alle Filter zurcksetzen",resetFilter:"Filter zurcksetzen",rotate90Left:"90 links drehen",rotate90Right:"90 rechts drehen",rotate180:"180 drehen",flipHorizontal:"Horizontal spiegeln",flipVertical:"Vertikal spiegeln",selected:"ausgewhlt",file:"Datei",tag:"Tag",noSuggestions:"Keine Vorschlge gefunden"},Gv={openFile:"Datei ffnen",selectFolder:"Ordner auswhlen",recentFolders:"Zuletzt geffnet",favorites:"Favoriten",noFavorites:"Keine Favoriten",noRecentFolders:"Keine Ordner"},qv={title:"Tags",addTag:"Tag hinzufgen",noTags:"Keine Tags",folderTags:"Tags im Ordner",imageTags:"Bild-Tags",selectImage:"Bild auswhlen"},Kv={title:"Einstellungen",language:"Sprache",theme:"Design",themeLight:"Hell",themeDark:"Dunkel",performanceMode:"Leistungsmodus",performanceModeDesc:"Reduziert Glaseffekte"},Qv={loading:"Laden...",loadingItems:"Lade Elemente...",error:"Fehler",save:"Speichern",cancel:"Abbrechen",delete:"Lschen",edit:"Bearbeiten",close:"Schlieen",parentFolder:"bergeordneter Ordner"},Zv={noResults:"Keine Treffer",noResultsHint:"Versuche andere Suchbegriffe oder Filter",resetFilters:"Filter zurcksetzen",folderEmpty:"Ordner ist leer",noImages:"Dieser Ordner enthlt keine Unterordner oder untersttzten Bilddateien.",noTags:"Keine Tags vorhanden",noTagsHint:"Whle Bilder aus und vergebe Tags",openTagManager:"Tag-Manager ffnen"},Jv={ratingSet:"Bewertung:",ratingFailed:"Bewertung konnte nicht gespeichert werden"},ey={close:"Schlieen (ESC)",previous:"Vorheriges ()",next:"Nchstes ()",info:"Info (I)",rotateLeft:"Links drehen",rotateRight:"Rechts drehen",flipHorizontal:"Horizontal spiegeln",flipVertical:"Vertikal spiegeln",zoomOut:"Verkleinern (-)",zoomIn:"Vergrern (+)",filmstrip:"Filmstreifen"},ty={selectedTags:"Tags der Auswahl"},ny={images:"Bilder",folders:"Ordner",selected:"ausgewhlt"},ry={title:"Tag Manager",newCategory:"Neue Kategorie hinzufgen...",newSubcategory:"Neue Unterkategorie...",newTag:"Neuer Tag...",import:"Importieren",export:"Exportieren"},sy={title:"Willkommen bei TagFusion",subtitle:"Organisiere deine Bildersammlung mit modernem Tagging, blitzschneller Suche und intuitiver Bedienung.",drives:"Gerte und Laufwerke",freeOf:"frei von"},oy={toolbar:Xv,sidebar:Gv,tagPanel:qv,settings:Kv,common:Qv,emptyState:Zv,imageCard:Jv,lightbox:ey,mainContent:ty,statusBar:ny,tagManager:ry,hero:sy},iy={search:"Search images or tags...",home:"Home",sort:{name:"Name",date:"Date",size:"Size",rating:"Rating"},rating:"Rating",clearFilters:"Clear all filters",resetFilter:"Reset filter",rotate90Left:"Rotate 90 left",rotate90Right:"Rotate 90 right",rotate180:"Rotate 180",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",selected:"selected",file:"File",tag:"Tag",noSuggestions:"No suggestions found"},ay={openFile:"Open file",selectFolder:"Select folder",recentFolders:"Recent folders",favorites:"Favorites",noFavorites:"No favorites",noRecentFolders:"No folders"},ly={title:"Tags",addTag:"Add tag",noTags:"No tags",folderTags:"Folder tags",imageTags:"Image tags",selectImage:"Select image"},cy={title:"Settings",language:"Language",theme:"Theme",themeLight:"Light",themeDark:"Dark",performanceMode:"Performance mode",performanceModeDesc:"Reduces glass effects"},uy={loading:"Loading...",loadingItems:"Loading items...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",parentFolder:"Parent folder"},dy={noResults:"No results",noResultsHint:"Try different search terms or filters",resetFilters:"Reset filters",folderEmpty:"Folder is empty",noImages:"This folder contains no subfolders or supported image files.",noTags:"No tags available",noTagsHint:"Select images and assign tags",openTagManager:"Open Tag Manager"},fy={ratingSet:"Rating:",ratingFailed:"Failed to save rating"},py={close:"Close (ESC)",previous:"Previous ()",next:"Next ()",info:"Info (I)",rotateLeft:"Rotate left",rotateRight:"Rotate right",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",zoomOut:"Zoom out (-)",zoomIn:"Zoom in (+)",filmstrip:"Filmstrip"},gy={selectedTags:"Selection tags"},my={images:"images",folders:"folders",selected:"selected"},hy={title:"Tag Manager",newCategory:"Add new category...",newSubcategory:"New subcategory...",newTag:"New tag...",import:"Import",export:"Export"},xy={title:"Welcome to TagFusion",subtitle:"Organize your image collection with modern tagging, lightning-fast search, and intuitive controls.",drives:"Devices and Drives",freeOf:"free of"},by={toolbar:iy,sidebar:ay,tagPanel:ly,settings:cy,common:uy,emptyState:dy,imageCard:fy,lightbox:py,mainContent:gy,statusBar:my,tagManager:hy,hero:xy},vy={de:{common:oy},en:{common:by}};ci.use(ep).use(tp).init({resources:vy,fallbackLng:"de",defaultNS:"common",ns:["common"],detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"tagfusion-language"},interpolation:{escapeValue:!1},react:{useSuspense:!1}});const ii=e=>{e==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light-mode")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light-mode"))},xf=mn()(Nm(e=>({performanceMode:!1,language:"de",theme:"dark",setPerformanceMode:t=>{e({performanceMode:t}),t?document.documentElement.classList.add("performance-mode"):document.documentElement.classList.remove("performance-mode")},togglePerformanceMode:()=>{e(t=>{const n=!t.performanceMode;return n?document.documentElement.classList.add("performance-mode"):document.documentElement.classList.remove("performance-mode"),{performanceMode:n}})},setLanguage:t=>{e({language:t}),ci.changeLanguage(t)},setTheme:t=>{e({theme:t}),ii(t)},toggleTheme:()=>{e(t=>{const n=t.theme==="dark"?"light":"dark";return ii(n),{theme:n}})}}),{name:"tagfusion-settings",onRehydrateStorage:()=>e=>{e?.performanceMode&&document.documentElement.classList.add("performance-mode"),e?.theme&&ii(e.theme),e?.language&&ci.changeLanguage(e.language)}}));function yy({onTagClick:e,searchQuery:t=""}){const{categories:n}=Ta(),r=as(),s=is(),o=Ru(),i=d.useMemo(()=>new Map(s.map(p=>[p.path,p])),[s]),a=d.useMemo(()=>{const p=Array.from(r).map(g=>i.get(g)).filter(Boolean);return new Set(p.flatMap(g=>g.tags))},[i,r]),l=d.useMemo(()=>{if(!t.trim())return n;const p=t.toLowerCase();return n.map(g=>({...g,subcategories:g.subcategories.map(m=>({...m,tags:m.tags.filter(y=>y.toLowerCase().includes(p))})).filter(m=>m.tags.length>0)})).filter(g=>g.subcategories.length>0)},[n,t]),u=async p=>{if(e){e(p);return}if(r.size!==0)for(const g of r){const m=i.get(g);m&&!m.tags.includes(p)&&await o(g,[...m.tags,p])}},f=async(p,g)=>{if(g.stopPropagation(),r.size!==0)for(const m of r){const y=i.get(m);y&&y.tags.includes(p)&&await o(m,y.tags.filter(b=>b!==p))}};return l.length===0?c.jsxs("div",{className:"text-center py-4 text-slate-500",children:[c.jsx(Cc,{size:20,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-xs",children:t?"Keine Tags gefunden":"Keine Tag-Bibliothek"})]}):c.jsx("div",{className:"space-y-2",children:l.map(p=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 text-sm text-cyan-400 font-medium",children:[c.jsx("span",{children:p.name}),c.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:p.subcategories.reduce((g,m)=>g+m.tags.length,0)})]}),c.jsx("div",{className:"pl-2 space-y-1",children:p.subcategories.map(g=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 text-xs text-slate-400",children:[c.jsx("span",{children:g.name}),c.jsx("span",{className:"text-slate-500 ml-auto",children:g.tags.length})]}),g.tags.length>0&&c.jsx("div",{className:"pl-3 py-1 flex flex-wrap gap-1.5",children:g.tags.map(m=>{const y=r.size>0&&a.has(m);return c.jsxs("div",{className:"inline-flex items-center gap-0.5 rounded-full text-xs cursor-pointer hover:scale-105 transition-transform",style:{background:y?"linear-gradient(135deg, rgba(6, 182, 212, 0.4) 0%, rgba(6, 182, 212, 0.2) 100%)":"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:y?"1px solid rgba(6, 182, 212, 0.6)":"1px solid rgba(6, 182, 212, 0.25)"},children:[c.jsx("button",{onClick:()=>u(m),className:`px-2 py-0.5 ${y?"text-cyan-300":"text-slate-200"}`,title:r.size>0?`"${m}" zu ${r.size} Bild(ern) hinzufgen`:m,children:m}),y&&c.jsx("button",{onClick:b=>f(m,b),className:"pr-1.5 pl-0.5 py-0.5 text-cyan-400 hover:text-red-400 transition-colors",title:`"${m}" von ${r.size} Bild(ern) entfernen`,children:c.jsx(dn,{size:12})})]},m)})})]},g.id))})]},p.id))})}function wy(){const{t:e}=Nt(),{images:t,tagPanelWidth:n,setTagPanelWidth:r,filterTags:s,setFilterTags:o}=lh(),{openModal:i,categories:a}=Ta(),[l,u]=d.useState(!1),[f,p]=d.useState(""),g=d.useRef(null),[m,y]=d.useState(()=>localStorage.getItem("tagfusion-folder-tags-collapsed")==="true");d.useEffect(()=>{localStorage.setItem("tagfusion-folder-tags-collapsed",String(m))},[m]);const b=d.useCallback(x=>{x.preventDefault(),u(!0);const h=x.clientX,S=n,R=T=>{const E=h-T.clientX,I=Math.min(Um,Math.max(Wm,S+E));r(I)},w=()=>{u(!1),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",w)},[n,r]),v=d.useMemo(()=>{const x=new Map;return t.forEach(h=>{h.tags?.forEach(S=>{x.set(S,(x.get(S)||0)+1)})}),Array.from(x.entries()).map(([h,S])=>({name:h,count:S})).sort((h,S)=>S.count-h.count)},[t]);return c.jsxs("aside",{ref:g,className:"h-full flex flex-col glass-tagpanel relative",style:{width:n},"data-testid":"tag-panel",children:[c.jsx("div",{onMouseDown:b,className:`absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize group hover:bg-cyan-500/30 transition-colors z-10 ${l?"bg-cyan-500/50":""}`,children:c.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(hp,{size:12,className:"text-cyan-400"})})}),c.jsxs(pu,{className:"flex-1 overflow-hidden",children:[c.jsxs(gu,{className:"h-full w-full p-4 space-y-4",children:[c.jsxs("div",{className:"glass-section p-3",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("button",{onClick:()=>y(x=>!x),className:`flex items-center gap-2 w-full text-left cursor-pointer group ${m?"":"mb-3"}`,children:[c.jsx(sr,{size:14,className:"text-cyan-400"}),c.jsx("h4",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("tagPanel.folderTags")}),c.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["(",c.jsx(Hs,{value:v.length,className:"text-cyan-400"}),")"]}),c.jsx(Vi,{size:14,className:`text-cyan-400 ml-auto transition-transform duration-200 ${m?"-rotate-90":""}`})]}),c.jsx(un,{initial:!1,children:!m&&c.jsx(he.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:v.length===0?c.jsxs("div",{className:"text-center py-6 text-[var(--color-text-muted)]",children:[c.jsx(or,{size:24,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-sm",children:e("tagPanel.noTags")})]}):c.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(({name:x,count:h},S)=>{const R=s.includes(x);return c.jsx(B0,{active:R,count:h,variant:"cyan",delay:S,onClick:()=>{o(R?s.filter(w=>w!==x):[...s,x])},removable:!1,children:x},x)})})})})]}),c.jsxs("div",{className:"glass-section p-3",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Cc,{size:14,className:"text-cyan-400"}),c.jsx("h4",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("tagPanel.title")})]}),c.jsx(wt,{onClick:i,title:e("common.edit"),size:"xs",variant:"ghost",children:c.jsx(xp,{size:14})})]}),c.jsx(Iu,{leftIcon:c.jsx(Ic,{size:14}),value:f,onChange:x=>p(x.target.value),placeholder:e("tagPanel.addTag"),className:"mb-3"}),a.length>0?c.jsx(yy,{searchQuery:f}):c.jsx("p",{className:"text-xs text-[var(--color-text-muted)] text-center py-2",children:e("tagPanel.selectImage")})]})]}),c.jsx(hu,{orientation:"vertical",className:"w-2 p-0.5 flex touch-none select-none transition-colors bg-transparent hover:bg-white/5",children:c.jsx(xu,{className:"flex-1 rounded-full bg-cyan-500/30 hover:bg-cyan-500/50 transition-colors"})})]})]})}function Sy(e){const t=d.useRef(!0);t.current&&(t.current=!1,e())}const bf=d.createContext(void 0),vf=d.createContext(void 0),yf=d.createContext(void 0),wf=d.createContext("");function vn(){const e=d.useContext(bf);if(!e)throw new Error(qe(22));return e}function $a(){const e=d.useContext(vf);if(!e)throw new Error(qe(23));return e}function $n(){const e=d.useContext(yf);if(!e)throw new Error(qe(24));return e}function Sf(){return d.useContext(wf)}const Ry=(e,t)=>Object.is(e,t);function pr(e,t,n){return e==null||t==null?Object.is(e,t):n(e,t)}function Ms(e,t,n){return!e||e.length===0?!1:e.some(r=>r===void 0?!1:pr(r,t,n))}function Di(e,t,n){return!e||e.length===0?-1:e.findIndex(r=>r===void 0?!1:pr(r,t,n))}function Ey(e,t,n){return e.filter(r=>!pr(r,t,n))}const ge={id:$(e=>e.id),query:$(e=>e.query),items:$(e=>e.items),selectedValue:$(e=>e.selectedValue),open:$(e=>e.open),mounted:$(e=>e.mounted),forceMounted:$(e=>e.forceMounted),inline:$(e=>e.inline),activeIndex:$(e=>e.activeIndex),selectedIndex:$(e=>e.selectedIndex),isActive:$((e,t)=>e.activeIndex===t),isSelected:$((e,t)=>{const n=e.isItemEqualToValue,r=e.selectedValue;return Array.isArray(r)?r.some(s=>pr(s,t,n)):pr(r,t,n)}),transitionStatus:$(e=>e.transitionStatus),popupProps:$(e=>e.popupProps),inputProps:$(e=>e.inputProps),triggerProps:$(e=>e.triggerProps),getItemProps:$(e=>e.getItemProps),positionerElement:$(e=>e.positionerElement),listElement:$(e=>e.listElement),triggerElement:$(e=>e.triggerElement),inputElement:$(e=>e.inputElement),popupSide:$(e=>e.popupSide),openMethod:$(e=>e.openMethod),inputInsidePopup:$(e=>e.inputInsidePopup),selectionMode:$(e=>e.selectionMode),listRef:$(e=>e.listRef),labelsRef:$(e=>e.labelsRef),popupRef:$(e=>e.popupRef),emptyRef:$(e=>e.emptyRef),inputRef:$(e=>e.inputRef),keyboardActiveRef:$(e=>e.keyboardActiveRef),chipsContainerRef:$(e=>e.chipsContainerRef),clearRef:$(e=>e.clearRef),valuesRef:$(e=>e.valuesRef),allValuesRef:$(e=>e.allValuesRef),name:$(e=>e.name),disabled:$(e=>e.disabled),readOnly:$(e=>e.readOnly),required:$(e=>e.required),grid:$(e=>e.grid),isGrouped:$(e=>e.isGrouped),virtualized:$(e=>e.virtualized),onOpenChangeComplete:$(e=>e.onOpenChangeComplete),openOnInputClick:$(e=>e.openOnInputClick),itemToStringLabel:$(e=>e.itemToStringLabel),isItemEqualToValue:$(e=>e.isItemEqualToValue),modal:$(e=>e.modal),autoHighlight:$(e=>e.autoHighlight),submitOnItemClick:$(e=>e.submitOnItemClick)};function _i(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Cy(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function dt(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return _i(e)}function ai(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?_i(e.value):_i(e)}function Iy(e,t){return(n,r)=>{if(n==null)return!1;const s=dt(n,t);return e.contains(s,r)}}function Ty(e,t,n){return(r,s)=>{if(r==null)return!1;if(!s)return!0;const o=dt(r,t),i=n!=null?dt(n,t):"";return i&&e.contains(i,s)&&i.length===s.length?!0:e.contains(o,s)}}const hc=new Map;function Rf(e){return Array.isArray(e)?e.map(t=>Rf(t)).join(","):e==null?"":String(e)}function Py(e={}){const t={usage:"search",sensitivity:"base",ignorePunctuation:!0,...e},n=`${Rf(e.locale)}|${JSON.stringify(t)}`,r=hc.get(n);if(r)return r;const s=new Intl.Collator(e.locale,t),o={contains(i,a,l){if(!a)return!0;const u=dt(i,l);for(let f=0;f<=u.length-a.length;f+=1)if(s.compare(u.slice(f,f+a.length),a)===0)return!0;return!1},startsWith(i,a,l){if(!a)return!0;const u=dt(i,l);return s.compare(u.slice(0,a.length),a)===0},endsWith(i,a,l){if(!a)return!0;const u=dt(i,l),f=a.length;return u.length>=f&&s.compare(u.slice(u.length-f),a)===0}};return hc.set(n,o),o}const Oy=Py;function ks(e,t){const n=d.useRef(e),r=Z(t);ne(()=>{n.current!==e&&r(n.current)},[e,r]),ne(()=>{n.current=e},[e])}const Ef=Symbol("none"),Pn={value:Ef,index:-1};function My(e){const{id:t,onOpenChangeComplete:n,defaultSelectedValue:r=null,selectedValue:s,onSelectedValueChange:o,defaultInputValue:i,inputValue:a,selectionMode:l="none",onItemHighlighted:u,name:f,disabled:p=!1,readOnly:g=!1,required:m=!1,inputRef:y,grid:b=!1,items:v,filteredItems:x,filter:h,openOnInputClick:S=!0,autoHighlight:R=!1,keepHighlight:w=!1,highlightItemOnHover:T=!0,itemToStringLabel:E,itemToStringValue:I,isItemEqualToValue:j=Ry,virtualized:M=!1,inline:N=!1,fillInputOnItemPress:P=!0,modal:C=!1,limit:A=-1,autoComplete:O="list",locale:F,submitOnItemClick:L=!1}=e,{clearErrors:k}=Ad(),{setDirty:_,validityData:z,shouldValidateOnChange:X,setFilled:H,name:B,disabled:Q,validation:re}=So(),le=Eb({id:t}),ue=Oy({locale:F}),[J,ce]=d.useState(!1),[V,D]=d.useState(null),se=d.useRef([]),K=d.useRef([]),ae=d.useRef(null),W=d.useRef(null),U=d.useRef(null),Y=d.useRef(!0),ve=d.useRef(!1),xe=d.useRef(null),Re=d.useRef(null),ee=d.useRef(null),fe=d.useRef(Pn),te=d.useRef(null),de=d.useRef([]),oe=d.useRef([]),Ee=Q||p,Pe=B??f,ye=l==="multiple",je=l==="single",_e=a!==void 0||i!==void 0,Be=v!==void 0,Ke=x!==void 0;let Le;R==="always"?Le="always":Le=R?"input-change":!1;const[q,Ae]=js({controlled:s,default:ye?r??Xt:r,name:"Combobox",state:"selectedValue"}),De=d.useMemo(()=>h===null?()=>!0:h!==void 0?h:je&&!J?Ty(ue,E,q):Iy(ue,E),[h,je,q,J,ue,E]),be=ut(()=>_e?i??"":je?dt(q,E):"").current,[Se,Qe]=js({controlled:a,default:be,name:"Combobox",state:"inputValue"}),[ke,It]=js({controlled:e.open,default:e.defaultOpen,name:"Combobox",state:"open"}),We=Cy(v),Ue=V??(Se===""?"":String(Se).trim()),yn=je?dt(q,E):"",wr=je&&!J&&Ue!==""&&yn!==""&&yn.length===Ue.length&&ue.contains(yn,Ue),wn=wr?"":Ue,fs=Be&&Ke&&wr,jt=d.useMemo(()=>v?We?v.flatMap(ie=>ie.items):v:Xt,[v,We]),Sn=d.useMemo(()=>{if(x&&!fs)return x;if(!v)return Xt;if(We){const we=v,Te=[];let Ve=0;for(const Ze of we){if(A>-1&&Ve>=A)break;const at=wn===""?Ze.items:Ze.items.filter(hs=>De(hs,wn,E));if(at.length===0)continue;const Cn=A>-1?A-Ve:1/0,In=at.slice(0,Cn);if(In.length>0){const hs={...Ze,items:In};Te.push(hs),Ve+=In.length}}return Te}if(wn==="")return A>-1?jt.slice(0,A):jt;const ie=[];for(const we of jt){if(A>-1&&ie.length>=A)break;De(we,wn,E)&&ie.push(we)}return ie},[x,fs,v,We,wn,A,De,E,jt]),ct=d.useMemo(()=>We?Sn.flatMap(we=>we.items):Sn,[Sn,We]),Ce=ut(()=>new Zn({id:le,selectedValue:q,open:ke,filter:De,query:Ue,items:v,selectionMode:l,listRef:se,labelsRef:K,popupRef:ae,emptyRef:U,inputRef:W,keyboardActiveRef:Y,chipsContainerRef:xe,clearRef:Re,valuesRef:de,allValuesRef:oe,selectionEventRef:ee,name:Pe,disabled:Ee,readOnly:g,required:m,grid:b,isGrouped:We,virtualized:M,openOnInputClick:S,itemToStringLabel:E,isItemEqualToValue:j,modal:C,autoHighlight:Le,submitOnItemClick:L,hasInputValue:_e,mounted:!1,forceMounted:!1,transitionStatus:"idle",inline:N,activeIndex:null,selectedIndex:null,popupProps:{},inputProps:{},triggerProps:{},positionerElement:null,listElement:null,triggerElement:null,inputElement:null,popupSide:null,openMethod:null,inputInsidePopup:!0,onOpenChangeComplete:n||Xe,setOpen:Xe,setInputValue:Xe,setSelectedValue:Xe,setIndices:Xe,onItemHighlighted:Xe,handleSelection:Xe,getItemProps:()=>He,forceMount:Xe,requestSubmit:Xe})).current,Rn=l==="none"?Se:q,Sr=Z(u),Bt=Z(n),Bn=pe(Ce,ge.activeIndex),ko=pe(Ce,ge.selectedIndex),Wn=pe(Ce,ge.positionerElement),Ua=pe(Ce,ge.listElement),Rr=pe(Ce,ge.triggerElement),No=pe(Ce,ge.inputElement),Wt=pe(Ce,ge.inline),En=pe(Ce,ge.inputInsidePopup),Mf=rt(Rr),{mounted:Ya,setMounted:kf,transitionStatus:jo}=co(ke),{openMethod:Xa,triggerProps:Ao,reset:Nf}=wa(ke);Cb({id:le,name:Pe,commit:re.commit,value:Rn,controlRef:En?Mf:W,getValue:()=>Rn});const ps=Z(()=>{v?K.current=ct.map(ie=>dt(ie,E)):Ce.set("forceMounted",!0)}),jf=d.useRef(q);ne(()=>{q!==jf.current&&ps()},[ps,q]);const xt=Z(ie=>{Ce.update(ie);const we=ie.type||"none";if(ie.activeIndex!==void 0)if(ie.activeIndex===null)fe.current!==Pn&&(fe.current=Pn,Sr(void 0,Cr(we,void 0,{index:-1})));else{const Te=de.current[ie.activeIndex];fe.current={value:Te,index:ie.activeIndex},Sr(Te,Cr(we,void 0,{index:ie.activeIndex}))}}),bt=Z((ie,we)=>{if(ve.current=we.reason===Jt,e.onInputValueChange?.(ie,we),!we.isCanceled){if(we.reason===kn){const Te=ie.trim()!=="";Te&&ce(!0),te.current={hasQuery:Te},Te&&Le&&Ce.state.activeIndex==null&&Ce.set("activeIndex",0)}Qe(ie)}}),Er=Z((ie,we)=>{ke!==ie&&(we.reason==="escape-key"&&Be&&ct.length===0&&!Ce.state.emptyRef.current&&we.allowPropagation(),e.onOpenChange?.(ie,we),!we.isCanceled&&(!ie&&J&&(je?(D(Ue),Ue===""&&ce(!1)):ye&&(Wt||En?xt({activeIndex:null}):D(Ue),bt("",me(Jt,we.event)))),It(ie)))}),gs=Z((ie,we)=>{if(o?.(ie,we),we.isCanceled)return;Ae(ie),(l==="none"&&ae.current&&P||je&&!Ce.state.inputInsidePopup)&&bt(dt(ie,E),me(we.reason,we.event)),je&&ie!=null&&we.reason!==kn&&J&&D(Ue)}),Af=Z((ie,we)=>{let Te=we;if(Te===void 0){if(Bn===null)return;Te=de.current[Bn]}const Ve=st(ie),Ze=ee.current??ie;ee.current=null;const at=me(Wi,Ze),Cn=Ve?.closest("a")?.getAttribute("href");if(Cn){Cn.startsWith("#")&&Er(!1,at);return}if(ye){const In=Array.isArray(q)?q:[],Yf=Ms(In,Te,Ce.state.isItemEqualToValue)?Ey(In,Te,Ce.state.isItemEqualToValue):[...In,Te];if(gs(Yf,at),!(W.current?W.current.value.trim()!=="":!1))return;Ce.state.inputInsidePopup?bt("",me(Jt,at.event)):Er(!1,at)}else gs(Te,at),Er(!1,at)}),Fo=Z(()=>{if(!Ce.state.submitOnItemClick)return;const ie=Ce.state.inputElement?.form;ie&&typeof ie.requestSubmit=="function"&&ie.requestSubmit()}),Lo=Z(()=>{if(kf(!1),Bt?.(!1),ce(!1),Nf(),D(null),xt(l==="none"?{activeIndex:null,selectedIndex:null}:{activeIndex:null}),ye&&W.current&&W.current.value!==""&&!ve.current&&bt("",me(Jt)),je)if(Ce.state.inputInsidePopup)W.current&&W.current.value!==""&&bt("",me(Jt));else{const ie=dt(q,E);W.current&&W.current.value!==ie&&bt(ie,me(ie===""?Jt:yt))}}),Ff=d.useMemo(()=>Wt&&Wn?{current:Wn.closest('[role="dialog"]')}:ae,[Wt,Wn]);zn({enabled:!e.actionsRef,open:ke,ref:Ff,onComplete(){ke||Lo()}}),d.useImperativeHandle(e.actionsRef,()=>({unmount:Lo}),[Lo]),ne(function(){if(ke||l==="none")return;const we=v?jt:oe.current;if(ye){const Te=Array.isArray(q)?q:[],Ve=Te[Te.length-1],Ze=Di(we,Ve,j);xt({selectedIndex:Ze===-1?null:Ze})}else{const Te=Di(we,q,j);xt({selectedIndex:Te===-1?null:Te})}},[ke,q,v,l,jt,ye,j,xt]),ne(()=>{v&&(de.current=ct,se.current.length=ct.length)},[v,ct]),ne(()=>{const ie=te.current;if(ie&&(ie.hasQuery?Le&&Ce.set("activeIndex",0):Le==="always"&&Ce.set("activeIndex",0),te.current=null),!ke&&!Wt)return;const Te=Be||Ke?ct:de.current,Ve=Ce.state.activeIndex;if(Ve==null){if(Le==="always"&&Te.length>0){Ce.set("activeIndex",0);return}fe.current!==Pn&&(fe.current=Pn,Ce.state.onItemHighlighted(void 0,Cr(yt,void 0,{index:-1})));return}if(Ve>=Te.length){fe.current!==Pn&&(fe.current=Pn,Ce.state.onItemHighlighted(void 0,Cr(yt,void 0,{index:-1}))),Ce.set("activeIndex",null);return}const Ze=Te[Ve],at=fe.current.value,Cn=at!==Ef&&Ce.state.isItemEqualToValue(Ze,at);(fe.current.index!==Ve||!Cn)&&(fe.current={value:Ze,index:Ve},Ce.state.onItemHighlighted(Ze,Cr(yt,void 0,{index:Ve})))},[Bn,Le,Ke,Be,ct,Wt,ke,Ce]),ne(()=>{if(!v||l==="none")return;const ie=jt;if(ye){const Ve=Array.isArray(q)?q:Xt,Ze=Ve.filter(at=>Ms(ie,at,Ce.state.isItemEqualToValue));Ze.length!==Ve.length&&Ae(Ze);return}if(q==null?!0:Ms(ie,q,Ce.state.isItemEqualToValue))return;let Te=null;if(r!=null&&Ms(ie,r,Ce.state.isItemEqualToValue)&&(Te=r),Ae(Te),!Ce.state.inputInsidePopup){const Ve=dt(Te,E);W.current&&W.current.value!==Ve&&bt(Ve,me(yt))}},[v,jt,ye,l,q,r,Ae,E,Ce,bt]),ne(()=>{if(l==="none"){H(String(Se)!=="");return}H(ye?Array.isArray(q)&&q.length>0:q!=null)},[H,l,Se,q,ye]),d.useEffect(()=>{Be&&Le&&ct.length===0&&xt({activeIndex:null})},[Be,Le,ct.length,xt]),ks(Ue,()=>{!ke||Ue===""||Ue===String(be)||ce(!0)}),ks(q,()=>{if(l!=="none"&&(k(Pe),_(q!==z.initialValue),X()?re.commit(q):re.commit(q,!0),ye&&Ce.state.selectedIndex!==null&&(!Array.isArray(q)||q.length===0)&&xt({activeIndex:null,selectedIndex:null}),je&&!_e&&!En)){const ie=dt(q,E);Se!==ie&&bt(ie,me(yt))}}),ks(Se,()=>{l==="none"&&(k(Pe),_(Se!==z.initialValue),X()?re.commit(Se):re.commit(Se,!0))}),ks(v,()=>{if(!je||_e||En||J)return;const ie=dt(q,E);Se!==ie&&bt(ie,me(yt))});const ms=nd({open:Wt?!0:ke,onOpenChange:Er,elements:{reference:En?Rr:No,floating:Wn}});let Do,_o;Wt||(Do=b?"grid":"listbox",_o=ke?"true":"false");const Lf=d.useMemo(()=>{const ie=No?.tagName==="INPUT",we=ie||ke,Te=ie?{autoComplete:"off",spellCheck:"false",autoCorrect:"off",autoCapitalize:"none"}:{};return we&&(Te.role="combobox",Te["aria-expanded"]=_o,Te["aria-haspopup"]=Do,Te["aria-controls"]=ke?Ua?.id:void 0,Te["aria-autocomplete"]=O),{reference:Te,floating:{role:"presentation"}}},[No,ke,_o,Do,Ua?.id,O]),Df=fa(ms,{enabled:!g&&!Ee&&S,event:"mousedown-only",toggle:!1,touchOpenDelay:En?0:50}),_f=ga(ms,{enabled:!g&&!Ee&&!Wt,outsidePressEvent:{mouse:"sloppy",touch:"intentional"},bubbles:Wt?!0:void 0,outsidePress(ie){const we=st(ie);return!Oe(Rr,we)&&!Oe(Re.current,we)&&!Oe(xe.current,we)}}),zf=ad(ms,{enabled:!g&&!Ee,id:le,listRef:se,activeIndex:Bn,selectedIndex:ko,virtual:!0,loopFocus:!0,allowEscape:!Le,focusItemOnOpen:J||l==="none"&&!Le?!1:"auto",focusItemOnHover:T,resetOnPointerLeave:!w,cols:b?2:1,orientation:b?"horizontal":void 0,disabledIndices:Xt,onNavigate(ie,we){!we&&!ke||jo==="ending"||xt(we?{activeIndex:ie,type:Y.current?"keyboard":"pointer"}:{activeIndex:ie})}}),{getReferenceProps:zo,getFloatingProps:Vo,getItemProps:Ho}=cs([Lf,Df,_f,zf]);Sy(()=>{Ce.update({inline:N,popupProps:Vo(),inputProps:zo(),triggerProps:Ao,getItemProps:Ho,setOpen:Er,setInputValue:bt,setSelectedValue:gs,setIndices:xt,onItemHighlighted:Sr,handleSelection:Af,forceMount:ps,requestSubmit:Fo})}),ne(()=>{Ce.update({id:le,selectedValue:q,open:ke,mounted:Ya,transitionStatus:jo,items:v,inline:N,popupProps:Vo(),inputProps:zo(),triggerProps:Ao,openMethod:Xa,getItemProps:Ho,selectionMode:l,name:Pe,disabled:Ee,readOnly:g,required:m,grid:b,isGrouped:We,virtualized:M,onOpenChangeComplete:Bt,openOnInputClick:S,itemToStringLabel:E,modal:C,autoHighlight:Le,isItemEqualToValue:j,submitOnItemClick:L,hasInputValue:_e,requestSubmit:Fo})},[Ce,le,q,ke,Ya,jo,v,Vo,zo,Ho,Xa,Ao,l,Pe,Ee,g,m,re,b,We,M,Bt,S,E,C,j,L,_e,N,Fo,Le]);const Vf=fn(y,re.inputRef),Hf=d.useMemo(()=>({query:Ue,filteredItems:Sn,flatFilteredItems:ct}),[Ue,Sn,ct]),$f=d.useMemo(()=>Array.isArray(Rn)?"":ai(Rn,I),[Rn,I]),Bf=ye&&Array.isArray(q)&&q.length>0,Wf=d.useMemo(()=>!ye||!Array.isArray(q)||!Pe?null:q.map(ie=>{const we=ai(ie,I);return c.jsx("input",{type:"hidden",name:Pe,value:we},we)}),[ye,q,Pe,I]),Uf=c.jsxs(d.Fragment,{children:[e.children,c.jsx("input",{...re.getInputValidationProps({onFocus(){if(En){Rr?.focus();return}(W.current||Rr)?.focus()},onChange(ie){if(ie.nativeEvent.defaultPrevented)return;const we=ie.target.value,Te=me(kn,ie.nativeEvent);function Ve(){if(ye)return;if(l==="none"){_(we!==z.initialValue),bt(we,Te),X()&&re.commit(we);return}const Ze=de.current.find(at=>ai(at,I).toLowerCase()===we.toLowerCase());Ze!=null&&(_(Ze!==z.initialValue),gs?.(Ze,Te),X()&&re.commit(Ze))}v?Ve():(ps(),queueMicrotask(Ve))}}),id:le,name:ye||l==="none"?void 0:Pe,disabled:Ee,required:m&&!Bf,readOnly:g,value:$f,ref:Vf,style:la,tabIndex:-1,"aria-hidden":!0}),Wf]});return c.jsx(bf.Provider,{value:Ce,children:c.jsx(vf.Provider,{value:ms,children:c.jsx(yf.Provider,{value:Hf,children:c.jsx(wf.Provider,{value:Se,children:Uf})})})})}function ky(e){const{multiple:t=!1,defaultValue:n,value:r,onValueChange:s,...o}=e;return c.jsx(My,{...o,selectionMode:t?"multiple":"single",selectedValue:r,defaultSelectedValue:n,onSelectedValueChange:s})}const Ny=d.createContext(void 0);function jy(){return d.useContext(Ny)}const Cf=d.createContext(void 0);function Ba(e){const t=d.useContext(Cf);if(t===void 0&&!e)throw new Error(qe(21));return t}const Ay={...Zs,...vb,popupSide:e=>e?{"data-popup-side":e}:null,listEmpty:e=>e?{"data-list-empty":""}:null},Fy=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,id:i,...a}=t,{state:l,disabled:u,setTouched:f,setFocused:p,validationMode:g,validation:m}=So(),{labelId:y}=Fd(),b=jy(),x=!!Ba(!0),h=vn(),{filteredItems:S}=$n(),R=Sf(),w=Dn(i),T=xr(),E=pe(h,ge.disabled),I=pe(h,ge.readOnly),j=pe(h,ge.name),M=pe(h,ge.selectionMode),N=pe(h,ge.autoHighlight),P=pe(h,ge.inputProps),C=pe(h,ge.triggerProps),A=pe(h,ge.open),O=pe(h,ge.mounted),F=pe(h,ge.selectedValue),L=pe(h,ge.popupSide),k=pe(h,ge.positionerElement),_=!!N,z=O&&k?L:null,X=u||E||o,H=S.length===0,[B,Q]=d.useState(null),re=d.useRef(!1),le=Z(V=>{const D=x||h.state.inline;D&&!h.state.hasInputValue&&h.state.setInputValue("",me(yt)),h.update({inputElement:V,inputInsidePopup:D})}),ue=d.useMemo(()=>({...l,open:A,disabled:X,readOnly:I,popupSide:z,listEmpty:H}),[l,A,X,I,z,H]);function J(V){if(!b)return;let D;const{highlightedChipIndex:se}=b;if(se!==void 0){if(V.key==="ArrowLeft")V.preventDefault(),se>0?D=se-1:D=void 0;else if(V.key==="ArrowRight")V.preventDefault(),se<F.length-1?D=se+1:D=void 0;else if(V.key==="Backspace"||V.key==="Delete"){V.preventDefault();const K=se>=F.length-1?F.length-2:se;D=K>=0?K:void 0,h.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"})}return D}return V.key==="ArrowLeft"&&(V.currentTarget.selectionStart??0)===0&&F.length>0?(V.preventDefault(),D=Math.max(F.length-1,0)):V.key==="Backspace"&&V.currentTarget.value===""&&F.length>0&&(h.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"}),V.preventDefault()),D}return $e("input",t,{state:ue,ref:[n,h.state.inputRef,le],props:[P,C,{type:"text",value:t.value??B??R,"aria-readonly":I||void 0,"aria-labelledby":y,disabled:X,readOnly:I,...M==="none"&&j&&{name:j},id:w,onFocus(){p(!0)},onBlur(){if(f(!0),p(!1),g==="onBlur"){const V=M==="none"?R:F;m.commit(V)}},onCompositionStart(V){Ws||(re.current=!0,Q(V.currentTarget.value))},onCompositionEnd(V){re.current=!1;const D=V.currentTarget.value;Q(null),h.state.setInputValue(D,me(kn,V.nativeEvent))},onChange(V){if(re.current){const ae=V.currentTarget.value;Q(ae),ae===""&&!h.state.openOnInputClick&&!h.state.inputInsidePopup&&h.state.setOpen(!1,me(Jt,V.nativeEvent));const W=ae.trim(),U=_&&W!=="";!I&&!X&&W!==""&&(h.state.setOpen(!0,me(kn,V.nativeEvent)),_||h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})),A&&h.state.activeIndex!==null&&!U&&h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"});return}h.state.setInputValue(V.currentTarget.value,me(kn,V.nativeEvent));const D=V.currentTarget.value==="",se=me(Jt,V.nativeEvent);D&&!h.state.inputInsidePopup&&(M==="single"&&h.state.setSelectedValue(null,se),h.state.openOnInputClick||h.state.setOpen(!1,se));const K=V.currentTarget.value.trim();!I&&!X&&K!==""&&(h.state.setOpen(!0,me(kn,V.nativeEvent)),_||h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})),A&&h.state.activeIndex!==null&&!_&&h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})},onKeyDown(V){if(X||I||V.ctrlKey||V.shiftKey||V.altKey||V.metaKey)return;h.state.keyboardActiveRef.current=!0;const D=V.currentTarget,se=D.scrollWidth-D.clientWidth,K=T==="rtl";if(V.key==="Home"){Je(V);const W=ol&&K?D.value.length:0;D.setSelectionRange(W,W),D.scrollLeft=0;return}if(V.key==="End"){Je(V);const W=ol&&K?0:D.value.length;D.setSelectionRange(W,W),D.scrollLeft=K?-se:se;return}if(!O&&V.key==="Escape"){const W=M==="multiple"&&Array.isArray(F)?F.length===0:F===null,U=me(ns,V.nativeEvent),Y=M==="multiple"?[]:null;h.state.setInputValue("",U),h.state.setSelectedValue(Y,U),!W&&!h.state.inline&&!U.isPropagationAllowed&&V.stopPropagation();return}if(b&&V.key==="Backspace"&&D.value===""&&b.highlightedChipIndex===void 0&&Array.isArray(F)&&F.length>0){const W=F.slice(0,-1);h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"}),h.state.setSelectedValue(W,me(yt,V.nativeEvent));return}const ae=J(V);if(b?.setHighlightedChipIndex(ae),ae!==void 0?b?.chipsRef.current[ae]?.focus():h.state.inputRef.current?.focus(),V.which!==229&&V.key==="Enter"&&A){const W=h.state.activeIndex,U=V.nativeEvent;if(W===null){h.state.setOpen(!1,me(yt,U));return}Je(V);const Y=h.state.listRef.current[W];Y&&(h.state.selectionEventRef.current=U,Y.click(),h.state.selectionEventRef.current=null)}},onPointerMove(){h.state.keyboardActiveRef.current=!1},onPointerDown(){h.state.keyboardActiveRef.current=!1}},m?m.getValidationProps(a):a],stateAttributesMapping:Ay})}),Ly=d.createContext(null);function Dy(){return d.useContext(Ly)}function _y(e){const{children:t}=e,{filteredItems:n}=$n(),r=Dy(),s=r?r.items:n;return s?c.jsx(d.Fragment,{children:s.map(t)}):null}const zy=d.forwardRef(function(t,n){var r;const{render:s,className:o,children:i,...a}=t,l=vn(),u=$a(),f=!!Ba(!0),{filteredItems:p}=$n(),g=pe(l,ge.items),m=pe(l,ge.labelsRef),y=pe(l,ge.listRef),b=pe(l,ge.selectionMode),v=pe(l,ge.grid),x=pe(l,ge.popupProps),h=pe(l,ge.disabled),S=pe(l,ge.readOnly),R=pe(l,ge.virtualized),w=b==="multiple",T=p.length===0,E=Z(C=>{l.set("positionerElement",C)}),I=Z(C=>{l.set("listElement",C)}),j=d.useMemo(()=>typeof i=="function"?r||(r=c.jsx(_y,{children:i})):i,[i]),M=d.useMemo(()=>({empty:T}),[T]),N=u.useState("floatingId"),P=$e("div",t,{state:M,ref:[n,I,f?null:E],props:[x,{children:j,tabIndex:-1,id:N,role:v?"grid":"listbox","aria-multiselectable":w?"true":void 0,onKeyDown(C){if(!(h||S)&&C.key==="Enter"){const A=l.state.activeIndex;if(A==null)return;Je(C);const O=C.nativeEvent,F=l.state.listRef.current[A];F&&(l.state.selectionEventRef.current=O,F.click(),l.state.selectionEventRef.current=null)}},onKeyDownCapture(){l.state.keyboardActiveRef.current=!0},onPointerMoveCapture(){l.state.keyboardActiveRef.current=!1}},a]});return R?P:c.jsx(Sd,{elementsRef:y,labelsRef:g?void 0:m,children:P})}),If=d.createContext(void 0);function Vy(){const e=d.useContext(If);if(e===void 0)throw new Error(qe(20));return e}const Hy=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,o=vn(),i=pe(o,ge.mounted),a=pe(o,ge.forceMounted);return i||r||a?c.jsx(If.Provider,{value:r,children:c.jsx(ca,{ref:n,...s})}):null}),$y=d.forwardRef(function(t,n){const{render:r,className:s,anchor:o,positionMethod:i="absolute",side:a="bottom",align:l="center",sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=Dc,...x}=t,h=vn(),{filteredItems:S}=$n(),R=$a(),w=Vy(),T=pe(h,ge.modal),E=pe(h,ge.open),I=pe(h,ge.mounted),j=pe(h,ge.openMethod),M=pe(h,ge.triggerElement),N=pe(h,ge.inputElement),P=pe(h,ge.inputInsidePopup),C=S.length===0,O=ba({anchor:o??(P?M:N),floatingRootContext:R,positionMethod:i,mounted:I,side:a,sideOffset:u,align:l,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:y,disableAnchorTracking:b,keepMounted:w,collisionAvoidance:v,lazyFlip:!0});ya(E&&T&&j!=="touch",M);const F=d.useMemo(()=>{const X={...O.positionerStyles};return E||(X.pointerEvents="none"),{role:"presentation",hidden:!I,style:X}},[E,I,O.positionerStyles]),L=d.useMemo(()=>({open:E,side:O.side,align:O.align,anchorHidden:O.anchorHidden,empty:C}),[E,O.side,O.align,O.anchorHidden,C]);ne(()=>{h.set("popupSide",O.side)},[h,O.side]);const k=d.useMemo(()=>({side:O.side,align:O.align,arrowRef:O.arrowRef,arrowUncentered:O.arrowUncentered,arrowStyles:O.arrowStyles,anchorHidden:O.anchorHidden,isPositioned:O.isPositioned}),[O.side,O.align,O.arrowRef,O.arrowUncentered,O.arrowStyles,O.anchorHidden,O.isPositioned]),_=Z(X=>{h.set("positionerElement",X)}),z=$e("div",t,{state:L,ref:[n,_],props:[F,x],stateAttributesMapping:br});return c.jsxs(Cf.Provider,{value:k,children:[I&&T&&c.jsx(va,{inert:xa(!E),cutout:N??M}),z]})}),By={...br,...rs},Wy=d.forwardRef(function(t,n){const{render:r,className:s,initialFocus:o,finalFocus:i,...a}=t,l=vn(),u=Ba(),f=$a(),{filteredItems:p}=$n(),g=pe(l,ge.mounted),m=pe(l,ge.open),y=pe(l,ge.openMethod),b=pe(l,ge.transitionStatus),v=pe(l,ge.inputInsidePopup),x=pe(l,ge.inputElement),h=p.length===0;zn({open:m,ref:l.state.popupRef,onComplete(){m&&l.state.onOpenChangeComplete(!0)}});const S=d.useMemo(()=>({open:m,side:u.side,align:u.align,anchorHidden:u.anchorHidden,transitionStatus:b,empty:h}),[m,u.side,u.align,u.anchorHidden,b,h]),R=$e("div",t,{state:S,ref:[n,l.state.popupRef],props:[{role:v?"dialog":"presentation",tabIndex:-1,onFocus(I){const j=st(I.nativeEvent);y!=="touch"&&(Oe(l.state.listElement,j)||j===I.currentTarget)&&l.state.inputRef.current?.focus()}},wo(b),a],stateAttributesMapping:By}),T=o===void 0?v?I=>I==="touch"?l.state.popupRef.current:x:!1:o;let E;return i!=null?E=i:E=v?void 0:!1,c.jsx(da,{context:f,disabled:!g,modal:!v,openInteractionType:y,initialFocus:T,returnFocus:E,children:R})}),Uy=d.createContext(void 0),Yy=d.createContext(!1);function Xy(){return d.useContext(Yy)}const Gy=d.memo(d.forwardRef(function(t,n){const{render:r,className:s,value:o=null,index:i,disabled:a=!1,nativeButton:l=!1,...u}=t,f=d.useRef(!1),p=d.useRef(null),g=oa({index:i,textRef:p,indexGuessBehavior:Nu.GuessFromOrder}),m=vn(),y=Xy(),{flatFilteredItems:b}=$n(),v=pe(m,ge.open),x=pe(m,ge.selectionMode),h=pe(m,ge.readOnly),S=pe(m,ge.virtualized),R=pe(m,ge.isItemEqualToValue),w=x!=="none",T=i??(S?Di(b,o,R):g.index),E=g.index!==-1,I=pe(m,ge.id),j=pe(m,ge.isActive,T),M=pe(m,ge.isSelected,o),N=pe(m,ge.items),P=pe(m,ge.getItemProps),C=d.useRef(null),A=I!=null&&E?`${I}-${T}`:void 0,O=M&&w;ne(()=>{if(!(E&&(S||i!=null)))return;const re=m.state.listRef.current;return re[T]=C.current,()=>{delete re[T]}},[E,S,T,i,m]),ne(()=>{if(!E||N)return;const Q=m.state.valuesRef.current;return Q[T]=o,x!=="none"&&m.state.allValuesRef.current.push(o),()=>{delete Q[T]}},[E,N,T,o,m,x]),ne(()=>{if(!v){f.current=!1;return}if(!E||N)return;const Q=m.state.selectedValue,re=Array.isArray(Q)?Q[Q.length-1]:Q;pr(re,o,R)&&m.set("selectedIndex",T)},[E,N,v,m,T,o,R]);const F=d.useMemo(()=>({disabled:a,selected:O,highlighted:j}),[a,O,j]),L=P({active:j,selected:O});L.id=void 0,L.onFocus=void 0;const{getButtonProps:k,buttonRef:_}=mr({disabled:a,focusableWhenDisabled:!0,native:l});function z(Q){function re(){m.state.handleSelection(Q,o)}m.state.submitOnItemClick?(nt.flushSync(re),m.state.requestSubmit()):re()}const X={id:A,role:y?"gridcell":"option","aria-disabled":a||void 0,"aria-selected":w?O:void 0,tabIndex:void 0,onPointerDownCapture(Q){f.current=!0,Q.preventDefault()},onClick(Q){a||h||z(Q.nativeEvent)},onMouseUp(Q){const re=f.current;f.current=!1,!(a||h||Q.button!==0||re||!j)&&z(Q.nativeEvent)}},H=$e("div",t,{ref:[_,n,g.ref,C],state:F,props:[L,X,u,k]}),B=d.useMemo(()=>({selected:O,textRef:p}),[O,p]);return c.jsx(Uy.Provider,{value:B,children:H})})),qy=d.forwardRef(function(t,n){const{render:r,className:s,children:o,...i}=t,{filteredItems:a}=$n(),l=vn(),u=a.length===0?o:null;return $e("div",t,{ref:[n,l.state.emptyRef],props:[{children:u,role:"status","aria-live":"polite","aria-atomic":!0},i]})}),Ky={...rs,...Mu},Qy=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,keepMounted:a=!1,...l}=t,{disabled:u}=So(),f=vn(),p=pe(f,ge.selectionMode),g=pe(f,ge.disabled),m=pe(f,ge.readOnly),y=pe(f,ge.open),b=pe(f,ge.selectedValue),v=Sf();let x=!1;p==="none"?x=v!=="":p==="single"?x=b!=null:x=Array.isArray(b)&&b.length>0;const h=u||g||o,{buttonRef:S,getButtonProps:R}=mr({native:i,disabled:h}),{mounted:w,transitionStatus:T,setMounted:E}=co(x),I=d.useMemo(()=>({disabled:h,open:y,transitionStatus:T}),[h,y,T]);zn({open:x,ref:f.state.clearRef,onComplete(){x||E(!1)}});const j=$e("button",t,{state:I,ref:[n,S,f.state.clearRef],props:[{tabIndex:-1,children:"x",disabled:h,"aria-readonly":m||void 0,onMouseDown(N){N.preventDefault()},onClick(N){if(h||m)return;const P=f.state.keyboardActiveRef;f.state.setInputValue("",me(nl,N.nativeEvent)),p!=="none"?(f.state.setSelectedValue(Array.isArray(b)?[]:null,me(nl,N.nativeEvent)),f.state.setIndices({activeIndex:null,selectedIndex:null,type:P.current?"keyboard":"pointer"})):f.state.setIndices({activeIndex:null,type:P.current?"keyboard":"pointer"}),f.state.inputRef.current?.focus()}},l,R],stateAttributesMapping:Ky});return a||w?j:null}),Tf=d.createContext(void 0);function yr(e){const t=d.useContext(Tf);if(t===void 0&&!e)throw new Error(qe(47));return t}function Zy(){return{...ed(),disabled:!1,modal:!1,instantType:void 0,openMethod:null,openChangeReason:null,titleElementId:void 0,descriptionElementId:void 0,stickIfOpen:!0,nested:!1,openOnHover:!1,closeDelay:0}}const Jy={...td,disabled:$(e=>e.disabled),instantType:$(e=>e.instantType),openMethod:$(e=>e.openMethod),openChangeReason:$(e=>e.openChangeReason),modal:$(e=>e.modal),stickIfOpen:$(e=>e.stickIfOpen),titleElementId:$(e=>e.titleElementId),descriptionElementId:$(e=>e.descriptionElementId),openOnHover:$(e=>e.openOnHover),closeDelay:$(e=>e.closeDelay)};class Wa extends ma{constructor(t){const n={...Zy(),...t};n.open&&t?.mounted===void 0&&(n.mounted=!0),super(n,{popupRef:d.createRef(),backdropRef:d.createRef(),internalBackdropRef:d.createRef(),onOpenChange:void 0,onOpenChangeComplete:void 0,triggerFocusTargetRef:d.createRef(),beforeContentFocusGuardRef:d.createRef(),stickIfOpenTimeout:new pn,triggerElements:new vo},Jy)}setOpen=(t,n)=>{const r=n.reason===ot,s=n.reason===Mt&&n.event.detail===0,o=!t&&(n.reason===ns||n.reason==null);if(n.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},this.context.onOpenChange?.(t,n),n.isCanceled)return;const i={open:t,nativeEvent:n.event,reason:n.reason,nested:this.state.nested,triggerElement:n.trigger};this.state.floatingRootContext.context.events?.emit("openchange",i);const l=()=>{const u={open:t,openChangeReason:n.reason},f=n.trigger?.id??null;(f||t)&&(u.activeTriggerId=f,u.activeTriggerElement=n.trigger??null),this.update(u)};r?(this.set("stickIfOpen",!0),this.context.stickIfOpenTimeout.start(Fc,()=>{this.set("stickIfOpen",!1)}),nt.flushSync(l)):l(),s||o?this.set("instantType",s?"click":"dismiss"):n.reason===qt?this.set("instantType","focus"):this.set("instantType",void 0)};static useStore(t,n){const r=ut(()=>t??new Wa(n)).current;return ao(r.disposeEffect),r}disposeEffect=()=>this.context.stickIfOpenTimeout.disposeEffect()}function xc({props:e}){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:s,onOpenChangeComplete:o,modal:i=!1,handle:a,triggerId:l,defaultTriggerId:u=null}=e,f=Wa.useStore(a?.store,{open:n??r,modal:i,activeTriggerId:l!==void 0?l:u});f.useControlledProp("open",n,r),f.useControlledProp("activeTriggerId",l,u);const p=f.useState("open"),g=f.useState("positionerElement"),m=f.useState("payload"),y=f.useState("openChangeReason");f.useContextCallback("onOpenChange",s),f.useContextCallback("onOpenChangeComplete",o);const{openMethod:b,triggerProps:v,reset:x}=wa(p);Zu(f);const{forceUnmount:h}=Ju(p,f,()=>{f.update({stickIfOpen:!0,openChangeReason:null}),x()});ya(p&&i===!0&&y!==ot&&b!=="touch",g),d.useEffect(()=>{p||f.context.stickIfOpenTimeout.clear()},[f,p]);const S=d.useCallback(O=>{const F=me(O);return F.preventUnmountOnClose=()=>{f.set("preventUnmountingOnClose",!0)},F},[f]),R=d.useCallback(()=>{f.setOpen(!1,S(_c))},[f,S]);d.useImperativeHandle(e.actionsRef,()=>({unmount:h,close:R}),[h,R]);const w=rd({popupStore:f,onOpenChange:f.setOpen}),T=ga(w,{outsidePressEvent:{mouse:i==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}}),E=ld(w),{getReferenceProps:I,getFloatingProps:j,getTriggerProps:M}=cs([T,E]),N=d.useMemo(()=>I(v),[I,v]),P=d.useMemo(()=>M(v),[M,v]),C=d.useMemo(()=>j(),[j]);f.useSyncedValues({modal:i,openMethod:b,activeTriggerProps:N,inactiveTriggerProps:P,popupProps:C,floatingRootContext:w,nested:$t()!=null});const A=d.useMemo(()=>({store:f}),[f]);return c.jsx(Tf.Provider,{value:A,children:typeof t=="function"?t({payload:m}):t})}function ew(e){return yr(!0)?c.jsx(xc,{props:e}):c.jsx(Du,{children:c.jsx(xc,{props:e})})}const tw=300,nw=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,handle:a,payload:l,openOnHover:u=!1,delay:f=tw,closeDelay:p=0,id:g,...m}=t,y=yr(!0),b=a?.store??y?.store;if(!b)throw new Error(qe(74));const v=Dn(g),x=b.useState("isTriggerActive",v),h=b.useState("floatingRootContext"),S=b.useState("isOpenedByTrigger",v),R=d.useRef(null),{registerTrigger:w,isMountedByThisTrigger:T}=Qu(v,R,b,{payload:l,disabled:o,openOnHover:u,closeDelay:p}),E=b.useState("openChangeReason"),I=b.useState("stickIfOpen"),j=b.useState("openMethod"),M=id(h,{enabled:h!=null&&u&&(j!=="touch"||E!==Mt),mouseOnly:!0,move:!1,handleClose:cd(),restMs:f,delay:{close:p},triggerElementRef:R,isActiveTrigger:x}),N=fa(h,{enabled:h!=null,stickIfOpen:I}),P=cs([N]),C=b.useState("triggerProps",T),A=d.useMemo(()=>({disabled:o,open:S}),[o,S]),{getButtonProps:O,buttonRef:F}=mr({disabled:o,native:i}),L=d.useMemo(()=>({open(H){return H&&E===Mt?Zs.open(H):Mu.open(H)}}),[E]),k=$e("button",t,{state:A,ref:[F,n,w,R],props:[P.getReferenceProps(),M,C,{[Lc]:"",id:v},m,O],stateAttributesMapping:L}),_=d.useRef(null),z=Z(H=>{nt.flushSync(()=>{b.setOpen(!1,me(qt,H.nativeEvent,H.currentTarget))}),fu(_.current)?.focus()}),X=Z(H=>{const B=b.select("positionerElement");if(B&&jn(H,B))b.context.beforeContentFocusGuardRef.current?.focus();else{nt.flushSync(()=>{b.setOpen(!1,me(qt,H.nativeEvent,H.currentTarget))});let Q=du(R.current);for(;Q!==null&&Oe(B,Q)||Q?.hasAttribute("aria-hidden");){const re=Q;if(Q=mo(Q),Q===re)break}Q?.focus()}});return x?c.jsxs(d.Fragment,{children:[c.jsx(gn,{ref:_,onFocus:z}),c.jsx(d.Fragment,{children:k},v),c.jsx(gn,{ref:b.context.triggerFocusTargetRef,onFocus:X})]}):c.jsx(d.Fragment,{children:k},v)}),Pf=d.createContext(void 0);function rw(){const e=d.useContext(Pf);if(e===void 0)throw new Error(qe(45));return e}const sw=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,{store:o}=yr();return o.useState("mounted")||r?c.jsx(Pf.Provider,{value:r,children:c.jsx(ca,{ref:n,...s,renderGuards:!1})}):null}),Of=d.createContext(void 0);function ow(){const e=d.useContext(Of);if(!e)throw new Error(qe(46));return e}const iw=d.forwardRef(function(t,n){const{render:r,className:s,anchor:o,positionMethod:i="absolute",side:a="bottom",align:l="center",sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=Kp,...x}=t,{store:h}=yr(),S=rw(),R=aa(),w=h.useState("floatingRootContext"),T=h.useState("mounted"),E=h.useState("open"),I=h.useState("openChangeReason"),j=h.useState("activeTriggerElement"),M=h.useState("modal"),N=h.useState("positionerElement"),P=h.useState("instantType"),C=h.useState("transitionStatus"),A=d.useRef(null),O=lo(N,!1,!1),F=ba({anchor:o,floatingRootContext:w,positionMethod:i,mounted:T,side:a,sideOffset:u,align:l,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:y,disableAnchorTracking:b,keepMounted:S,nodeId:R,collisionAvoidance:v,adaptiveOrigin:y0}),L=d.useMemo(()=>{const B={};return E||(B.pointerEvents="none"),{role:"presentation",hidden:!T,style:{...F.positionerStyles,...B}}},[E,T,F.positionerStyles]),k=d.useMemo(()=>({props:L,...F}),[L,F]),_=w?.select("domReferenceElement");ne(()=>{const B=_,Q=A.current;if(B&&(A.current=B),Q&&B&&B!==Q){h.set("instantType",void 0);const re=new AbortController;return O(()=>{h.set("instantType","trigger-change")},re.signal),()=>{re.abort()}}},[_,O,h]);const z=d.useMemo(()=>({open:E,side:k.side,align:k.align,anchorHidden:k.anchorHidden,instant:P}),[E,k.side,k.align,k.anchorHidden,P]),X=d.useCallback(B=>{h.set("positionerElement",B)},[h]),H=$e("div",t,{state:z,props:[k.props,wo(C),x],ref:[n,X],stateAttributesMapping:br});return c.jsxs(Of.Provider,{value:k,children:[T&&M===!0&&I!==ot&&c.jsx(va,{ref:h.context.internalBackdropRef,inert:xa(!E),cutout:j}),c.jsx(Lu,{id:R,children:H})]})});function bc(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ze(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r;return(cr(n)!==o||cr(r)!==i)&&(n=o,r=i),{width:n,height:r}}const aw=typeof ResizeObserver<"u",lw=()=>!0;function cw(e){const{popupElement:t,positionerElement:n,content:r,mounted:s,enabled:o=lw,onMeasureLayout:i,onMeasureLayoutComplete:a,side:l,direction:u}=e,f=d.useRef(!0),p=lo(t,!0,!1),g=gr(),m=d.useRef(null),y=Z(i),b=Z(a),v=d.useMemo(()=>{let x=l==="top",h=l==="left";return u==="rtl"?(x=x||l==="inline-end",h=h||l==="inline-end"):(x=x||l==="inline-start",h=h||l==="inline-start"),x?{position:"absolute",[l==="top"?"bottom":"top"]:"0",[h?"right":"left"]:"0"}:He},[l,u]);ne(()=>{if(!s||!o()||!aw){f.current=!0,m.current=null;return}if(!t||!n)return;Object.entries(v).forEach(([j,M])=>{t.style.setProperty(j,M)});const x=new ResizeObserver(j=>{const M=j[0];M&&(m.current===null?m.current={width:Math.ceil(M.borderBoxSize[0].inlineSize),height:Math.ceil(M.borderBoxSize[0].blockSize)}:(m.current.width=Math.ceil(M.borderBoxSize[0].inlineSize),m.current.height=Math.ceil(M.borderBoxSize[0].blockSize)))});x.observe(t),t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto");const h=Mr(t,"position","static"),S=Mr(t,"transform","none"),R=Mr(t,"scale","1"),w=Mr(n,"--available-width","max-content"),T=Mr(n,"--available-height","max-content");if(y?.(),f.current||m.current===null){n.style.setProperty("--positioner-width","max-content"),n.style.setProperty("--positioner-height","max-content");const j=bc(t);return n.style.setProperty("--positioner-width",`${j.width}px`),n.style.setProperty("--positioner-height",`${j.height}px`),h(),S(),R(),w(),T(),b?.(null,j),f.current=!1,()=>{x.disconnect()}}t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto"),n.style.setProperty("--positioner-width","max-content"),n.style.setProperty("--positioner-height","max-content");const E=bc(t);t.style.setProperty("--popup-width",`${m.current.width}px`),t.style.setProperty("--popup-height",`${m.current.height}px`),h(),S(),w(),T(),b?.(m.current,E),n.style.setProperty("--positioner-width",`${E.width}px`),n.style.setProperty("--positioner-height",`${E.height}px`);const I=new AbortController;return g.request(()=>{t.style.setProperty("--popup-width",`${E.width}px`),t.style.setProperty("--popup-height",`${E.height}px`),p(()=>{t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto")},I.signal)}),()=>{x.disconnect(),I.abort(),g.cancel()}},[r,t,n,p,g,o,s,y,b,v])}function Mr(e,t,n){const r=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{e.style.setProperty(t,r)}}const uw={...br,...rs},dw=d.forwardRef(function(t,n){const{className:r,render:s,initialFocus:o,finalFocus:i,...a}=t,{store:l}=yr(),u=ow(),f=ud()!=null,p=xr(),g=l.useState("open"),m=l.useState("openMethod"),y=l.useState("instantType"),b=l.useState("transitionStatus"),v=l.useState("popupProps"),x=l.useState("titleElementId"),h=l.useState("descriptionElementId"),S=l.useState("modal"),R=l.useState("mounted"),w=l.useState("openChangeReason"),T=l.useState("popupElement"),E=l.useState("payload"),I=l.useState("positionerElement"),j=l.useState("activeTriggerElement"),M=l.useState("floatingRootContext");zn({open:g,ref:l.context.popupRef,onComplete(){g&&l.context.onOpenChangeComplete?.(!0)}});const N=l.useState("disabled"),P=l.useState("openOnHover"),C=l.useState("closeDelay");od(M,{enabled:P&&!N,closeDelay:C});function A(H){return H==="touch"?l.context.popupRef.current:!0}const O=o===void 0?A:o,F=d.useMemo(()=>({open:g,side:u.side,align:u.align,instant:y,transitionStatus:b}),[g,u.side,u.align,y,b]),L=d.useCallback(H=>{l.set("popupElement",H)},[l]);function k(){M.context.events.emit("measure-layout")}function _(H,B){M.context.events.emit("measure-layout-complete",{previousDimensions:H,nextDimensions:B})}const z=d.useCallback(()=>l.context.triggerElements.size>1,[l]);cw({popupElement:T,positionerElement:I,mounted:R,content:E,enabled:z,onMeasureLayout:k,onMeasureLayoutComplete:_,side:u.side,direction:p});const X=$e("div",t,{state:F,ref:[n,l.context.popupRef,L],props:[v,{"aria-labelledby":x,"aria-describedby":h,onKeyDown(H){f&&xd.has(H.key)&&H.stopPropagation()}},wo(b),a],stateAttributesMapping:uw});return c.jsx(da,{context:M,openInteractionType:m,modal:S==="trap-focus",disabled:!R||w===ot,initialFocus:O,returnFocus:i,restoreFocus:"popup",previousFocusableElement:ze(j)?j:void 0,nextFocusableElement:l.context.triggerFocusTargetRef,beforeContentFocusGuardRef:l.context.beforeContentFocusGuardRef,children:X})}),fw=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,...a}=t,{buttonRef:l,getButtonProps:u}=mr({disabled:o,focusableWhenDisabled:!1,native:i}),{store:f}=yr();return $e("button",t,{ref:[n,l],props:[{onClick(g){f.setOpen(!1,me(sg,g.nativeEvent,g.currentTarget))}},a,u]})});function pw(){const{theme:e,toggleTheme:t}=xf(),n=e==="dark";return c.jsx(wt,{onClick:t,title:n?"Light Mode":"Dark Mode",variant:"ghost",size:"sm",className:"relative w-8 h-8",children:c.jsx(un,{mode:"wait",children:n?c.jsx(he.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:c.jsx(Tc,{size:18,className:"text-cyan-400"})},"moon"):c.jsx(he.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:c.jsx(Pc,{size:18,className:"text-amber-500"})},"sun")})})}function gw(){const{t:e}=Nt(),{language:t,setLanguage:n,theme:r,setTheme:s,performanceMode:o,togglePerformanceMode:i}=xf(),[a,l]=d.useState(!1);return c.jsxs(Cd,{open:a,onOpenChange:l,children:[c.jsx(Td,{className:"relative",children:c.jsx(he.div,{animate:{rotate:a?30:0},transition:{duration:.2},children:c.jsx(wt,{variant:"ghost",size:"sm",title:e("settings.title"),children:c.jsx(bp,{size:18,className:"text-[var(--color-text-primary)]"})})})}),c.jsx(yd,{children:c.jsx(Rd,{side:"bottom",align:"end",sideOffset:8,children:c.jsx(un,{children:a&&c.jsx(he.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:c.jsxs(bd,{className:"w-64 py-2 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none",children:[c.jsx("div",{className:"px-4 py-2 border-b border-[var(--glass-border)]",children:c.jsx("h3",{className:"text-sm font-semibold text-[var(--color-text-primary)]",children:e("settings.title")})}),c.jsxs("div",{className:"px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[var(--color-text-secondary)]",children:[c.jsx(vp,{size:14}),c.jsx("span",{className:"text-xs uppercase tracking-wide",children:e("settings.language")})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n("de"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${t==="de"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[t==="de"&&c.jsx(kr,{size:14}),"DE"]})}),c.jsx("button",{onClick:()=>n("en"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${t==="en"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[t==="en"&&c.jsx(kr,{size:14}),"EN"]})})]})]}),c.jsxs("div",{className:"px-4 py-3 border-t border-[var(--glass-border)]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[var(--color-text-secondary)]",children:[r==="dark"?c.jsx(Tc,{size:14}):c.jsx(Pc,{size:14}),c.jsx("span",{className:"text-xs uppercase tracking-wide",children:e("settings.theme")})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>s("light"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${r==="light"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[r==="light"&&c.jsx(kr,{size:14}),e("settings.themeLight")]})}),c.jsx("button",{onClick:()=>s("dark"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${r==="dark"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[r==="dark"&&c.jsx(kr,{size:14}),e("settings.themeDark")]})})]})]}),c.jsx("div",{className:"px-4 py-3 border-t border-[var(--glass-border)]",children:c.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[var(--color-text-primary)]",children:[c.jsx(yp,{size:16,className:o?"text-amber-400":"text-[var(--color-text-secondary)]"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm",children:e("settings.performanceMode")}),c.jsx("div",{className:"text-xs text-[var(--color-text-muted)]",children:e("settings.performanceModeDesc")})]})]}),c.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${o?"bg-amber-500":"bg-[var(--color-text-muted)]"}`,children:c.jsx("div",{className:`w-4 h-4 rounded-full bg-white mt-0.5 transition-transform ${o?"translate-x-5":"translate-x-0.5"}`})})]})})]})})})})})]})}function mw(){const{t:e}=Nt(),t=[{value:"name",label:e("toolbar.sort.name")},{value:"date",label:e("toolbar.sort.date")},{value:"size",label:e("toolbar.sort.size")},{value:"rating",label:e("toolbar.sort.rating")}],{searchQuery:n,setSearchQuery:r,sortBy:s,setSortBy:o,sortOrder:i,toggleSortOrder:a,filterRating:l,setFilterRating:u,clearFilters:f}=Su(),p=is(),g=ih(),m=as(),y=nh(),b=Km(),v=oh(),x=ra(),[h,S]=d.useState(!1),R=m.size>0,w=async M=>{if(!(!R||h)){S(!0);try{const N=Array.from(m);await et.rotateImages(N,M),await v()}catch(N){x(N.message)}finally{S(!1)}}},T=async M=>{if(!(!R||h)){S(!0);try{const N=Array.from(m);await et.flipImages(N,M),await v()}catch(N){x(N.message)}finally{S(!1)}}},E=()=>{b(null),y()},I=d.useMemo(()=>{const M=[],N=n.toLowerCase();if(!N||N.length<1)return[];const P=new Set;p.forEach(A=>{A.fileName.toLowerCase().includes(N)&&!P.has(A.fileName)&&(P.add(A.fileName),M.push({value:A.fileName,label:A.fileName,type:"file"}))});const C=new Set;return g.forEach(A=>{A.name.toLowerCase().includes(N)&&!C.has(A.name)&&(C.add(A.name),M.push({value:A.name,label:A.name,type:"tag"}))}),p.forEach(A=>{A.tags?.forEach(O=>{O.toLowerCase().includes(N)&&!C.has(O)&&(C.add(O),M.push({value:O,label:O,type:"tag"}))})}),M.slice(0,10)},[n,p,g]),j=n||l!==null;return c.jsxs(he.div,{initial:{y:-40,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:20,stiffness:300},className:"glass-toolbar flex flex-nowrap items-center gap-2 px-3 py-2 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:"/logo.png",alt:"TagFusion",className:"w-8 h-8",style:{filter:"drop-shadow(0 2px 8px rgba(6,182,212,0.4))"}}),c.jsx("span",{className:"text-lg font-bold text-cyan-400 tracking-wider",style:{fontFamily:"'Orbitron', sans-serif",textShadow:"0 2px 8px rgba(6,182,212,0.3)"},children:"TagFusion"})]}),c.jsx("div",{className:"h-6 w-px bg-[var(--glass-border)]"}),c.jsx(wt,{onClick:E,title:e("toolbar.home"),variant:"ghost",size:"md",children:c.jsx(wp,{size:18})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(ky,{value:void 0,onValueChange:M=>{M&&r(M.value)},onInputValueChange:M=>r(M),children:[c.jsxs("div",{className:"w-72 relative",children:[c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:c.jsx(Ic,{size:16,className:"text-[var(--color-text-secondary)]"})}),c.jsx(Fy,{value:n,placeholder:e("toolbar.search"),className:"w-full h-8 pl-9 pr-8 rounded-lg backdrop-blur-glass-xs bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm text-[var(--color-text-primary)] placeholder-[var(--color-text-muted)] focus:outline-none focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 transition-all"}),n&&c.jsx(Qy,{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-[var(--glass-bg-hover)] text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]",children:c.jsx(dn,{size:14})})]}),c.jsx(Hy,{children:c.jsx($y,{side:"bottom",align:"start",sideOffset:4,children:c.jsx(Wy,{className:"w-72 py-1 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-[100] outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:c.jsx(zy,{children:I.length>0?I.map(M=>c.jsxs(Gy,{value:M,className:"flex items-center gap-2 px-3 py-2 text-sm text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] cursor-pointer outline-none data-[highlighted]:bg-[var(--glass-bg-hover)] data-[highlighted]:text-cyan-400",children:[M.type==="file"?c.jsx(Sp,{size:14,className:"text-[var(--color-text-muted)]"}):c.jsx(or,{size:14,className:"text-cyan-500"}),c.jsx("span",{className:"truncate",children:M.label}),c.jsx("span",{className:"ml-auto text-xs text-[var(--color-text-muted)]",children:M.type==="file"?e("toolbar.file"):e("toolbar.tag")})]},`${M.type}-${M.value}`)):n.length>0?c.jsx(qy,{className:"px-3 py-2 text-sm text-[var(--color-text-muted)]",children:e("toolbar.noSuggestions")}):null})})})})]}),c.jsxs(Cd,{children:[c.jsxs(Td,{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-glass-xs bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] border border-[var(--glass-border)] text-sm text-[var(--color-text-primary)] transition-colors data-[popup-open]:bg-[var(--glass-bg-hover)]",children:[i==="asc"?c.jsx(qa,{size:16}):c.jsx(Ka,{size:16}),c.jsx("span",{children:t.find(M=>M.value===s)?.label}),c.jsx(Vi,{size:14,className:"transition-transform data-[popup-open]:rotate-180"})]}),c.jsx(yd,{children:c.jsx(Rd,{side:"bottom",align:"end",sideOffset:4,children:c.jsx(bd,{className:"w-40 py-1 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:t.map(M=>c.jsxs(Nh,{onClick:()=>{s===M.value?a():o(M.value)},className:`w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-[var(--glass-bg-hover)] transition-colors cursor-pointer outline-none data-[highlighted]:bg-[var(--glass-bg-hover)] ${s===M.value?"text-cyan-400":"text-[var(--color-text-primary)]"}`,children:[c.jsx("span",{children:M.label}),s===M.value&&(i==="asc"?c.jsx(qa,{size:14}):c.jsx(Ka,{size:14}))]},M.value))})})})]}),c.jsxs(ew,{children:[c.jsxs(nw,{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors border ${l!==null?"bg-cyan-500/20 text-cyan-400 border-cyan-500/30":"backdrop-blur-glass-xs bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] border-[var(--glass-border)] text-[var(--color-text-primary)] data-[popup-open]:bg-[var(--glass-bg-hover)]"}`,children:[c.jsx(rr,{size:16,className:l!==null?"fill-cyan-400":""}),c.jsx("span",{children:l!==null?`${l}`:e("toolbar.rating")})]}),c.jsx(sw,{children:c.jsx(iw,{side:"bottom",align:"end",sideOffset:4,children:c.jsxs(dw,{className:"p-3 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:[c.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(M=>c.jsx("button",{onClick:()=>u(l===M?null:M),className:"p-1.5 hover:bg-[var(--glass-bg-hover)] rounded-lg transition-colors",children:c.jsx(rr,{size:20,className:`transition-colors ${l!==null&&M<=l?"text-cyan-400 fill-cyan-400":"text-[var(--color-text-muted)]"}`})},M))}),l!==null&&c.jsx(fw,{className:"w-full text-xs text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] py-1",children:e("toolbar.resetFilter")})]})})})]}),j&&c.jsx(wt,{onClick:f,title:e("toolbar.clearFilters"),variant:"danger",size:"sm",children:c.jsx(dn,{size:16})}),R&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-6 w-px bg-[var(--glass-border)]"}),c.jsx("div",{className:"flex items-center gap-1",children:h?c.jsx("div",{className:"px-3 py-1.5",children:c.jsx(zi,{size:"sm",color:"secondary"})}):c.jsxs(c.Fragment,{children:[c.jsx(wt,{onClick:()=>w(-90),title:e("toolbar.rotate90Left"),size:"sm",children:c.jsx(Rp,{size:16})}),c.jsx(wt,{onClick:()=>w(90),title:e("toolbar.rotate90Right"),size:"sm",children:c.jsx(Ep,{size:16})}),c.jsx(wt,{onClick:()=>w(180),title:e("toolbar.rotate180"),size:"sm",children:c.jsx(Oc,{size:16})}),c.jsx("div",{className:"w-px h-4 bg-[var(--glass-border)] mx-1"}),c.jsx(wt,{onClick:()=>T(!0),title:e("toolbar.flipHorizontal"),size:"sm",children:c.jsx(Cp,{size:16})}),c.jsx(wt,{onClick:()=>T(!1),title:e("toolbar.flipVertical"),size:"sm",children:c.jsx(Ip,{size:16})})]})})]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(pw,{}),c.jsx(gw,{})]})]})}const hw=()=>{const{t:e}=Nt(),t=is(),n=as(),{zoomLevel:r,setZoomLevel:s,zoomIn:o,zoomOut:i}=sh(),a=d.useMemo(()=>{const f=new Set;return t.forEach(p=>{p.tags?.forEach(g=>f.add(g))}),f.size},[t]),l=d.useMemo(()=>{const f=t.filter(g=>g.rating&&g.rating>0);return f.length===0?0:f.reduce((g,m)=>g+(m.rating||0),0)/f.length},[t]),u=d.useMemo(()=>t.filter(f=>f.rating&&f.rating>0).length,[t]);return c.jsxs(he.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:400,damping:25},className:"h-8 px-4 flex items-center justify-between text-xs text-[var(--color-text-secondary)] relative glass-footer",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:c.jsxs(un,{mode:"wait",children:[n.size===1&&c.jsx(he.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"text-[var(--color-text-primary)] truncate",title:Array.from(n)[0],children:Array.from(n)[0]},Array.from(n)[0]),n.size>1&&c.jsxs(he.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"text-[var(--color-text-secondary)]",children:[n.size," ",e("statusBar.selected")]})]})}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(oo,{size:12,className:"text-[var(--color-text-muted)]"}),c.jsx(Hs,{value:t.length,className:"text-[var(--color-text-secondary)]",duration:400}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:e("statusBar.images")})]}),c.jsx(un,{children:n.size>0&&c.jsxs(he.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-1.5",children:[c.jsx(Tp,{size:12,className:"text-cyan-400"}),c.jsx(Hs,{value:n.size,className:"text-cyan-400",duration:200}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:e("statusBar.selected")})]})}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(or,{size:12,className:"text-[var(--color-text-muted)]"}),c.jsx(Hs,{value:a,className:"text-[var(--color-text-secondary)]",duration:600}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:"Tags"})]}),u>0&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(rr,{size:12,className:"text-cyan-400 fill-cyan-400"}),c.jsx("span",{className:"text-cyan-400",children:l.toFixed(1)}),c.jsxs("span",{className:"text-[var(--color-text-muted)]",children:[" (",u,")"]})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4 pl-4 border-l border-[var(--glass-border)]",children:[c.jsx("button",{onClick:i,className:"p-1 hover:bg-[var(--glass-bg-hover)] rounded transition-colors",title:"Zoom Out (Ctrl+-)",children:c.jsx(Pp,{size:12,className:"text-[var(--color-text-secondary)]"})}),c.jsx("div",{className:"flex items-center gap-2 w-32",children:c.jsx("input",{type:"range",min:"50",max:"200",step:"10",value:r,onChange:f=>s(Number(f.target.value)),className:`w-full h-1 bg-[var(--color-bg-tertiary)] rounded-full appearance-none cursor-pointer
                [&::-webkit-slider-thumb]:appearance-none
                [&::-webkit-slider-thumb]:w-3
                [&::-webkit-slider-thumb]:h-3
                [&::-webkit-slider-thumb]:bg-cyan-400
                [&::-webkit-slider-thumb]:rounded-full
                [&::-webkit-slider-thumb]:cursor-pointer
                [&::-webkit-slider-thumb]:transition-transform
                [&::-webkit-slider-thumb]:hover:scale-125`})}),c.jsx("button",{onClick:o,className:"p-1 hover:bg-[var(--glass-bg-hover)] rounded transition-colors",title:"Zoom In (Ctrl++)",children:c.jsx(Op,{size:12,className:"text-[var(--color-text-secondary)]"})}),c.jsxs("button",{onClick:()=>s(100),className:"text-[var(--color-text-secondary)] hover:text-cyan-400 transition-colors min-w-[40px] text-right",title:"Reset (Ctrl+0)",children:[r,"%"]})]})]})]})},xw={success:c.jsx(kp,{className:"w-5 h-5"}),error:c.jsx(Mp,{className:"w-5 h-5"}),info:c.jsx(Hi,{className:"w-5 h-5"}),warning:c.jsx(Mc,{className:"w-5 h-5"})},bw={success:{bg:"from-emerald-500/20 to-emerald-500/5",border:"border-emerald-500/30",icon:"text-emerald-400",glow:"shadow-emerald-500/20"},error:{bg:"from-red-500/20 to-red-500/5",border:"border-red-500/30",icon:"text-red-400",glow:"shadow-red-500/20"},info:{bg:"from-cyan-500/20 to-cyan-500/5",border:"border-cyan-500/30",icon:"text-cyan-400",glow:"shadow-cyan-500/20"},warning:{bg:"from-amber-500/20 to-amber-500/5",border:"border-amber-500/30",icon:"text-amber-400",glow:"shadow-amber-500/20"}};function vw({toast:e}){const{removeToast:t}=Gt(),n=bw[e.type];return c.jsxs(he.div,{layout:!0,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",stiffness:400,damping:25},className:`
        relative flex items-center gap-3 px-4 py-3 rounded-xl
        backdrop-blur-xl bg-gradient-to-r ${n.bg}
        border ${n.border}
        shadow-lg ${n.glow}
        min-w-[280px] max-w-[400px]
      `,children:[c.jsx("div",{className:n.icon,children:xw[e.type]}),c.jsx("p",{className:"flex-1 text-sm text-slate-100 font-medium",children:e.message}),c.jsx(he.button,{onClick:()=>t(e.id),className:"p-1 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-white/10 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:c.jsx(dn,{className:"w-4 h-4"})}),e.duration&&e.duration>0&&c.jsx(he.div,{className:`absolute bottom-0 left-0 h-0.5 rounded-b-xl ${n.icon.replace("text-","bg-")}`,initial:{width:"100%"},animate:{width:"0%"},transition:{duration:e.duration/1e3,ease:"linear"}}),c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-t-xl pointer-events-none"})]})}function yw(){const{toasts:e}=Gt();return c.jsx("div",{className:"fixed bottom-6 right-6 z-[100] flex flex-col gap-3",children:c.jsx(un,{mode:"popLayout",children:e.map(t=>c.jsx(vw,{toast:t},t.id))})})}class li extends d.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({errorInfo:n}),console.error("ErrorBoundary caught an error:",t,n)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleFullReset=()=>{const t=Me.getState();t.clearSelection(),t.setError(null),this.handleReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsx("div",{className:"h-full w-full flex items-center justify-center p-8",children:c.jsxs("div",{className:"glass rounded-2xl p-8 max-w-lg text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:c.jsx(Mc,{size:32,className:"text-red-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-3",children:"Etwas ist schiefgelaufen"}),c.jsx("p",{className:"text-slate-400 mb-6 px-4",children:"Ein unerwarteter Fehler ist aufgetreten. Dies kann an einer beschdigten Bilddatei oder einem Problem mit der Verbindung zum System liegen."}),this.state.error&&c.jsx("div",{className:"mb-6 mx-4 text-left",children:c.jsxs("details",{className:"group",children:[c.jsxs("summary",{className:"text-sm text-slate-500 cursor-pointer hover:text-slate-400 transition-colors flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/50"}),"Technische Details anzeigen"]}),c.jsxs("div",{className:"mt-3 p-4 rounded-xl bg-slate-900/80 border border-white/5 overflow-auto max-h-48 backdrop-blur-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"Error Stack"}),c.jsx("button",{onClick:()=>{const t=`${this.state.error?.message}

${this.state.error?.stack}

${this.state.errorInfo?.componentStack}`;navigator.clipboard.writeText(t)},className:"text-[10px] text-cyan-400 hover:text-cyan-300 transition-colors",children:"Kopieren"})]}),c.jsxs("code",{className:"text-xs text-red-300/90 whitespace-pre-wrap font-mono leading-relaxed",children:[this.state.error.message,this.state.error.stack&&`

${this.state.error.stack}`]})]})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[c.jsxs("button",{onClick:this.handleReset,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-cyan-500 text-white shadow-lg shadow-cyan-500/20 hover:bg-cyan-400 transition-all duration-300 font-medium",children:[c.jsx(Oc,{size:18}),c.jsx("span",{children:"Neu laden"})]}),c.jsx("button",{onClick:this.handleFullReset,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-white/5 text-slate-300 hover:bg-white/10 transition-all duration-300 border border-white/10",children:"App Neustarten"})]})]})}):this.props.children}}function ww(){const e=d.useCallback(t=>{if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=Me.getState(),{copy:r,cut:s,paste:o}=Ea.getState(),{openModal:i}=Ca.getState();if(t.key==="Escape"){n.clearSelection();return}if(t.key==="F2"&&n.selectedImages.size===1){t.preventDefault();const a=Array.from(n.selectedImages)[0],l=n.images.find(u=>u.path===a);l&&i("rename",{path:a,name:l.fileName,isFolder:!1});return}if(t.key==="Delete"&&n.selectedImages.size>0){t.preventDefault(),i("deleteConfirm",{paths:Array.from(n.selectedImages)});return}if(t.altKey&&t.key==="Enter"&&n.selectedImages.size===1){t.preventDefault();const a=Array.from(n.selectedImages)[0];i("properties",{path:a});return}if(t.ctrlKey){if(t.key==="c"||t.key==="C"){n.selectedImages.size>0&&(t.preventDefault(),r(Array.from(n.selectedImages).map(a=>({path:a,isFolder:!1}))));return}if(t.key==="x"||t.key==="X"){n.selectedImages.size>0&&(t.preventDefault(),s(Array.from(n.selectedImages).map(a=>({path:a,isFolder:!1}))));return}if(t.key==="v"||t.key==="V"){n.currentFolder&&(t.preventDefault(),o(n.currentFolder).then(()=>n.refreshImages()));return}if(t.key==="a"||t.key==="A"){t.preventDefault(),n.selectAllImages();return}t.key==="+"||t.key==="="?(t.preventDefault(),n.zoomIn()):t.key==="-"?(t.preventDefault(),n.zoomOut()):t.key==="0"&&(t.preventDefault(),n.setZoomLevel(100))}},[]);d.useEffect(()=>(window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)),[e])}function Sw(){const e=Me(r=>r.setupSubscriptions),t=Me(r=>r.loadAllTags),n=Ta(r=>r.initialize);d.useEffect(()=>{e(),t(),n()},[e,t,n])}const Rw=d.lazy(()=>ts(()=>import("./Lightbox-Ggcts8RM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>({default:e.Lightbox}))),Ew=d.lazy(()=>ts(()=>import("./TagManagerModal-Vroyxu_G.js"),__vite__mapDeps([8,1,2,4,3,5,6,7])).then(e=>({default:e.TagManagerModal}))),Cw=d.lazy(()=>ts(()=>import("./RenameModal-C4WK33MZ.js"),__vite__mapDeps([9,1,2,10,5,4,6,3,7])).then(e=>({default:e.RenameModal}))),Iw=d.lazy(()=>ts(()=>import("./DeleteConfirmModal-B4nN0yhN.js"),__vite__mapDeps([11,1,2,10,5,4,6,3,7])).then(e=>({default:e.DeleteConfirmModal}))),Tw=d.lazy(()=>ts(()=>import("./PropertiesModal-l-0cQkr9.js"),__vite__mapDeps([12,1,2,10,5,4,6,3,7])).then(e=>({default:e.PropertiesModal})));function Pw(){const e=ch(),t=ra();return Sw(),ww(),d.useEffect(()=>{e&&(Gt.getState().error(e),t(null))},[e,t]),c.jsxs("div",{className:"h-screen w-screen flex flex-col overflow-hidden",children:[c.jsx(mw,{}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx(li,{children:c.jsx(G0,{})}),c.jsx(li,{children:c.jsx(hb,{})}),c.jsx(li,{children:c.jsx(wy,{})})]}),c.jsx(hw,{}),c.jsxs(d.Suspense,{fallback:null,children:[c.jsx(Ew,{}),c.jsx(Rw,{}),c.jsx(Cw,{}),c.jsx(Iw,{}),c.jsx(Tw,{})]}),c.jsx(W0,{}),c.jsx(yw,{})]})}ui.createRoot(document.getElementById("root")).render(c.jsx(yc.StrictMode,{children:c.jsx(Zf,{children:c.jsx(Pw,{})})}));export{Dw as $,Ju as A,_c as B,sa as C,rd as D,ld as E,da as F,wt as G,ga as H,va as I,ya as J,cs as K,Tn as L,st as M,Oe as N,$ as O,vo as P,td as Q,ma as R,ed as S,ut as T,Dn as U,xf as V,Ta as W,Gt as X,Ca as Y,Iu as Z,Cu as _,Me as a,ra as b,et as c,mr as d,$e as e,So as f,Fd as g,Eb as h,ne as i,js as j,Z as k,Cb as l,me as m,yt as n,vb as o,qe as p,br as q,sg as r,zn as s,rs as t,Od as u,xd as v,ca as w,xa as x,wa as y,Zu as z};
