const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Lightbox-CavWxZB9.js","assets/motion-BxWOwN3p.js","assets/vendor-CwvKdLiM.js","assets/i18n-fyWXc1Nl.js","assets/heroui-m--SptfW.js","assets/icons-BPTnPYzs.js","assets/state-LdY94aua.js","assets/virtuoso-ZIEdzwmB.js","assets/TagManagerModal-BzXvSA3L.js","assets/RenameModal-BK0_rXap.js","assets/GlassModal-Ciam4tWC.js","assets/DeleteConfirmModal-BtFMkqVE.js","assets/PropertiesModal-WZh7ZRmG.js"])))=>i.map(i=>d[i]);
import{j as c,b as he,A as un}from"./motion-BxWOwN3p.js";import{b as nt,r as d,c as bc,R as vc}from"./vendor-CwvKdLiM.js";import{s as Yf,a as _i,c as Xf,b as Gf,t as qf,d as Kf,_ as es,H as Qf}from"./heroui-m--SptfW.js";import{c as mn,w as Zf}from"./state-LdY94aua.js";import{u as Nt,i as li,B as Jf,a as ep}from"./i18n-fyWXc1Nl.js";import{X as dn,S as nr,P as tp,M as np,L as rp,C as zi,H as $r,F as rr,a as sp,I as so,b as yc,c as wc,d as Sc,T as Rc,e as op,f as Vi,g as sr,h as Mr,i as Xa,j as ip,k as ap,l as lp,m as cp,N as up,U as dp,D as fp,n as pp,o as gp,p as Ec,G as mp,q as hp,r as Cc,s as Ic,t as Tc,u as xp,v as bp,Z as vp,w as yp,x as wp,A as Ga,y as qa,R as Sp,z as Rp,B as Pc,E as Ep,J as Cp,K as Ip,O as Tp,Q as Pp,V as Oc,W as Op,Y as Mp}from"./icons-BPTnPYzs.js";import{Q as kp}from"./virtuoso-ZIEdzwmB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ci={},Ka=nt;ci.createRoot=Ka.createRoot,ci.hydrateRoot=Ka.hydrateRoot;const Qa={};function ut(e,t){const n=d.useRef(Qa);return n.current===Qa&&(n.current=e(t)),n}const Ho=bc[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],Np=Ho&&Ho!==d.useLayoutEffect?Ho:e=>e();function Z(e){const t=ut(jp).current;return t.next=e,Np(t.effect),t.trampoline}function jp(){const e={next:void 0,callback:Ap,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function Ap(){}function qe(e,...t){const n=new URL(`https://base-ui.com/production-error/${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${e}; visit ${n} for the full message.`}function fn(e,t,n,r){const s=ut(Mc).current;return Lp(s,e,t,n,r)&&kc(s,[e,t,n,r]),s.callback}function Fp(e){const t=ut(Mc).current;return Dp(t,e)&&kc(t,e),t.callback}function Mc(){return{callback:null,cleanup:null,refs:[]}}function Lp(e,t,n,r,s){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==r||e.refs[3]!==s}function Dp(e,t){return e.refs.length!==t.length||e.refs.some((n,r)=>n!==t[r])}function kc(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const r=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=o(n);typeof i=="function"&&(r[s]=i);break}case"object":{o.current=n;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const o=t[s];if(o!=null)switch(typeof o){case"function":{const i=r[s];typeof i=="function"?i():o(null);break}case"object":{o.current=null;break}}}}}}}const _p=parseInt(d.version,10);function Hi(e){return _p>=e}function Za(e){if(!d.isValidElement(e))return null;const t=e,n=t.props;return(Hi(19)?n?.ref:t.ref)??null}function ui(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function zp(e,t){const n={};for(const r in e){const s=e[r];if(t?.hasOwnProperty(r)){const o=t[r](s);o!=null&&Object.assign(n,o);continue}s===!0?n[`data-${r.toLowerCase()}`]="":s&&(n[`data-${r.toLowerCase()}`]=s.toString())}return n}function Vp(e,t){return typeof e=="function"?e(t):e}function Hp(e,t){return typeof e=="function"?e(t):e}const Ar={};function oo(e,t,n,r,s){let o={...di(e,Ar)};return t&&(o=ks(o,t)),n&&(o=ks(o,n)),r&&(o=ks(o,r)),o}function $p(e){if(e.length===0)return Ar;if(e.length===1)return di(e[0],Ar);let t={...di(e[0],Ar)};for(let n=1;n<e.length;n+=1)t=ks(t,e[n]);return t}function ks(e,t){return Nc(t)?t(e):Bp(e,t)}function Bp(e,t){if(!t)return e;for(const n in t){const r=t[n];switch(n){case"style":{e[n]=ui(e.style,r);break}case"className":{e[n]=jc(e.className,r);break}default:Wp(n,r)?e[n]=Up(e[n],r):e[n]=r}}return e}function Wp(e,t){const n=e.charCodeAt(0),r=e.charCodeAt(1),s=e.charCodeAt(2);return n===111&&r===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function Nc(e){return typeof e=="function"}function di(e,t){return Nc(e)?e(t):e??Ar}function Up(e,t){return t?e?n=>{if(Yp(n)){const s=n;fi(s);const o=t(s);return s.baseUIHandlerPrevented||e?.(s),o}const r=t(n);return e?.(n),r}:t:e}function fi(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function jc(e,t){return t?e?t+" "+e:t:e}function Yp(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Xe(){}const Xt=Object.freeze([]),He=Object.freeze({}),Xp=500,Ac=500,Gp={style:{transition:"none"}},Fc="data-base-ui-click-trigger",Lc={fallbackAxisSide:"none"},qp={fallbackAxisSide:"end"},Kp={clipPath:"inset(50%)",position:"fixed",top:0,left:0};function $e(e,t,n={}){const r=t.render,s=Qp(t,n);if(n.enabled===!1)return null;const o=n.state??He;return Zp(e,r,s,o)}function Qp(e,t={}){const{className:n,style:r,render:s}=e,{state:o=He,ref:i,props:a,stateAttributesMapping:l,enabled:u=!0}=t,f=u?Vp(n,o):void 0,p=u?Hp(r,o):void 0,g=u?zp(o,l):He,m=u?ui(g,Array.isArray(a)?$p(a):a)??He:He;return typeof document<"u"&&(u?Array.isArray(i)?m.ref=Fp([m.ref,Za(s),...i]):m.ref=fn(m.ref,Za(s),i):fn(null,null)),u?(f!==void 0&&(m.className=jc(m.className,f)),p!==void 0&&(m.style=ui(m.style,p)),m):He}function Zp(e,t,n,r){if(t){if(typeof t=="function")return t(n,r);const s=oo(n,t.props);return s.ref=n.ref,d.cloneElement(t,s)}if(e&&typeof e=="string")return Jp(e,n);throw new Error(qe(8))}function Jp(e,t){return e==="button"?d.createElement("button",{type:"button",...t,key:t.key}):e==="img"?d.createElement("img",{alt:"",...t,key:t.key}):d.createElement(e,t)}function Ns({controlled:e,default:t,name:n,state:r="value"}){const{current:s}=d.useRef(e!==void 0),[o,i]=d.useState(t),a=s?e:o,l=d.useCallback(u=>{s||i(u)},[]);return[a,l]}const eg=()=>{},ne=typeof document<"u"?d.useLayoutEffect:eg,tg={...bc};let Ja=0;function ng(e,t="mui"){const[n,r]=d.useState(e),s=e||n;return d.useEffect(()=>{n==null&&(Ja+=1,r(`${t}-${Ja}`))},[n,t]),s}const el=tg.useId;function Ln(e,t){if(el!==void 0){const n=el();return e??(t?`${t}-${n}`:n)}return ng(e,t)}function Dn(e){return Ln(e,"base-ui")}const yt="none",Mt="trigger-press",ot="trigger-hover",Hs="trigger-focus",$i="outside-press",Bi="item-press",rg="close-press",tl="clear-press",kn="input-change",Jt="input-clear",qt="focus-out",ts="escape-key",js="list-navigation",sg="cancel-open",kr="sibling-open",Dc="imperative-action";function me(e,t,n,r){let s=!1,o=!1;const i=He;return{reason:e,event:t??new Event("base-ui"),cancel(){s=!0},allowPropagation(){o=!0},get isCanceled(){return s},get isPropagationAllowed(){return o},trigger:n,...i}}function Er(e,t,n){const r=n??He;return{reason:e,event:t??new Event("base-ui"),...r}}const og=[];function io(e){d.useEffect(e,og)}const hs=null;class ig{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)n[s]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const xs=new ig;class Ye{static create(){return new Ye}static request(t){return xs.request(t)}static cancel(t){return xs.cancel(t)}currentId=hs;request(t){this.cancel(),this.currentId=xs.request(()=>{this.currentId=hs,t()})}cancel=()=>{this.currentId!==hs&&(xs.cancel(this.currentId),this.currentId=hs)};disposeEffect=()=>this.cancel}function pr(){const e=ut(Ye.create).current;return io(e.disposeEffect),e}function On(e){return e==null?e:"current"in e?e.current:e}function ao(e,t=!1,n=!0){const r=pr();return Z((s,o=null)=>{r.cancel();const i=On(e);i!=null&&(typeof i.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?s():r.request(()=>{function a(){i&&Promise.all(i.getAnimations().map(l=>l.finished)).then(()=>{o!=null&&o.aborted||nt.flushSync(s)}).catch(()=>{if(n){if(o!=null&&o.aborted)return;nt.flushSync(s)}else i.getAnimations().length>0&&i.getAnimations().some(l=>l.pending||l.playState!=="finished")&&a()})}t?r.request(a):a()}))})}function lo(e,t=!1,n=!1){const[r,s]=d.useState(e&&t?"idle":void 0),[o,i]=d.useState(e);return e&&!o&&(i(!0),s("starting")),!e&&o&&r!=="ending"&&!n&&s("ending"),!e&&!o&&r==="ending"&&s(void 0),ne(()=>{if(!e&&o&&r!=="ending"&&n){const a=Ye.request(()=>{s("ending")});return()=>{Ye.cancel(a)}}},[e,o,r,n]),ne(()=>{if(!e||t)return;const a=Ye.request(()=>{nt.flushSync(()=>{s(void 0)})});return()=>{Ye.cancel(a)}},[t,e]),ne(()=>{if(!e||!t)return;e&&o&&r!=="idle"&&s("starting");const a=Ye.request(()=>{s("idle")});return()=>{Ye.cancel(a)}},[t,e,o,s,r]),d.useMemo(()=>({mounted:o,setMounted:i,transitionStatus:r}),[o,r])}function ag(e){const{open:t,defaultOpen:n,onOpenChange:r,disabled:s}=e,o=t!==void 0,[i,a]=Ns({controlled:t,default:n,name:"Collapsible",state:"open"}),{mounted:l,setMounted:u,transitionStatus:f}=lo(i,!0,!0),[p,g]=d.useState(i),[{height:m,width:y},b]=d.useState({height:void 0,width:void 0}),v=Dn(),[x,h]=d.useState(),S=x??v,[R,w]=d.useState(!1),[T,E]=d.useState(!1),I=d.useRef(null),j=d.useRef(null),M=d.useRef(null),N=d.useRef(null),P=ao(N,!1),C=Z(A=>{const O=!i,F=me(Mt,A.nativeEvent);if(r(O,F),F.isCanceled)return;const L=N.current;j.current==="css-animation"&&L!=null&&L.style.removeProperty("animation-name"),!R&&!T&&(j.current!=null&&j.current!=="css-animation"&&!l&&O&&u(!0),j.current==="css-animation"&&(!p&&O&&g(!0),!l&&O&&u(!0))),a(O),j.current==="none"&&l&&!O&&u(!1)});return ne(()=>{o&&j.current==="none"&&!T&&!i&&u(!1)},[o,T,i,t,u]),d.useMemo(()=>({abortControllerRef:I,animationTypeRef:j,disabled:s,handleTrigger:C,height:m,mounted:l,open:i,panelId:S,panelRef:N,runOnceAnimationsFinish:P,setDimensions:b,setHiddenUntilFound:w,setKeepMounted:E,setMounted:u,setOpen:a,setPanelIdState:h,setVisible:g,transitionDimensionRef:M,transitionStatus:f,visible:p,width:y}),[I,j,s,C,m,l,i,S,N,P,b,w,E,u,a,g,M,f,p,y])}const _c=d.createContext(void 0);function lg(){const e=d.useContext(_c);if(e===void 0)throw new Error(qe(15));return e}let or=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const cg={[or.startingStyle]:""},ug={[or.endingStyle]:""},ns={transitionStatus(e){return e==="starting"?cg:e==="ending"?ug:null}};let Fr=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=or.startingStyle]="startingStyle",e[e.endingStyle=or.endingStyle]="endingStyle",e}({});const dg={[Fr.open]:""},fg={[Fr.closed]:""},pg={open(e){return e?dg:fg}},zc={...pg,...ns},gg=d.forwardRef(function(t,n){const{render:r,className:s,defaultOpen:o=!1,disabled:i=!1,onOpenChange:a,open:l,...u}=t,f=Z(a),p=ag({open:l,defaultOpen:o,onOpenChange:f,disabled:i}),g=d.useMemo(()=>({open:p.open,disabled:p.disabled,transitionStatus:p.transitionStatus}),[p.open,p.disabled,p.transitionStatus]),m=d.useMemo(()=>({...p,onOpenChange:f,state:g}),[p,f,g]),y=$e("div",t,{state:g,ref:n,props:u,stateAttributesMapping:zc});return c.jsx(_c.Provider,{value:m,children:y})});function co(){return typeof window<"u"}function hn(e){return Wi(e)?(e.nodeName||"").toLowerCase():"#document"}function tt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ht(e){var t;return(t=(Wi(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Wi(e){return co()?e instanceof Node||e instanceof tt(e).Node:!1}function Fe(e){return co()?e instanceof Element||e instanceof tt(e).Element:!1}function ze(e){return co()?e instanceof HTMLElement||e instanceof tt(e).HTMLElement:!1}function pi(e){return!co()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tt(e).ShadowRoot}const mg=new Set(["inline","contents"]);function _n(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=gt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!mg.has(s)}const hg=new Set(["table","td","th"]);function xg(e){return hg.has(hn(e))}const bg=[":popover-open",":modal"];function uo(e){return bg.some(t=>{try{return e.matches(t)}catch{return!1}})}const vg=["transform","translate","scale","rotate","perspective"],yg=["transform","translate","scale","rotate","perspective","filter"],wg=["paint","layout","strict","content"];function Ui(e){const t=fo(),n=Fe(e)?gt(e):e;return vg.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||yg.some(r=>(n.willChange||"").includes(r))||wg.some(r=>(n.contain||"").includes(r))}function Sg(e){let t=zt(e);for(;ze(t)&&!Dt(t);){if(Ui(t))return t;if(uo(t))return null;t=zt(t)}return null}function fo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Rg=new Set(["html","body","#document"]);function Dt(e){return Rg.has(hn(e))}function gt(e){return tt(e).getComputedStyle(e)}function po(e){return Fe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zt(e){if(hn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pi(e)&&e.host||Ht(e);return pi(t)?t.host:t}function Vc(e){const t=zt(e);return Dt(t)?e.ownerDocument?e.ownerDocument.body:e.body:ze(t)&&_n(t)?t:Vc(t)}function sn(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Vc(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=tt(s);if(o){const a=gi(i);return t.concat(i,i.visualViewport||[],_n(s)?s:[],a&&n?sn(a):[])}return t.concat(s,sn(s,[],n))}function gi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Eg=d.createContext(void 0);function Yi(e=!1){const t=d.useContext(Eg);if(t===void 0&&!e)throw new Error(qe(16));return t}function Cg(e){const{focusableWhenDisabled:t,disabled:n,composite:r=!1,tabIndex:s=0,isNativeButton:o}=e,i=r&&t!==!1,a=r&&t===!1;return{props:d.useMemo(()=>{const u={onKeyDown(f){n&&t&&f.key!=="Tab"&&f.preventDefault()}};return r||(u.tabIndex=s,!o&&n&&(u.tabIndex=t?s:-1)),(o&&(t||i)||!o&&n)&&(u["aria-disabled"]=n),o&&(!t||a)&&(u.disabled=n),u},[r,n,t,i,a,o,s])}}function gr(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:r=0,native:s=!0}=e,o=d.useRef(null),i=Yi(!0)!==void 0,a=Z(()=>{const g=o.current;return!!(g?.tagName==="A"&&g?.href)}),{props:l}=Cg({focusableWhenDisabled:n,disabled:t,composite:i,tabIndex:r,isNativeButton:s}),u=d.useCallback(()=>{const g=o.current;Ig(g)&&i&&t&&l.disabled===void 0&&g.disabled&&(g.disabled=!1)},[t,l.disabled,i]);ne(u,[u]);const f=d.useCallback((g={})=>{const{onClick:m,onMouseDown:y,onKeyUp:b,onKeyDown:v,onPointerDown:x,...h}=g;return oo({type:s?"button":void 0,onClick(R){if(t){R.preventDefault();return}m?.(R)},onMouseDown(R){t||y?.(R)},onKeyDown(R){if(t||(fi(R),v?.(R)),R.baseUIHandlerPrevented)return;const w=R.target===R.currentTarget&&!s&&!a()&&!t,T=R.key==="Enter",E=R.key===" ";w&&((E||T)&&R.preventDefault(),T&&m?.(R))},onKeyUp(R){t||(fi(R),b?.(R)),!R.baseUIHandlerPrevented&&R.target===R.currentTarget&&!s&&!t&&R.key===" "&&m?.(R)},onPointerDown(R){if(t){R.preventDefault();return}x?.(R)}},s?void 0:{role:"button"},l,h)},[t,l,s,a]),p=Z(g=>{o.current=g,u()});return{getButtonProps:f,buttonRef:p}}function Ig(e){return ze(e)&&e.tagName==="BUTTON"}let Tg=function(e){return e.disabled="data-disabled",e.orientation="data-orientation",e}({});function Pg(e){const{abortControllerRef:t,animationTypeRef:n,externalRef:r,height:s,hiddenUntilFound:o,keepMounted:i,id:a,mounted:l,onOpenChange:u,open:f,panelRef:p,runOnceAnimationsFinish:g,setDimensions:m,setMounted:y,setOpen:b,setVisible:v,transitionDimensionRef:x,visible:h,width:S}=e,R=d.useRef(!1),w=d.useRef(null),T=d.useRef(f),E=d.useRef(f),I=pr(),j=d.useMemo(()=>n.current==="css-animation"?!h:!f&&!l,[f,l,h,n]),M=Z(P=>{if(!P)return;if(n.current==null||x.current==null){const O=getComputedStyle(P),F=O.animationName!=="none"&&O.animationName!=="",L=O.transitionDuration!=="0s"&&O.transitionDuration!=="";F&&L||(O.animationName==="none"&&O.transitionDuration!=="0s"?n.current="css-transition":O.animationName!=="none"&&O.transitionDuration==="0s"?n.current="css-animation":n.current="none"),P.getAttribute(Tg.orientation)==="horizontal"||O.transitionProperty.indexOf("width")>-1?x.current="width":x.current="height"}if(n.current!=="css-transition")return;(s===void 0||S===void 0)&&(m({height:P.scrollHeight,width:P.scrollWidth}),E.current&&P.style.setProperty("transition-duration","0s"));let C=-1,A=-1;return C=Ye.request(()=>{E.current=!1,A=Ye.request(()=>{setTimeout(()=>{P.style.removeProperty("transition-duration")})})}),()=>{Ye.cancel(C),Ye.cancel(A)}}),N=fn(r,p,M);return ne(()=>{if(n.current!=="css-transition")return;const P=p.current;if(!P)return;let C=-1;if(t.current!=null&&(t.current.abort(),t.current=null),f){const A={"justify-content":P.style.justifyContent,"align-items":P.style.alignItems,"align-content":P.style.alignContent,"justify-items":P.style.justifyItems};Object.keys(A).forEach(O=>{P.style.setProperty(O,"initial","important")}),!E.current&&!i&&P.setAttribute(Fr.startingStyle,""),m({height:P.scrollHeight,width:P.scrollWidth}),C=Ye.request(()=>{Object.entries(A).forEach(([O,F])=>{F===""?P.style.removeProperty(O):P.style.setProperty(O,F)})})}else{if(P.scrollHeight===0&&P.scrollWidth===0)return;m({height:P.scrollHeight,width:P.scrollWidth});const A=new AbortController;t.current=A;const O=A.signal;let F=null;const L=Fr.endingStyle;return F=new MutationObserver(k=>{k.some(z=>z.type==="attributes"&&z.attributeName===L)&&(F?.disconnect(),F=null,g(()=>{m({height:0,width:0}),P.style.removeProperty("content-visibility"),y(!1),t.current===A&&(t.current=null)},O))}),F.observe(P,{attributes:!0,attributeFilter:[L]}),()=>{F?.disconnect(),I.cancel(),t.current===A&&(A.abort(),t.current=null)}}return()=>{Ye.cancel(C)}},[t,n,I,o,i,l,f,p,g,m,y]),ne(()=>{if(n.current!=="css-animation")return;const P=p.current;P&&(w.current=P.style.animationName||w.current,P.style.setProperty("animation-name","none"),m({height:P.scrollHeight,width:P.scrollWidth}),!T.current&&!R.current&&P.style.removeProperty("animation-name"),f?(t.current!=null&&(t.current.abort(),t.current=null),y(!0),v(!0)):(t.current=new AbortController,g(()=>{y(!1),v(!1),t.current=null},t.current.signal)))},[t,n,f,p,g,m,y,v,h]),io(()=>{const P=Ye.request(()=>{T.current=!1});return()=>Ye.cancel(P)}),ne(()=>{if(!o)return;const P=p.current;if(!P)return;let C=-1,A=-1;return f&&R.current&&(P.style.transitionDuration="0s",m({height:P.scrollHeight,width:P.scrollWidth}),C=Ye.request(()=>{R.current=!1,A=Ye.request(()=>{setTimeout(()=>{P.style.removeProperty("transition-duration")})})})),()=>{Ye.cancel(C),Ye.cancel(A)}},[o,f,p,m]),ne(()=>{const P=p.current;P&&o&&j&&(P.setAttribute("hidden","until-found"),n.current==="css-transition"&&P.setAttribute(Fr.startingStyle,""))},[o,j,n,p]),d.useEffect(function(){const C=p.current;if(!C)return;function A(O){R.current=!0,b(!0),u(!0,me(yt,O))}return C.addEventListener("beforematch",A),()=>{C.removeEventListener("beforematch",A)}},[u,p,b]),d.useMemo(()=>({props:{hidden:j,id:a,ref:N}}),[j,a,N])}let nl=function(e){return e.collapsiblePanelHeight="--collapsible-panel-height",e.collapsiblePanelWidth="--collapsible-panel-width",e}({});function rt(e){const t=ut(Og,e).current;return t.next=e,ne(t.effect),t}function Og(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}function zn(e){const{enabled:t=!0,open:n,ref:r,onComplete:s}=e,o=rt(n),i=Z(s),a=ao(r,n);d.useEffect(()=>{t&&a(()=>{n===o.current&&i()})},[t,n,i,a,o])}const Mg=d.forwardRef(function(t,n){const{className:r,hiddenUntilFound:s,keepMounted:o,render:i,id:a,...l}=t,{abortControllerRef:u,animationTypeRef:f,height:p,mounted:g,onOpenChange:m,open:y,panelId:b,panelRef:v,runOnceAnimationsFinish:x,setDimensions:h,setHiddenUntilFound:S,setKeepMounted:R,setMounted:w,setPanelIdState:T,setOpen:E,setVisible:I,state:j,transitionDimensionRef:M,visible:N,width:P,transitionStatus:C}=lg(),A=s??!1,O=o??!1;ne(()=>{if(a)return T(a),()=>{T(void 0)}},[a,T]),ne(()=>{S(A)},[S,A]),ne(()=>{R(O)},[R,O]);const{props:F}=Pg({abortControllerRef:u,animationTypeRef:f,externalRef:n,height:p,hiddenUntilFound:A,id:b,keepMounted:O,mounted:g,onOpenChange:m,open:y,panelRef:v,runOnceAnimationsFinish:x,setDimensions:h,setMounted:w,setOpen:E,setVisible:I,transitionDimensionRef:M,visible:N,width:P});zn({open:y&&C==="idle",ref:v,onComplete(){y&&h({height:void 0,width:void 0})}});const L=d.useMemo(()=>({...j,transitionStatus:C}),[j,C]),k=$e("div",t,{state:L,ref:[n,v],props:[F,{style:{[nl.collapsiblePanelHeight]:p===void 0?"auto":`${p}px`,[nl.collapsiblePanelWidth]:P===void 0?"auto":`${P}px`}},l],stateAttributesMapping:zc});return O||A||!O&&g?k:null}),Cr=0;class pn{static create(){return new pn}currentId=Cr;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Cr,n()},t)}isStarted(){return this.currentId!==Cr}clear=()=>{this.currentId!==Cr&&(clearTimeout(this.currentId),this.currentId=Cr)};disposeEffect=()=>this.clear}function it(){const e=ut(pn.create).current;return io(e.disposeEffect),e}const Hc=d.createContext(void 0);function Xi(){const e=d.useContext(Hc);if(e===void 0)throw new Error(qe(53));return e}let $s=function(e){return e.scrollAreaCornerHeight="--scroll-area-corner-height",e.scrollAreaCornerWidth="--scroll-area-corner-width",e}({});const bs=500,rl=16;function Et(e,t,n){if(!e)return 0;const r=getComputedStyle(e),s=n==="x"?"Inline":"Block";return n==="x"&&t==="margin"?parseFloat(r[`${t}InlineStart`])*2:parseFloat(r[`${t}${s}Start`])+parseFloat(r[`${t}${s}End`])}let kg=function(e){return e.orientation="data-orientation",e.hovering="data-hovering",e.scrolling="data-scrolling",e.hasOverflowX="data-has-overflow-x",e.hasOverflowY="data-has-overflow-y",e.overflowXStart="data-overflow-x-start",e.overflowXEnd="data-overflow-x-end",e.overflowYStart="data-overflow-y-start",e.overflowYEnd="data-overflow-y-end",e}({});const vs="base-ui-disable-scrollbar",$c={className:vs,element:c.jsx("style",{href:vs,precedence:"base-ui:low",children:`.${vs}{scrollbar-width:none}.${vs}::-webkit-scrollbar{display:none}`})};let Un=function(e){return e.hasOverflowX="data-has-overflow-x",e.hasOverflowY="data-has-overflow-y",e.overflowXStart="data-overflow-x-start",e.overflowXEnd="data-overflow-x-end",e.overflowYStart="data-overflow-y-start",e.overflowYEnd="data-overflow-y-end",e}({});const Gi={hasOverflowX:e=>e?{[Un.hasOverflowX]:""}:null,hasOverflowY:e=>e?{[Un.hasOverflowY]:""}:null,overflowXStart:e=>e?{[Un.overflowXStart]:""}:null,overflowXEnd:e=>e?{[Un.overflowXEnd]:""}:null,overflowYStart:e=>e?{[Un.overflowYStart]:""}:null,overflowYEnd:e=>e?{[Un.overflowYEnd]:""}:null,cornerHidden:()=>null},Vn=typeof navigator<"u",$o=Ag(),Bc=Lg(),qi=Fg(),Wc=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),Ng=$o.platform==="MacIntel"&&$o.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test($o.platform),sl=Vn&&/firefox/i.test(qi),Uc=Vn&&/apple/i.test(navigator.vendor),Bs=Vn&&/android/i.test(Bc)||/android/i.test(qi),jg=Vn&&Bc.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,Yc=qi.includes("jsdom/");function Ag(){if(!Vn)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function Fg(){if(!Vn)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function Lg(){if(!Vn)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const mi="data-base-ui-focusable",Xc="active",Gc="selected",qc="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",on="ArrowLeft",an="ArrowRight",Ki="ArrowUp",rs="ArrowDown";function Lt(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Oe(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&pi(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function st(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Tt(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Dg(e){return e.matches("html,body")}function Ge(e){return e?.ownerDocument||document}function Qi(e){return ze(e)&&e.matches(qc)}function hi(e){return e?e.getAttribute("role")==="combobox"&&Qi(e):!1}function _g(e){if(!e||Yc)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function Ws(e){return e?e.hasAttribute(mi)?e:e.querySelector(`[${mi}]`)||e:null}function Nn(e,t,n=!0){return e.filter(s=>s.parentId===t&&(!n||s.context?.open)).flatMap(s=>[s,...Nn(e,s.id,n)])}function ol(e,t){let n=[],r=e.find(s=>s.id===t)?.parentId;for(;r;){const s=e.find(o=>o.id===r);r=s?.parentId,s&&(n=n.concat(s))}return n}function Je(e){e.preventDefault(),e.stopPropagation()}function zg(e){return"nativeEvent"in e}function Kc(e){return e.mozInputSource===0&&e.isTrusted?!0:Bs&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Qc(e){return Yc?!1:!Bs&&e.width===0&&e.height===0||Bs&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function ir(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Zc(e){const t=e.type;return t==="click"||t==="mousedown"||t==="keydown"||t==="keyup"}const Vg=["top","right","bottom","left"],ar=Math.min,mt=Math.max,lr=Math.round,Xn=Math.floor,_t=e=>({x:e,y:e}),Hg={left:"right",right:"left",bottom:"top",top:"bottom"},$g={start:"end",end:"start"};function xi(e,t,n){return mt(e,ar(t,n))}function Kt(e,t){return typeof e=="function"?e(t):e}function pt(e){return e.split("-")[0]}function xn(e){return e.split("-")[1]}function Zi(e){return e==="x"?"y":"x"}function Ji(e){return e==="y"?"height":"width"}const Bg=new Set(["top","bottom"]);function Ct(e){return Bg.has(pt(e))?"y":"x"}function ea(e){return Zi(Ct(e))}function Wg(e,t,n){n===void 0&&(n=!1);const r=xn(e),s=ea(e),o=Ji(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Us(i)),[i,Us(i)]}function Ug(e){const t=Us(e);return[bi(e),t,bi(t)]}function bi(e){return e.replace(/start|end/g,t=>$g[t])}const il=["left","right"],al=["right","left"],Yg=["top","bottom"],Xg=["bottom","top"];function Gg(e,t,n){switch(e){case"top":case"bottom":return n?t?al:il:t?il:al;case"left":case"right":return t?Yg:Xg;default:return[]}}function qg(e,t,n,r){const s=xn(e);let o=Gg(pt(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(bi)))),o}function Us(e){return e.replace(/left|right|bottom|top/g,t=>Hg[t])}function Kg(e){return{top:0,right:0,bottom:0,left:0,...e}}function Jc(e){return typeof e!="number"?Kg(e):{top:e,right:e,bottom:e,left:e}}function Ys(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ys(e,t,n){return Math.floor(e/t)!==n}function Lr(e,t){return t<0||t>=e.current.length}function Bo(e,t){return lt(e,{disabledIndices:t})}function ll(e,t){return lt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function lt(e,{startingIndex:t=-1,decrement:n=!1,disabledIndices:r,amount:s=1}={}){let o=t;do o+=n?-s:s;while(o>=0&&o<=e.current.length-1&&Dr(e,o,r));return o}function Qg(e,{event:t,orientation:n,loopFocus:r,rtl:s,cols:o,disabledIndices:i,minIndex:a,maxIndex:l,prevIndex:u,stopEvent:f=!1}){let p=u;const g=[],m={};let y=!1;{let x=null,h=-1;e.current.forEach((S,R)=>{if(S==null)return;const w=S.closest('[role="row"]');w&&(y=!0),(w!==x||h===-1)&&(x=w,h+=1,g[h]=[]),g[h].push(R),m[R]=h})}const b=y&&g.length>0&&g.some(x=>x.length!==o);function v(x){if(!b||u===-1)return;const h=m[u];if(h==null)return;const S=g[h].indexOf(u);let R=x==="up"?h-1:h+1;r&&(R<0?R=g.length-1:R>=g.length&&(R=0));const w=new Set;for(;R>=0&&R<g.length&&!w.has(R);){w.add(R);const T=g[R];if(T.length===0){R=x==="up"?R-1:R+1;continue}const E=Math.min(S,T.length-1);for(let I=E;I>=0;I-=1){const j=T[I];if(!Dr(e,j,i))return j}R=x==="up"?R-1:R+1,r&&(R<0?R=g.length-1:R>=g.length&&(R=0))}}if(t.key===Ki){const x=v("up");if(x!==void 0)f&&Je(t),p=x;else{if(f&&Je(t),u===-1)p=l;else if(p=lt(e,{startingIndex:p,amount:o,decrement:!0,disabledIndices:i}),r&&(u-o<a||p<0)){const h=u%o,S=l%o,R=l-(S-h);S===h?p=l:p=S>h?R:R-o}Lr(e,p)&&(p=u)}}if(t.key===rs){const x=v("down");x!==void 0?(f&&Je(t),p=x):(f&&Je(t),u===-1?p=a:(p=lt(e,{startingIndex:u,amount:o,disabledIndices:i}),r&&u+o>l&&(p=lt(e,{startingIndex:u%o-o,amount:o,disabledIndices:i}))),Lr(e,p)&&(p=u))}if(n==="both"){const x=Xn(u/o);t.key===(s?on:an)&&(f&&Je(t),u%o!==o-1?(p=lt(e,{startingIndex:u,disabledIndices:i}),r&&ys(p,o,x)&&(p=lt(e,{startingIndex:u-u%o-1,disabledIndices:i}))):r&&(p=lt(e,{startingIndex:u-u%o-1,disabledIndices:i})),ys(p,o,x)&&(p=u)),t.key===(s?an:on)&&(f&&Je(t),u%o!==0?(p=lt(e,{startingIndex:u,decrement:!0,disabledIndices:i}),r&&ys(p,o,x)&&(p=lt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i}))):r&&(p=lt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:i})),ys(p,o,x)&&(p=u));const h=Xn(l/o)===x;Lr(e,p)&&(r&&h?p=t.key===(s?an:on)?l:lt(e,{startingIndex:u-u%o-1,disabledIndices:i}):p=u)}return p}function Zg(e,t,n){const r=[];let s=0;return e.forEach(({width:o,height:i},a)=>{let l=!1;for(n&&(s=0);!l;){const u=[];for(let f=0;f<o;f+=1)for(let p=0;p<i;p+=1)u.push(s+f+p*t);s%t+o<=t&&u.every(f=>r[f]==null)?(u.forEach(f=>{r[f]=a}),l=!0):s+=1}}),[...r]}function Jg(e,t,n,r,s){if(e===-1)return-1;const o=n.indexOf(e),i=t[e];switch(s){case"tl":return o;case"tr":return i?o+i.width-1:o;case"bl":return i?o+(i.height-1)*r:o;case"br":return n.lastIndexOf(e);default:return-1}}function em(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Dr(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var tm=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Xs=tm.join(","),eu=typeof Element>"u",cr=eu?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gs=!eu&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Br=function(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=s===""||s==="true",i=o||n&&t&&Br(t.parentNode);return i},nm=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},tu=function(t,n,r){if(Br(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Xs));return n&&cr.call(t,Xs)&&s.unshift(t),s=s.filter(r),s},qs=function(t,n,r){for(var s=[],o=Array.from(t);o.length;){var i=o.shift();if(!Br(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,u=qs(l,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:i,candidates:u})}else{var f=cr.call(i,Xs);f&&r.filter(i)&&(n||!t.includes(i))&&s.push(i);var p=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),g=!Br(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(p&&g){var m=qs(p===!0?i.children:p.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:i,candidates:m})}else o.unshift.apply(o,i.children)}}return s},nu=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},ru=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||nm(t))&&!nu(t)?0:t.tabIndex},rm=function(t,n){var r=ru(t);return r<0&&n&&!nu(t)?0:r},sm=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},su=function(t){return t.tagName==="INPUT"},om=function(t){return su(t)&&t.type==="hidden"},im=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},am=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},lm=function(t){if(!t.name)return!0;var n=t.form||Gs(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=am(s,t.form);return!o||o===t},cm=function(t){return su(t)&&t.type==="radio"},um=function(t){return cm(t)&&!lm(t)},dm=function(t){var n,r=t&&Gs(t),s=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var i,a,l;for(o=!!((i=s)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(s)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&s;){var u,f,p;r=Gs(s),s=(u=r)===null||u===void 0?void 0:u.host,o=!!((f=s)!==null&&f!==void 0&&(p=f.ownerDocument)!==null&&p!==void 0&&p.contains(s))}}return o},cl=function(t){var n=t.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},fm=function(t,n){var r=n.displayCheck,s=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var o=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(t).visibility==="hidden")return!0;var i=cr.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(cr.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var u=t.parentElement,f=Gs(t);if(u&&!u.shadowRoot&&s(u)===!0)return cl(t);t.assignedSlot?t=t.assignedSlot:!u&&f!==t.ownerDocument?t=f.host:t=u}t=l}if(dm(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return cl(t);return!1},pm=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return cr.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},vi=function(t,n){return!(n.disabled||Br(n)||om(n)||fm(n,t)||im(n)||pm(n))},yi=function(t,n){return!(um(n)||ru(n)<0||!vi(t,n))},gm=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},ou=function(t){var n=[],r=[];return t.forEach(function(s,o){var i=!!s.scopeParent,a=i?s.scopeParent:s,l=rm(a,i),u=i?ou(s.candidates):a;l===0?i?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:l,item:s,isScope:i,content:u})}),r.sort(sm).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},ss=function(t,n){n=n||{};var r;return n.getShadowRoot?r=qs([t],n.includeContainer,{filter:yi.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:gm}):r=tu(t,n.includeContainer,yi.bind(null,n)),ou(r)},mm=function(t,n){n=n||{};var r;return n.getShadowRoot?r=qs([t],n.includeContainer,{filter:vi.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=tu(t,n.includeContainer,vi.bind(null,n)),r},iu=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return cr.call(t,Xs)===!1?!1:yi(n,t)};const mr=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function au(e,t){const n=ss(e,mr()),r=n.length;if(r===0)return;const s=Lt(Ge(e)),o=n.indexOf(s),i=o===-1?t===1?0:r-1:o+t;return n[i]}function go(e){return au(Ge(e).body,1)||e}function lu(e){return au(Ge(e).body,-1)||e}function cu(e,t){if(!e)return null;const n=ss(Ge(e).body,mr()),r=n.length;if(r===0)return null;const s=n.indexOf(e);if(s===-1)return null;const o=(s+t+r)%r;return n[o]}function uu(e){return cu(e,1)}function du(e){return cu(e,-1)}function jn(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Oe(n,r)}function hm(e){ss(e,mr()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function ul(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const dl={width:0,height:0},xm={xStart:!1,xEnd:!1,yStart:!1,yEnd:!1},fu=d.forwardRef(function(t,n){const{render:r,className:s,overflowEdgeThreshold:o,...i}=t,[a,l]=d.useState(!1),[u,f]=d.useState(!1),[p,g]=d.useState(!1),[m,y]=d.useState(dl),[b,v]=d.useState(dl),[x,h]=d.useState(!1),[S,R]=d.useState(xm),w=Dn(),T=d.useRef(null),E=d.useRef(null),I=d.useRef(null),j=d.useRef(null),M=d.useRef(null),N=d.useRef(null),P=d.useRef(null),C=d.useRef(!1),A=d.useRef(0),O=d.useRef(0),F=d.useRef(0),L=d.useRef(0),k=d.useRef("vertical"),_=it(),z=it(),X=d.useRef({x:0,y:0}),[H,B]=d.useState({scrollbarYHidden:!1,scrollbarXHidden:!1,cornerHidden:!1}),Q=bm(o),re=Z(ae=>{const W=ae.x-X.current.x,U=ae.y-X.current.y;X.current=ae,U!==0&&(g(!0),_.start(bs,()=>{g(!1)})),W!==0&&(f(!0),z.start(bs,()=>{f(!1)}))}),le=Z(ae=>{ae.button===0&&(C.current=!0,A.current=ae.clientY,O.current=ae.clientX,k.current=ae.currentTarget.getAttribute(kg.orientation),E.current&&(F.current=E.current.scrollTop,L.current=E.current.scrollLeft),M.current&&k.current==="vertical"&&M.current.setPointerCapture(ae.pointerId),N.current&&k.current==="horizontal"&&N.current.setPointerCapture(ae.pointerId))}),ue=Z(ae=>{if(!C.current)return;const W=ae.clientY-A.current,U=ae.clientX-O.current;if(E.current){const Y=E.current.scrollHeight,ve=E.current.clientHeight,xe=E.current.scrollWidth,Re=E.current.clientWidth;if(M.current&&I.current&&k.current==="vertical"){const ee=Et(I.current,"padding","y"),fe=Et(M.current,"margin","y"),te=M.current.offsetHeight,de=I.current.offsetHeight-te-ee-fe,oe=W/de;E.current.scrollTop=F.current+oe*(Y-ve),ae.preventDefault(),g(!0),_.start(bs,()=>{g(!1)})}if(N.current&&j.current&&k.current==="horizontal"){const ee=Et(j.current,"padding","x"),fe=Et(N.current,"margin","x"),te=N.current.offsetWidth,de=j.current.offsetWidth-te-ee-fe,oe=U/de;E.current.scrollLeft=L.current+oe*(xe-Re),ae.preventDefault(),f(!0),z.start(bs,()=>{f(!1)})}}}),J=Z(ae=>{C.current=!1,M.current&&k.current==="vertical"&&M.current.releasePointerCapture(ae.pointerId),N.current&&k.current==="horizontal"&&N.current.releasePointerCapture(ae.pointerId)});function ce(ae){const W=ae.pointerType==="touch";if(h(W),!W){const U=Oe(T.current,ae.target);l(U)}}const V=d.useMemo(()=>({hasOverflowX:!H.scrollbarXHidden,hasOverflowY:!H.scrollbarYHidden,overflowXStart:S.xStart,overflowXEnd:S.xEnd,overflowYStart:S.yStart,overflowYEnd:S.yEnd,cornerHidden:H.cornerHidden}),[H.scrollbarXHidden,H.scrollbarYHidden,H.cornerHidden,S]),D={role:"presentation",onPointerEnter:ce,onPointerMove:ce,onPointerDown({pointerType:ae}){h(ae==="touch")},onPointerLeave(){l(!1)},style:{position:"relative",[$s.scrollAreaCornerHeight]:`${m.height}px`,[$s.scrollAreaCornerWidth]:`${m.width}px`}},se=$e("div",t,{state:V,ref:[n,T],props:[D,i],stateAttributesMapping:Gi}),K=d.useMemo(()=>({handlePointerDown:le,handlePointerMove:ue,handlePointerUp:J,handleScroll:re,cornerSize:m,setCornerSize:y,thumbSize:b,setThumbSize:v,touchModality:x,cornerRef:P,scrollingX:u,setScrollingX:f,scrollingY:p,setScrollingY:g,hovering:a,setHovering:l,viewportRef:E,rootRef:T,scrollbarYRef:I,scrollbarXRef:j,thumbYRef:M,thumbXRef:N,rootId:w,hiddenState:H,setHiddenState:B,overflowEdges:S,setOverflowEdges:R,viewportState:V,overflowEdgeThreshold:Q}),[le,ue,J,re,m,b,x,P,u,f,p,g,a,l,E,T,I,j,M,N,w,H,S,V,Q]);return c.jsxs(Hc.Provider,{value:K,children:[$c.element,se]})});function bm(e){if(typeof e=="number"){const t=Math.max(0,e);return{xStart:t,xEnd:t,yStart:t,yEnd:t}}return{xStart:Math.max(0,e?.xStart||0),xEnd:Math.max(0,e?.xEnd||0),yStart:Math.max(0,e?.yStart||0),yEnd:Math.max(0,e?.yEnd||0)}}const vm=d.createContext(void 0),ym=d.createContext(void 0);function hr(){return d.useContext(ym)?.direction??"ltr"}function Ut(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function wm(e,t){if(typeof IntersectionObserver>"u")return()=>{};const n=new IntersectionObserver(r=>{r.forEach(s=>{s.intersectionRatio>0&&(t(),n.disconnect())})});return n.observe(e),()=>{n.disconnect()}}let en=function(e){return e.scrollAreaOverflowXStart="--scroll-area-overflow-x-start",e.scrollAreaOverflowXEnd="--scroll-area-overflow-x-end",e.scrollAreaOverflowYStart="--scroll-area-overflow-y-start",e.scrollAreaOverflowYEnd="--scroll-area-overflow-y-end",e}({}),fl=!1;function Sm(){fl||Wc||(typeof CSS<"u"&&"registerProperty"in CSS&&[en.scrollAreaOverflowXStart,en.scrollAreaOverflowXEnd,en.scrollAreaOverflowYStart,en.scrollAreaOverflowYEnd].forEach(e=>{try{CSS.registerProperty({name:e,syntax:"<length>",inherits:!1,initialValue:"0px"})}catch{}}),fl=!0)}const pu=d.forwardRef(function(t,n){const{render:r,className:s,...o}=t,{viewportRef:i,scrollbarYRef:a,scrollbarXRef:l,thumbYRef:u,thumbXRef:f,cornerRef:p,setCornerSize:g,setThumbSize:m,rootId:y,setHiddenState:b,hiddenState:v,handleScroll:x,setHovering:h,setOverflowEdges:S,overflowEdges:R,overflowEdgeThreshold:w}=Xi(),T=hr(),E=d.useRef(!0),I=it(),j=it();function M(){const L=i.current,k=a.current,_=l.current,z=u.current,X=f.current,H=p.current;if(!L)return;const B=L.scrollHeight,Q=L.scrollWidth,re=L.clientHeight,le=L.clientWidth,ue=L.scrollTop,J=L.scrollLeft;if(B===0||Q===0)return;const ce=re>=B,V=le>=Q,D=le/Q,se=re/B,K=Math.max(0,Q-le),ae=Math.max(0,B-re);let W=0,U=0;V||(T==="rtl"?W=Ut(-J,0,K):W=Ut(J,0,K),U=K-W);const Y=ce?0:Ut(ue,0,ae),ve=ce?0:ae-Y,xe=V?0:le,Re=ce?0:re,ee=Et(_,"padding","x"),fe=Et(k,"padding","y"),te=Et(X,"margin","x"),de=Et(z,"margin","y"),oe=xe-ee-te,Ee=Re-fe-de,Pe=_?Math.min(_.offsetWidth,oe):oe,ye=k?Math.min(k.offsetHeight,Ee):Ee,je=Math.max(rl,Pe*D),_e=Math.max(rl,ye*se);if(m(be=>be.height===_e&&be.width===je?be:{width:je,height:_e}),k&&z){const be=k.offsetHeight-_e-fe-de,Se=B-re,Qe=Se===0?0:ue/Se,ke=Math.min(be,Math.max(0,Qe*be));z.style.transform=`translate3d(0,${ke}px,0)`}if(_&&X){const be=_.offsetWidth-je-ee-te,Se=Q-le,Qe=Se===0?0:J/Se,ke=T==="rtl"?Ut(Qe*be,-be,0):Ut(Qe*be,0,be);X.style.transform=`translate3d(${ke}px,0,0)`}const Be=Ut(W,0,K),Ke=Ut(U,0,K),Le=Ut(Y,0,ae),q=Ut(ve,0,ae),Ae=[[en.scrollAreaOverflowXStart,Be],[en.scrollAreaOverflowXEnd,Ke],[en.scrollAreaOverflowYStart,Le],[en.scrollAreaOverflowYEnd,q]];for(const[be,Se]of Ae)L.style.setProperty(be,`${Se}px`);if(H){if(V||ce)g({width:0,height:0});else if(!V&&!ce){const be=k?.offsetWidth||0,Se=_?.offsetHeight||0;g({width:be,height:Se})}}b(be=>{const Se=ce||V;return be.scrollbarYHidden===ce&&be.scrollbarXHidden===V&&be.cornerHidden===Se?be:{scrollbarYHidden:ce,scrollbarXHidden:V,cornerHidden:Se}});const De={xStart:!V&&Be>w.xStart,xEnd:!V&&Ke>w.xEnd,yStart:!ce&&Le>w.yStart,yEnd:!ce&&q>w.yEnd};S(be=>be.xStart===De.xStart&&be.xEnd===De.xEnd&&be.yStart===De.yStart&&be.yEnd===De.yEnd?be:De)}const N=Z(()=>{nt.flushSync(M)});ne(()=>i.current?(Sm(),wm(i.current,N)):void 0,[N,i]),ne(()=>{queueMicrotask(N)},[N,v,T]),ne(()=>{i.current?.matches(":hover")&&h(!0)},[i,h]),d.useEffect(()=>{const L=i.current;if(typeof ResizeObserver>"u"||!L)return;const k=new ResizeObserver(N);return k.observe(L),j.start(0,()=>{Promise.all(L.getAnimations({subtree:!0}).map(_=>_.finished)).then(N).catch(()=>{})}),()=>{k.disconnect(),j.clear()}},[N,i,j]);function P(){E.current=!1}const C={role:"presentation",...y&&{"data-id":`${y}-viewport`},...(!v.scrollbarXHidden||!v.scrollbarYHidden)&&{tabIndex:0},className:$c.className,style:{overflow:"scroll"},onScroll(){i.current&&(N(),E.current||x({x:i.current.scrollLeft,y:i.current.scrollTop}),I.start(100,()=>{E.current=!0}))},onWheel:P,onTouchMove:P,onPointerMove:P,onPointerEnter:P,onKeyDown:P},A=d.useMemo(()=>({hasOverflowX:!v.scrollbarXHidden,hasOverflowY:!v.scrollbarYHidden,overflowXStart:R.xStart,overflowXEnd:R.xEnd,overflowYStart:R.yStart,overflowYEnd:R.yEnd,cornerHidden:v.cornerHidden}),[v.scrollbarXHidden,v.scrollbarYHidden,v.cornerHidden,R]),O=$e("div",t,{ref:[n,i],state:A,props:[C,o],stateAttributesMapping:Gi}),F=d.useMemo(()=>({computeThumbPosition:N}),[N]);return c.jsx(vm.Provider,{value:F,children:O})}),gu=d.createContext(void 0);function Rm(){const e=d.useContext(gu);if(e===void 0)throw new Error(qe(54));return e}let Ks=function(e){return e.scrollAreaThumbHeight="--scroll-area-thumb-height",e.scrollAreaThumbWidth="--scroll-area-thumb-width",e}({});const mu=d.forwardRef(function(t,n){const{render:r,className:s,orientation:o="vertical",keepMounted:i=!1,...a}=t,{hovering:l,scrollingX:u,scrollingY:f,hiddenState:p,overflowEdges:g,scrollbarYRef:m,scrollbarXRef:y,viewportRef:b,thumbYRef:v,thumbXRef:x,handlePointerDown:h,handlePointerUp:S,rootId:R,thumbSize:w}=Xi(),T=d.useMemo(()=>({hovering:l,scrolling:{horizontal:u,vertical:f}[o],orientation:o,hasOverflowX:!p.scrollbarXHidden,hasOverflowY:!p.scrollbarYHidden,overflowXStart:g.xStart,overflowXEnd:g.xEnd,overflowYStart:g.yStart,overflowYEnd:g.yEnd,cornerHidden:p.cornerHidden}),[l,u,f,o,p,g]),E=hr();d.useEffect(()=>{const C=b.current,A=o==="vertical"?m.current:y.current;if(!A)return;function O(F){if(!(!C||!A||F.ctrlKey)){if(F.preventDefault(),o==="vertical"){if(C.scrollTop===0&&F.deltaY<0)return}else if(C.scrollLeft===0&&F.deltaX<0)return;if(o==="vertical"){if(C.scrollTop===C.scrollHeight-C.clientHeight&&F.deltaY>0)return}else if(C.scrollLeft===C.scrollWidth-C.clientWidth&&F.deltaX>0)return;o==="vertical"?C.scrollTop+=F.deltaY:C.scrollLeft+=F.deltaX}}return A.addEventListener("wheel",O,{passive:!1}),()=>{A.removeEventListener("wheel",O)}},[o,y,m,b]);const I={...R&&{"data-id":`${R}-scrollbar`},onPointerDown(C){if(C.button===0&&C.currentTarget===C.target&&b.current){if(v.current&&m.current&&o==="vertical"){const A=Et(v.current,"margin","y"),O=Et(m.current,"padding","y"),F=v.current.offsetHeight,L=m.current.getBoundingClientRect(),k=C.clientY-L.top-F/2-O+A/2,_=b.current.scrollHeight,z=b.current.clientHeight,X=m.current.offsetHeight-F-O-A,B=k/X*(_-z);b.current.scrollTop=B}if(x.current&&y.current&&o==="horizontal"){const A=Et(x.current,"margin","x"),O=Et(y.current,"padding","x"),F=x.current.offsetWidth,L=y.current.getBoundingClientRect(),k=C.clientX-L.left-F/2-O+A/2,_=b.current.scrollWidth,z=b.current.clientWidth,X=y.current.offsetWidth-F-O-A,H=k/X;let B;E==="rtl"?(B=(1-H)*(_-z),b.current.scrollLeft<=0&&(B=-B)):B=H*(_-z),b.current.scrollLeft=B}h(C)}},onPointerUp:S,style:{position:"absolute",touchAction:"none",WebkitUserSelect:"none",userSelect:"none",...o==="vertical"&&{top:0,bottom:`var(${$s.scrollAreaCornerHeight})`,insetInlineEnd:0,[Ks.scrollAreaThumbHeight]:`${w.height}px`},...o==="horizontal"&&{insetInlineStart:0,insetInlineEnd:`var(${$s.scrollAreaCornerWidth})`,bottom:0,[Ks.scrollAreaThumbWidth]:`${w.width}px`}}},j=$e("div",t,{ref:[n,o==="vertical"?m:y],state:T,props:[I,a],stateAttributesMapping:Gi}),M=d.useMemo(()=>({orientation:o}),[o]),N=o==="vertical"?p.scrollbarYHidden:p.scrollbarXHidden;return i||!N?c.jsx(gu.Provider,{value:M,children:j}):null}),hu=d.forwardRef(function(t,n){const{render:r,className:s,...o}=t,{thumbYRef:i,thumbXRef:a,handlePointerDown:l,handlePointerMove:u,handlePointerUp:f,setScrollingX:p,setScrollingY:g}=Xi(),{orientation:m}=Rm(),y=d.useMemo(()=>({orientation:m}),[m]);return $e("div",t,{ref:[n,m==="vertical"?i:a],state:y,props:[{onPointerDown:l,onPointerMove:u,onPointerUp(v){m==="vertical"&&g(!1),m==="horizontal"&&p(!1),f(v)},style:{...m==="vertical"&&{height:`var(${Ks.scrollAreaThumbHeight})`},...m==="horizontal"&&{width:`var(${Ks.scrollAreaThumbWidth})`}}},o]})}),As={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},wi=new Map,ws=e=>{const t=wi.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Em=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=wi.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return wi.set(n.name,s),{type:"tracked",store:e,...s}},Cm=(e,t={})=>(n,r,s)=>{const{enabled:o,anonymousActionType:i,store:a,...l}=t;let u;try{u=(o??(As?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(As?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,s);const{connection:f,...p}=Em(a,u,l);let g=!0;s.setState=(b,v,x)=>{const h=n(b,v);if(!g)return h;const S=x===void 0?{type:i||"anonymous"}:typeof x=="string"?{type:x}:x;return a===void 0?(f?.send(S,r()),h):(f?.send({...S,type:`${a}/${S.type}`},{...ws(l.name),[a]:s.getState()}),h)};const m=(...b)=>{const v=g;g=!1,n(...b),g=v},y=e(s.setState,r,s);if(p.type==="untracked"?f?.init(y):(p.stores[p.store]=s,f?.init(Object.fromEntries(Object.entries(p.stores).map(([b,v])=>[b,b===p.store?y:v.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let b=!1;const v=s.dispatch;s.dispatch=(...x)=>{(As?"production":void 0)!=="production"&&x[0].type==="__setState"&&!b&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),b=!0),v(...x)}}return f.subscribe(b=>{var v;switch(b.type){case"ACTION":if(typeof b.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Wo(b.payload,x=>{if(x.type==="__setState"){if(a===void 0){m(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const h=x.state[a];if(h==null)return;JSON.stringify(s.getState())!==JSON.stringify(h)&&m(h);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(x)});case"DISPATCH":switch(b.payload.type){case"RESET":return m(y),a===void 0?f?.init(s.getState()):f?.init(ws(l.name));case"COMMIT":if(a===void 0){f?.init(s.getState());return}return f?.init(ws(l.name));case"ROLLBACK":return Wo(b.state,x=>{if(a===void 0){m(x),f?.init(s.getState());return}m(x[a]),f?.init(ws(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Wo(b.state,x=>{if(a===void 0){m(x);return}JSON.stringify(s.getState())!==JSON.stringify(x[a])&&m(x[a])});case"IMPORT_STATE":{const{nextLiftedState:x}=b.payload,h=(v=x.computedStates.slice(-1)[0])==null?void 0:v.state;if(!h)return;m(a===void 0?h:h[a]),f?.send(null,x);return}case"PAUSE_RECORDING":return g=!g}return}}),y},Im=Cm,Wo=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function Tm(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const i=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(s))!=null?o:null;return a instanceof Promise?a.then(i):i(a)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Wr=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Wr(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Wr(r)(n)}}}},Pm=(e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...t},i=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...v)},r,s);const f=Wr(o.serialize),p=()=>{const v=o.partialize({...r()});let x;const h=f({state:v,version:o.version}).then(S=>u.setItem(o.name,S)).catch(S=>{x=S});if(x)throw x;return h},g=s.setState;s.setState=(v,x)=>{g(v,x),p()};const m=e((...v)=>{n(...v),p()},r,s);let y;const b=()=>{var v;if(!u)return;i=!1,a.forEach(h=>h(r()));const x=((v=o.onRehydrateStorage)==null?void 0:v.call(o,r()))||void 0;return Wr(u.getItem.bind(u))(o.name).then(h=>{if(h)return o.deserialize(h)}).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return o.migrate(h.state,h.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return h.state}).then(h=>{var S;return y=o.merge(h,(S=r())!=null?S:m),n(y,!0),p()}).then(()=>{x?.(y,void 0),i=!0,l.forEach(h=>h(y))}).catch(h=>{x?.(void 0,h)})};return s.persist={setOptions:v=>{o={...o,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},b(),y||m},Om=(e,t)=>(n,r,s)=>{let o={storage:Tm(()=>localStorage),partialize:b=>b,version:0,merge:(b,v)=>({...v,...b}),...t},i=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},r,s);const f=()=>{const b=o.partialize({...r()});return u.setItem(o.name,{state:b,version:o.version})},p=s.setState;s.setState=(b,v)=>{p(b,v),f()};const g=e((...b)=>{n(...b),f()},r,s);s.getInitialState=()=>g;let m;const y=()=>{var b,v;if(!u)return;i=!1,a.forEach(h=>{var S;return h((S=r())!=null?S:g)});const x=((v=o.onRehydrateStorage)==null?void 0:v.call(o,(b=r())!=null?b:g))||void 0;return Wr(u.getItem.bind(u))(o.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==o.version){if(o.migrate)return[!0,o.migrate(h.state,h.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var S;const[R,w]=h;if(m=o.merge(w,(S=r())!=null?S:g),n(m,!0),R)return f()}).then(()=>{x?.(m,void 0),m=r(),i=!0,l.forEach(h=>h(m))}).catch(h=>{x?.(void 0,h)})};return s.persist={setOptions:b=>{o={...o,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},o.skipHydration||y(),m||g},Mm=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((As?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Pm(e,t)):Om(e,t),km=Mm;function Nm(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const{useRef:jm}=vc;function mo(e){const t=jm();return n=>{const r=e(n);return Nm(t.current,r)?t.current:t.current=r}}class Am{pendingRequests=new Map;eventListeners=new Map;isWebView;constructor(){this.isWebView=typeof window<"u"&&!!window.chrome?.webview,console.log("[Bridge] isWebView:",this.isWebView),this.isWebView&&window.chrome.webview.addEventListener("message",t=>{console.log("[Bridge] Received message:",t.data),this.handleMessage(t.data)})}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}handleMessage(t){try{const n=typeof t=="string"?JSON.parse(t):t;if(console.log("[Bridge] Parsed message:",JSON.stringify(n,null,2)),console.log("[Bridge] Message id:",n.id,"Pending IDs:",Array.from(this.pendingRequests.keys())),n.id&&this.pendingRequests.has(n.id)){const{resolve:r,reject:s}=this.pendingRequests.get(n.id);this.pendingRequests.delete(n.id);const o=n;console.log("[Bridge] Response for id:",n.id,"success:",o.success),o.success?r(o.data):s(new Error(o.error||"Unknown error"))}else if(n.event){const r=n,s=this.eventListeners.get(r.event);s&&s.forEach(o=>o(r.data))}else console.log("[Bridge] Unhandled - id not in pending:",n.id)}catch(n){console.error("Failed to parse bridge message:",n)}}async send(t,n){const r=this.generateId(),s={id:r,action:t,payload:n};return console.log("[Bridge] Sending:",t,"id:",r),new Promise((o,i)=>{if(!this.isWebView){console.log("[Bridge] Using mock response for:",t),setTimeout(()=>{o(this.getMockResponse(t,n))},100);return}this.pendingRequests.set(r,{resolve:o,reject:i});const a=JSON.stringify(s);console.log("[Bridge] Posting to WebView:",a),window.chrome.webview.postMessage(a),setTimeout(()=>{this.pendingRequests.has(r)&&(this.pendingRequests.delete(r),console.error("[Bridge] Timeout for:",t,"id:",r),i(new Error("Request timeout")))},12e4)})}on(t,n){return this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t).add(n),()=>{this.eventListeners.get(t)?.delete(n)}}async getDrives(){return this.send("getDrives")}async getFolders(t){return this.send("getFolders",{path:t})}async getImages(t){return this.send("getImages",{folderPath:t})}async getFolderContents(t){return this.send("getFolderContents",{folderPath:t})}async selectFolder(){return this.send("selectFolder")}async readTags(t){return this.send("readTags",{imagePath:t})}async writeTags(t,n){return this.send("writeTags",{imagePath:t,tags:n})}async getThumbnail(t){return this.send("getThumbnail",{imagePath:t})}async getFullImage(t,n=1920){return this.send("getFullImage",{imagePath:t,maxSize:n})}async getThumbnailsBatch(t){return this.send("getThumbnailsBatch",{imagePaths:t})}async getRating(t){return this.send("getRating",{imagePath:t})}async setRating(t,n){return this.send("setRating",{imagePath:t,rating:n})}async getAllTags(){return this.send("getAllTags")}async getTagLibrary(){return this.send("getTagLibrary")}async saveTagLibrary(t){return this.send("saveTagLibrary",{library:t})}async rotateImages(t,n){return this.send("rotateImages",{paths:t,angle:n})}async flipImages(t,n){return this.send("flipImages",{paths:t,horizontal:n})}async copyFiles(t,n){return this.send("copyFiles",{paths:t,targetFolder:n})}async moveFiles(t,n){return this.send("moveFiles",{paths:t,targetFolder:n})}async deleteFiles(t){return this.send("deleteFiles",{paths:t})}async rename(t,n){return this.send("renameFile",{path:t,newName:n})}async openInExplorer(t){return this.send("openInExplorer",{path:t})}async getProperties(t){return this.send("getProperties",{path:t})}getMockResponse(t,n){switch(t){case"getDrives":return[{name:"Lokaler Datentrger (C:)",path:"C:\\",type:"Drive",hasSubfolders:!0,totalSize:500*1024**3,freeSpace:200*1024**3,driveFormat:"NTFS",driveType:"Fixed"},{name:"Daten (D:)",path:"D:\\",type:"Drive",hasSubfolders:!0,totalSize:2e3*1024**3,freeSpace:1500*1024**3,driveFormat:"NTFS",driveType:"Fixed"},{name:"Backup (E:)",path:"E:\\",type:"Drive",hasSubfolders:!0,totalSize:4e3*1024**3,freeSpace:500*1024**3,driveFormat:"NTFS",driveType:"Fixed"}];case"getFolders":return[{name:"Pictures",path:"C:\\Pictures",type:"Folder",hasSubfolders:!0},{name:"Documents",path:"C:\\Documents",type:"Folder",hasSubfolders:!1}];case"getImages":return[];case"selectFolder":return"C:\\Pictures";case"readTags":return["landscape","nature","sunset"];case"getAllTags":return[{name:"landscape",usageCount:42,isFavorite:!0},{name:"nature",usageCount:38,isFavorite:!1}];default:return null}}}const et=new Am,Fm=()=>{try{const e=localStorage.getItem("tagfusion-favorites");return e?JSON.parse(e):[]}catch{return[]}},pl=e=>{localStorage.setItem("tagfusion-favorites",JSON.stringify(e))},Lm=(e,t)=>({currentFolder:null,folders:[],drives:[],favorites:Fm(),expandedPaths:new Set,folderCache:new Map,loadingPaths:new Set,isLoadingDrives:!1,setCurrentFolder:n=>e({currentFolder:n}),loadDrives:async()=>{try{e({isLoadingDrives:!0});const n=await et.getDrives();e({drives:n,isLoadingDrives:!1})}catch(n){e({isLoadingDrives:!1}),t().setError(n.message)}},loadFolders:async n=>{try{const r=await et.getFolders(n);e({folders:r})}catch(r){t().setError(r.message)}},toggleFolder:async n=>{const{expandedPaths:r,folderCache:s,loadingPaths:o}=t(),i=new Set(r);if(i.has(n))i.delete(n),e({expandedPaths:i});else if(i.add(n),e({expandedPaths:i}),!s.has(n)){const a=new Set(o);a.add(n),e({loadingPaths:a});try{const l=await et.getFolders(n),u=new Map(t().folderCache);u.set(n,l);const f=new Set(t().loadingPaths);f.delete(n),e({folderCache:u,loadingPaths:f})}catch(l){const u=new Set(t().loadingPaths);u.delete(n),e({loadingPaths:u}),t().setError(l.message)}}},expandToPath:async n=>{const{expandedPaths:r,folderCache:s}=t(),o=new Set(r),i=new Map(s),l=n.replace(/\\/g,"/").replace(/\/$/,"").split("/").filter(Boolean),u=[];for(let f=0;f<l.length;f++){let p;f===0?p=l[f]+"\\":p=l[0]+"\\"+l.slice(1,f+1).join("\\"),u.push(p)}for(const f of u)if(o.add(f),!i.has(f))try{const p=await et.getFolders(f);i.set(f,p)}catch(p){console.error("expandToPath error for",f,p)}e({expandedPaths:o,folderCache:i})},navigateToFolder:async n=>{await t().expandToPath(n),await t().loadImages(n)},navigateUp:async()=>{const{currentFolder:n}=t();if(!n)return;const s=n.replace(/\\/g,"/").split("/").filter(Boolean);if(s.length<=1)return;s.pop();let o=s.join("\\");s.length===1&&o.endsWith(":")&&(o+="\\"),await t().navigateToFolder(o)},addFavorite:(n,r)=>{const{favorites:s}=t();if(!s.some(o=>o.path===n)){const o=[...s,{path:n,name:r}];pl(o),e({favorites:o})}},removeFavorite:n=>{const{favorites:r}=t(),s=r.filter(o=>o.path!==n);pl(s),e({favorites:s})},addCurrentFolderToFavorites:()=>{const{currentFolder:n}=t();if(n){const r=n.split("\\").pop()||n;t().addFavorite(n,r)}},openFolderDialog:async()=>{try{const n=await et.selectFolder();n&&await t().loadImages(n)}catch(n){t().setError(n.message)}}}),gl=e=>e.filter(t=>!t.isFolder&&t.imageData).map(t=>({...t.imageData,tags:t.imageData.tags||[],rating:t.imageData.rating||0})),Nr=(e,t)=>{const n=new Map(t.map(r=>[r.path,r]));return e.map(r=>{if(r.isFolder)return r;const s=n.get(r.path);return s?{...r,imageData:s}:r})},Dm=(e,t)=>({gridItems:[],images:[],selectedImages:new Set,lastSelectedImage:null,isLoadingImages:!1,loadImages:async n=>{try{e({isLoadingImages:!0,currentFolder:n}),t().setCurrentFolder(n);const r=await et.getFolderContents(n),s=gl(r);e({gridItems:Nr(r,s),images:s,selectedImages:new Set,lastSelectedImage:null,isLoadingImages:!1})}catch(r){e({isLoadingImages:!1}),t().setError(r.message)}},refreshImages:async()=>{const{currentFolder:n}=t();if(n){const r=t().selectedImages;try{const s=await et.getFolderContents(n),o=gl(s),i=new Set(o.map(l=>l.path)),a=new Set(Array.from(r).filter(l=>i.has(l)));e({gridItems:Nr(s,o),images:o,selectedImages:a})}catch(s){console.error("refreshImages error:",s)}}},selectImage:(n,r=!1,s=!1)=>{const{selectedImages:o,lastSelectedImage:i,images:a}=t();if(s&&i){const l=a.findIndex(f=>f.path===i),u=a.findIndex(f=>f.path===n);if(l!==-1&&u!==-1){const f=Math.min(l,u),p=Math.max(l,u),g=new Set(r?o:[]);for(let m=f;m<=p;m++)g.add(a[m].path);e({selectedImages:g});return}}if(r){const l=new Set(o);l.has(n)?l.delete(n):l.add(n),e({selectedImages:l,lastSelectedImage:n});return}e({selectedImages:new Set([n]),lastSelectedImage:n})},selectAllImages:()=>{const{images:n}=t(),r=n.length>0?n[0].path:null;e({selectedImages:new Set(n.map(s=>s.path)),lastSelectedImage:r})},clearSelection:()=>e({selectedImages:new Set,lastSelectedImage:null}),updateImageTags:async(n,r)=>{try{await et.writeTags(n,r);const{images:s,gridItems:o}=t(),i=s.map(a=>a.path===n?{...a,tags:r}:a);e({images:i,gridItems:Nr(o,i)})}catch(s){t().setError(s.message)}},updateImageRating:async(n,r)=>{try{await et.setRating(n,r);const{images:s,gridItems:o}=t(),i=s.map(a=>a.path===n?{...a,rating:r}:a);e({images:i,gridItems:Nr(o,i)})}catch(s){t().setError(s.message)}}}),ml=50,hl=200,xl=10,_m=100,bl=50,vl=300,yl=25,Tn=100,zm=280,Vm=180,Hm=500,$m=320,Bm=200,Wm=600,Um=4e3,Ym=6e3,Xm=5e3,Gm=(e,t)=>({tags:[],error:null,sidebarWidth:zm,tagPanelWidth:$m,zoomLevel:_m,searchQuery:"",sortBy:"name",sortOrder:"asc",filterRating:null,filterTags:[],loadAllTags:async()=>{try{const n=await et.getAllTags();e({tags:n})}catch(n){e({error:n.message})}},setSidebarWidth:n=>e({sidebarWidth:n}),setTagPanelWidth:n=>e({tagPanelWidth:n}),setError:n=>e({error:n}),setZoomLevel:n=>e({zoomLevel:Math.min(hl,Math.max(ml,n))}),zoomIn:()=>e(n=>({zoomLevel:Math.min(hl,n.zoomLevel+xl)})),zoomOut:()=>e(n=>({zoomLevel:Math.max(ml,n.zoomLevel-xl)})),setSearchQuery:n=>e({searchQuery:n}),setSortBy:n=>e({sortBy:n}),setSortOrder:n=>e({sortOrder:n}),toggleSortOrder:()=>e(n=>({sortOrder:n.sortOrder==="asc"?"desc":"asc"})),setFilterRating:n=>e({filterRating:n}),setFilterTags:n=>e({filterTags:n}),clearFilters:()=>e({searchQuery:"",filterRating:null,filterTags:[],sortBy:"name",sortOrder:"asc"}),setupSubscriptions:()=>{et.on("metadataUpdated",n=>{if(console.log("metadataUpdated received",n),!n||typeof n!="object")return;const{images:r,gridItems:s}=t(),o=n;let i=!1;const a=new Map;for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&a.set(u.toLowerCase(),o[u]);const l=r.map(u=>{let f=o[u.path];return f||(f=a.get(u.path.toLowerCase())),f?(i=!0,{...u,tags:f.tags||[],rating:f.rating||0}):u});i&&e({images:l,gridItems:Nr(s,l)})})}}),Me=mn()(Im((...e)=>({...Lm(...e),...Dm(...e),...Gm(...e)}),{name:"TagFusion AppStore",enabled:!1})),ta=()=>Me(e=>e.currentFolder),qm=()=>Me(e=>e.setCurrentFolder),Km=()=>Me(e=>e.navigateToFolder),xu=()=>Me(e=>e.navigateUp),Qm=()=>Me(e=>e.drives),Zm=()=>Me(e=>e.loadDrives),Jm=()=>Me(e=>e.loadFolders),bu=()=>Me(e=>e.loadImages),eh=()=>Me(e=>e.addCurrentFolderToFavorites),vu=()=>Me(e=>e.gridItems),os=()=>Me(e=>e.images),yu=()=>Me(e=>e.isLoadingImages),is=()=>Me(e=>e.selectedImages),th=()=>Me(e=>e.clearSelection),nh=()=>Me(e=>e.zoomLevel),rh=()=>Me(mo(e=>({zoomLevel:e.zoomLevel,zoomIn:e.zoomIn,zoomOut:e.zoomOut,setZoomLevel:e.setZoomLevel}))),wu=()=>Me(mo(e=>({searchQuery:e.searchQuery,sortBy:e.sortBy,sortOrder:e.sortOrder,filterRating:e.filterRating,filterTags:e.filterTags,setSearchQuery:e.setSearchQuery,setSortBy:e.setSortBy,setSortOrder:e.setSortOrder,toggleSortOrder:e.toggleSortOrder,setFilterRating:e.setFilterRating,setFilterTags:e.setFilterTags,clearFilters:e.clearFilters}))),sh=()=>Me(e=>e.refreshImages),oh=()=>Me(e=>e.tags),Su=()=>Me(e=>e.updateImageTags),ih=()=>Me(mo(e=>({drives:e.drives,favorites:e.favorites,expandedPaths:e.expandedPaths,folderCache:e.folderCache,loadingPaths:e.loadingPaths,sidebarWidth:e.sidebarWidth,isLoadingDrives:e.isLoadingDrives,loadDrives:e.loadDrives,toggleFolder:e.toggleFolder,setSidebarWidth:e.setSidebarWidth,addFavorite:e.addFavorite,removeFavorite:e.removeFavorite}))),ah=()=>Me(mo(e=>({selectedImages:e.selectedImages,images:e.images,tags:e.tags,tagPanelWidth:e.tagPanelWidth,filterTags:e.filterTags,setTagPanelWidth:e.setTagPanelWidth,updateImageTags:e.updateImageTags,setFilterTags:e.setFilterTags}))),lh=()=>Me(e=>e.error),na=()=>Me(e=>e.setError),Lw={type:"spring",damping:15,stiffness:300,mass:.8},as={type:"spring",damping:25,stiffness:400,mass:.5},Ru={type:"spring",damping:30,stiffness:200,mass:1},ch={initial:{scale:1,y:0,opacity:1},hover:{scale:1.01,y:-2,transition:Ru},tap:{scale:.99,transition:as}},uh={sm:"backdrop-blur-glass-sm",md:"backdrop-blur-glass-md",lg:"backdrop-blur-glass-lg",xl:"backdrop-blur-glass-xl"},dh={none:"p-0",sm:"p-2",md:"p-4",lg:"p-6"},fh={md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl"},ph={cyan:"hover:shadow-[0_8px_32px_rgba(6,182,212,0.2),0_0_0_1px_rgba(6,182,212,0.15)]",purple:"hover:shadow-[0_8px_32px_rgba(139,92,246,0.2),0_0_0_1px_rgba(139,92,246,0.15)]",pink:"hover:shadow-[0_8px_32px_rgba(236,72,153,0.2),0_0_0_1px_rgba(236,72,153,0.15)]"},gh=d.forwardRef(({children:e,className:t="",blur:n="md",hover:r=!0,glow:s=!1,glowColor:o="cyan",padding:i="md",rounded:a="xl",...l},u)=>c.jsxs(he.div,{ref:u,className:`
          ${uh[n]}
          ${dh[i]}
          ${fh[a]}
          bg-[var(--glass-bg)]
          border border-[var(--glass-border)]
          shadow-glass
          transition-colors duration-200
          ${s?ph[o]:""}
          ${t}
        `,variants:r?ch:void 0,initial:"initial",whileHover:r?"hover":void 0,whileTap:r?"tap":void 0,transition:Ru,...l,children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent opacity-50 pointer-events-none",style:{borderRadius:"inherit"}}),c.jsx("div",{className:"relative z-10",children:e})]}));gh.displayName="GlassCard";const mh={sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2.5"},hh={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"},xh={default:`
    bg-[var(--glass-bg)]
    hover:bg-[var(--glass-bg-hover)]
    active:bg-[var(--glass-bg-active)]
    border-[var(--glass-border)]
    hover:border-[var(--glass-border-hover)]
    text-slate-100
  `,accent:`
    bg-cyan-500/20
    hover:bg-cyan-500/30
    active:bg-cyan-500/40
    border-cyan-500/30
    hover:border-cyan-500/50
    text-cyan-300
  `,danger:`
    bg-red-500/20
    hover:bg-red-500/30
    active:bg-red-500/40
    border-red-500/30
    hover:border-red-500/50
    text-red-300
  `,ghost:`
    bg-transparent
    hover:bg-[var(--glass-bg)]
    active:bg-[var(--glass-bg-hover)]
    border-transparent
    hover:border-[var(--glass-border)]
    text-slate-300
    hover:text-slate-100
  `},Eu=d.forwardRef(({children:e,className:t="",variant:n="default",size:r="md",fullWidth:s=!1,disabled:o=!1,iconOnly:i=!1,...a},l)=>c.jsxs(he.button,{ref:l,className:`
          relative inline-flex items-center justify-center
          ${i?hh[r]:mh[r]}
          ${s?"w-full":""}
          rounded-lg
          backdrop-blur-glass-sm
          border
          font-medium
          transition-all duration-150
          ${xh[n]}
          ${o?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer"}
          focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900
          hover:brightness-110 hover:shadow-lg
          ${t}
        `,initial:{scale:1},whileTap:o?void 0:{scale:.97},transition:as,disabled:o,...a,children:[c.jsx(he.div,{className:"absolute inset-0 rounded-lg bg-white/0 pointer-events-none",whileTap:{backgroundColor:"rgba(255, 255, 255, 0.1)"},transition:{duration:.1}}),c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent pointer-events-none rounded-t-lg"}),c.jsx("span",{className:"relative z-10 flex items-center gap-inherit",children:e})]}));Eu.displayName="GlassButton";const bh={xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-9 w-9 text-base",lg:"h-11 w-11 text-lg"},vh={default:`
    bg-[var(--glass-bg)]
    hover:bg-[var(--glass-bg-hover)]
    active:bg-[var(--glass-bg-active)]
    border-[var(--glass-border)]
    hover:border-[var(--glass-border-hover)]
    text-slate-300
    hover:text-slate-100
  `,accent:`
    bg-cyan-500/15
    hover:bg-cyan-500/25
    active:bg-cyan-500/35
    border-cyan-500/25
    hover:border-cyan-500/40
    text-cyan-400
    hover:text-cyan-300
  `,danger:`
    bg-red-500/15
    hover:bg-red-500/25
    active:bg-red-500/35
    border-red-500/25
    hover:border-red-500/40
    text-red-400
    hover:text-red-300
  `,ghost:`
    bg-transparent
    hover:bg-[var(--glass-bg)]
    active:bg-[var(--glass-bg-hover)]
    border-transparent
    hover:border-[var(--glass-border)]
    text-slate-400
    hover:text-slate-200
  `},yh={default:"bg-[var(--glass-bg-active)] border-[var(--glass-border-hover)] text-slate-100",accent:"bg-cyan-500/30 border-cyan-500/50 text-cyan-300",danger:"bg-red-500/30 border-red-500/50 text-red-300",ghost:"bg-[var(--glass-bg-hover)] border-[var(--glass-border)] text-slate-100"},wt=d.forwardRef(({children:e,className:t="",size:n="md",variant:r="default",disabled:s=!1,active:o=!1,title:i,...a},l)=>c.jsxs(he.button,{ref:l,className:`
          relative inline-flex items-center justify-center
          ${bh[n]}
          rounded-lg
          backdrop-blur-glass-xs
          border
          transition-all duration-150
          ${o?yh[r]:vh[r]}
          ${s?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer"}
          focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900
          hover:brightness-110 hover:shadow-md
          ${t}
        `,initial:{scale:1},whileTap:s?void 0:{scale:.95},transition:as,disabled:s,title:i,...a,children:[c.jsx(he.div,{className:"absolute inset-0 rounded-lg bg-white/0 pointer-events-none",whileTap:{backgroundColor:"rgba(255, 255, 255, 0.15)"},transition:{duration:.08}}),c.jsx("span",{className:"relative z-10 flex items-center justify-center",children:e})]}));wt.displayName="GlassIconButton";const wh={sm:"h-8 text-sm px-3",md:"h-10 text-sm px-4",lg:"h-12 text-base px-5"},wl={sm:{left:"pl-8",right:"pr-8"},md:{left:"pl-10",right:"pr-10"},lg:{left:"pl-12",right:"pr-12"}},Sl={sm:"w-8",md:"w-10",lg:"w-12"},Cu=d.forwardRef(({className:e="",size:t="md",leftIcon:n,rightIcon:r,error:s=!1,fullWidth:o=!1,disabled:i,...a},l)=>c.jsxs(he.div,{className:`relative ${o?"w-full":"inline-flex"}`,initial:{scale:1},whileFocus:{scale:1.01},transition:as,children:[n&&c.jsx("div",{className:`
              absolute left-0 top-0 bottom-0 ${Sl[t]}
              flex items-center justify-center
              text-slate-400 pointer-events-none
            `,children:n}),c.jsx("input",{ref:l,className:`
            w-full
            ${wh[t]}
            ${n?wl[t].left:""}
            ${r?wl[t].right:""}
            rounded-lg
            backdrop-blur-glass-sm
            bg-[var(--glass-bg)]
            border
            ${s?"border-red-500/50 focus-visible:border-red-500/70 focus-visible:ring-red-500/20":"border-[var(--glass-border)] focus-visible:border-cyan-500/50 focus-visible:ring-cyan-500/20"}
            text-slate-100
            placeholder:text-slate-500
            outline-none
            focus-visible:ring-2
            transition-all duration-150
            ${i?"opacity-50 cursor-not-allowed":""}
            ${e}
          `,disabled:i,...a}),r&&c.jsx("div",{className:`
              absolute right-0 top-0 bottom-0 ${Sl[t]}
              flex items-center justify-center
              text-slate-400
            `,children:r}),c.jsx("div",{className:`
            absolute inset-0 rounded-lg pointer-events-none
            opacity-0 focus-within:opacity-100
            transition-opacity duration-200
            ${s?"shadow-[0_0_0_2px_rgba(239,68,68,0.15)]":"shadow-[0_0_0_2px_rgba(6,182,212,0.15)]"}
          `})]}));Cu.displayName="GlassInput";const Iu=d.createContext(void 0);function Tu(e){const t=d.useContext(Iu);if(t===void 0&&!e)throw new Error(qe(33));return t}const Pu=d.createContext(void 0);function Hn(e){const t=d.useContext(Pu);if(t===void 0&&!e)throw new Error(qe(36));return t}let ra=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=or.startingStyle]="startingStyle",e[e.endingStyle=or.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),Si=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const Sh={[Si.popupOpen]:""},Rh={[Si.popupOpen]:"",[Si.pressed]:""},Eh={[ra.open]:""},Ch={[ra.closed]:""},Ih={[ra.anchorHidden]:""},Ou={open(e){return e?Sh:null}},Qs={open(e){return e?Rh:null}},xr={open(e){return e?Eh:Ch},anchorHidden(e){return e?Ih:null}},Th=d.createContext(void 0);function ho(e=!0){const t=d.useContext(Th);if(t===void 0&&!e)throw new Error(qe(25));return t}const Ph={type:"regular-item"};function Oh(e){const{closeOnClick:t,disabled:n=!1,highlighted:r,id:s,store:o,nativeButton:i,itemMetadata:a,nodeId:l}=e,u=d.useRef(null),f=ho(!0),p=f!==void 0,{events:g}=o.useState("floatingTreeRoot"),{getButtonProps:m,buttonRef:y}=gr({disabled:n,focusableWhenDisabled:!0,native:i}),b=d.useCallback(x=>oo({id:s,role:"menuitem",tabIndex:r?0:-1,onMouseMove(h){l&&g.emit("itemhover",{nodeId:l,target:h.currentTarget})},onMouseEnter(){a.type==="submenu-trigger"&&a.setActive()},onKeyUp(h){h.key===" "&&o.context.typingRef.current&&h.preventBaseUIHandler()},onClick(h){t&&g.emit("close",{domEvent:h,reason:Bi})},onMouseUp(h){if(f){const S=f.initialCursorPointRef.current;if(f.initialCursorPointRef.current=null,p&&S&&Math.abs(h.clientX-S.x)<=1&&Math.abs(h.clientY-S.y)<=1)return}u.current&&o.context.allowMouseUpTriggerRef.current&&(!p||h.button===2)&&a.type==="regular-item"&&u.current.click()}},x,m),[s,r,m,t,g,o,p,f,a,l]),v=fn(u,y);return d.useMemo(()=>({getItemProps:b,itemRef:v}),[b,v])}const Mu=d.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function Mh(){return d.useContext(Mu)}let ku=function(e){return e[e.None=0]="None",e[e.GuessFromOrder=1]="GuessFromOrder",e}({});function sa(e={}){const{label:t,metadata:n,textRef:r,indexGuessBehavior:s,index:o}=e,{register:i,unregister:a,subscribeMapChange:l,elementsRef:u,labelsRef:f,nextIndexRef:p}=Mh(),g=d.useRef(-1),[m,y]=d.useState(o??(s===ku.GuessFromOrder?()=>{if(g.current===-1){const x=p.current;p.current+=1,g.current=x}return g.current}:-1)),b=d.useRef(null),v=d.useCallback(x=>{if(b.current=x,m!==-1&&x!==null&&(u.current[m]=x,f)){const h=t!==void 0;f.current[m]=h?t:r?.current?.textContent??x.textContent}},[m,u,f,t,r]);return ne(()=>{if(o!=null)return;const x=b.current;if(x)return i(x,n),()=>{a(x)}},[o,i,a,n]),ne(()=>{if(o==null)return l(x=>{const h=b.current?x.get(b.current)?.index:null;h!=null&&y(h)})},[o,l,y]),d.useMemo(()=>({ref:v,index:m}),[m,v])}const kh=d.forwardRef(function(t,n){const{render:r,className:s,id:o,label:i,nativeButton:a=!1,disabled:l=!1,closeOnClick:u=!0,...f}=t,p=sa({label:i}),g=Tu(!0),m=Dn(o),{store:y}=Hn(),b=y.useState("isActive",p.index),v=y.useState("itemProps"),{getItemProps:x,itemRef:h}=Oh({closeOnClick:u,disabled:l,highlighted:b,id:m,store:y,nativeButton:a,nodeId:g?.nodeId,itemMetadata:Ph}),S=d.useMemo(()=>({disabled:l,highlighted:b}),[l,b]);return $e("div",t,{state:S,props:[v,f,x],ref:[h,n,p.ref]})});function Nu(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(r=>r(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}class oa{nodesRef={current:[]};events=Nu();addNode(t){this.nodesRef.current.push(t)}removeNode(t){const n=this.nodesRef.current.findIndex(r=>r===t);n!==-1&&this.nodesRef.current.splice(n,1)}}const ju=d.createContext(null),Au=d.createContext(null),$t=()=>d.useContext(ju)?.id||null,bn=e=>{const t=d.useContext(Au);return e??t};function ia(e){const t=Ln(),n=bn(e),r=$t();return ne(()=>{if(!t)return;const s={id:t,parentId:r};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,t,r]),t}function Fu(e){const{children:t,id:n}=e,r=$t();return c.jsx(ju.Provider,{value:d.useMemo(()=>({id:n,parentId:r}),[n,r]),children:t})}function Lu(e){const{children:t,externalTree:n}=e,r=ut(()=>n??new oa).current;return c.jsx(Au.Provider,{value:r,children:t})}function ur(e){return`data-base-ui-${e}`}function Uo(e,t,n){if(n&&!ir(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r?.[t]}return e?.[t]}const aa={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};function Qt(e){return e?.ownerDocument||document}const gn=d.forwardRef(function(t,n){const[r,s]=d.useState();ne(()=>{Uc&&s("button")},[]);const o={tabIndex:0,role:r};return c.jsx("span",{...t,ref:n,style:aa,"aria-hidden":r?void 0:!0,...o,"data-base-ui-focus-guard":""})});let Rl=0;function Fs(e,t={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(Rl);const o=()=>e?.focus({preventScroll:n});s?o():Rl=requestAnimationFrame(o)}const qn={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function El(e){return e==="inert"?qn.inert:e==="aria-hidden"?qn["aria-hidden"]:qn.none}let Ss=new WeakSet,Rs={},Yo=0;const Du=e=>e&&(e.host||Du(e.parentNode)),Nh=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Du(n);return e.contains(r)?r:null}).filter(n=>n!=null);function jh(e,t,n,r){const s="data-base-ui-inert",o=r?"inert":n?"aria-hidden":null,i=Nh(t,e),a=new Set,l=new Set(i),u=[];Rs[s]||(Rs[s]=new WeakMap);const f=Rs[s];i.forEach(p),g(t),a.clear();function p(m){!m||a.has(m)||(a.add(m),m.parentNode&&p(m.parentNode))}function g(m){!m||l.has(m)||[].forEach.call(m.children,y=>{if(hn(y)!=="script")if(a.has(y))g(y);else{const b=o?y.getAttribute(o):null,v=b!==null&&b!=="false",x=El(o),h=(x.get(y)||0)+1,S=(f.get(y)||0)+1;x.set(y,h),f.set(y,S),u.push(y),h===1&&v&&Ss.add(y),S===1&&y.setAttribute(s,""),!v&&o&&y.setAttribute(o,o==="inert"?"":"true")}})}return Yo+=1,()=>{u.forEach(m=>{const y=El(o),v=(y.get(m)||0)-1,x=(f.get(m)||0)-1;y.set(m,v),f.set(m,x),v||(!Ss.has(m)&&o&&m.removeAttribute(o),Ss.delete(m)),x||m.removeAttribute(s)}),Yo-=1,Yo||(qn.inert=new WeakMap,qn["aria-hidden"]=new WeakMap,qn.none=new WeakMap,Ss=new WeakSet,Rs={})}}function Ah(e,t=!1,n=!1){const r=Ge(e[0]).body;return jh(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const _u=d.createContext(null),zu=()=>d.useContext(_u),Fh=ur("portal");function Lh(e={}){const{ref:t,container:n,componentProps:r=He,elementProps:s,elementState:o}=e,i=Ln(),l=zu()?.portalNode,[u,f]=d.useState(null),[p,g]=d.useState(null),m=d.useRef(null);ne(()=>{if(n===null){m.current&&(m.current=null,g(null),f(null));return}if(i==null)return;const v=(n&&(Wi(n)?n:n.current))??l??document.body;if(v==null){m.current&&(m.current=null,g(null),f(null));return}m.current!==v&&(m.current=v,g(null),f(v))},[n,l,i]);const y=$e("div",r,{ref:[t,g],state:o,props:[{id:i,[Fh]:""},s]});return{portalNode:p,portalSubtree:u&&y?nt.createPortal(y,u):null}}const la=d.forwardRef(function(t,n){const{children:r,container:s,className:o,render:i,renderGuards:a,...l}=t,{portalNode:u,portalSubtree:f}=Lh({container:s,ref:n,componentProps:t,elementProps:l}),p=d.useRef(null),g=d.useRef(null),m=d.useRef(null),y=d.useRef(null),[b,v]=d.useState(null),x=b?.modal,h=b?.open,S=typeof a=="boolean"?a:!!b&&!b.modal&&b.open&&!!u;d.useEffect(()=>{if(!u||x)return;function w(T){u&&jn(T)&&(T.type==="focusin"?ul:hm)(u)}return u.addEventListener("focusin",w,!0),u.addEventListener("focusout",w,!0),()=>{u.removeEventListener("focusin",w,!0),u.removeEventListener("focusout",w,!0)}},[u,x]),d.useEffect(()=>{!u||h||ul(u)},[h,u]);const R=d.useMemo(()=>({beforeOutsideRef:p,afterOutsideRef:g,beforeInsideRef:m,afterInsideRef:y,portalNode:u,setFocusManagerState:v}),[u]);return c.jsxs(d.Fragment,{children:[f,c.jsxs(_u.Provider,{value:R,children:[S&&u&&c.jsx(gn,{"data-type":"outside",ref:p,onFocus:w=>{if(jn(w,u))m.current?.focus();else{const T=b?b.domReference:null;lu(T)?.focus()}}}),S&&u&&c.jsx("span",{"aria-owns":u.id,style:Kp}),u&&nt.createPortal(r,u),S&&u&&c.jsx(gn,{"data-type":"outside",ref:g,onFocus:w=>{if(jn(w,u))y.current?.focus();else{const T=b?b.domReference:null;go(T)?.focus(),b?.closeOnFocusOut&&b?.onOpenChange(!1,me(qt,w.nativeEvent))}}})]})]})});function Dh(e,t){const n=tt(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Cl=20;let tn=[];function ca(){tn=tn.filter(e=>e.isConnected)}function _h(e){ca(),e&&hn(e)!=="body"&&(tn.push(e),tn.length>Cl&&(tn=tn.slice(-Cl)))}function Xo(){return ca(),tn[tn.length-1]}function zh(e){if(!e)return null;const t=mr();return iu(e,t)?e:ss(e,t)[0]||e}function Vh(e){return!e||!e.isConnected?!1:typeof e.checkVisibility=="function"?e.checkVisibility():gt(e).display!=="none"}function Il(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=mr(),s=mm(e,n).filter(i=>{const a=i.getAttribute("data-tabindex")||"";return iu(i,n)||i.hasAttribute("data-tabindex")&&!a.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function ua(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],initialFocus:o=!0,returnFocus:i=!0,restoreFocus:a=!1,modal:l=!0,closeOnFocusOut:u=!0,openInteractionType:f="",getInsideElements:p=()=>[],nextFocusableElement:g,previousFocusableElement:m,beforeContentFocusGuardRef:y,externalTree:b}=e,v="rootStore"in t?t.rootStore:t,x=v.useState("open"),h=v.useState("domReferenceElement"),S=v.useState("floatingElement"),{events:R,dataRef:w}=v.context,T=Z(()=>w.current.floatingContext?.nodeId),E=Z(p),I=o===!1,j=hi(h)&&I,M=rt(s),N=rt(o),P=rt(i),C=rt(f),A=bn(b),O=zu(),F=d.useRef(null),L=d.useRef(null),k=d.useRef(!1),_=d.useRef(!1),z=d.useRef(!1),X=d.useRef(-1),H=d.useRef(""),B=d.useRef(""),Q=it(),re=it(),le=pr(),ue=O!=null,J=Ws(S),ce=Z((U=J)=>U?ss(U,mr()):[]),V=Z(U=>{const Y=ce(U);return M.current.map(()=>Y).filter(Boolean).flat()});d.useEffect(()=>{if(r||!l)return;function U(ve){ve.key==="Tab"&&Oe(J,Lt(Ge(J)))&&ce().length===0&&!j&&Je(ve)}const Y=Ge(J);return Y.addEventListener("keydown",U),()=>{Y.removeEventListener("keydown",U)}},[r,h,J,l,M,j,ce,V]),d.useEffect(()=>{if(r||!S)return;function U(Y){const ve=st(Y),Re=ce().indexOf(ve);Re!==-1&&(X.current=Re)}return S.addEventListener("focusin",U),()=>{S.removeEventListener("focusin",U)}},[r,S,ce]),d.useEffect(()=>{if(r||!x)return;const U=Ge(J);function Y(){z.current=!1}function ve(Re){const ee=st(Re),fe=Oe(S,ee)||Oe(h,ee)||Oe(O?.portalNode,ee);z.current=!fe,B.current=Re.pointerType||"keyboard"}function xe(){B.current="keyboard"}return U.addEventListener("pointerdown",ve,!0),U.addEventListener("pointerup",Y,!0),U.addEventListener("pointercancel",Y,!0),U.addEventListener("keydown",xe,!0),()=>{U.removeEventListener("pointerdown",ve,!0),U.removeEventListener("pointerup",Y,!0),U.removeEventListener("pointercancel",Y,!0),U.removeEventListener("keydown",xe,!0)}},[r,S,h,J,x,O]),d.useEffect(()=>{if(r||!u)return;function U(){_.current=!0,re.start(0,()=>{_.current=!1})}function Y(ee){const fe=ee.relatedTarget,te=ee.currentTarget,de=st(ee);queueMicrotask(()=>{const oe=T(),Ee=v.context.triggerElements,Pe=!(Oe(h,fe)||Oe(S,fe)||Oe(fe,S)||Oe(O?.portalNode,fe)||fe!=null&&Ee.hasElement(fe)||Ee.hasMatchingElement(ye=>Oe(ye,fe))||fe?.hasAttribute(ur("focus-guard"))||A&&(Nn(A.nodesRef.current,oe).find(ye=>Oe(ye.context?.elements.floating,fe)||Oe(ye.context?.elements.domReference,fe))||ol(A.nodesRef.current,oe).find(ye=>[ye.context?.elements.floating,Ws(ye.context?.elements.floating)].includes(fe)||ye.context?.elements.domReference===fe)));if(te===h&&J&&Il(J,M),a&&te!==h&&!Vh(de)&&Lt(Ge(J))===Ge(J).body){if(ze(J)&&(J.focus(),a==="popup")){le.request(()=>{J.focus()});return}const ye=X.current,je=ce(),_e=je[ye]||je[je.length-1]||J;ze(_e)&&_e.focus()}if(w.current.insideReactTree){w.current.insideReactTree=!1;return}(j||!l)&&fe&&Pe&&!_.current&&(j||fe!==Xo())&&(k.current=!0,v.setOpen(!1,me(qt,ee)))})}function ve(){z.current||(w.current.insideReactTree=!0,Q.start(0,()=>{w.current.insideReactTree=!1}))}const xe=ze(h)?h:null,Re=[];if(!(!S&&!xe))return xe&&(xe.addEventListener("focusout",Y),xe.addEventListener("pointerdown",U),Re.push(()=>{xe.removeEventListener("focusout",Y),xe.removeEventListener("pointerdown",U)})),S&&(S.addEventListener("focusout",Y),O&&(S.addEventListener("focusout",ve,!0),Re.push(()=>{S.removeEventListener("focusout",ve,!0)})),Re.push(()=>{S.removeEventListener("focusout",Y)})),()=>{Re.forEach(ee=>{ee()})}},[r,h,S,J,l,A,O,v,u,a,ce,j,T,M,w,Q,re,le]);const D=d.useRef(null),se=d.useRef(null),K=fn(D,y,O?.beforeInsideRef),ae=fn(se,O?.afterInsideRef);d.useEffect(()=>{if(r||!S||!x)return;const U=Array.from(O?.portalNode?.querySelectorAll(`[${ur("portal")}]`)||[]),ve=(A?ol(A.nodesRef.current,T()):[]).find(ee=>hi(ee.context?.elements.domReference||null))?.context?.elements.domReference,xe=[S,ve,...U,...E(),F.current,L.current,D.current,se.current,O?.beforeOutsideRef.current,O?.afterOutsideRef.current,On(m),On(g),j?h:null].filter(ee=>ee!=null),Re=Ah(xe,l||j);return()=>{Re()}},[x,r,h,S,l,M,O,j,A,T,E,g,m]),ne(()=>{if(!x||r||!ze(J))return;const U=Ge(J),Y=Lt(U);queueMicrotask(()=>{const ve=V(J),xe=N.current,Re=typeof xe=="function"?xe(C.current||""):xe;if(Re===void 0||Re===!1)return;let ee;Re===!0||Re===null?ee=ve[0]||J:ee=On(Re),ee=ee||ve[0]||J,!Oe(J,Y)&&Fs(ee,{preventScroll:ee===J})})},[r,x,J,I,V,N,C]),ne(()=>{if(r||!J)return;const U=Ge(J),Y=Lt(U);_h(Y);function ve(ee){if(ee.open||(H.current=Dh(ee.nativeEvent,B.current)),ee.reason===ot&&ee.nativeEvent.type==="mouseleave"&&(k.current=!0),ee.reason===$i)if(ee.nested)k.current=!1;else if(Kc(ee.nativeEvent)||Qc(ee.nativeEvent))k.current=!1;else{let fe=!1;document.createElement("div").focus({get preventScroll(){return fe=!0,!1}}),fe?k.current=!1:k.current=!0}}R.on("openchange",ve);const xe=U.createElement("span");xe.setAttribute("tabindex","-1"),xe.setAttribute("aria-hidden","true"),Object.assign(xe.style,aa),ue&&h&&h.insertAdjacentElement("afterend",xe);function Re(){const ee=P.current;let fe=typeof ee=="function"?ee(H.current):ee;if(fe===void 0||fe===!1)return null;if(fe===null&&(fe=!0),typeof fe=="boolean"){const de=h||Xo();return de&&de.isConnected?de:xe}const te=h||Xo()||xe;return On(fe)||te}return()=>{R.off("openchange",ve);const ee=Lt(U),fe=Oe(S,ee)||A&&Nn(A.nodesRef.current,T(),!1).some(de=>Oe(de.context?.elements.floating,ee)),te=Re();queueMicrotask(()=>{const de=zh(te),oe=typeof P.current!="boolean";P.current&&!k.current&&ze(de)&&(!(!oe&&de!==ee&&ee!==U.body)||fe)&&de.focus({preventScroll:!0}),xe.remove()})}},[r,S,J,P,w,R,A,ue,h,T]),d.useEffect(()=>{queueMicrotask(()=>{k.current=!1})},[r]),d.useEffect(()=>{if(r||!x)return;function U(ve){st(ve)?.closest(`[${Fc}]`)&&(_.current=!0)}const Y=Ge(J);return Y.addEventListener("pointerdown",U,!0),()=>{Y.removeEventListener("pointerdown",U,!0)}},[r,x,J]),ne(()=>{if(!r&&O)return O.setFocusManagerState({modal:l,closeOnFocusOut:u,open:x,onOpenChange:v.setOpen,domReference:h}),()=>{O.setFocusManagerState(null)}},[r,O,l,x,v,u,h]),ne(()=>{if(!(r||!J))return Il(J,M),()=>{queueMicrotask(ca)}},[r,J,M]);const W=!r&&(l?!j:!0)&&(ue||l);return c.jsxs(d.Fragment,{children:[W&&c.jsx(gn,{"data-type":"inside",ref:K,onFocus:U=>{if(l){const Y=V();Fs(Y[Y.length-1])}else O?.portalNode&&(k.current=!1,jn(U,O.portalNode)?go(h)?.focus():On(m??O.beforeOutsideRef)?.focus())}}),n,W&&c.jsx(gn,{"data-type":"inside",ref:ae,onFocus:U=>{l?Fs(V()[0]):O?.portalNode&&(u&&(k.current=!0),jn(U,O.portalNode)?lu(h)?.focus():On(g??O.afterOutsideRef)?.focus())}})]})}function da(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.context.dataRef,{enabled:s=!0,event:o="click",toggle:i=!0,ignoreMouse:a=!1,stickIfOpen:l=!0,touchOpenDelay:u=0}=t,f=d.useRef(void 0),p=pr(),g=it(),m=d.useMemo(()=>({onPointerDown(y){f.current=y.pointerType},onMouseDown(y){const b=f.current,v=y.nativeEvent,x=n.select("open");if(y.button!==0||o==="click"||ir(b,!0)&&a)return;const h=r.current.openEvent,S=h?.type,R=n.select("domReferenceElement")!==y.currentTarget,w=x&&R||!(x&&i&&(!(h&&l)||S==="click"||S==="mousedown"));if(Qi(v.target)){const E=me(Mt,v,v.target);w&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,E)}):n.setOpen(w,E);return}const T=y.currentTarget;p.request(()=>{const E=me(Mt,v,T);w&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,E)}):n.setOpen(w,E)})},onClick(y){if(o==="mousedown-only")return;const b=f.current;if(o==="mousedown"&&b){f.current=void 0;return}if(ir(b,!0)&&a)return;const v=n.select("open"),x=r.current.openEvent,h=n.select("domReferenceElement")!==y.currentTarget,S=v&&h||!(v&&i&&(!(x&&l)||Zc(x))),R=me(Mt,y.nativeEvent,y.currentTarget);S&&b==="touch"&&u>0?g.start(u,()=>{n.setOpen(!0,R)}):n.setOpen(S,R)},onKeyDown(){f.current=void 0}}),[r,o,a,n,l,i,p,g,u]);return d.useMemo(()=>s?{reference:m}:He,[s,m])}function Tl(e,t,n){let{reference:r,floating:s}=e;const o=Ct(t),i=ea(t),a=Ji(i),l=pt(t),u=o==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:f,y:r.y-s.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:p};break;case"left":m={x:r.x-s.width,y:p};break;default:m={x:r.x,y:r.y}}switch(xn(t)){case"start":m[i]-=g*(n&&u?-1:1);break;case"end":m[i]+=g*(n&&u?-1:1);break}return m}const Hh=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:p}=Tl(u,r,l),g=r,m={},y=0;for(let b=0;b<a.length;b++){const{name:v,fn:x}=a[b],{x:h,y:S,data:R,reset:w}=await x({x:f,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:e,floating:t}});f=h??f,p=S??p,m={...m,[v]:{...m[v],...R}},w&&y<=50&&(y++,typeof w=="object"&&(w.placement&&(g=w.placement),w.rects&&(u=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:f,y:p}=Tl(u,g,l)),b=-1)}return{x:f,y:p,placement:g,strategy:s,middlewareData:m}};async function Ur(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=Kt(t,e),y=Jc(m),v=a[g?p==="floating"?"reference":"floating":p],x=Ys(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:l})),h=p==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),R=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},w=Ys(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:h,offsetParent:S,strategy:l}):h);return{top:(x.top-w.top+y.top)/R.y,bottom:(w.bottom-x.bottom+y.bottom)/R.y,left:(x.left-w.left+y.left)/R.x,right:(w.right-x.right+y.right)/R.x}}const $h=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...v}=Kt(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=pt(s),h=Ct(a),S=pt(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=g||(S||!b?[Us(a)]:Ug(a)),T=y!=="none";!g&&T&&w.push(...qg(a,b,y,R));const E=[a,...w],I=await Ur(t,v),j=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&j.push(I[x]),p){const A=Wg(s,i,R);j.push(I[A[0]],I[A[1]])}if(M=[...M,{placement:s,overflows:j}],!j.every(A=>A<=0)){var N,P;const A=(((N=o.flip)==null?void 0:N.index)||0)+1,O=E[A];if(O&&(!(p==="alignment"?h!==Ct(O):!1)||M.every(k=>Ct(k.placement)===h?k.overflows[0]>0:!0)))return{data:{index:A,overflows:M},reset:{placement:O}};let F=(P=M.filter(L=>L.overflows[0]<=0).sort((L,k)=>L.overflows[1]-k.overflows[1])[0])==null?void 0:P.placement;if(!F)switch(m){case"bestFit":{var C;const L=(C=M.filter(k=>{if(T){const _=Ct(k.placement);return _===h||_==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(_=>_>0).reduce((_,z)=>_+z,0)]).sort((k,_)=>k[1]-_[1])[0])==null?void 0:C[0];L&&(F=L);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function Pl(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ol(e){return Vg.some(t=>e[t]>=0)}const Bh=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Kt(e,t);switch(r){case"referenceHidden":{const o=await Ur(t,{...s,elementContext:"reference"}),i=Pl(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ol(i)}}}case"escaped":{const o=await Ur(t,{...s,altBoundary:!0}),i=Pl(o,n.floating);return{data:{escapedOffsets:i,escaped:Ol(i)}}}default:return{}}}}},Vu=new Set(["left","top"]);async function Wh(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=pt(n),a=xn(n),l=Ct(n)==="y",u=Vu.has(i)?-1:1,f=o&&l?-1:1,p=Kt(t,e);let{mainAxis:g,crossAxis:m,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*f,y:g*u}:{x:g*u,y:m*f}}const Uh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await Wh(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},Yh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:v=>{let{x,y:h}=v;return{x,y:h}}},...l}=Kt(e,t),u={x:n,y:r},f=await Ur(t,l),p=Ct(pt(s)),g=Zi(p);let m=u[g],y=u[p];if(o){const v=g==="y"?"top":"left",x=g==="y"?"bottom":"right",h=m+f[v],S=m-f[x];m=xi(h,m,S)}if(i){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",h=y+f[v],S=y-f[x];y=xi(h,y,S)}const b=a.fn({...t,[g]:m,[p]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:o,[p]:i}}}}}},Xh=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Kt(e,t),f={x:n,y:r},p=Ct(s),g=Zi(p);let m=f[g],y=f[p];const b=Kt(a,t),v=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const S=g==="y"?"height":"width",R=o.reference[g]-o.floating[S]+v.mainAxis,w=o.reference[g]+o.reference[S]-v.mainAxis;m<R?m=R:m>w&&(m=w)}if(u){var x,h;const S=g==="y"?"width":"height",R=Vu.has(pt(s)),w=o.reference[p]-o.floating[S]+(R&&((x=i.offset)==null?void 0:x[p])||0)+(R?0:v.crossAxis),T=o.reference[p]+o.reference[S]+(R?0:((h=i.offset)==null?void 0:h[p])||0)-(R?v.crossAxis:0);y<w?y=w:y>T&&(y=T)}return{[g]:m,[p]:y}}}},Gh=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...u}=Kt(e,t),f=await Ur(t,u),p=pt(s),g=xn(s),m=Ct(s)==="y",{width:y,height:b}=o.floating;let v,x;p==="top"||p==="bottom"?(v=p,x=g===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(x=p,v=g==="end"?"top":"bottom");const h=b-f.top-f.bottom,S=y-f.left-f.right,R=ar(b-f[v],h),w=ar(y-f[x],S),T=!t.middlewareData.shift;let E=R,I=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=h),T&&!g){const M=mt(f.left,0),N=mt(f.right,0),P=mt(f.top,0),C=mt(f.bottom,0);m?I=y-2*(M!==0||N!==0?M+N:mt(f.left,f.right)):E=b-2*(P!==0||C!==0?P+C:mt(f.top,f.bottom))}await l({...t,availableWidth:I,availableHeight:E});const j=await i.getDimensions(a.floating);return y!==j.width||b!==j.height?{reset:{rects:!0}}:{}}}};function Hu(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ze(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=lr(n)!==o||lr(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function fa(e){return Fe(e)?e:e.contextElement}function Kn(e){const t=fa(e);if(!ze(t))return _t(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=Hu(t);let i=(o?lr(n.width):n.width)/r,a=(o?lr(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const qh=_t(0);function $u(e){const t=tt(e);return!fo()||!t.visualViewport?qh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Kh(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tt(e)?!1:t}function An(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=fa(e);let i=_t(1);t&&(r?Fe(r)&&(i=Kn(r)):i=Kn(e));const a=Kh(o,n,r)?$u(o):_t(0);let l=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,f=s.width/i.x,p=s.height/i.y;if(o){const g=tt(o),m=r&&Fe(r)?tt(r):r;let y=g,b=gi(y);for(;b&&r&&m!==y;){const v=Kn(b),x=b.getBoundingClientRect(),h=gt(b),S=x.left+(b.clientLeft+parseFloat(h.paddingLeft))*v.x,R=x.top+(b.clientTop+parseFloat(h.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,p*=v.y,l+=S,u+=R,y=tt(b),b=gi(y)}}return Ys({width:f,height:p,x:l,y:u})}function xo(e,t){const n=po(e).scrollLeft;return t?t.left+n:An(Ht(e)).left+n}function Bu(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-xo(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function Qh(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Ht(r),a=t?uo(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=_t(1);const f=_t(0),p=ze(r);if((p||!p&&!o)&&((hn(r)!=="body"||_n(i))&&(l=po(r)),ze(r))){const m=An(r);u=Kn(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const g=i&&!p&&!o?Bu(i,l):_t(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+g.x,y:n.y*u.y-l.scrollTop*u.y+f.y+g.y}}function Zh(e){return Array.from(e.getClientRects())}function Jh(e){const t=Ht(e),n=po(e),r=e.ownerDocument.body,s=mt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=mt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+xo(e);const a=-n.scrollTop;return gt(r).direction==="rtl"&&(i+=mt(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const Ml=25;function ex(e,t){const n=tt(e),r=Ht(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const f=fo();(!f||f&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const u=xo(r);if(u<=0){const f=r.ownerDocument,p=f.body,g=getComputedStyle(p),m=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(r.clientWidth-p.clientWidth-m);y<=Ml&&(o-=y)}else u<=Ml&&(o+=u);return{width:o,height:i,x:a,y:l}}const tx=new Set(["absolute","fixed"]);function nx(e,t){const n=An(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=ze(e)?Kn(e):_t(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,u=r*o.y;return{width:i,height:a,x:l,y:u}}function kl(e,t,n){let r;if(t==="viewport")r=ex(e,n);else if(t==="document")r=Jh(Ht(e));else if(Fe(t))r=nx(t,n);else{const s=$u(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ys(r)}function Wu(e,t){const n=zt(e);return n===t||!Fe(n)||Dt(n)?!1:gt(n).position==="fixed"||Wu(n,t)}function rx(e,t){const n=t.get(e);if(n)return n;let r=sn(e,[],!1).filter(a=>Fe(a)&&hn(a)!=="body"),s=null;const o=gt(e).position==="fixed";let i=o?zt(e):e;for(;Fe(i)&&!Dt(i);){const a=gt(i),l=Ui(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&tx.has(s.position)||_n(i)&&!l&&Wu(e,i))?r=r.filter(f=>f!==i):s=a,i=zt(i)}return t.set(e,r),r}function sx(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?uo(t)?[]:rx(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((u,f)=>{const p=kl(t,f,s);return u.top=mt(p.top,u.top),u.right=ar(p.right,u.right),u.bottom=ar(p.bottom,u.bottom),u.left=mt(p.left,u.left),u},kl(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ox(e){const{width:t,height:n}=Hu(e);return{width:t,height:n}}function ix(e,t,n){const r=ze(t),s=Ht(t),o=n==="fixed",i=An(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=_t(0);function u(){l.x=xo(s)}if(r||!r&&!o)if((hn(t)!=="body"||_n(s))&&(a=po(t)),r){const m=An(t,!0,o,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else s&&u();o&&!r&&s&&u();const f=s&&!r&&!o?Bu(s,a):_t(0),p=i.left+a.scrollLeft-l.x-f.x,g=i.top+a.scrollTop-l.y-f.y;return{x:p,y:g,width:i.width,height:i.height}}function Go(e){return gt(e).position==="static"}function Nl(e,t){if(!ze(e)||gt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ht(e)===n&&(n=n.ownerDocument.body),n}function Uu(e,t){const n=tt(e);if(uo(e))return n;if(!ze(e)){let s=zt(e);for(;s&&!Dt(s);){if(Fe(s)&&!Go(s))return s;s=zt(s)}return n}let r=Nl(e,t);for(;r&&xg(r)&&Go(r);)r=Nl(r,t);return r&&Dt(r)&&Go(r)&&!Ui(r)?n:r||Sg(e)||n}const ax=async function(e){const t=this.getOffsetParent||Uu,n=this.getDimensions,r=await n(e.floating);return{reference:ix(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lx(e){return gt(e).direction==="rtl"}const cx={convertOffsetParentRelativeRectToViewportRelativeRect:Qh,getDocumentElement:Ht,getClippingRect:sx,getOffsetParent:Uu,getElementRects:ax,getClientRects:Zh,getDimensions:ox,getScale:Kn,isElement:Fe,isRTL:lx};function Yu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ux(e,t){let n=null,r;const s=Ht(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:f,top:p,width:g,height:m}=u;if(a||t(),!g||!m)return;const y=Xn(p),b=Xn(s.clientWidth-(f+g)),v=Xn(s.clientHeight-(p+m)),x=Xn(f),S={rootMargin:-y+"px "+-b+"px "+-v+"px "+-x+"px",threshold:mt(0,ar(1,l))||1};let R=!0;function w(T){const E=T[0].intersectionRatio;if(E!==l){if(!R)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!Yu(u,e.getBoundingClientRect())&&i(),R=!1}try{n=new IntersectionObserver(w,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(w,S)}n.observe(e)}return i(!0),o}function jl(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=fa(e),f=s||o?[...u?sn(u):[],...sn(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const p=u&&a?ux(u,n):null;let g=-1,m=null;i&&(m=new ResizeObserver(x=>{let[h]=x;h&&h.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),n()}),u&&!l&&m.observe(u),m.observe(t));let y,b=l?An(e):null;l&&v();function v(){const x=An(e);b&&!Yu(b,x)&&n(),b=x,y=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(h=>{s&&h.removeEventListener("scroll",n),o&&h.removeEventListener("resize",n)}),p?.(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const dx=Uh,fx=Yh,px=$h,gx=Gh,mx=Bh,hx=Xh,xx=(e,t,n)=>{const r=new Map,s={platform:cx,...n},o={...s.platform,_c:r};return Hh(e,t,{...s,platform:o})};var bx=typeof document<"u",vx=function(){},Ls=bx?d.useLayoutEffect:vx;function Zs(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Zs(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Zs(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Xu(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Al(e,t){const n=Xu(e);return Math.round(t*n)/n}function qo(e){const t=d.useRef(e);return Ls(()=>{t.current=e}),t}function yx(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[f,p]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,m]=d.useState(r);Zs(g,r)||m(r);const[y,b]=d.useState(null),[v,x]=d.useState(null),h=d.useCallback(k=>{k!==T.current&&(T.current=k,b(k))},[]),S=d.useCallback(k=>{k!==E.current&&(E.current=k,x(k))},[]),R=o||y,w=i||v,T=d.useRef(null),E=d.useRef(null),I=d.useRef(f),j=l!=null,M=qo(l),N=qo(s),P=qo(u),C=d.useCallback(()=>{if(!T.current||!E.current)return;const k={placement:t,strategy:n,middleware:g};N.current&&(k.platform=N.current),xx(T.current,E.current,k).then(_=>{const z={..._,isPositioned:P.current!==!1};A.current&&!Zs(I.current,z)&&(I.current=z,nt.flushSync(()=>{p(z)}))})},[g,t,n,N,P]);Ls(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(k=>({...k,isPositioned:!1})))},[u]);const A=d.useRef(!1);Ls(()=>(A.current=!0,()=>{A.current=!1}),[]),Ls(()=>{if(R&&(T.current=R),w&&(E.current=w),R&&w){if(M.current)return M.current(R,w,C);C()}},[R,w,C,M,j]);const O=d.useMemo(()=>({reference:T,floating:E,setReference:h,setFloating:S}),[h,S]),F=d.useMemo(()=>({reference:R,floating:w}),[R,w]),L=d.useMemo(()=>{const k={position:n,left:0,top:0};if(!F.floating)return k;const _=Al(F.floating,f.x),z=Al(F.floating,f.y);return a?{...k,transform:"translate("+_+"px, "+z+"px)",...Xu(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:z}},[n,a,F.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:C,refs:O,elements:F,floatingStyles:L}),[f,C,O,F,L])}const wx=(e,t)=>({...dx(e),options:[e,t]}),Sx=(e,t)=>({...fx(e),options:[e,t]}),Rx=(e,t)=>({...hx(e),options:[e,t]}),Ex=(e,t)=>({...px(e),options:[e,t]}),Cx=(e,t)=>({...gx(e),options:[e,t]}),Ix=(e,t)=>({...mx(e),options:[e,t]}),Tx={intentional:"onClick",sloppy:"onPointerDown"};function Px(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function pa(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("referenceElement"),i=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:l}=n.context,{enabled:u=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:g="sloppy",referencePress:m=!1,referencePressEvent:y="sloppy",ancestorScroll:b=!1,bubbles:v,externalTree:x}=t,h=bn(x),S=Z(typeof p=="function"?p:()=>!1),R=typeof p=="function"?S:p,w=d.useRef(!1),{escapeKey:T,outsidePress:E}=Px(v),I=d.useRef(null),j=it(),M=it(),N=Z(()=>{M.clear(),l.current.insideReactTree=!1}),P=d.useRef(!1),C=d.useRef(""),A=Z(D=>{C.current=D.pointerType}),O=Z(()=>{const D=C.current,se=D==="pen"||!D?"mouse":D,K=typeof g=="function"?g():g;return typeof K=="string"?K:K[se]}),F=Z(D=>{if(!r||!u||!f||D.key!=="Escape"||P.current)return;const se=l.current.floatingContext?.nodeId,K=h?Nn(h.nodesRef.current,se):[];if(!T&&K.length>0){let U=!0;if(K.forEach(Y=>{Y.context?.open&&!Y.context.dataRef.current.__escapeKeyBubbles&&(U=!1)}),!U)return}const ae=zg(D)?D.nativeEvent:D,W=me(ts,ae);n.setOpen(!1,W),!T&&!W.isPropagationAllowed&&D.stopPropagation()}),L=Z(D=>{const se=O();return se==="intentional"&&D.type!=="click"||se==="sloppy"&&D.type==="click"}),k=Z(()=>{l.current.insideReactTree=!0,M.start(0,N)}),_=Z((D,se=!1)=>{if(L(D)){N();return}if(l.current.insideReactTree){N();return}if(O()==="intentional"&&se||typeof R=="function"&&!R(D))return;const K=st(D),ae=`[${ur("inert")}]`,W=Ge(n.select("floatingElement")).querySelectorAll(ae),U=n.context.triggerElements;if(K&&(U.hasElement(K)||U.hasMatchingElement(ee=>Oe(ee,K))))return;let Y=Fe(K)?K:null;for(;Y&&!Dt(Y);){const ee=zt(Y);if(Dt(ee)||!Fe(ee))break;Y=ee}if(W.length&&Fe(K)&&!Dg(K)&&!Oe(K,n.select("floatingElement"))&&Array.from(W).every(ee=>!Oe(Y,ee)))return;if(ze(K)&&!("touches"in D)){const ee=Dt(K),fe=gt(K),te=/auto|scroll/,de=ee||te.test(fe.overflowX),oe=ee||te.test(fe.overflowY),Ee=de&&K.clientWidth>0&&K.scrollWidth>K.clientWidth,Pe=oe&&K.clientHeight>0&&K.scrollHeight>K.clientHeight,ye=fe.direction==="rtl",je=Pe&&(ye?D.offsetX<=K.offsetWidth-K.clientWidth:D.offsetX>K.clientWidth),_e=Ee&&D.offsetY>K.clientHeight;if(je||_e)return}const ve=l.current.floatingContext?.nodeId,xe=h&&Nn(h.nodesRef.current,ve).some(ee=>Tt(D,ee.context?.elements.floating));if(Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||xe)return;const Re=h?Nn(h.nodesRef.current,ve):[];if(Re.length>0){let ee=!0;if(Re.forEach(fe=>{fe.context?.open&&!fe.context.dataRef.current.__outsidePressBubbles&&(ee=!1)}),!ee)return}n.setOpen(!1,me($i,D)),N()}),z=Z(D=>{O()!=="sloppy"||D.pointerType==="touch"||!n.select("open")||!u||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||_(D)}),X=Z(D=>{if(O()!=="sloppy"||!n.select("open")||!u||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement")))return;const se=D.touches[0];se&&(I.current={startTime:Date.now(),startX:se.clientX,startY:se.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},j.start(1e3,()=>{I.current&&(I.current.dismissOnTouchEnd=!1,I.current.dismissOnMouseDown=!1)}))}),H=Z(D=>{const se=st(D);function K(){X(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)}),B=Z(D=>{const se=w.current;if(w.current=!1,j.clear(),D.type==="mousedown"&&I.current&&!I.current.dismissOnMouseDown)return;const K=st(D);function ae(){D.type==="pointerdown"?z(D):_(D,se),K?.removeEventListener(D.type,ae)}K?.addEventListener(D.type,ae)}),Q=Z(D=>{if(O()!=="sloppy"||!I.current||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement")))return;const se=D.touches[0];if(!se)return;const K=Math.abs(se.clientX-I.current.startX),ae=Math.abs(se.clientY-I.current.startY),W=Math.sqrt(K*K+ae*ae);W>5&&(I.current.dismissOnTouchEnd=!0),W>10&&(_(D),j.clear(),I.current=null)}),re=Z(D=>{const se=st(D);function K(){Q(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)}),le=Z(D=>{O()!=="sloppy"||!I.current||Tt(D,n.select("floatingElement"))||Tt(D,n.select("domReferenceElement"))||(I.current.dismissOnTouchEnd&&_(D),j.clear(),I.current=null)}),ue=Z(D=>{const se=st(D);function K(){le(D),se?.removeEventListener(D.type,K)}se?.addEventListener(D.type,K)});d.useEffect(()=>{if(!r||!u)return;l.current.__escapeKeyBubbles=T,l.current.__outsidePressBubbles=E;const D=new pn;function se(Y){n.setOpen(!1,me(yt,Y))}function K(){D.clear(),P.current=!0}function ae(){D.start(fo()?5:0,()=>{P.current=!1})}const W=Ge(s);W.addEventListener("pointerdown",A,!0),f&&(W.addEventListener("keydown",F),W.addEventListener("compositionstart",K),W.addEventListener("compositionend",ae)),R&&(W.addEventListener("click",B,!0),W.addEventListener("pointerdown",B,!0),W.addEventListener("touchstart",H,!0),W.addEventListener("touchmove",re,!0),W.addEventListener("touchend",ue,!0),W.addEventListener("mousedown",B,!0));let U=[];return b&&(Fe(i)&&(U=sn(i)),Fe(s)&&(U=U.concat(sn(s))),!Fe(o)&&o&&o.contextElement&&(U=U.concat(sn(o.contextElement)))),U=U.filter(Y=>Y!==W.defaultView?.visualViewport),U.forEach(Y=>{Y.addEventListener("scroll",se,{passive:!0})}),()=>{W.removeEventListener("pointerdown",A,!0),f&&(W.removeEventListener("keydown",F),W.removeEventListener("compositionstart",K),W.removeEventListener("compositionend",ae)),R&&(W.removeEventListener("click",B,!0),W.removeEventListener("pointerdown",B,!0),W.removeEventListener("touchstart",H,!0),W.removeEventListener("touchmove",re,!0),W.removeEventListener("touchend",ue,!0),W.removeEventListener("mousedown",B,!0)),U.forEach(Y=>{Y.removeEventListener("scroll",se)}),D.clear()}},[l,s,o,i,f,R,r,a,b,u,T,E,F,_,B,z,H,re,ue,A,n]),d.useEffect(N,[R,N]);const J=d.useMemo(()=>({onKeyDown:F,...m&&{[Tx[y]]:D=>{n.setOpen(!1,me(Mt,D.nativeEvent))},...y!=="intentional"&&{onClick(D){n.setOpen(!1,me(Mt,D.nativeEvent))}}}}),[F,n,m,y]),ce=Z(D=>{const se=st(D.nativeEvent);!Oe(n.select("floatingElement"),se)||D.button!==0||(w.current=!0)}),V=d.useMemo(()=>({onKeyDown:F,onPointerDown:ce,onMouseDown:ce,onMouseUp:ce,onClickCapture:k,onMouseDownCapture:k,onPointerDownCapture:k,onMouseUpCapture:k,onTouchEndCapture:k,onTouchMoveCapture:k}),[F,ce,k]);return d.useMemo(()=>u?{reference:J,floating:V,trigger:J}:{},[u,J,V])}var Js=Symbol("NOT_FOUND");function Ox(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Mx(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function kx(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Fl=e=>Array.isArray(e)?e:[e];function Nx(e){const t=Array.isArray(e[0])?e[0]:e;return kx(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function jx(e,t){const n=[],{length:r}=e;for(let s=0;s<r;s++)n.push(e[s].apply(null,t));return n}function Ax(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Js},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Fx(e,t){let n=[];function r(a){const l=n.findIndex(u=>t(a,u.key));if(l>-1){const u=n[l];return l>0&&(n.splice(l,1),n.unshift(u)),u.value}return Js}function s(a,l){r(a)===Js&&(n.unshift({key:a,value:l}),n.length>e&&n.pop())}function o(){return n}function i(){n=[]}return{get:r,put:s,getEntries:o,clear:i}}var Lx=(e,t)=>e===t;function Dx(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:s}=n;for(let o=0;o<s;o++)if(!e(n[o],r[o]))return!1;return!0}}function _x(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=Lx,maxSize:s=1,resultEqualityCheck:o}=n,i=Dx(r);let a=0;const l=s<=1?Ax(i):Fx(s,i);function u(){let f=l.get(arguments);if(f===Js){if(f=e.apply(null,arguments),a++,o){const g=l.getEntries().find(m=>o(m.value,f));g&&(f=g.value,a!==0&&a--)}l.put(arguments,f)}return f}return u.clearCache=()=>{l.clear(),u.resetResultsCount()},u.resultsCount=()=>a,u.resetResultsCount=()=>{a=0},u}var zx=class{constructor(e){this.value=e}deref(){return this.value}},Vx=typeof WeakRef<"u"?WeakRef:zx,Hx=0,Ll=1;function Es(){return{s:Hx,v:void 0,o:null,p:null}}function Gu(e,t={}){let n=Es();const{resultEqualityCheck:r}=t;let s,o=0;function i(){let a=n;const{length:l}=arguments;for(let p=0,g=l;p<g;p++){const m=arguments[p];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const b=y.get(m);b===void 0?(a=Es(),y.set(m,a)):a=b}else{let y=a.p;y===null&&(a.p=y=new Map);const b=y.get(m);b===void 0?(a=Es(),y.set(m,a)):a=b}}const u=a;let f;if(a.s===Ll)f=a.v;else if(f=e.apply(null,arguments),o++,r){const p=s?.deref?.()??s;p!=null&&r(p,f)&&(f=p,o!==0&&o--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Vx(f):f}return u.s=Ll,u.v=f,f}return i.clearCache=()=>{n=Es(),i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function qu(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...s)=>{let o=0,i=0,a,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),Ox(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...l},{memoize:p,memoizeOptions:g=[],argsMemoize:m=Gu,argsMemoizeOptions:y=[]}=f,b=Fl(g),v=Fl(y),x=Nx(s),h=p(function(){return o++,u.apply(null,arguments)},...b),S=m(function(){i++;const w=jx(x,arguments);return a=h.apply(null,w),a},...v);return Object.assign(S,{resultFunc:u,memoizedResultFunc:h,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var $x=qu(Gu),Bx=Object.assign((e,t=$x)=>{Mx(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((i,a,l)=>(i[n[l]]=a,i),{}))},{withTypes:()=>Bx});qu({memoize:_x,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const $=(e,t,n,r,s,o,...i)=>{if(i.length>0)throw new Error(qe(1));let a;if(e)a=e;else throw new Error("Missing arguments");return a},Wx=Hi(19),Ux=Wx?Yx:Xx;function pe(e,t,n,r,s){return Ux(e,t,n,r,s)}function Yx(e,t,n,r,s){const o=d.useCallback(()=>t(e.getSnapshot(),n,r,s),[e,t,n,r,s]);return Yf.useSyncExternalStore(e.subscribe,o,o)}function Xx(e,t,n,r,s){return Zf.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,o=>t(o,n,r,s))}class Qn{constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){if(this.state===t)return;this.state=t,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){Qn.prototype.setState.call(this,{...this.state,...t});return}}set(t,n){Object.is(this.state[t],n)||Qn.prototype.setState.call(this,{...this.state,[t]:n})}notifyAll(){const t={...this.state};Qn.prototype.setState.call(this,t)}}class ga extends Qn{constructor(t,n={},r){super(t),this.context=n,this.selectors=r}controlledValues=new Map;useSyncedValue(t,n){d.useDebugValue(t),ne(()=>{this.state[t]!==n&&this.set(t,n)},[t,n])}useSyncedValueWithCleanup(t,n){ne(()=>(this.state[t]!==n&&this.set(t,n),()=>{this.set(t,void 0)}),[t,n])}useSyncedValues(t){const n=Object.values(t);ne(()=>{this.update(t)},n)}useControlledProp(t,n,r){d.useDebugValue(t);const s=n!==void 0;this.controlledValues.has(t)||(this.controlledValues.set(t,s),!s&&!Object.is(this.state[t],r)&&super.setState({...this.state,[t]:r})),ne(()=>{s&&!Object.is(this.state[t],n)&&super.setState({...this.state,[t]:n})},[t,n,r,s])}set(t,n){this.controlledValues.get(t)!==!0&&super.set(t,n)}update(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.update(n)}setState(t){const n={...t};for(const r in n)if(Object.hasOwn(n,r)&&this.controlledValues.get(r)===!0){delete n[r];continue}super.setState({...this.state,...n})}select=(t,n,r,s)=>{const o=this.selectors[t];return o(this.state,n,r,s)};useState=(t,n,r,s)=>{d.useDebugValue(t);const o=this.selectors[t];return pe(this,o,n,r,s)};useContextCallback(t,n){d.useDebugValue(t);const r=Z(n??Xe);this.context[t]=r}useStateSetter(t){const n=d.useRef(void 0);return n.current===void 0&&(n.current=r=>{this.set(t,r)}),n.current}observe(t,n){let r;typeof t=="function"?r=t:r=this.selectors[t];let s=r(this.state);return n(s,s,this),this.subscribe(o=>{const i=r(o);if(!Object.is(s,i)){const a=s;s=i,n(i,a,this)}})}}const Gx={open:$(e=>e.open),domReferenceElement:$(e=>e.domReferenceElement),referenceElement:$(e=>e.positionReference??e.referenceElement),floatingElement:$(e=>e.floatingElement),floatingId:$(e=>e.floatingId)};class ma extends ga{constructor(t){const{nested:n,noEmit:r,onOpenChange:s,triggerElements:o,...i}=t;super({...i,positionReference:i.referenceElement,domReferenceElement:i.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:Nu(),nested:n,noEmit:r,triggerElements:o},Gx)}setOpen=(t,n)=>{if((!t||!this.state.open||Zc(n.event))&&(this.context.dataRef.current.openEvent=t?n.event:void 0),!this.context.noEmit){const r={open:t,reason:n.reason,nativeEvent:n.event,nested:this.context.nested,triggerElement:n.trigger};this.context.events.emit("openchange",r)}this.context.onOpenChange?.(t,n)}}function qx(e,t){const n=d.useRef(null);return d.useCallback(r=>{if(e!==void 0&&(n.current!==null&&(t.context.triggerElements.delete(n.current),n.current=null),r!==null))return n.current=e,t.context.triggerElements.add(e,r),()=>{n.current!==null&&(t.context.triggerElements.delete(n.current),n.current=null)}},[t,e])}function Ku(e,t,n,r){const s=n.useState("isMountedByTrigger",e),o=qx(e,n),i=Z(a=>{const l=o(a);return a!==null&&n.select("open")&&n.select("activeTriggerId")==null&&n.update({activeTriggerId:e,activeTriggerElement:a,...r}),l});return ne(()=>{s&&n.update({activeTriggerElement:t.current,...r})},[s,n,t,...Object.values(r)]),{registerTrigger:i,isMountedByThisTrigger:s}}function Qu(e){const t=e.useState("open");ne(()=>{if(t&&!e.select("activeTriggerId")&&e.context.triggerElements.size===1){const n=e.context.triggerElements.entries().next();if(!n.done){const[r,s]=n.value;e.update({activeTriggerId:r,activeTriggerElement:s})}}},[t,e])}function Zu(e,t,n){const{mounted:r,setMounted:s,transitionStatus:o}=lo(e);t.useSyncedValues({mounted:r,transitionStatus:o});const i=Z(()=>{s(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n?.(),t.context.onOpenChangeComplete?.(!1)}),a=t.useState("preventUnmountingOnClose");return zn({enabled:!a,open:e,ref:t.context.popupRef,onComplete(){e||i()}}),{forceUnmount:i,transitionStatus:o}}class bo{constructor(){this.elements=new Set,this.idMap=new Map}add(t,n){const r=this.idMap.get(t);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(t,n))}delete(t){const n=this.idMap.get(t);n&&(this.elements.delete(n),this.idMap.delete(t))}hasElement(t){return this.elements.has(t)}hasMatchingElement(t){for(const n of this.elements)if(t(n))return!0;return!1}getById(t){return this.idMap.get(t)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function Kx(){return new ma({open:!1,floatingElement:null,referenceElement:null,triggerElements:new bo,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function Ju(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:Kx(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:He,inactiveTriggerProps:He,popupProps:He}}const ed={open:$(e=>e.open),mounted:$(e=>e.mounted),transitionStatus:$(e=>e.transitionStatus),floatingRootContext:$(e=>e.floatingRootContext),preventUnmountingOnClose:$(e=>e.preventUnmountingOnClose),payload:$(e=>e.payload),activeTriggerId:$(e=>e.activeTriggerId),activeTriggerElement:$(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:$((e,t)=>t!==void 0&&e.activeTriggerId===t),isOpenedByTrigger:$((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.open),isMountedByTrigger:$((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.mounted),triggerProps:$((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:$(e=>e.popupProps),popupElement:$(e=>e.popupElement),positionerElement:$(e=>e.positionerElement)};function td(e){const{open:t=!1,onOpenChange:n,elements:r={}}=e,s=Ln(),o=$t()!=null,i=ut(()=>new ma({open:t,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new bo,floatingId:s,nested:o,noEmit:e.noEmit||!1})).current;return ne(()=>{const a={open:t,floatingId:s};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=Fe(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),i.update(a)},[t,s,r.reference,r.floating,i]),i.context.onOpenChange=n,i.context.nested=o,i.context.noEmit=e.noEmit||!1,i}function Qx(e={}){const{nodeId:t,externalTree:n}=e,r=td(e),s=e.rootContext||r,o={reference:s.useState("referenceElement"),floating:s.useState("floatingElement"),domReference:s.useState("domReferenceElement")},[i,a]=d.useState(null),l=d.useRef(null),u=bn(n);ne(()=>{o.domReference&&(l.current=o.domReference)},[o.domReference]);const f=yx({...e,elements:{...o,...i&&{reference:i}}}),p=d.useCallback(E=>{const I=Fe(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),getClientRects:()=>E.getClientRects(),contextElement:E}:E;a(I),f.refs.setReference(I)},[f.refs]),[g,m]=d.useState(null),[y,b]=d.useState(null);s.useSyncedValue("referenceElement",g),s.useSyncedValue("domReferenceElement",Fe(g)?g:null),s.useSyncedValue("floatingElement",y);const v=d.useCallback(E=>{(Fe(E)||E===null)&&(l.current=E,m(E)),(Fe(f.refs.reference.current)||f.refs.reference.current===null||E!==null&&!Fe(E))&&f.refs.setReference(E)},[f.refs,m]),x=d.useCallback(E=>{b(E),f.refs.setFloating(E)},[f.refs]),h=d.useMemo(()=>({...f.refs,setReference:v,setFloating:x,setPositionReference:p,domReference:l}),[f.refs,v,x,p]),S=d.useMemo(()=>({...f.elements,domReference:o.domReference}),[f.elements,o.domReference]),R=s.useState("open"),w=s.useState("floatingId"),T=d.useMemo(()=>({...f,dataRef:s.context.dataRef,open:R,onOpenChange:s.setOpen,events:s.context.events,floatingId:w,refs:h,elements:S,nodeId:t,rootStore:s}),[f,h,S,t,s,R,w]);return ne(()=>{s.context.dataRef.current.floatingContext=T;const E=u?.nodesRef.current.find(I=>I.id===t);E&&(E.context=T)}),d.useMemo(()=>({...f,context:T,refs:h,elements:S,rootStore:s}),[f,h,S,T,s])}function nd(e){const{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:s}=e,o=Ln(),i=$t()!=null,a=t.useState("open"),l=t.useState("activeTriggerElement"),u=t.useState(r?"popupElement":"positionerElement"),f=t.context.triggerElements,p=ut(()=>new ma({open:a,referenceElement:l,floatingElement:u,triggerElements:f,onOpenChange:s,floatingId:o,nested:i,noEmit:n})).current;return ne(()=>{const g={open:a,floatingId:o,referenceElement:l,floatingElement:u};Fe(l)&&(g.domReferenceElement=l),p.update(g)},[a,o,l,u,p]),p.context.onOpenChange=s,p.context.nested=i,p.context.noEmit=n,p}const Ko=jg&&Uc;function Zx(e,t={}){const n="rootStore"in e?e.rootStore:e,{events:r,dataRef:s}=n.context,{enabled:o=!0,visibleOnly:i=!0}=t,a=d.useRef(!1),l=it(),u=d.useRef(!0);d.useEffect(()=>{const p=n.select("domReferenceElement");if(!o)return;const g=tt(p);function m(){!n.select("open")&&ze(p)&&p===Lt(Ge(p))&&(a.current=!0)}function y(){u.current=!0}function b(){u.current=!1}return g.addEventListener("blur",m),Ko&&(g.addEventListener("keydown",y,!0),g.addEventListener("pointerdown",b,!0)),()=>{g.removeEventListener("blur",m),Ko&&(g.removeEventListener("keydown",y,!0),g.removeEventListener("pointerdown",b,!0))}},[n,o]),d.useEffect(()=>{if(!o)return;function p(g){(g.reason===Mt||g.reason===ts)&&(a.current=!0)}return r.on("openchange",p),()=>{r.off("openchange",p)}},[r,o]);const f=d.useMemo(()=>({onMouseLeave(){a.current=!1},onFocus(p){if(a.current)return;const g=st(p.nativeEvent);if(i&&Fe(g)){if(Ko&&!p.relatedTarget){if(!u.current&&!Qi(g))return}else if(!_g(g))return}n.setOpen(!0,me(Hs,p.nativeEvent,p.currentTarget))},onBlur(p){a.current=!1;const g=p.relatedTarget,m=p.nativeEvent,y=Fe(g)&&g.hasAttribute(ur("focus-guard"))&&g.getAttribute("data-type")==="outside";l.start(0,()=>{const b=n.select("domReferenceElement"),v=Lt(b?b.ownerDocument:document);!g&&v===b||Oe(s.current.floatingContext?.refs.floating.current,v)||Oe(b,v)||y||n.context.triggerElements.hasElement(p.relatedTarget)||n.setOpen(!1,me(Hs,m))})}}),[s,n,i,l]);return d.useMemo(()=>o?{reference:f,trigger:f}:{},[o,f])}const Ri=ur("safe-polygon"),Jx=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${qc}`;function e0(e){return e?!!e.closest(Jx):!1}function rd(e){const t=d.useRef(void 0),n=d.useRef(!1),r=d.useRef(void 0),s=d.useRef(!0),o=d.useRef(!1),i=d.useRef(()=>{}),a=d.useRef(!1),l=it(),u=it(),f=d.useRef(void 0);return d.useMemo(()=>{const p=e.context.dataRef.current;return p.hoverInteractionState||(p.hoverInteractionState={pointerTypeRef:t,interactedInsideRef:n,handlerRef:r,blockMouseMoveRef:s,performedPointerEventsMutationRef:o,unbindMouseMoveRef:i,restTimeoutPendingRef:a,openChangeTimeout:l,restTimeout:u,handleCloseOptionsRef:f}),p.hoverInteractionState},[e,t,n,r,s,o,i,a,l,u,f])}const t0=new Set(["click","mousedown"]);function sd(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),{dataRef:i}=n.context,{enabled:a=!0,closeDelay:l=0,externalTree:u}=t,{pointerTypeRef:f,interactedInsideRef:p,handlerRef:g,performedPointerEventsMutationRef:m,unbindMouseMoveRef:y,restTimeoutPendingRef:b,openChangeTimeout:v,handleCloseOptionsRef:x}=rd(n),h=bn(u),S=$t(),R=Z(()=>p.current?!0:i.current.openEvent?t0.has(i.current.openEvent.type):!1),w=Z(()=>{const M=i.current.openEvent?.type;return M?.includes("mouse")&&M!=="mousedown"}),T=d.useCallback((M,N=!0)=>{const P=n0(l,f.current);P&&!g.current?v.start(P,()=>n.setOpen(!1,me(ot,M))):N&&(v.clear(),n.setOpen(!1,me(ot,M)))},[l,g,n,f,v]),E=Z(()=>{y.current(),g.current=void 0}),I=Z(()=>{if(m.current){const M=Ge(s).body;M.style.pointerEvents="",M.removeAttribute(Ri),m.current=!1}}),j=Z(M=>{const N=st(M);if(!e0(N)){p.current=!1;return}p.current=!0});ne(()=>{r||(f.current=void 0,b.current=!1,p.current=!1,E(),I())},[r,f,b,p,E,I]),d.useEffect(()=>()=>{E()},[E]),d.useEffect(()=>I,[I]),ne(()=>{if(a&&r&&x.current?.blockPointerEvents&&w()&&Fe(o)&&s){m.current=!0;const M=Ge(s).body;M.setAttribute(Ri,"");const N=o,P=s,C=h?.nodesRef.current.find(A=>A.id===S)?.context?.elements.floating;return C&&(C.style.pointerEvents=""),M.style.pointerEvents="none",N.style.pointerEvents="auto",P.style.pointerEvents="auto",()=>{M.style.pointerEvents="",N.style.pointerEvents="",P.style.pointerEvents=""}}},[a,r,o,s,x,w,h,S,m]),d.useEffect(()=>{if(!a)return;function M(A){if(R()||!i.current.floatingContext)return;const O=n.context.triggerElements;A.relatedTarget&&O.hasElement(A.relatedTarget)||(I(),E(),R()||T(A))}function N(A){v.clear(),I(),g.current?.(A),E()}function P(A){R()||T(A,!1)}const C=s;return C&&(C.addEventListener("mouseleave",M),C.addEventListener("mouseenter",N),C.addEventListener("mouseleave",P),C.addEventListener("pointerdown",j,!0)),()=>{C&&(C.removeEventListener("mouseleave",M),C.removeEventListener("mouseenter",N),C.removeEventListener("mouseleave",P),C.removeEventListener("pointerdown",j,!0))}})}function n0(e,t){return t&&!ir(t)?0:typeof e=="function"?e():e}function Qo(e){return typeof e=="function"?e():e}const r0={current:null};function od(e,t={}){const n="rootStore"in e?e.rootStore:e,{dataRef:r,events:s}=n.context,{enabled:o=!0,delay:i=0,handleClose:a=null,mouseOnly:l=!1,restMs:u=0,move:f=!0,triggerElementRef:p=r0,externalTree:g,isActiveTrigger:m=!0}=t,y=bn(g),{pointerTypeRef:b,interactedInsideRef:v,handlerRef:x,blockMouseMoveRef:h,performedPointerEventsMutationRef:S,unbindMouseMoveRef:R,restTimeoutPendingRef:w,openChangeTimeout:T,restTimeout:E,handleCloseOptionsRef:I}=rd(n),j=rt(a),M=rt(i),N=rt(u);m&&(I.current=j.current?.__options);const P=Z(()=>v.current?!0:r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1),C=d.useCallback((L,k=!0)=>{const _=Uo(M.current,"close",b.current);_&&!x.current?T.start(_,()=>n.setOpen(!1,me(ot,L))):k&&(T.clear(),n.setOpen(!1,me(ot,L)))},[M,x,n,b,T]),A=Z(()=>{R.current(),x.current=void 0}),O=Z(()=>{if(S.current){const L=Ge(n.select("domReferenceElement")).body;L.style.pointerEvents="",L.removeAttribute(Ri),S.current=!1}});d.useEffect(()=>{if(!o)return;function L(k){k.open||(T.clear(),E.clear(),h.current=!0,w.current=!1)}return s.on("openchange",L),()=>{s.off("openchange",L)}},[o,s,T,E,h,w]);const F=Z(L=>{if(P()||!r.current.floatingContext)return;const k=n.context.triggerElements;L.relatedTarget&&k.hasElement(L.relatedTarget)||j.current?.({...r.current.floatingContext,tree:y,x:L.clientX,y:L.clientY,onClose(){O(),A(),P()||C(L)}})(L)});return d.useEffect(()=>{if(!o)return;const L=p.current??(m?n.select("domReferenceElement"):null);if(!Fe(L))return;function k(X){if(T.clear(),h.current=!1,l&&!ir(b.current)||Qo(N.current)>0&&!Uo(M.current,"open"))return;const H=Uo(M.current,"open",b.current),B=n.select("domReferenceElement"),Q=n.context.triggerElements,re=(Q.hasElement(X.target)||Q.hasMatchingElement(ue=>Oe(ue,X.target)))&&(!B||!Oe(B,X.target)),le=X.currentTarget??null;H?T.start(H,()=>{n.select("open")||n.setOpen(!0,me(ot,X,le))}):(!n.select("open")||re)&&n.setOpen(!0,me(ot,X,le))}function _(X){if(P()){O();return}R.current();const H=n.select("domReferenceElement"),B=Ge(H);E.clear(),w.current=!1;const Q=n.context.triggerElements;if(X.relatedTarget&&Q.hasElement(X.relatedTarget))return;if(j.current&&r.current.floatingContext){n.select("open")||T.clear(),x.current=j.current({...r.current.floatingContext,tree:y,x:X.clientX,y:X.clientY,onClose(){O(),A(),P()||C(X,!0)}});const le=x.current;le(X),B.addEventListener("mousemove",le),R.current=()=>{B.removeEventListener("mousemove",le)};return}(b.current==="touch"?!Oe(n.select("floatingElement"),X.relatedTarget):!0)&&C(X)}function z(X){F(X)}return n.select("open")&&L.addEventListener("mouseleave",z),f&&L.addEventListener("mousemove",k,{once:!0}),L.addEventListener("mouseenter",k),L.addEventListener("mouseleave",_),()=>{L.removeEventListener("mouseleave",z),f&&L.removeEventListener("mousemove",k),L.removeEventListener("mouseenter",k),L.removeEventListener("mouseleave",_)}},[A,O,h,r,M,C,n,o,j,F,m,P,l,f,b,N,E,w,T,p,y,R,x]),d.useMemo(()=>{function L(k){b.current=k.pointerType}return{onPointerDown:L,onPointerEnter:L,onMouseMove(k){const{nativeEvent:_}=k,z=k.currentTarget,X=n.select("domReferenceElement"),H=n.context.triggerElements,B=n.select("open"),Q=(H.hasElement(k.target)||H.hasMatchingElement(le=>Oe(le,k.target)))&&(!X||!Oe(X,k.target));if(l&&!ir(b.current)||B&&!Q||Qo(N.current)===0||!Q&&w.current&&k.movementX**2+k.movementY**2<2)return;E.clear();function re(){!h.current&&(!B||Q)&&n.setOpen(!0,me(ot,_,z))}b.current==="touch"?nt.flushSync(()=>{re()}):Q&&B?re():(w.current=!0,E.start(Qo(N.current),re))}}},[h,l,n,b,N,E,w])}function ls(e=[]){const t=e.map(u=>u?.reference),n=e.map(u=>u?.floating),r=e.map(u=>u?.item),s=e.map(u=>u?.trigger),o=d.useCallback(u=>Cs(u,e,"reference"),t),i=d.useCallback(u=>Cs(u,e,"floating"),n),a=d.useCallback(u=>Cs(u,e,"item"),r),l=d.useCallback(u=>Cs(u,e,"trigger"),s);return d.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a,getTriggerProps:l}),[o,i,a,l])}function Cs(e,t,n){const r=new Map,s=n==="item",o={};n==="floating"&&(o.tabIndex=-1,o[mi]="");for(const i in e)s&&e&&(i===Xc||i===Gc)||(o[i]=e[i]);for(let i=0;i<t.length;i+=1){let a;const l=t[i]?.[n];typeof l=="function"?a=e?l(e):null:a=l,a&&Dl(o,a,s,r)}return Dl(o,e,s,r),o}function Dl(e,t,n,r){for(const s in t){const o=t[s];n&&(s===Xc||s===Gc)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof o=="function"&&(r.get(s)?.push(o),e[s]=(...i)=>r.get(s)?.map(a=>a(...i)).find(a=>a!==void 0))):e[s]=o)}}const s0="Escape";function vo(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Is(e,t){return vo(t,e===Ki||e===rs,e===on||e===an)}function Zo(e,t,n){return vo(t,e===rs,n?e===on:e===an)||e==="Enter"||e===" "||e===""}function o0(e,t,n){return vo(t,n?e===on:e===an,e===rs)}function i0(e,t,n,r){const s=n?e===an:e===on,o=e===Ki;return t==="both"||t==="horizontal"&&r&&r>1?e===s0:vo(t,s,o)}function id(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingElement"),o=n.useState("domReferenceElement"),i=n.context.dataRef,{listRef:a,activeIndex:l,onNavigate:u=()=>{},enabled:f=!0,selectedIndex:p=null,allowEscape:g=!1,loopFocus:m=!1,nested:y=!1,rtl:b=!1,virtual:v=!1,focusItemOnOpen:x="auto",focusItemOnHover:h=!0,openOnArrowKeyDown:S=!0,disabledIndices:R=void 0,orientation:w="vertical",parentOrientation:T,cols:E=1,scrollItemIntoView:I=!0,itemSizes:j,dense:M=!1,id:N,resetOnPointerLeave:P=!0,externalTree:C}=t,A=Ws(s),O=rt(A),F=$t(),L=bn(C);ne(()=>{i.current.orientation=w},[i,w]);const k=hi(o),_=d.useRef(x),z=d.useRef(p??-1),X=d.useRef(null),H=d.useRef(!0),B=Z(te=>{u(z.current===-1?null:z.current,te)}),Q=d.useRef(B),re=d.useRef(!!s),le=d.useRef(r),ue=d.useRef(!1),J=d.useRef(!1),ce=rt(R),V=rt(r),D=rt(I),se=rt(p),K=rt(P),ae=Z(()=>{function te(Pe){v?L?.events.emit("virtualfocus",Pe):Fs(Pe,{sync:ue.current,preventScroll:!0})}const de=a.current[z.current],oe=J.current;de&&te(de),(ue.current?Pe=>Pe():requestAnimationFrame)(()=>{const Pe=a.current[z.current]||de;if(!Pe)return;de||te(Pe);const ye=D.current;ye&&U&&(oe||!H.current)&&Pe.scrollIntoView?.(typeof ye=="boolean"?{block:"nearest",inline:"nearest"}:ye)})});ne(()=>{f&&(r&&s?(z.current=p??-1,_.current&&p!=null&&(J.current=!0,B())):re.current&&(z.current=-1,Q.current()))},[f,r,s,p,B]),ne(()=>{if(f){if(!r){ue.current=!1;return}if(s)if(l==null){if(ue.current=!1,se.current!=null)return;if(re.current&&(z.current=-1,ae()),(!le.current||!re.current)&&_.current&&(X.current!=null||_.current===!0&&X.current==null)){let te=0;const de=()=>{a.current[0]==null?(te<2&&(te?requestAnimationFrame:queueMicrotask)(de),te+=1):(z.current=X.current==null||Zo(X.current,w,b)||y?Bo(a):ll(a),X.current=null,B())};de()}}else Lr(a,l)||(z.current=l,ae(),J.current=!1)}},[f,r,s,l,se,y,a,w,b,B,ae,ce]),ne(()=>{if(!f||s||!L||v||!re.current)return;const te=L.nodesRef.current,de=te.find(Pe=>Pe.id===F)?.context?.elements.floating,oe=Lt(Ge(s)),Ee=te.some(Pe=>Pe.context&&Oe(Pe.context.elements.floating,oe));de&&!Ee&&H.current&&de.focus({preventScroll:!0})},[f,s,L,F,v]),ne(()=>{Q.current=B,le.current=r,re.current=!!s}),ne(()=>{r||(X.current=null,_.current=x)},[r,x]);const W=l!=null,U=d.useMemo(()=>{function te(oe){if(!V.current)return;const Ee=a.current.indexOf(oe.currentTarget);Ee!==-1&&z.current!==Ee&&(z.current=Ee,B(oe))}return{onFocus(oe){ue.current=!0,te(oe)},onClick:({currentTarget:oe})=>oe.focus({preventScroll:!0}),onMouseMove(oe){ue.current=!0,J.current=!1,h&&te(oe)},onPointerLeave(oe){if(!V.current||!H.current||oe.pointerType==="touch")return;ue.current=!0;const Ee=oe.relatedTarget;!h||a.current.includes(Ee)||K.current&&(z.current=-1,B(oe),v||O.current?.focus({preventScroll:!0}))}}},[V,O,h,a,B,K,v]),Y=d.useCallback(()=>T??L?.nodesRef.current.find(te=>te.id===F)?.context?.dataRef?.current.orientation,[F,L,T]),ve=Z(te=>{if(H.current=!1,ue.current=!0,te.which===229||!V.current&&te.currentTarget===O.current)return;if(y&&i0(te.key,w,b,E)){Is(te.key,Y())||Je(te),n.setOpen(!1,me(js,te.nativeEvent)),ze(o)&&(v?L?.events.emit("virtualfocus",o):o.focus());return}const de=z.current,oe=Bo(a,R),Ee=ll(a,R);if(k||(te.key==="Home"&&(Je(te),z.current=oe,B(te)),te.key==="End"&&(Je(te),z.current=Ee,B(te))),E>1){const Pe=j||Array.from({length:a.current.length},()=>({width:1,height:1})),ye=Zg(Pe,E,M),je=ye.findIndex(Ke=>Ke!=null&&!Dr(a,Ke,R)),_e=ye.reduce((Ke,Le,q)=>Le!=null&&!Dr(a,Le,R)?q:Ke,-1),Be=ye[Qg({current:ye.map(Ke=>Ke!=null?a.current[Ke]:null)},{event:te,orientation:w,loopFocus:m,rtl:b,cols:E,disabledIndices:em([...(typeof R!="function"?R:null)||a.current.map((Ke,Le)=>Dr(a,Le,R)?Le:void 0),void 0],ye),minIndex:je,maxIndex:_e,prevIndex:Jg(z.current>Ee?oe:z.current,Pe,ye,E,te.key===rs?"bl":te.key===(b?on:an)?"tr":"tl"),stopEvent:!0})];if(Be!=null&&(z.current=Be,B(te)),w==="both")return}if(Is(te.key,w)){if(Je(te),r&&!v&&Lt(te.currentTarget.ownerDocument)===te.currentTarget){z.current=Zo(te.key,w,b)?oe:Ee,B(te);return}Zo(te.key,w,b)?m?de>=Ee?g&&de!==a.current.length?z.current=-1:(ue.current=!1,z.current=oe):z.current=lt(a,{startingIndex:de,disabledIndices:R}):z.current=Math.min(Ee,lt(a,{startingIndex:de,disabledIndices:R})):m?de<=oe?g&&de!==-1?z.current=a.current.length:(ue.current=!1,z.current=Ee):z.current=lt(a,{startingIndex:de,decrement:!0,disabledIndices:R}):z.current=Math.max(oe,lt(a,{startingIndex:de,decrement:!0,disabledIndices:R})),Lr(a,z.current)&&(z.current=-1),B(te)}}),xe=d.useMemo(()=>v&&r&&W&&{"aria-activedescendant":`${N}-${l}`},[v,r,W,N,l]),Re=d.useMemo(()=>({"aria-orientation":w==="both"?void 0:w,...k?{}:xe,onKeyDown(te){if(te.key==="Tab"&&te.shiftKey&&r&&!v){const de=st(te.nativeEvent);if(de&&!Oe(O.current,de))return;Je(te),n.setOpen(!1,me(qt,te.nativeEvent)),ze(o)&&o.focus();return}ve(te)},onPointerMove(){H.current=!0}}),[xe,ve,O,w,k,n,r,v,o]),ee=d.useMemo(()=>{function te(oe){x==="auto"&&Kc(oe.nativeEvent)&&(_.current=!v)}function de(oe){_.current=x,x==="auto"&&Qc(oe.nativeEvent)&&(_.current=!0)}return{onKeyDown(oe){const Ee=n.select("open");H.current=!1;const Pe=oe.key.startsWith("Arrow"),ye=o0(oe.key,Y(),b),je=Is(oe.key,w),_e=(y?ye:je)||oe.key==="Enter"||oe.key.trim()==="";if(v&&Ee)return ve(oe);if(!(!Ee&&!S&&Pe)){if(_e){const Be=Is(oe.key,Y());X.current=y&&Be?null:oe.key}if(y){ye&&(Je(oe),Ee?(z.current=Bo(a,ce.current),B(oe)):n.setOpen(!0,me(js,oe.nativeEvent,oe.currentTarget)));return}je&&(se.current!=null&&(z.current=se.current),Je(oe),!Ee&&S?n.setOpen(!0,me(js,oe.nativeEvent,oe.currentTarget)):ve(oe),Ee&&B(oe))}},onFocus(oe){n.select("open")&&!v&&(z.current=-1,B(oe))},onPointerDown:de,onPointerEnter:de,onMouseDown:te,onClick:te}},[ve,ce,x,a,y,B,n,S,w,Y,b,se,v]),fe=d.useMemo(()=>({...xe,...ee}),[xe,ee]);return d.useMemo(()=>f?{reference:fe,floating:Re,item:U,trigger:ee}:{},[f,fe,Re,ee,U])}const a0=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ad(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.useState("floatingId"),o=n.useState("domReferenceElement"),i=n.useState("floatingElement"),{enabled:a=!0,role:l="dialog"}=t,u=Ln(),f=o?.id||u,p=d.useMemo(()=>Ws(i)?.id||s,[i,s]),g=a0.get(l)??l,y=$t()!=null,b=d.useMemo(()=>g==="tooltip"||l==="label"?He:{"aria-haspopup":g==="alertdialog"?"dialog":g,"aria-expanded":"false",...g==="listbox"&&{role:"combobox"},...g==="menu"&&y&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[g,y,l]),v=d.useMemo(()=>g==="tooltip"||l==="label"?{[`aria-${l==="label"?"labelledby":"describedby"}`]:r?p:void 0}:{...b,"aria-expanded":r?"true":"false","aria-controls":r?p:void 0,...g==="menu"&&{id:f}},[g,p,r,f,l,b]),x=d.useMemo(()=>{const S={id:p,...g&&{role:g}};return g==="tooltip"||l==="label"?S:{...S,...g==="menu"&&{"aria-labelledby":f}}},[g,p,f,l]),h=d.useCallback(({active:S,selected:R})=>{const w={role:"option",...S&&{id:`${p}-fui-option`}};switch(l){case"select":case"combobox":return{...w,"aria-selected":R}}return{}},[p,l]);return d.useMemo(()=>a?{reference:v,floating:x,item:h,trigger:b}:{},[a,v,x,b,h])}function l0(e,t){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),s=n.context.dataRef,{listRef:o,activeIndex:i,onMatch:a,onTypingChange:l,enabled:u=!0,findMatch:f=null,resetMs:p=750,ignoreKeys:g=Xt,selectedIndex:m=null}=t,y=it(),b=d.useRef(""),v=d.useRef(m??i??-1),x=d.useRef(null);ne(()=>{r&&(y.clear(),x.current=null,b.current="")},[r,y]),ne(()=>{r&&b.current===""&&(v.current=m??i??-1)},[r,m,i]);const h=Z(T=>{T?s.current.typing||(s.current.typing=T,l?.(T)):s.current.typing&&(s.current.typing=T,l?.(T))}),S=Z(T=>{function E(P,C,A){const O=f?f(C,A):C.find(F=>F?.toLocaleLowerCase().indexOf(A.toLocaleLowerCase())===0);return O?P.indexOf(O):-1}const I=o.current;if(b.current.length>0&&b.current[0]!==" "&&(E(I,I,b.current)===-1?h(!1):T.key===" "&&Je(T)),I==null||g.includes(T.key)||T.key.length!==1||T.ctrlKey||T.metaKey||T.altKey)return;r&&T.key!==" "&&(Je(T),h(!0)),I.every(P=>P?P[0]?.toLocaleLowerCase()!==P[1]?.toLocaleLowerCase():!0)&&b.current===T.key&&(b.current="",v.current=x.current),b.current+=T.key,y.start(p,()=>{b.current="",v.current=x.current,h(!1)});const M=v.current,N=E(I,[...I.slice((M||0)+1),...I.slice(0,(M||0)+1)],b.current);N!==-1?(a?.(N),x.current=N):T.key!==" "&&(b.current="",h(!1))}),R=d.useMemo(()=>({onKeyDown:S}),[S]),w=d.useMemo(()=>({onKeyDown:S,onKeyUp(T){T.key===" "&&h(!1)}}),[S,h]);return d.useMemo(()=>u?{reference:R,floating:w}:{},[u,R,w])}function _l(e,t){const[n,r]=e;let s=!1;const o=t.length;for(let i=0,a=o-1;i<o;a=i++){const[l,u]=t[i]||[0,0],[f,p]=t[a]||[0,0];u>=r!=p>=r&&n<=(f-l)*(r-u)/(p-u)+l&&(s=!s)}return s}function c0(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function ld(e={}){const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e,s=new pn;let o=!1,i=null,a=null,l=typeof performance<"u"?performance.now():0;function u(p,g){const m=performance.now(),y=m-l;if(i===null||a===null||y===0)return i=p,a=g,l=m,null;const b=p-i,v=g-a,h=Math.sqrt(b*b+v*v)/y;return i=p,a=g,l=m,h}const f=({x:p,y:g,placement:m,elements:y,onClose:b,nodeId:v,tree:x})=>function(S){function R(){s.clear(),b()}if(s.clear(),!y.domReference||!y.floating||m==null||p==null||g==null)return;const{clientX:w,clientY:T}=S,E=[w,T],I=st(S),j=S.type==="mouseleave",M=Oe(y.floating,I),N=Oe(y.domReference,I),P=y.domReference.getBoundingClientRect(),C=y.floating.getBoundingClientRect(),A=m.split("-")[0],O=p>C.right-C.width/2,F=g>C.bottom-C.height/2,L=c0(E,P),k=C.width>P.width,_=C.height>P.height,z=(k?P:C).left,X=(k?P:C).right,H=(_?P:C).top,B=(_?P:C).bottom;if(M&&(o=!0,!j))return;if(N&&(o=!1),N&&!j){o=!0;return}if(j&&Fe(S.relatedTarget)&&Oe(y.floating,S.relatedTarget)||x&&Nn(x.nodesRef.current,v).some(({context:le})=>le?.open))return;if(A==="top"&&g>=P.bottom-1||A==="bottom"&&g<=P.top+1||A==="left"&&p>=P.right-1||A==="right"&&p<=P.left+1)return R();let Q=[];switch(A){case"top":Q=[[z,P.top+1],[z,C.bottom-1],[X,C.bottom-1],[X,P.top+1]];break;case"bottom":Q=[[z,C.top+1],[z,P.bottom-1],[X,P.bottom-1],[X,C.top+1]];break;case"left":Q=[[C.right-1,B],[C.right-1,H],[P.left+1,H],[P.left+1,B]];break;case"right":Q=[[P.right-1,B],[P.right-1,H],[C.left+1,H],[C.left+1,B]];break}function re([le,ue]){switch(A){case"top":{const J=[k?le+t/2:O?le+t*4:le-t*4,ue+t+1],ce=[k?le-t/2:O?le+t*4:le-t*4,ue+t+1],V=[[C.left,O||k?C.bottom-t:C.top],[C.right,O?k?C.bottom-t:C.top:C.bottom-t]];return[J,ce,...V]}case"bottom":{const J=[k?le+t/2:O?le+t*4:le-t*4,ue-t],ce=[k?le-t/2:O?le+t*4:le-t*4,ue-t],V=[[C.left,O||k?C.top+t:C.bottom],[C.right,O?k?C.top+t:C.bottom:C.top+t]];return[J,ce,...V]}case"left":{const J=[le+t+1,_?ue+t/2:F?ue+t*4:ue-t*4],ce=[le+t+1,_?ue-t/2:F?ue+t*4:ue-t*4];return[...[[F||_?C.right-t:C.left,C.top],[F?_?C.right-t:C.left:C.right-t,C.bottom]],J,ce]}case"right":{const J=[le-t,_?ue+t/2:F?ue+t*4:ue-t*4],ce=[le-t,_?ue-t/2:F?ue+t*4:ue-t*4],V=[[F||_?C.left+t:C.right,C.top],[F?_?C.left+t:C.right:C.left+t,C.bottom]];return[J,ce,...V]}default:return[]}}if(!_l([w,T],Q)){if(o&&!L)return R();if(!j&&r){const le=u(S.clientX,S.clientY);if(le!==null&&le<.1)return R()}_l([w,T],re([p,g]))?!o&&r&&s.start(40,R):R()}};return f.__options={blockPointerEvents:n},f}const u0=d.createContext(void 0);function cd(e){return d.useContext(u0)}const ud="ArrowUp",dd="ArrowDown",fd="ArrowLeft",pd="ArrowRight",gd="Home",md="End",d0=new Set([fd,pd]),f0=new Set([ud,dd]),p0=new Set([...d0,...f0]);[...p0];const hd=new Set([ud,dd,fd,pd,gd,md]);function yo(e){return e==="starting"?Gp:He}const g0={...xr,...ns},xd=d.forwardRef(function(t,n){const{render:r,className:s,finalFocus:o,...i}=t,{store:a}=Hn(),{side:l,align:u}=Tu(),f=cd()!=null,p=a.useState("open"),g=a.useState("transitionStatus"),m=a.useState("popupProps"),y=a.useState("mounted"),b=a.useState("instantType"),v=a.useState("activeTriggerElement"),x=a.useState("parent"),h=a.useState("lastOpenChangeReason"),S=a.useState("rootId"),R=a.useState("floatingRootContext"),w=a.useState("floatingTreeRoot"),T=a.useState("closeDelay"),E=a.useState("activeTriggerElement");zn({open:p,ref:a.context.popupRef,onComplete(){p&&a.context.onOpenChangeComplete?.(!0)}}),d.useEffect(()=>{function C(A){a.setOpen(!1,me(A.reason,A.domEvent))}return w.events.on("close",C),()=>{w.events.off("close",C)}},[w.events,a]);const I=a.useState("hoverEnabled"),j=a.useState("disabled");sd(R,{enabled:I&&!j&&x.type!=="context-menu"&&x.type!=="menubar",closeDelay:T});const M=d.useMemo(()=>({transitionStatus:g,side:l,align:u,open:p,nested:x.type==="menu",instant:b}),[g,l,u,p,x.type,b]),N=$e("div",t,{state:M,ref:[n,a.context.popupRef],stateAttributesMapping:g0,props:[m,{onKeyDown(C){f&&hd.has(C.key)&&C.stopPropagation()}},yo(g),i,{"data-rootownerid":S}]});let P=x.type===void 0||x.type==="context-menu";return(v||x.type==="menubar"&&h!==$i)&&(P=!0),c.jsx(ua,{context:R,modal:!1,disabled:!y,returnFocus:o===void 0?P:o,initialFocus:x.type!=="menu",restoreFocus:!0,externalTree:x.type!=="menubar"?w:void 0,previousFocusableElement:E,nextFocusableElement:x.type===void 0?a.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:x.type===void 0?a.context.beforeContentFocusGuardRef:void 0,children:N})}),bd=d.createContext(void 0);function m0(){const e=d.useContext(bd);if(e===void 0)throw new Error(qe(32));return e}const vd=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,{store:o}=Hn();return o.useState("mounted")||r?c.jsx(bd.Provider,{value:r,children:c.jsx(la,{ref:n,...s})}):null});function ha(e){return Hi(19)?e:e?"true":void 0}const h0=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:f=0,offsetParent:p="real"}=Kt(e,t)||{};if(u==null)return{};const g=Jc(f),m={x:n,y:r},y=ea(s),b=Ji(y),v=await i.getDimensions(u),x=y==="y",h=x?"top":"left",S=x?"bottom":"right",R=x?"clientHeight":"clientWidth",w=o.reference[b]+o.reference[y]-m[y]-o.floating[b],T=m[y]-o.reference[y],E=p==="real"?await i.getOffsetParent?.(u):a.floating;let I=a.floating[R]||o.floating[b];(!I||!await i.isElement?.(E))&&(I=a.floating[R]||o.floating[b]);const j=w/2-T/2,M=I/2-v[b]/2-1,N=Math.min(g[h],M),P=Math.min(g[S],M),C=N,A=I-v[b]-P,O=I/2-v[b]/2+j,F=xi(C,O,A),L=!l.arrow&&xn(s)!=null&&O!==F&&o.reference[b]/2-(O<C?N:P)-v[b]/2<0,k=L?O<C?O-C:O-A:0;return{[y]:m[y]+k,data:{[y]:F,centerOffset:O-F-k,...L&&{alignmentOffset:k}},reset:L}}}),x0=(e,t)=>({...h0(e),options:[e,t]}),b0={name:"hide",async fn(e){const{width:t,height:n,x:r,y:s}=e.rects.reference,o=t===0&&n===0&&r===0&&s===0;return{data:{referenceHidden:(await Ix().fn(e)).data?.referenceHidden||o}}}},Ds={sideX:"left",sideY:"top"},v0={name:"adaptiveOrigin",async fn(e){const{x:t,y:n,rects:{floating:r},elements:{floating:s},platform:o,strategy:i,placement:a}=e,l=tt(s),u=l.getComputedStyle(s);if(!(u.transitionDuration!=="0s"&&u.transitionDuration!==""))return{x:t,y:n,data:Ds};const p=await o.getOffsetParent?.(s);let g={width:0,height:0};if(i==="fixed"&&l?.visualViewport)g={width:l.visualViewport.width,height:l.visualViewport.height};else if(p===l){const h=Qt(s);g={width:h.documentElement.clientWidth,height:h.documentElement.clientHeight}}else await o.isElement?.(p)&&(g=await o.getDimensions(p));const m=pt(a);let y=t,b=n;m==="left"&&(y=g.width-(t+r.width)),m==="top"&&(b=g.height-(n+r.height));const v=m==="left"?"right":Ds.sideX,x=m==="top"?"bottom":Ds.sideY;return{x:y,y:b,data:{sideX:v,sideY:x}}}};function yd(e,t,n){const r=e==="inline-start"||e==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[t]}function zl(e,t,n){const{rects:r,placement:s}=e;return{side:yd(t,pt(s),n),align:xn(s)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function xa(e){const{anchor:t,positionMethod:n="absolute",side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,collisionBoundary:a,collisionPadding:l=5,sticky:u=!1,arrowPadding:f=5,disableAnchorTracking:p=!1,keepMounted:g=!1,floatingRootContext:m,mounted:y,collisionAvoidance:b,shiftCrossAxis:v=!1,nodeId:x,adaptiveOrigin:h,lazyFlip:S=!1,externalTree:R}=e,[w,T]=d.useState(null);!y&&w!==null&&T(null);const E=b.side||"flip",I=b.align||"flip",j=b.fallbackAxisSide||"end",M=typeof t=="function"?t:void 0,N=Z(M),P=M?N:t,C=rt(t),O=hr()==="rtl",F=w||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":O?"left":"right","inline-start":O?"right":"left"}[r],L=o==="center"?F:`${F}-${o}`;let k=l;const _=1,z=r==="bottom"?_:0,X=r==="top"?_:0,H=r==="right"?_:0,B=r==="left"?_:0;typeof k=="number"?k={top:k+z,right:k+B,bottom:k+X,left:k+H}:k&&(k={top:(k.top||0)+z,right:(k.right||0)+B,bottom:(k.bottom||0)+X,left:(k.left||0)+H});const Q={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:k},re=d.useRef(null),le=rt(s),ue=rt(i),V=[wx(be=>{const Se=zl(be,r,O),Qe=typeof le.current=="function"?le.current(Se):le.current,ke=typeof ue.current=="function"?ue.current(Se):ue.current;return{mainAxis:Qe,crossAxis:ke,alignmentAxis:ke}},[typeof s!="function"?s:0,typeof i!="function"?i:0,O,r])],D=I==="none"&&E!=="shift",se=!D&&(u||v||E==="shift"),K=E==="none"?null:Ex({...Q,padding:{top:k.top+_,right:k.right+_,bottom:k.bottom+_,left:k.left+_},mainAxis:!v&&E==="flip",crossAxis:I==="flip"?"alignment":!1,fallbackAxisSideDirection:j}),ae=D?null:Sx(be=>{const Se=Qt(be.elements.floating).documentElement;return{...Q,rootBoundary:v?{x:0,y:0,width:Se.clientWidth,height:Se.clientHeight}:void 0,mainAxis:I!=="none",crossAxis:se,limiter:u||v?void 0:Rx(Qe=>{if(!re.current)return{};const{width:ke,height:It}=re.current.getBoundingClientRect(),We=Ct(pt(Qe.placement)),Ue=We==="y"?ke:It,yn=We==="y"?k.left+k.right:k.top+k.bottom;return{offset:Ue/2+yn/2}})}},[Q,u,v,k,I]);E==="shift"||I==="shift"||o==="center"?V.push(ae,K):V.push(K,ae),V.push(Cx({...Q,apply({elements:{floating:be},rects:{reference:Se},availableWidth:Qe,availableHeight:ke}){Object.entries({"--available-width":`${Qe}px`,"--available-height":`${ke}px`,"--anchor-width":`${Se.width}px`,"--anchor-height":`${Se.height}px`}).forEach(([It,We])=>{be.style.setProperty(It,We)})}}),x0(()=>({element:re.current||document.createElement("div"),padding:f,offsetParent:"floating"}),[f]),{name:"transformOrigin",fn(be){const{elements:Se,middlewareData:Qe,placement:ke,rects:It,y:We}=be,Ue=pt(ke),yn=Ct(Ue),yr=re.current,wn=Qe.arrow?.x||0,ds=Qe.arrow?.y||0,jt=yr?.clientWidth||0,Sn=yr?.clientHeight||0,ct=wn+jt/2,Ce=ds+Sn/2,Rn=Math.abs(Qe.shift?.y||0),wr=It.reference.height/2,Bt=typeof s=="function"?s(zl(be,r,O)):s,Bn=Rn>Bt,Mo={top:`${ct}px calc(100% + ${Bt}px)`,bottom:`${ct}px ${-Bt}px`,left:`calc(100% + ${Bt}px) ${Ce}px`,right:`${-Bt}px ${Ce}px`}[Ue],Wn=`${ct}px ${It.reference.y+wr-We}px`;return Se.floating.style.setProperty("--transform-origin",se&&yn==="y"&&Bn?Wn:Mo),{}}},b0,h),ne(()=>{!y&&m&&m.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[y,m]);const W=d.useMemo(()=>({elementResize:!p&&typeof ResizeObserver<"u",layoutShift:!p&&typeof IntersectionObserver<"u"}),[p]),{refs:U,elements:Y,x:ve,y:xe,middlewareData:Re,update:ee,placement:fe,context:te,isPositioned:de,floatingStyles:oe}=Qx({rootContext:m,placement:L,middleware:V,strategy:n,whileElementsMounted:g?void 0:(...be)=>jl(...be,W),nodeId:x,externalTree:R}),{sideX:Ee,sideY:Pe}=Re.adaptiveOrigin||Ds,ye=de?n:"fixed",je=d.useMemo(()=>h?{position:ye,[Ee]:ve,[Pe]:xe}:{position:ye,...oe},[h,ye,Ee,ve,Pe,xe,oe]),_e=d.useRef(null);ne(()=>{if(!y)return;const be=C.current,Se=typeof be=="function"?be():be,ke=(Vl(Se)?Se.current:Se)||null||null;ke!==_e.current&&(U.setPositionReference(ke),_e.current=ke)},[y,U,P,C]),d.useEffect(()=>{if(!y)return;const be=C.current;typeof be!="function"&&Vl(be)&&be.current!==_e.current&&(U.setPositionReference(be.current),_e.current=be.current)},[y,U,P,C]),d.useEffect(()=>{if(g&&y&&Y.domReference&&Y.floating)return jl(Y.domReference,Y.floating,ee,W)},[g,y,Y,ee,W]);const Be=pt(fe),Ke=yd(r,Be,O),Le=xn(fe)||"center",q=!!Re.hide?.referenceHidden;ne(()=>{S&&y&&de&&T(Be)},[S,y,de,Be]);const Ae=d.useMemo(()=>({position:"absolute",top:Re.arrow?.y,left:Re.arrow?.x}),[Re.arrow]),De=Re.arrow?.centerOffset!==0;return d.useMemo(()=>({positionerStyles:je,arrowStyles:Ae,arrowRef:re,arrowUncentered:De,side:Ke,align:Le,physicalSide:Be,anchorHidden:q,refs:U,context:te,isPositioned:de,update:ee}),[je,Ae,re,De,Ke,Le,Be,q,U,te,de,ee])}function Vl(e){return e!=null&&"current"in e}function wd(e){const{children:t,elementsRef:n,labelsRef:r,onMapChange:s}=e,o=Z(s),i=d.useRef(0),a=ut(w0).current,l=ut(y0).current,[u,f]=d.useState(0),p=d.useRef(u),g=Z((x,h)=>{l.set(x,h??null),p.current+=1,f(p.current)}),m=Z(x=>{l.delete(x),p.current+=1,f(p.current)}),y=d.useMemo(()=>{const x=new Map;return Array.from(l.keys()).filter(S=>S.isConnected).sort(S0).forEach((S,R)=>{const w=l.get(S)??{};x.set(S,{...w,index:R})}),x},[l,u]);ne(()=>{if(typeof MutationObserver!="function"||y.size===0)return;const x=new MutationObserver(h=>{const S=new Set,R=w=>S.has(w)?S.delete(w):S.add(w);h.forEach(w=>{w.removedNodes.forEach(R),w.addedNodes.forEach(R)}),S.size===0&&(p.current+=1,f(p.current))});return y.forEach((h,S)=>{S.parentElement&&x.observe(S.parentElement,{childList:!0})}),()=>{x.disconnect()}},[y]),ne(()=>{p.current===u&&(n.current.length!==y.size&&(n.current.length=y.size),r&&r.current.length!==y.size&&(r.current.length=y.size),i.current=y.size),o(y)},[o,y,n,r,u]),ne(()=>()=>{n.current=[]},[n]),ne(()=>()=>{r&&(r.current=[])},[r]);const b=Z(x=>(a.add(x),()=>{a.delete(x)}));ne(()=>{a.forEach(x=>x(y))},[a,y]);const v=d.useMemo(()=>({register:g,unregister:m,subscribeMapChange:b,elementsRef:n,labelsRef:r,nextIndexRef:i}),[g,m,b,n,r,i]);return c.jsx(Mu.Provider,{value:v,children:t})}function y0(){return new Map}function w0(){return new Set}function S0(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const ba=d.forwardRef(function(t,n){const{cutout:r,...s}=t;let o;if(r){const i=r?.getBoundingClientRect();o=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${i.left}px ${i.top}px,
      ${i.left}px ${i.bottom}px,
      ${i.right}px ${i.bottom}px,
      ${i.right}px ${i.top}px,
      ${i.left}px ${i.top}px
    )`}return c.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:o}})}),Sd=d.forwardRef(function(t,n){const{anchor:r,positionMethod:s="absolute",className:o,render:i,side:a,align:l,sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=Lc,...x}=t,{store:h}=Hn(),S=m0(),R=ho(!0),w=h.useState("parent"),T=h.useState("floatingRootContext"),E=h.useState("floatingTreeRoot"),I=h.useState("mounted"),j=h.useState("open"),M=h.useState("modal"),N=h.useState("activeTriggerElement"),P=h.useState("lastOpenChangeReason"),C=h.useState("floatingNodeId"),A=h.useState("floatingParentNodeId");let O=r,F=u,L=f,k=l;w.type==="context-menu"&&(O=r??w.context?.anchor,k=k??"start",!a&&k!=="center"&&(L=t.alignOffset??2,F=t.sideOffset??-5));let _=a,z=k;w.type==="menu"?(_=_??"inline-end",z=z??"start"):w.type==="menubar"&&(_=_??"bottom",z=z??"start");const X=w.type==="context-menu",H=xa({anchor:O,floatingRootContext:T,positionMethod:R?"fixed":s,mounted:I,side:_,sideOffset:F,align:z,alignOffset:L,arrowPadding:X?0:m,collisionBoundary:p,collisionPadding:g,sticky:y,nodeId:C,keepMounted:S,disableAnchorTracking:b,collisionAvoidance:v,shiftCrossAxis:X,externalTree:E}),B=d.useMemo(()=>{const ce={};return j||(ce.pointerEvents="none"),{role:"presentation",hidden:!I,style:{...H.positionerStyles,...ce}}},[j,I,H.positionerStyles]);d.useEffect(()=>{function ce(V){V.open?(V.parentNodeId===C&&h.set("hoverEnabled",!1),V.nodeId!==C&&V.parentNodeId===h.select("floatingParentNodeId")&&h.setOpen(!1,me(kr))):V.parentNodeId===C&&V.reason!==kr&&h.set("hoverEnabled",!0)}return E.events.on("menuopenchange",ce),()=>{E.events.off("menuopenchange",ce)}},[h,E.events,C]),d.useEffect(()=>{if(h.select("floatingParentNodeId")==null)return;function ce(V){if(V.open||V.nodeId!==h.select("floatingParentNodeId"))return;const D=V.reason??kr;h.setOpen(!1,me(D))}return E.events.on("menuopenchange",ce),()=>{E.events.off("menuopenchange",ce)}},[E.events,h]),d.useEffect(()=>{function ce(V){!j||V.nodeId!==h.select("floatingParentNodeId")||V.target&&N&&N!==V.target&&h.setOpen(!1,me(kr))}return E.events.on("itemhover",ce),()=>{E.events.off("itemhover",ce)}},[E.events,j,N,h]),d.useEffect(()=>{const ce={open:j,nodeId:C,parentNodeId:A,reason:h.select("lastOpenChangeReason")};E.events.emit("menuopenchange",ce)},[E.events,j,h,C,A]);const Q=d.useMemo(()=>({open:j,side:H.side,align:H.align,anchorHidden:H.anchorHidden,nested:w.type==="menu"}),[j,H.side,H.align,H.anchorHidden,w.type]),re=d.useMemo(()=>({side:H.side,align:H.align,arrowRef:H.arrowRef,arrowUncentered:H.arrowUncentered,arrowStyles:H.arrowStyles,nodeId:H.context.nodeId}),[H.side,H.align,H.arrowRef,H.arrowUncentered,H.arrowStyles,H.context.nodeId]),le=$e("div",t,{state:Q,stateAttributesMapping:xr,ref:[n,h.useStateSetter("positionerElement")],props:[B,x]}),ue=I&&w.type!=="menu"&&(w.type!=="menubar"&&M&&P!==ot||w.type==="menubar"&&w.context.modal);let J=null;return w.type==="menubar"?J=w.context.contentElement:w.type===void 0&&(J=N),c.jsxs(Iu.Provider,{value:re,children:[ue&&c.jsx(ba,{ref:w.type==="context-menu"||w.type==="nested-context-menu"?w.context.internalBackdropRef:null,inert:ha(!j),cutout:J}),c.jsx(Fu,{id:C,children:c.jsx(wd,{elementsRef:h.context.itemDomElements,labelsRef:h.context.itemLabels,children:le})})]})});let Hl={},$l={},Bl="";function R0(e){if(typeof document>"u")return!1;const t=Qt(e);return tt(t).innerWidth-t.documentElement.clientWidth>0}function E0(e){const t=Qt(e),n=t.documentElement,r=t.body,s=_n(n)?n:r,o=s.style.overflow;return s.style.overflow="hidden",()=>{s.style.overflow=o}}function C0(e){const t=Qt(e),n=t.documentElement,r=t.body,s=tt(n);let o=0,i=0;const a=Ye.create(),l=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable");if(Wc&&(s.visualViewport?.scale??1)!==1)return()=>{};function u(){const g=s.getComputedStyle(n),m=s.getComputedStyle(r),v=(g.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";o=n.scrollTop,i=n.scrollLeft,Hl={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},Bl=n.style.scrollBehavior,$l={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const x=n.scrollHeight>n.clientHeight,h=n.scrollWidth>n.clientWidth,S=g.overflowY==="scroll"||m.overflowY==="scroll",R=g.overflowX==="scroll"||m.overflowX==="scroll",w=Math.max(0,s.innerWidth-n.clientWidth),T=Math.max(0,s.innerHeight-n.clientHeight),E=parseFloat(m.marginTop)+parseFloat(m.marginBottom),I=parseFloat(m.marginLeft)+parseFloat(m.marginRight),j=_n(n)?n:r;if(l){n.style.scrollbarGutter=v,j.style.overflowY="hidden",j.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:v,overflowY:"hidden",overflowX:"hidden"}),(x||S)&&(n.style.overflowY="scroll"),(h||R)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:E||T?`calc(100dvh - ${E+T}px)`:"100dvh",width:I||w?`calc(100vw - ${I+w}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=o,r.scrollLeft=i,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function f(){Object.assign(n.style,Hl),Object.assign(r.style,$l),l||(n.scrollTop=o,n.scrollLeft=i,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=Bl)}function p(){f(),a.request(u)}return u(),s.addEventListener("resize",p),()=>{a.cancel(),f(),typeof s.removeEventListener=="function"&&s.removeEventListener("resize",p)}}class I0{lockCount=0;restore=null;timeoutLock=pn.create();timeoutUnlock=pn.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const r=Qt(t).documentElement,s=tt(r).getComputedStyle(r).overflowY;if(s==="hidden"||s==="clip"){this.restore=Xe;return}const o=Ng||!R0(t);this.restore=o?E0(t):C0(t)}}const T0=new I0;function va(e=!0,t=null){ne(()=>{if(e)return T0.acquire(t)},[e,t])}const P0=d.createContext(null);function Rd(e){return d.useContext(P0)}function O0(e){const t=d.useRef(""),n=d.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:d.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function ya(e){const[t,n]=d.useState(null),r=Z((a,l)=>{e||n(l)}),s=d.useCallback(()=>{n(null)},[]),{onClick:o,onPointerDown:i}=O0(r);return d.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:o,onPointerDown:i}}),[t,s,o,i])}const M0={...ed,disabled:$(e=>e.parent.type==="menubar"&&e.parent.context.disabled||e.disabled),modal:$(e=>(e.parent.type===void 0||e.parent.type==="context-menu")&&(e.modal??!0)),allowMouseEnter:$(e=>e.parent.type==="menu"?e.parent.store.select("allowMouseEnter"):e.allowMouseEnter),stickIfOpen:$(e=>e.stickIfOpen),parent:$(e=>e.parent),rootId:$(e=>e.parent.type==="menu"?e.parent.store.select("rootId"):e.parent.type!==void 0?e.parent.context.rootId:e.rootId),activeIndex:$(e=>e.activeIndex),isActive:$((e,t)=>e.activeIndex===t),hoverEnabled:$(e=>e.hoverEnabled),instantType:$(e=>e.instantType),lastOpenChangeReason:$(e=>e.openChangeReason),floatingTreeRoot:$(e=>e.parent.type==="menu"?e.parent.store.select("floatingTreeRoot"):e.floatingTreeRoot),floatingNodeId:$(e=>e.floatingNodeId),floatingParentNodeId:$(e=>e.floatingParentNodeId),itemProps:$(e=>e.itemProps),closeDelay:$(e=>e.closeDelay),keyboardEventRelay:$(e=>{if(e.keyboardEventRelay)return e.keyboardEventRelay;if(e.parent.type==="menu")return e.parent.store.select("keyboardEventRelay")})};class wa extends ga{constructor(t){super({...k0(),...t},{positionerRef:d.createRef(),popupRef:d.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:d.createRef(),beforeContentFocusGuardRef:d.createRef(),onOpenChangeComplete:void 0,triggerElements:new bo},M0),this.observe($(n=>n.allowMouseEnter),(n,r)=>{this.state.parent.type==="menu"&&n!==r&&this.state.parent.store.set("allowMouseEnter",n)}),this.unsubscribeParentListener=this.observe("parent",n=>{if(this.unsubscribeParentListener?.(),n.type==="menu"){this.unsubscribeParentListener=n.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=n.store.context.allowMouseUpTriggerRef;return}n.type!==void 0&&(this.context.allowMouseUpTriggerRef=n.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(t,n){this.state.floatingRootContext.context.events.emit("setOpen",{open:t,eventDetails:n})}static useStore(t,n){return ut(()=>t??new wa(n)).current}unsubscribeParentListener=null}function k0(){return{...Ju(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new oa,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:He,keyboardEventRelay:void 0,closeDelay:0}}const N0=d.createContext(void 0);function j0(){return d.useContext(N0)}function Ed(e){const{children:t,open:n,onOpenChange:r,onOpenChangeComplete:s,defaultOpen:o=!1,disabled:i=!1,modal:a,loopFocus:l=!0,orientation:u="vertical",actionsRef:f,closeParentOnEsc:p=!0,handle:g,triggerId:m,defaultTriggerId:y=null,highlightItemOnHover:b=!0}=e,v=ho(!0),x=Hn(!0),h=Rd(),S=j0(),R=d.useMemo(()=>S&&x?{type:"menu",store:x.store}:h?{type:"menubar",context:h}:v&&!x?{type:"context-menu",context:v}:{type:void 0},[v,x,h,S]),w=wa.useStore(g?.store,{parent:R}),T=w.useState("floatingTreeRoot"),E=ia(T),I=$t();ne(()=>{v&&!x?w.update({parent:{type:"context-menu",context:v},floatingNodeId:E,floatingParentNodeId:I}):x&&w.update({floatingNodeId:E,floatingParentNodeId:I})},[v,x,E,I,w]),w.useControlledProp("open",n,o),w.useControlledProp("activeTriggerId",m,y),w.useContextCallback("onOpenChangeComplete",s);const j=w.useState("open"),M=w.useState("activeTriggerElement"),N=w.useState("positionerElement"),P=w.useState("hoverEnabled"),C=w.useState("modal"),A=w.useState("disabled"),O=w.useState("lastOpenChangeReason"),F=w.useState("parent"),L=w.useState("activeIndex"),k=w.useState("payload"),_=w.useState("floatingParentNodeId"),z=d.useRef(null),X=_!=null;let H;w.useSyncedValues({disabled:i,modal:F.type===void 0?a:void 0,rootId:Ln()});const{openMethod:B,triggerProps:Q,reset:re}=ya(j);Qu(w);const{forceUnmount:le}=Zu(j,w,()=>{w.update({allowMouseEnter:!1,stickIfOpen:!0}),re()}),ue=d.useRef(F.type!=="context-menu"),J=it();d.useEffect(()=>{if(j||(z.current=null),F.type==="context-menu"){if(!j){J.clear(),ue.current=!1;return}J.start(500,()=>{ue.current=!0})}},[J,j,F.type]),va(j&&C&&O!==ot&&B!=="touch",N),ne(()=>{!j&&!P&&w.set("hoverEnabled",!0)},[j,P,w]);const ce=d.useRef(!0),V=it(),D=Z((q,Ae)=>{const De=Ae.reason;if(j===q&&Ae.trigger===M||(Ae.preventUnmountOnClose=()=>{w.set("preventUnmountingOnClose",!0)},!q&&Ae.trigger==null&&(Ae.trigger=M??void 0),r?.(q,Ae),Ae.isCanceled))return;const be={open:q,nativeEvent:Ae.event,reason:Ae.reason,nested:X};H?.emit("openchange",be);const Se=Ae.event;if(q===!1&&Se?.type==="click"&&Se.pointerType==="touch"&&!ce.current)return;if(!q&&L!==null){const We=w.context.itemDomElements.current[L];queueMicrotask(()=>{We?.setAttribute("tabindex","-1")})}q&&De===Hs?(ce.current=!1,V.start(300,()=>{ce.current=!0})):(ce.current=!0,V.clear());const Qe=(De===Mt||De===Bi)&&Se.detail===0&&Se?.isTrusted,ke=!q&&(De===ts||De==null);function It(){const We={open:q,openChangeReason:De};z.current=Ae.event??null;const Ue=Ae.trigger?.id??null;(Ue||q)&&(We.activeTriggerId=Ue,We.activeTriggerElement=Ae.trigger??null),w.update(We)}De===ot?nt.flushSync(It):It(),F.type==="menubar"&&(De===Hs||De===qt||De===ot||De===js||De===kr)?w.set("instantType","group"):Qe||ke?w.set("instantType",Qe?"click":"dismiss"):w.set("instantType",void 0)}),se=d.useCallback(q=>{const Ae=me(q);return Ae.preventUnmountOnClose=()=>{w.set("preventUnmountingOnClose",!0)},Ae},[w]),K=d.useCallback(()=>{w.setOpen(!1,se(Dc))},[w,se]);d.useImperativeHandle(f,()=>({unmount:le,close:K}),[le,K]);let ae;F.type==="context-menu"&&(ae=F.context),d.useImperativeHandle(ae?.positionerRef,()=>N,[N]),d.useImperativeHandle(ae?.actionsRef,()=>({setOpen:D}),[D]);const W=nd({popupStore:w,onOpenChange:D});H=W.context.events,d.useEffect(()=>{const q=({open:Ae,eventDetails:De})=>D(Ae,De);return H.on("setOpen",q),()=>{H?.off("setOpen",q)}},[H,D]);const U=pa(W,{enabled:!A,bubbles:p&&F.type==="menu",outsidePress(){return F.type!=="context-menu"||z.current?.type==="contextmenu"?!0:ue.current},externalTree:X?T:void 0}),Y=ad(W,{role:"menu"}),ve=hr(),xe=d.useCallback(q=>{w.select("activeIndex")!==q&&w.set("activeIndex",q)},[w]),Re=id(W,{enabled:!A,listRef:w.context.itemDomElements,activeIndex:L,nested:F.type!==void 0,loopFocus:l,orientation:u,parentOrientation:F.type==="menubar"?F.context.orientation:void 0,rtl:ve==="rtl",disabledIndices:Xt,onNavigate:xe,openOnArrowKeyDown:F.type!=="context-menu",externalTree:X?T:void 0,focusItemOnHover:b}),ee=d.useCallback(q=>{w.context.typingRef.current=q},[w]),fe=l0(W,{listRef:w.context.itemLabels,activeIndex:L,resetMs:Xp,onMatch:q=>{j&&q!==L&&w.set("activeIndex",q)},onTypingChange:ee}),{getReferenceProps:te,getFloatingProps:de,getItemProps:oe,getTriggerProps:Ee}=ls([U,Y,Re,fe]),Pe=d.useMemo(()=>{const q=oo(te(),{onMouseEnter(){w.set("hoverEnabled",!0)},onMouseMove(){w.set("allowMouseEnter",!0)}},Q);return delete q.role,q},[te,w,Q]),ye=d.useMemo(()=>{const q=Ee();if(!q)return q;const{role:Ae,["aria-controls"]:De,...be}=q;return be},[Ee]),je=pr(),_e=d.useMemo(()=>de({onMouseEnter(){F.type==="menu"&&je.request(()=>w.set("hoverEnabled",!1))},onMouseMove(){w.set("allowMouseEnter",!0)},onClick(){w.select("hoverEnabled")&&w.set("hoverEnabled",!1)},onKeyDown(q){const Ae=w.select("keyboardEventRelay");Ae&&!q.isPropagationStopped()&&Ae(q)}}),[de,F.type,je,w]),Be=d.useMemo(()=>oe(),[oe]);w.useSyncedValues({floatingRootContext:W,activeTriggerProps:Pe,inactiveTriggerProps:ye,popupProps:_e,itemProps:Be});const Ke=d.useMemo(()=>({store:w,parent:R}),[w,R]),Le=c.jsx(Pu.Provider,{value:Ke,children:typeof t=="function"?t({payload:k}):t});return F.type===void 0||F.type==="context-menu"?c.jsx(Lu,{externalTree:T,children:Le}):Le}function A0(e){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e,"::before"),r=window.getComputedStyle(e,"::after");if(!(n.content!=="none"||r.content!=="none"))return t;const o=parseFloat(n.width)||0,i=parseFloat(n.height)||0,a=parseFloat(r.width)||0,l=parseFloat(r.height)||0,u=Math.max(t.width,o,a),f=Math.max(t.height,i,l),p=u-t.width,g=f-t.height;return{left:t.left-p/2,right:t.right+p/2,top:t.top-g/2,bottom:t.bottom+g/2}}function F0(e={}){const{highlightItemOnHover:t,highlightedIndex:n,onHighlightedIndexChange:r}=Yi(),{ref:s,index:o}=sa(e),i=n===o,a=d.useRef(null),l=fn(s,a);return{compositeProps:d.useMemo(()=>({tabIndex:i?0:-1,onFocus(){r(o)},onMouseMove(){const f=a.current;if(!t||!f)return;const p=f.hasAttribute("disabled")||f.ariaDisabled==="true";!i&&!p&&f.focus()}}),[i,r,o,t]),compositeRef:l,index:o}}function L0(e){const{render:t,className:n,state:r=He,props:s=Xt,refs:o=Xt,metadata:i,stateAttributesMapping:a,tag:l="div",...u}=e,{compositeProps:f,compositeRef:p}=F0({metadata:i});return $e(l,e,{state:r,ref:[...o,p],props:[f,...s,u],stateAttributesMapping:a})}function Cd(e){if(ze(e)&&e.hasAttribute("data-rootownerid"))return e.getAttribute("data-rootownerid")??void 0;if(!Dt(e))return Cd(zt(e))}function D0(e){const{enabled:t=!0,mouseDownAction:n,open:r}=e,s=d.useRef(!1);return d.useMemo(()=>t?{onMouseDown:o=>{(n==="open"&&!r||n==="close"&&r)&&(s.current=!0,Qt(o.currentTarget).addEventListener("click",()=>{s.current=!1},{once:!0}))},onClick:o=>{s.current&&(s.current=!1,o.preventBaseUIHandler())}}:He,[t,n,r])}const Ts=2,Id=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,id:a,openOnHover:l,delay:u=100,closeDelay:f=0,handle:p,payload:g,...m}=t,y=Hn(!0),b=p?.store??y?.store;if(!b)throw new Error(qe(85));const v=Dn(a),x=b.useState("isTriggerActive",v),h=b.useState("floatingRootContext"),S=b.useState("isOpenedByTrigger",v),R=d.useRef(null),w=z0(),T=Yi(!0),E=bn(),I=d.useMemo(()=>E??new oa,[E]),j=ia(I),M=$t(),{registerTrigger:N,isMountedByThisTrigger:P}=Ku(v,R,b,{payload:g,closeDelay:f,parent:w,floatingTreeRoot:I,floatingNodeId:j,floatingParentNodeId:M,keyboardEventRelay:T?.relayKeyboardEvent}),C=b.useState("disabled"),A=o||C||w.type==="menubar"&&w.context.disabled,{getButtonProps:O,buttonRef:F}=gr({disabled:A,native:i});d.useEffect(()=>{!S&&w.type===void 0&&(b.context.allowMouseUpTriggerRef.current=!1)},[b,S,w.type]);const L=d.useRef(null),k=it(),_=Z(Y=>{if(!L.current)return;k.clear(),b.context.allowMouseUpTriggerRef.current=!1;const ve=Y.target;if(Oe(L.current,ve)||Oe(b.select("positionerElement"),ve)||ve===L.current||ve!=null&&Cd(ve)===b.select("rootId"))return;const xe=A0(L.current);Y.clientX>=xe.left-Ts&&Y.clientX<=xe.right+Ts&&Y.clientY>=xe.top-Ts&&Y.clientY<=xe.bottom+Ts||I.events.emit("close",{domEvent:Y,reason:sg})});d.useEffect(()=>{S&&b.select("lastOpenChangeReason")===ot&&Qt(L.current).addEventListener("mouseup",_,{once:!0})},[S,_,b]);const z=w.type==="menubar"&&w.context.hasSubmenuOpen,H=od(h,{enabled:(l??z??!1)&&!A&&w.type!=="context-menu"&&(w.type!=="menubar"||z&&!P),handleClose:ld({blockPointerEvents:w.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:w.type===void 0?u:void 0,delay:{close:f},triggerElementRef:R,externalTree:I,isActiveTrigger:x}),B=_0(S,b.select("lastOpenChangeReason")),Q=da(h,{enabled:!A&&w.type!=="context-menu",event:S&&w.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:w.type===void 0?B:!1}),re=Zx(h,{enabled:!A&&(w.type!=="menubar"&&S||z)}),le=D0({open:S,enabled:w.type==="menubar",mouseDownAction:"open"}),ue=ls([Q,re]),J=w.type==="menubar",ce=d.useMemo(()=>({disabled:A,open:S}),[A,S]),V=b.useState("triggerProps",P),D=[L,n,F,N,R],se=[ue.getReferenceProps(),H??He,V,{"aria-haspopup":"menu",id:v,onMouseDown:Y=>{if(b.select("open"))return;k.start(200,()=>{b.context.allowMouseUpTriggerRef.current=!0}),Qt(Y.currentTarget).addEventListener("mouseup",_,{once:!0})}},J?{role:"menuitem"}:{},le,m,O],K=d.useRef(null),ae=Z(Y=>{nt.flushSync(()=>{b.setOpen(!1,me(qt,Y.nativeEvent,Y.currentTarget))}),du(K.current)?.focus()}),W=Z(Y=>{const ve=b.select("positionerElement");if(ve&&jn(Y,ve))b.context.beforeContentFocusGuardRef.current?.focus();else{nt.flushSync(()=>{b.setOpen(!1,me(qt,Y.nativeEvent,Y.currentTarget))});let xe=uu(R.current);for(;xe!==null&&Oe(ve,xe)||xe?.hasAttribute("aria-hidden");){const Re=xe;if(xe=go(xe),xe===Re)break}xe?.focus()}}),U=$e("button",t,{enabled:!J,stateAttributesMapping:Qs,state:ce,ref:D,props:se});return J?c.jsx(L0,{tag:"button",render:r,className:s,state:ce,refs:D,props:se,stateAttributesMapping:Qs}):S?c.jsxs(d.Fragment,{children:[c.jsx(gn,{ref:K,onFocus:ae},`${v}-pre-focus-guard`),c.jsx(d.Fragment,{children:U},v),c.jsx(gn,{ref:b.context.triggerFocusTargetRef,onFocus:W},`${v}-post-focus-guard`)]}):c.jsx(d.Fragment,{children:U},v)});function _0(e,t){const n=it(),[r,s]=d.useState(!1);return ne(()=>{e&&t==="trigger-hover"?(s(!0),n.start(Ac,()=>{s(!1)})):e||(n.clear(),s(!1))},[e,t,n]),r}function z0(){const e=ho(!0),t=Hn(!0),n=Rd();return d.useMemo(()=>n?{type:"menubar",context:n}:e&&!t?{type:"context-menu",context:e}:{type:void 0},[e,t,n])}const V0={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-xs gap-1.5",lg:"px-3 py-1.5 text-sm gap-2"},H0={default:{bg:"rgba(255, 255, 255, 0.10)",bgActive:"rgba(255, 255, 255, 0.20)",border:"rgba(255, 255, 255, 0.15)",borderActive:"rgba(255, 255, 255, 0.30)",text:"text-slate-200",textActive:"text-white"},cyan:{bg:"rgba(6, 182, 212, 0.15)",bgActive:"rgba(6, 182, 212, 0.35)",border:"rgba(6, 182, 212, 0.25)",borderActive:"rgba(6, 182, 212, 0.50)",text:"text-cyan-300",textActive:"text-cyan-200"},purple:{bg:"rgba(139, 92, 246, 0.15)",bgActive:"rgba(139, 92, 246, 0.35)",border:"rgba(139, 92, 246, 0.25)",borderActive:"rgba(139, 92, 246, 0.50)",text:"text-purple-300",textActive:"text-purple-200"},pink:{bg:"rgba(236, 72, 153, 0.15)",bgActive:"rgba(236, 72, 153, 0.35)",border:"rgba(236, 72, 153, 0.25)",borderActive:"rgba(236, 72, 153, 0.50)",text:"text-pink-300",textActive:"text-pink-200"},green:{bg:"rgba(34, 197, 94, 0.15)",bgActive:"rgba(34, 197, 94, 0.35)",border:"rgba(34, 197, 94, 0.25)",borderActive:"rgba(34, 197, 94, 0.50)",text:"text-green-300",textActive:"text-green-200"},amber:{bg:"rgba(251, 191, 36, 0.15)",bgActive:"rgba(251, 191, 36, 0.35)",border:"rgba(251, 191, 36, 0.25)",borderActive:"rgba(251, 191, 36, 0.50)",text:"text-amber-300",textActive:"text-amber-200"}};function $0({children:e,count:t,active:n=!1,variant:r="cyan",size:s="md",onClick:o,removable:i=!1,onRemove:a,icon:l,delay:u=0}){const f=H0[r];return c.jsxs(he.span,{initial:{opacity:0,scale:.9,y:8},animate:{opacity:1,scale:1,y:0},whileTap:{scale:.95},transition:{delay:u*.03,...as},onClick:o,className:`
        inline-flex items-center rounded-full
        backdrop-blur-glass-xs
        ${V0[s]}
        ${n?f.textActive:f.text}
        ${o?"cursor-pointer hover:brightness-110":""}
        focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50
        select-none
        transition-[filter] duration-150
      `,style:{background:n?f.bgActive:f.bg,border:`1px solid ${n?f.borderActive:f.border}`,boxShadow:n?`0 4px 12px ${f.bg}, inset 0 1px 0 rgba(255,255,255,0.15)`:"0 2px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.08)"},children:[l&&c.jsx("span",{className:"flex-shrink-0",children:l}),c.jsx("span",{className:"truncate",children:e}),t!==void 0&&c.jsx("span",{className:"text-[10px] opacity-70 font-medium",children:t}),i&&a&&c.jsx(he.button,{onClick:p=>{p.stopPropagation(),a()},className:"p-0.5 -mr-1 rounded-full hover:bg-red-500/30 transition-colors",whileHover:{scale:1.2,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:s==="sm"?10:s==="md"?12:14,className:"text-red-400"})})]})}const Sa=mn(e=>({isOpen:!1,x:0,y:0,sections:[],show:(t,n,r)=>e({isOpen:!0,x:t,y:n,sections:r}),hide:()=>e({isOpen:!1,sections:[]})}));function B0(){const{isOpen:e,x:t,y:n,sections:r,hide:s}=Sa(),o=d.useRef(null),[i,a]=d.useState({x:0,y:0}),[l,u]=d.useState(-1),f=document.documentElement.classList.contains("light-mode");console.log("[GlassContextMenu] render - isOpen:",e,"x:",t,"y:",n,"sections:",r.length);const p=r.flatMap(b=>b.items.filter(v=>!v.disabled));d.useEffect(()=>{e&&a({x:t,y:n})},[e,t,n]),d.useEffect(()=>{if(!e||!o.current)return;const v=o.current.getBoundingClientRect(),x=8;let h=t,S=n;t+v.width>window.innerWidth-x&&(h=window.innerWidth-v.width-x),h<x&&(h=x),n+v.height>window.innerHeight-x&&(S=window.innerHeight-v.height-x),S<x&&(S=x),(h!==i.x||S!==i.y)&&a({x:h,y:S})},[e,t,n,i.x,i.y]),d.useEffect(()=>{if(!e)return;const b=setTimeout(()=>{const h=S=>{o.current&&!o.current.contains(S.target)&&s()};document.addEventListener("mousedown",h),window.__contextMenuCleanup=()=>{document.removeEventListener("mousedown",h)}},10),v=()=>s(),x=()=>s();return document.addEventListener("scroll",v,!0),window.addEventListener("resize",x),()=>{clearTimeout(b),window.__contextMenuCleanup&&(window.__contextMenuCleanup(),delete window.__contextMenuCleanup),document.removeEventListener("scroll",v,!0),window.removeEventListener("resize",x)}},[e,s]);const g=d.useCallback(b=>{if(e)switch(b.key){case"Escape":b.preventDefault(),s();break;case"ArrowDown":b.preventDefault(),u(v=>(v+1)%p.length);break;case"ArrowUp":b.preventDefault(),u(v=>(v-1+p.length)%p.length);break;case"Enter":b.preventDefault(),l>=0&&l<p.length&&(p[l].onClick(),s());break}},[e,s,p,l]);if(d.useEffect(()=>(document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)),[g]),d.useEffect(()=>{e&&u(-1)},[e]),!e)return null;let m=0;const y=f?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.75) 0%, rgba(248, 250, 252, 0.70) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(8, 145, 178, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(255, 255, 255, 0.5) inset"}:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.60) 0%, rgba(15, 23, 42, 0.50) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(6, 182, 212, 0.25)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05) inset"};return nt.createPortal(c.jsx(un,{children:e&&c.jsxs(he.div,{ref:o,initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},transition:{duration:.15,ease:"easeOut"},className:"fixed z-[9999] min-w-[200px] py-2 rounded-xl overflow-hidden",style:{left:i.x,top:i.y,...y},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:f?"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.8) 50%, transparent 100%)":"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%)"}}),r.map((b,v)=>c.jsxs("div",{children:[v>0&&c.jsx("div",{className:"my-1.5 mx-3 h-px bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent"}),b.items.map(x=>{const S=m++===l;return c.jsxs(he.button,{onClick:()=>{x.disabled||(x.onClick(),s())},disabled:x.disabled,className:`
                      w-full px-3 py-2 flex items-center gap-3 text-left text-sm transition-colors
                      ${x.disabled?"opacity-40 cursor-not-allowed":f?"cursor-pointer hover:bg-cyan-500/10":"cursor-pointer hover:bg-white/10"}
                      ${x.danger?"text-red-500 hover:text-red-600":f?"text-slate-700":"text-slate-200"}
                      ${S?"bg-cyan-500/20":""}
                    `,whileHover:x.disabled?void 0:{x:2},children:[x.icon&&c.jsx("span",{className:`w-4 h-4 flex items-center justify-center ${x.danger?"text-red-500":"text-cyan-500"}`,children:x.icon}),c.jsx("span",{className:"flex-1",children:x.label}),x.shortcut&&c.jsx("span",{className:`text-xs font-mono ${f?"text-slate-400":"text-slate-500"}`,children:x.shortcut})]},x.id)})]},v))]})}),document.body)}function ln({className:e="",animate:t=!0}){return c.jsx("div",{className:`
        relative overflow-hidden rounded-lg
        bg-gradient-to-r from-slate-800/50 via-slate-700/50 to-slate-800/50
        ${e}
      `,children:t&&c.jsx(he.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"}})})}function W0({size:e=200}){return c.jsxs("div",{className:"rounded-xl overflow-hidden bg-gradient-to-br from-slate-900/80 to-slate-900/60 border border-cyan-500/10",style:{height:e},children:[c.jsx(ln,{className:"h-[70%] rounded-none"}),c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsx(ln,{className:"h-3 w-3/4"}),c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((t,n)=>c.jsx(ln,{className:"h-3 w-3 rounded-full"},n))})]})]})}function U0({size:e=200}){return c.jsxs("div",{className:"rounded-xl overflow-hidden bg-gradient-to-br from-slate-900/80 to-slate-900/60 border border-cyan-500/10",style:{height:e},children:[c.jsx("div",{className:"h-[70%] flex items-center justify-center",children:c.jsx(ln,{className:"w-14 h-14 rounded-xl"})}),c.jsxs("div",{className:"p-3 space-y-1",children:[c.jsx(ln,{className:"h-3 w-2/3"}),c.jsx(ln,{className:"h-2 w-1/3"})]})]})}function Y0({count:e=12,itemSize:t=200}){return c.jsx("div",{className:"grid gap-5",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${t}px, 1fr))`},children:[...Array(e)].map((n,r)=>c.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.05,duration:.3},children:r%4===0?c.jsx(U0,{size:t}):c.jsx(W0,{size:t})},r))})}function X0(){const{t:e}=Nt(),{drives:t,favorites:n,expandedPaths:r,folderCache:s,loadingPaths:o,sidebarWidth:i,isLoadingDrives:a,setSidebarWidth:l,loadDrives:u,toggleFolder:f,removeFavorite:p}=ih(),g=ta(),m=bu(),y=Km(),b=eh(),[v,x]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{u()},[u]);const S=d.useCallback(R=>{R.preventDefault(),x(!0);const w=R.clientX,T=i,E=j=>{const M=j.clientX-w,N=Math.min(Hm,Math.max(Vm,T+M));l(N)},I=()=>{x(!1),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",I)},[i,l]);return c.jsxs("aside",{ref:h,className:"h-full flex flex-col glass-sidebar relative",style:{width:i},"data-testid":"sidebar",children:[c.jsx("div",{onMouseDown:S,className:`absolute right-0 top-0 bottom-0 w-1 cursor-ew-resize group hover:bg-cyan-500/30 transition-colors z-10 ${v?"bg-cyan-500/40":""}`,children:c.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-full bg-[var(--glass-border)] group-hover:bg-cyan-500/50 transition-colors"})}),c.jsxs("div",{className:"p-2 m-2 mb-0 flex-shrink-0 glass-section",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(nr,{size:14,className:"text-cyan-400"}),c.jsx("h3",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("sidebar.favorites")})]}),c.jsx(wt,{onClick:b,disabled:!g,title:e("sidebar.favorites"),size:"xs",variant:"ghost",children:c.jsx(tp,{size:14})})]}),c.jsxs("ul",{"aria-label":e("sidebar.favorites"),className:"space-y-0.5",children:[n.map(R=>c.jsx(G0,{path:R.path,name:R.name,isActive:g===R.path,onSelect:y,onRemove:p},R.path)),n.length===0&&c.jsx("li",{className:"px-2 py-2 text-xs text-[var(--color-text-muted)] italic",children:e("sidebar.noFavorites")})]})]}),c.jsxs(fu,{className:"flex-1 overflow-hidden",children:[c.jsx(pu,{className:"h-full w-full p-2",children:c.jsxs("div",{className:"glass-section p-2 flex-1",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[c.jsx(np,{size:14,className:"text-cyan-400"}),c.jsx("h3",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("sidebar.recentFolders")})]}),c.jsx("ul",{role:"tree","aria-label":e("sidebar.recentFolders"),className:"space-y-0.5",children:a?c.jsx("div",{className:"space-y-1.5 px-2 py-1",children:[...Array(4)].map((R,w)=>c.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:w*.08,duration:.3},className:"flex items-center gap-2",children:[c.jsx(ln,{className:"w-4 h-4 rounded"}),c.jsx(ln,{className:`h-3 rounded ${w%2===0?"w-3/4":"w-1/2"}`})]},w))}):t.map(R=>c.jsx(Td,{item:R,level:0,currentFolder:g,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:f,onSelect:m},R.path))})]})}),c.jsx(mu,{orientation:"vertical",className:"w-2 p-0.5 flex touch-none select-none transition-colors bg-transparent hover:bg-white/5",children:c.jsx(hu,{className:"flex-1 rounded-full bg-cyan-500/30 hover:bg-cyan-500/50 transition-colors"})})]})]})}function G0({path:e,name:t,isActive:n,onSelect:r,onRemove:s}){return c.jsxs(he.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},whileHover:{x:4},transition:{type:"spring",damping:25,stiffness:400},className:`
        group flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer text-sm
        transition-colors duration-150
        ${n?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] hover:text-[var(--color-text-primary)] border border-transparent"}
      `,onClick:()=>r(e),children:[c.jsx(he.div,{whileHover:{scale:1.2,rotate:15},children:c.jsx(nr,{size:16,className:"text-cyan-400 flex-shrink-0",fill:"currentColor"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"truncate font-medium",children:t}),c.jsx("div",{className:"truncate text-xs text-[var(--color-text-muted)]",children:e})]}),c.jsx(he.button,{onClick:o=>{o.stopPropagation(),s(e)},className:"opacity-0 group-hover:opacity-100 p-1 rounded-lg hover:bg-red-500/20 text-[var(--color-text-secondary)] hover:text-red-400 transition-all",title:"Remove from favorites",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:14})})]})}function Td({item:e,level:t,currentFolder:n,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:i,onSelect:a}){const l=d.useRef(null),u=r.has(e.path),f=o.has(e.path),p=n===e.path,g=s.get(e.path)||[],m=e.driveType!==void 0&&e.driveType!=="";d.useEffect(()=>{if(p&&l.current){const x=setTimeout(()=>{l.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},300);return()=>clearTimeout(x)}},[p]);const y=()=>{const x={size:16,className:"flex-shrink-0",strokeWidth:2};return m?c.jsx(he.div,{whileHover:{scale:1.15,rotateY:15},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.4))"},children:c.jsx($r,{...x,className:"text-cyan-400 flex-shrink-0"})}):u?c.jsx(he.div,{animate:{rotateY:[0,10,0]},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.4))"},children:c.jsx(rr,{...x,className:"text-cyan-400 flex-shrink-0"})}):p?c.jsx(he.div,{animate:{scale:[1,1.1,1]},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d",filter:"drop-shadow(0 2px 4px rgba(6,182,212,0.5))"},children:c.jsx(rr,{...x,className:"text-cyan-300 flex-shrink-0"})}):c.jsx(he.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:25},style:{transformStyle:"preserve-3d"},children:c.jsx(sp,{...x,className:"text-[var(--color-text-secondary)] flex-shrink-0"})})},b=async x=>{x.stopPropagation(),e.hasSubfolders&&await i(e.path)},v=async()=>{await a(e.path)};return c.jsx(gg,{open:u,children:c.jsxs("li",{role:"treeitem","aria-expanded":e.hasSubfolders?u:void 0,"aria-selected":p,"aria-level":t+1,"aria-label":e.name,children:[c.jsxs(he.div,{ref:l,whileHover:{x:3},transition:{type:"spring",damping:25,stiffness:400},tabIndex:0,className:`
            flex items-center gap-1 py-1.5 px-2 rounded-lg cursor-pointer text-sm
            transition-colors duration-150 outline-none
            focus-visible:ring-2 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent
            ${p?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] hover:text-[var(--color-text-primary)] border border-transparent"}
          `,style:{paddingLeft:`calc(var(--sidebar-indent-base) + ${t} * var(--sidebar-indent-step))`},onClick:v,onKeyDown:x=>{x.key==="Enter"||x.key===" "?(x.preventDefault(),v()):(x.key==="ArrowRight"&&e.hasSubfolders&&!u||x.key==="ArrowLeft"&&u)&&(x.preventDefault(),i(e.path))},children:[c.jsx(he.button,{onClick:b,className:"w-4 h-4 flex items-center justify-center flex-shrink-0",whileHover:{scale:1.2},whileTap:{scale:.9},children:f?c.jsx(rp,{size:12,className:"text-[var(--color-text-secondary)] animate-spin"}):e.hasSubfolders?c.jsx(he.div,{animate:{rotateZ:u?0:-90},transition:{duration:.2},children:c.jsx(zi,{size:14,className:"text-[var(--color-text-secondary)]"})}):c.jsx("span",{className:"w-3"})}),y(),c.jsx("span",{className:"flex-1 truncate",children:e.name})]}),g.length>0&&c.jsx(Mg,{className:"overflow-hidden transition-all duration-200 data-[ending-style]:h-0 data-[ending-style]:opacity-0 data-[starting-style]:h-0 data-[starting-style]:opacity-0",children:c.jsx("ul",{role:"group",children:g.map(x=>c.jsx(Td,{item:x,level:t+1,currentFolder:n,expandedPaths:r,folderCache:s,loadingPaths:o,onToggle:i,onSelect:a},x.path))})})]})})}const Pd=mn((e,t)=>({isOpen:!1,currentImage:null,currentIndex:0,images:[],zoomLevel:Tn,open:(n,r)=>{const s=r.findIndex(o=>o.path===n.path);e({isOpen:!0,currentImage:n,currentIndex:s>=0?s:0,images:r,zoomLevel:Tn})},close:()=>{e({isOpen:!1,currentImage:null,zoomLevel:Tn})},next:()=>{const{images:n,currentIndex:r}=t();if(n.length===0)return;const s=(r+1)%n.length;e({currentIndex:s,currentImage:n[s],zoomLevel:Tn})},previous:()=>{const{images:n,currentIndex:r}=t();if(n.length===0)return;const s=r===0?n.length-1:r-1;e({currentIndex:s,currentImage:n[s],zoomLevel:Tn})},goToIndex:n=>{const{images:r}=t();n>=0&&n<r.length&&e({currentIndex:n,currentImage:r[n],zoomLevel:Tn})},setZoom:n=>{e({zoomLevel:Math.max(bl,Math.min(vl,n))})},zoomIn:()=>{const{zoomLevel:n}=t();e({zoomLevel:Math.min(vl,n+yl)})},zoomOut:()=>{const{zoomLevel:n}=t();e({zoomLevel:Math.max(bl,n-yl)})},resetZoom:()=>{e({zoomLevel:Tn})}})),Gt=mn(e=>({toasts:[],addToast:(t,n,r=Um)=>{const s=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e(o=>({toasts:[...o.toasts,{id:s,type:t,message:n,duration:r}]})),r>0&&setTimeout(()=>{e(o=>({toasts:o.toasts.filter(i=>i.id!==s)}))},r)},removeToast:t=>{e(n=>({toasts:n.toasts.filter(r=>r.id!==t)}))},success:t=>{const{addToast:n}=Gt.getState();n("success",t)},error:t=>{const{addToast:n}=Gt.getState();n("error",t,Ym)},info:t=>{const{addToast:n}=Gt.getState();n("info",t)},warning:t=>{const{addToast:n}=Gt.getState();n("warning",t,Xm)}}));function q0({thumbnail:e,thumbnailUrl:t,fileName:n,isLoading:r,thumbnailSize:s,onThumbnailError:o}){const i=e?`data:image/jpeg;base64,${e}`:t||null;return c.jsxs("div",{className:"bg-[var(--glass-bg)] relative overflow-hidden",style:{height:s?`${s}px`:void 0,aspectRatio:s?void 0:"1/1"},children:[r&&c.jsx("div",{className:"absolute inset-0 bg-[var(--glass-bg-hover)] animate-pulse"}),!r&&i&&c.jsx("div",{className:"absolute inset-0 scale-110 blur-xl opacity-50 saturate-150",style:{backgroundImage:`url(${i})`,backgroundSize:"cover",backgroundPosition:"center"}}),r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:c.jsx(_i,{size:"md",color:"secondary"})}),!r&&t?c.jsx("img",{src:t,alt:n,className:"relative z-[1] w-full h-full object-contain transition-opacity duration-300",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"},loading:"lazy",onError:o}):!r&&e?c.jsx("img",{src:`data:image/jpeg;base64,${e}`,alt:n,className:"relative z-[1] w-full h-full object-contain transition-opacity duration-300",style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}}):!r&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(so,{size:32,className:"text-[var(--color-text-muted)]"})})]})}function K0({rating:e,isSaving:t,onRate:n,onClear:r}){const[s,o]=d.useState(0),[i,a]=d.useState(null),l=(u,f)=>{a(f),setTimeout(()=>a(null),600),n(u,f)};return c.jsxs("div",{className:"flex items-center justify-center gap-0.5 flex-shrink-0",onMouseLeave:()=>o(0),children:[[0,1,2,3,4].map(u=>{const f=u<(s||e),p=i===u;return c.jsxs(he.button,{onClick:g=>l(g,u),onMouseEnter:()=>o(u+1),className:"p-1 transition-all relative",whileHover:{scale:1.2,y:-1},whileTap:{scale:.9},style:{filter:f?"drop-shadow(0 1px 2px rgba(6,182,212,0.5))":"none"},children:[c.jsx(nr,{size:16,"data-testid":"star-icon",className:f?"text-cyan-400":"text-white/40",fill:f?"currentColor":"none",strokeWidth:2}),p&&c.jsx(c.Fragment,{children:[0,1,2,3].map(g=>c.jsx(he.span,{className:"absolute w-1 h-1 rounded-full bg-cyan-400",initial:{opacity:1,scale:1,x:0,y:0},animate:{opacity:0,scale:0,x:[0,g===0?-12:g===1?12:0],y:[0,g===0||g===1?-6:g===2?-12:8]},transition:{duration:.5,ease:"easeOut"},style:{left:"50%",top:"50%",boxShadow:"0 0 4px 2px rgba(6,182,212,0.6)"}},g))})]},u)}),e>0&&c.jsx(he.button,{onClick:r,disabled:t,className:"ml-1 p-1 rounded hover:bg-white/10 text-white/40 hover:text-red-400 transition-colors disabled:opacity-50",title:"Rating lschen",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:c.jsx(dn,{size:12})})]})}const Ra=mn((e,t)=>({items:[],operation:null,copy:n=>e({items:n,operation:"copy"}),cut:n=>e({items:n,operation:"cut"}),paste:async n=>{const{items:r,operation:s,clear:o}=t();if(!r.length||!s)return;const i=r.map(a=>a.path);try{s==="copy"?await et.copyFiles(i,n):(await et.moveFiles(i,n),o())}catch(a){throw Me.getState().setError(a.message),a}},clear:()=>e({items:[],operation:null}),hasItems:()=>t().items.length>0})),Ea=mn(e=>({type:null,data:null,openModal:(t,n)=>e({type:t,data:n}),closeModal:()=>e({type:null,data:null})}));function Q0({image:e,allImages:t}){const{selectedImages:n,selectImage:r,images:s}=Me(),{open:o}=Pd(),{show:i}=Sa(),{copy:a,cut:l}=Ra(),{openModal:u}=Ea(),f=n.has(e.path);return d.useCallback(g=>{g.preventDefault(),g.stopPropagation(),f||r(e.path,!1,!1);const m=f?Array.from(n):[e.path],y=m.length>1,b=t.length>0?t:s,v=[{items:[{id:"copy",label:"Kopieren",icon:d.createElement(yc,{size:14}),shortcut:"Strg+C",onClick:()=>a(m.map(x=>({path:x,isFolder:!1})))},{id:"cut",label:"Ausschneiden",icon:d.createElement(wc,{size:14}),shortcut:"Strg+X",onClick:()=>l(m.map(x=>({path:x,isFolder:!1})))}]},{items:[{id:"rename",label:"Umbenennen",icon:d.createElement(Sc,{size:14}),shortcut:"F2",disabled:y,onClick:()=>u("rename",{path:e.path,name:e.fileName,isFolder:!1})},{id:"delete",label:"Lschen",icon:d.createElement(Rc,{size:14}),shortcut:"Entf",danger:!0,onClick:()=>u("deleteConfirm",{paths:m})}]},{items:[{id:"lightbox",label:"In Lightbox ffnen",icon:d.createElement(op,{size:14}),disabled:y,onClick:()=>o(e,b)},{id:"explorer",label:"Im Explorer ffnen",icon:d.createElement(rr,{size:14}),disabled:y,onClick:()=>et.openInExplorer(e.path)},{id:"properties",label:"Eigenschaften",icon:d.createElement(Vi,{size:14}),shortcut:"Alt+Enter",disabled:y,onClick:()=>u("properties",{path:e.path})}]}];i(g.clientX,g.clientY,v)},[e,f,n,t,s,r,a,l,u,o,i])}const Z0=30,Wl=50,J0=500,Ft=new Map,Zn=new Set,Jn=new Set,Ei=new Set;let Ci=null;function Ul(){Ei.forEach(e=>e())}function Od(e,t){for(Ft.has(e)&&Ft.delete(e),Ft.set(e,t);Ft.size>J0;){const n=Ft.keys().next().value;n!==void 0&&Ft.delete(n)}}async function eb(e){e.forEach(t=>Jn.add(t)),Ul();try{const t=await et.getThumbnailsBatch(e);for(const n of e)Od(n,t[n]??null),Jn.delete(n)}catch(t){console.error("[ThumbnailManager] Batch failed:",t),e.forEach(n=>Jn.delete(n))}Ul()}function tb(){if(Ci=null,Zn.size===0)return;const e=Array.from(Zn);Zn.clear();for(let t=0;t<e.length;t+=Wl){const n=e.slice(t,t+Wl);eb(n)}}function nb(){Ci===null&&(Ci=setTimeout(tb,Z0))}function Yl(e){Ft.has(e)||Zn.has(e)||Jn.has(e)||(Zn.add(e),nb())}function rb(e){return Ei.add(e),()=>{Ei.delete(e)}}function sb(e,t){t&&!Ft.has(e)&&Od(e,t),d.useSyncExternalStore(rb,()=>{const s=Ft.has(e)?"y":"n",o=Jn.has(e)?"y":"n";return`${s}-${o}`});const n=Ft.get(e)??null,r=Jn.has(e)||Zn.has(e);return[n,r]}const ob=d.memo(function({image:t,thumbnailSize:n,allImages:r=[],isSelected:s}){const{t:o}=Nt(),i=Me(I=>I.selectImage),a=Me(I=>I.updateImageRating),l=Me(I=>I.images),u=Pd(I=>I.open),[f,p]=sb(t.path,t.thumbnailBase64),[g,m]=d.useState(t.rating||0),[y,b]=d.useState(!1),v=Me(I=>s===void 0?I.selectedImages:null),x=s??v?.has(t.path)??!1,h=t.tags?.length||0,S=Q0({image:t,allImages:r});d.useEffect(()=>{m(t.rating||0)},[t.rating]),d.useEffect(()=>{Yl(t.path)},[t.path]);const R=I=>{i(t.path,I.ctrlKey||I.metaKey,I.shiftKey)},w=I=>{I.preventDefault(),I.stopPropagation();const j=r.length>0?r:l;u(t,j)},T=async(I,j)=>{I.stopPropagation();const M=j+1;m(M),b(!0);try{await a(t.path,M),Gt.getState().success(`${o("imageCard.ratingSet")} ${"".repeat(M)}${"".repeat(5-M)}`)}catch(N){console.error("Failed to save rating:",N),m(t.rating||0),Gt.getState().error(o("imageCard.ratingFailed"))}finally{b(!1)}},E=async I=>{I.stopPropagation(),m(0),b(!0);try{await a(t.path,0)}catch(j){console.error("Failed to clear rating:",j),m(t.rating||0)}finally{b(!1)}};return c.jsx("div",{onClick:R,onDoubleClick:w,onContextMenu:S,tabIndex:0,role:"gridcell","aria-selected":x,"aria-label":`${t.fileName}${h>0?`, ${h} tags`:""}${g>0?`, ${g} stars`:""}`,onKeyDown:I=>{if(I.key==="Enter"){I.preventDefault();const j=r.length>0?r:l;u(t,j)}else I.key===" "&&(I.preventDefault(),i(t.path,I.ctrlKey||I.metaKey,I.shiftKey))},className:`
        relative group cursor-pointer rounded-xl overflow-hidden w-full h-full
        transition-transform duration-200 ease-out outline-none
        hover:scale-[1.03] hover:-translate-y-1
        active:scale-[0.98]
        focus-visible:ring-2 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--color-bg-primary)]
        ${x?"ring-2 ring-cyan-400/70 ring-offset-2 ring-offset-[var(--color-bg-primary)]":""}
      `,style:{boxShadow:x?"0 8px 32px rgba(6,182,212,0.35), 0 0 0 1px rgba(6,182,212,0.3)":"0 4px 16px rgba(0,0,0,0.2)"},children:c.jsxs(Xf,{isFooterBlurred:!0,className:"relative rounded-xl overflow-hidden border-none bg-[var(--glass-bg)] w-full h-full",children:[c.jsx(q0,{thumbnail:f,thumbnailUrl:t.thumbnailUrl,fileName:t.fileName,isLoading:p,thumbnailSize:n,onThumbnailError:()=>{f||Yl(t.path)}}),c.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{bottom:"auto",height:n?`${n}px`:"100%"},children:[h>0&&c.jsxs("div",{className:"absolute top-3 left-3 z-20 px-2.5 py-1 rounded-full bg-cyan-500/95 text-white text-xs font-bold flex items-center gap-1.5 shadow-depth-near",style:{boxShadow:"0 4px 12px rgba(6,182,212,0.4), inset 0 1px 0 rgba(255,255,255,0.3)"},children:[c.jsx(sr,{size:11}),h]}),c.jsx("div",{className:"absolute top-3 right-3 z-20 w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center transition-all duration-200",style:{opacity:x?1:0,transform:`scale(${x?1:.5}) rotate(${x?0:-180}deg)`,boxShadow:"0 6px 20px rgba(6,182,212,0.5), inset 0 1px 0 rgba(255,255,255,0.4)"},children:c.jsx(Mr,{size:16,className:"text-white",strokeWidth:3})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[var(--glass-bg)] via-[var(--glass-bg)]/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),c.jsxs(Gf,{className:"flex-col items-center gap-0 before:bg-white/10 border-white/20 border-1 overflow-hidden py-1.5 px-3 absolute before:rounded-xl rounded-large bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-10 transition-all duration-200",children:[c.jsx("p",{className:"w-full text-xs text-white/90 font-medium truncate text-center max-h-0 opacity-0 group-hover:max-h-8 group-hover:opacity-100 group-hover:mb-1 transition-all duration-200 overflow-hidden",children:t.fileName}),c.jsx(K0,{rating:g,isSaving:y,onRate:T,onClear:E})]})]})})},(e,t)=>e.image.path===t.image.path&&e.image.rating===t.image.rating&&e.isSelected===t.isSelected&&e.thumbnailSize===t.thumbnailSize&&e.image.tags?.length===t.image.tags?.length&&e.image.tags?.join(",")===t.image.tags?.join(","));function ib({item:e}){const{navigateToFolder:t}=Me(),{show:n}=Sa(),{copy:r,cut:s}=Ra(),{openModal:o}=Ea(),i=l=>{l.preventDefault(),l.stopPropagation(),t(e.path)},a=l=>{l.preventDefault(),l.stopPropagation();const u=[{items:[{id:"copy",label:"Kopieren",icon:c.jsx(yc,{size:14}),shortcut:"Strg+C",onClick:()=>r([{path:e.path,isFolder:!0}])},{id:"cut",label:"Ausschneiden",icon:c.jsx(wc,{size:14}),shortcut:"Strg+X",onClick:()=>s([{path:e.path,isFolder:!0}])}]},{items:[{id:"rename",label:"Umbenennen",icon:c.jsx(Sc,{size:14}),shortcut:"F2",onClick:()=>o("rename",{path:e.path,name:e.name,isFolder:!0})},{id:"delete",label:"Lschen",icon:c.jsx(Rc,{size:14}),shortcut:"Entf",danger:!0,onClick:()=>o("deleteConfirm",{paths:[e.path]})}]},{items:[{id:"explorer",label:"Im Explorer ffnen",icon:c.jsx(rr,{size:14}),onClick:()=>et.openInExplorer(e.path)},{id:"properties",label:"Eigenschaften",icon:c.jsx(Vi,{size:14}),shortcut:"Alt+Enter",onClick:()=>o("properties",{path:e.path})}]}];n(l.clientX,l.clientY,u)};return c.jsx(he.div,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onDoubleClick:i,onContextMenu:a,className:"relative group cursor-pointer rounded-xl overflow-hidden w-full h-full",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.2)"},children:c.jsxs("div",{className:"relative rounded-xl overflow-hidden backdrop-blur-glass-sm flex flex-col h-full",style:{background:"var(--glass-bg)",border:"1px solid rgba(6, 182, 212, 0.15)"},children:[c.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[var(--glass-bg)] relative overflow-hidden group-hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 blur-3xl rounded-full scale-50 group-hover:scale-100 transition-transform duration-500"}),c.jsx(Xa,{size:64,className:"text-cyan-400 drop-shadow-lg relative z-10 group-hover:text-cyan-300 transition-colors",strokeWidth:1.5,fill:"rgba(34, 211, 238, 0.1)"})]}),c.jsxs("div",{className:"p-3 relative bg-[var(--glass-bg)] border-t border-[var(--glass-border)]",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent"}),c.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-primary)] truncate mb-1.5",title:e.name,children:e.name}),c.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-[var(--color-text-muted)] h-4",children:[(e.subfolderCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.subfolderCount} Ordner`,children:[c.jsx(Xa,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.subfolderCount})]}),(e.imageCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.imageCount} Bilder`,children:[c.jsx(so,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.imageCount})]}),(e.videoCount??0)>0&&c.jsxs("div",{className:"flex items-center gap-1",title:`${e.videoCount} Videos`,children:[c.jsx(ip,{size:10,className:"text-[var(--color-text-muted)]"}),c.jsx("span",{children:e.videoCount})]}),e.subfolderCount===0&&e.imageCount===0&&e.videoCount===0&&c.jsx("span",{className:"opacity-50",children:"Leer"})]})]})]})})}function ab({type:e,onAction:t}){const{t:n}=Nt(),s={"no-results":{icon:c.jsx(lp,{className:"w-16 h-16"}),iconClass:"text-cyan-400/50",title:n("emptyState.noResults"),subtitle:n("emptyState.noResultsHint"),actionLabel:n("emptyState.resetFilters")},"empty-folder":{icon:c.jsx(rr,{className:"w-16 h-16"}),iconClass:"text-cyan-400/40",title:n("emptyState.folderEmpty"),subtitle:n("emptyState.noImages"),actionLabel:void 0},"no-tags":{icon:c.jsx(ap,{className:"w-16 h-16"}),iconClass:"text-cyan-400/40",title:n("emptyState.noTags"),subtitle:n("emptyState.noTagsHint"),actionLabel:n("emptyState.openTagManager")}}[e];return c.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"flex flex-col items-center justify-center h-full p-8",children:[c.jsxs("div",{className:"relative",children:[c.jsx(he.div,{className:"absolute inset-0 bg-cyan-500/20 rounded-full blur-3xl",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{width:"150%",height:"150%",left:"-25%",top:"-25%"}}),c.jsx(he.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(6,182,212,0.15) 0%, transparent 70%)",width:"200%",height:"200%",left:"-50%",top:"-50%"},animate:{scale:[.8,1.1,.8],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:.5}}),c.jsx(he.div,{className:`relative p-8 rounded-2xl backdrop-blur-sm border border-cyan-500/10 ${s.iconClass}`,style:{background:"linear-gradient(135deg, rgba(6,182,212,0.08) 0%, rgba(6,182,212,0.02) 100%)",boxShadow:"0 8px 32px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.05)"},whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},children:s.icon})]}),c.jsx(he.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.3},className:"mt-8 text-xl font-medium text-slate-200",children:s.title}),c.jsx(he.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25,duration:.3},className:"mt-2 text-sm text-slate-400 text-center max-w-xs",children:s.subtitle}),s.actionLabel&&t&&c.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35,duration:.3},className:"mt-6",children:c.jsx(Eu,{onClick:t,variant:"accent",size:"sm",children:s.actionLabel})})]})}const Md=10,Ca=Md/2,kd=d.forwardRef(({style:e,children:t,...n},r)=>c.jsx("div",{ref:r,...n,style:{display:"flex",flexWrap:"wrap",margin:`-${Ca}px`,...e},children:t}));kd.displayName="GridList";function lb({children:e,...t}){return c.jsx("div",{...t,style:{width:"var(--col-width)",padding:`${Ca}px`,display:"flex",flex:"none",alignContent:"stretch",boxSizing:"border-box"},children:e})}function cb({height:e,width:t}){return c.jsx("div",{style:{width:t,height:e,padding:`${Ca}px`,display:"flex",flex:"none",alignContent:"stretch",boxSizing:"border-box"},children:c.jsx("div",{className:"w-full rounded-xl overflow-hidden",style:{flex:1,aspectRatio:"1/1",background:"var(--glass-bg)",border:"1px solid rgba(6, 182, 212, 0.15)"},children:c.jsx("div",{className:"w-full h-full animate-pulse bg-cyan-500/5"})})})}const ub={List:kd,Item:lb,ScrollSeekPlaceholder:cb};function db(){const{t:e}=Nt(),t=vu(),n=ta(),r=xu(),s=os(),o=nh(),i=yu(),a=is(),{searchQuery:l,sortBy:u,sortOrder:f,filterRating:p,filterTags:g,setSearchQuery:m,setFilterRating:y,setFilterTags:b}=wu(),v=d.useRef(null),[x,h]=d.useState(0);d.useEffect(()=>{const N=v.current;if(!N)return;const P=new ResizeObserver(([C])=>{const A=C.contentBoxSize?.[0]?.inlineSize??C.contentRect.width;h(A)});return P.observe(N),()=>P.disconnect()},[]);const S=d.useMemo(()=>Math.round(200*(o/100)),[o]),{colWidthPercent:R}=d.useMemo(()=>x===0?{colWidthPercent:"100%"}:{colWidthPercent:`${100/Math.max(1,Math.floor(x/(S+Md)))}%`},[x,S]),w=d.useMemo(()=>n?n.replace(/\\/g,"/").split("/").filter(Boolean).length>1:!1,[n]),T=d.useMemo(()=>new Set(g),[g]),E=d.useMemo(()=>{let N=[...t];if(l||p!==null||T.size>0){const F=l?l.toLowerCase():"";N=N.filter(L=>{if(L.isFolder)return p!==null||T.size>0?!1:F?L.name.toLowerCase().includes(F):!0;{const k=L.imageData;if(!k)return!1;if(F){const _=(k.fileName||"").toLowerCase().includes(F),z=(k.tags||[]).some(X=>X.toLowerCase().includes(F));if(!_&&!z)return!1}return!(p!==null&&(k.rating||0)!==p||T.size>0&&!(k.tags||[]).some(z=>T.has(z)))}})}const P=N.filter(F=>F.isFolder),C=N.filter(F=>!F.isFolder),A=[...P].sort((F,L)=>(F.name||"").localeCompare(L.name||"")),O=[...C].sort((F,L)=>{const k=F.imageData,_=L.imageData;if(!k||!_)return 0;let z=0;switch(u){case"name":z=(k.fileName||"").localeCompare(_.fileName||"");break;case"date":z=new Date(k.dateModified||0).getTime()-new Date(_.dateModified||0).getTime();break;case"size":z=(k.fileSize||0)-(_.fileSize||0);break;case"rating":z=(k.rating||0)-(_.rating||0);break}return f==="asc"?z:-z});return[...A,...O]},[t,l,u,f,p,T]),I=d.useMemo(()=>{const N=[];w&&N.push({type:"navigate-up"});for(const P of E)if(P.isFolder)N.push({type:"folder",item:P});else{const C=P.imageData;if(!C)continue;const A=C.tags||[],O=T.size>0&&A.some(L=>T.has(L)),F=T.size>0&&!O;N.push({type:"image",item:P,isHighlighted:O,isDimmed:F})}return N},[w,E,T]),j=d.useCallback(()=>{m(""),y(null),b([])},[m,y,b]),M=d.useCallback(N=>{const P=I[N];if(!P)return null;const C={display:"flex",flex:1,aspectRatio:"1/1",overflow:"hidden",borderRadius:"0.75rem"};switch(P.type){case"navigate-up":return c.jsx(he.div,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onDoubleClick:()=>r(),className:"relative group cursor-pointer shadow-lg",style:C,children:c.jsxs("div",{className:"relative flex flex-col w-full h-full backdrop-blur-glass-sm bg-[var(--glass-bg)] border border-cyan-500/15 rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[var(--glass-bg)] relative overflow-hidden group-hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 blur-3xl rounded-full scale-50 group-hover:scale-100 transition-transform duration-500"}),c.jsx(cp,{size:56,className:"text-cyan-400 drop-shadow-lg relative z-10 group-hover:text-cyan-300 transition-colors",strokeWidth:1.5})]}),c.jsxs("div",{className:"p-3 relative bg-[var(--glass-bg)] border-t border-[var(--glass-border)]",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent"}),c.jsx("h3",{className:"text-sm font-medium text-[var(--color-text-primary)] truncate",children:".."}),c.jsx("p",{className:"text-[10px] text-[var(--color-text-muted)] mt-1",children:e("common.parentFolder")})]})]})});case"folder":return c.jsx("div",{style:C,children:c.jsx(ib,{item:P.item})});case"image":{const A=P.item.imageData;return c.jsx("div",{style:{...C,opacity:P.isDimmed?.3:1},className:P.isHighlighted?"ring-2 ring-cyan-400 rounded-xl":"",children:c.jsx(ob,{image:A,allImages:s,isSelected:a.has(A.path)})})}}},[I,r,s,a]);return i?c.jsx("div",{className:"h-full p-4 overflow-auto",children:c.jsxs("div",{className:"rounded-2xl p-4 backdrop-blur-glass-sm relative overflow-hidden bg-gradient-to-br from-cyan-500/08 to-cyan-500/02 border border-cyan-500/15",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-[var(--glass-specular)] to-transparent z-10"}),c.jsx(Y0,{count:12,itemSize:S})]})}):E.length===0&&t.length>0?c.jsx("div",{className:"h-full flex items-center justify-center p-4",children:c.jsx(ab,{type:"no-results",onAction:j})}):c.jsx("div",{className:"h-full p-4",ref:v,children:c.jsxs("div",{className:"rounded-2xl p-4 backdrop-blur-glass-sm relative overflow-hidden bg-gradient-to-br from-cyan-500/08 to-cyan-500/02 border border-cyan-500/15 h-full flex flex-col",style:{"--col-width":R},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent z-10 pointer-events-none"}),x>0&&c.jsx(kp,{style:{flex:1,minHeight:0,overflowX:"hidden"},totalCount:I.length,overscan:600,components:ub,itemContent:M,scrollSeekConfiguration:{enter:N=>Math.abs(N)>800,exit:N=>Math.abs(N)<100}},n)]})})}function fb({drive:e,onClick:t,delay:n=0}){const{t:r}=Nt(),s=e.totalSize?e.totalSize/1024**3:0,o=e.freeSpace?e.freeSpace/1024**3:0,i=s-o,a=s>0?i/s*100:0,l=()=>a>90?"bg-red-500":a>75?"bg-amber-500":"bg-cyan-500",u=()=>{switch(e.driveType){case"Fixed":return c.jsx($r,{size:32,className:"text-cyan-400"});case"CDRom":return c.jsx(fp,{size:32,className:"text-cyan-400"});case"Removable":return c.jsx(dp,{size:32,className:"text-cyan-400"});case"Network":return c.jsx(up,{size:32,className:"text-blue-400"});default:return c.jsx($r,{size:32,className:"text-cyan-400"})}},f=p=>{const g=p/1073741824;return g>=1e3?`${(g/1024).toFixed(2)} TB`:`${g.toFixed(0)} GB`};return c.jsxs(he.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:400,damping:25,delay:n},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t(e),className:"p-4 rounded-xl transition-all duration-300 text-left group cursor-pointer w-full backdrop-blur-glass-sm relative overflow-hidden",style:{background:"var(--glass-bg)",border:"1px solid var(--glass-border)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)"},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:"var(--glass-specular)"}}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-2 rounded-lg bg-[var(--color-cyan-subtle)] group-hover:bg-cyan-500/20 transition-colors",children:u()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-[var(--color-text-primary)] truncate mb-2 group-hover:text-cyan-300 transition-colors",children:e.name}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${a>90?"bg-red-500":"bg-green-500"}`}),c.jsx("div",{className:"flex-1 h-2 bg-[var(--color-bg-tertiary)] rounded-full overflow-hidden",children:c.jsx(he.div,{initial:{width:0},animate:{width:`${a}%`},transition:{delay:n+.2,duration:.5},className:`h-full ${l()} rounded-full`})})]}),c.jsxs("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[c.jsx("span",{className:"text-[var(--color-text-primary)]",children:f(e.freeSpace||0)})," ",r("hero.freeOf")," ",f(e.totalSize||0)]})]})]})]})}function pb(){const{t:e}=Nt(),t=Qm(),n=Zm(),r=Jm(),s=bu();d.useEffect(()=>{n()},[n]);const o=async i=>{await r(i.path),await s(i.path)};return c.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative",children:c.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto space-y-12",children:[c.jsxs("div",{className:"text-center space-y-6 py-12",children:[c.jsx(he.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:25},className:"w-24 h-24 mx-auto mb-8 relative",children:c.jsx("img",{src:"/logo.png",alt:"TagFusion Logo",className:"w-full h-full object-contain"})}),c.jsx(he.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-5xl font-bold bg-gradient-to-r from-[var(--color-text-primary)] via-cyan-500 to-cyan-600 bg-clip-text text-transparent pb-2",children:e("hero.title")}),c.jsx(he.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-xl text-[var(--color-text-secondary)] max-w-2xl mx-auto pt-2",children:e("hero.subtitle")})]}),t.length>0&&c.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx($r,{size:20,className:"text-cyan-400"}),c.jsx("h3",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:e("hero.drives")})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((i,a)=>c.jsx(fb,{drive:i,onClick:o,delay:.6+a*.1},i.path))})]})]})})}function gb(){const{currentFolder:e,navigateToFolder:t}=Me(),n=d.useMemo(()=>{if(!e)return[];const s=e.replace(/\\/g,"/").split("/").filter(Boolean);return s.map((o,i)=>{const a=s.slice(0,i+1);let l=a.join("\\");return a.length===1&&l.endsWith(":")&&(l+="\\"),{name:o,path:l}})},[e]);return n.length===0?null:c.jsx("div",{className:"flex items-center gap-1 text-sm overflow-hidden",children:n.map((r,s)=>c.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[s>0&&c.jsx(pp,{size:14,className:"text-slate-600 flex-shrink-0"}),c.jsxs(he.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(r.path),className:`flex items-center gap-1.5 px-2 py-1 rounded-md truncate transition-colors ${s===n.length-1?"text-cyan-400 bg-cyan-500/10 font-medium":"text-slate-400 hover:text-slate-200 hover:bg-white/5"}`,title:r.path,children:[s===0&&c.jsx($r,{size:14,className:"flex-shrink-0"}),c.jsx("span",{className:"truncate",children:r.name})]})]},r.path))})}function mb(){const{t:e}=Nt(),t=ta(),n=os(),r=vu(),s=yu(),o=is(),i=Su(),a=xu(),l=na(),u=d.useMemo(()=>t?t.replace(/\\/g,"/").split("/").filter(Boolean).length>1:!1,[t]),f=d.useMemo(()=>{if(o.size===0)return[];const g=n.filter(y=>o.has(y.path)),m=new Map;return g.forEach(y=>{y.tags?.forEach(b=>{m.set(b,(m.get(b)||0)+1)})}),Array.from(m.entries()).map(([y,b])=>({name:y,count:b})).sort((y,b)=>b.count-y.count)},[n,o]),p=async g=>{try{for(const m of o){const y=n.find(b=>b.path===m);y&&await i(m,y.tags?.filter(b=>b!==g)||[])}}catch(m){l(m.message)}};return c.jsx("div",{className:"flex-1 flex flex-col overflow-hidden","data-testid":"main-content",children:c.jsx(un,{mode:"wait",children:!t&&!s?c.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col overflow-hidden",children:c.jsx(pb,{})},"hero"):s?c.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex flex-col items-center gap-4",children:c.jsx(_i,{size:"lg",color:"primary",label:e("common.loadingItems")})})},"loading"):r.length===0?c.jsx(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.3},className:"flex-1 flex items-center justify-center p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-[var(--glass-bg)] flex items-center justify-center",children:c.jsx(so,{size:36,className:"text-[var(--color-text-muted)]"})}),c.jsx("h3",{className:"text-lg font-medium text-[var(--color-text-primary)] mb-2",children:e("emptyState.folderEmpty")}),c.jsx("p",{className:"text-[var(--color-text-muted)] text-sm",children:e("emptyState.noImages")})]})},"empty"):c.jsxs(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[var(--glass-border)]",style:{boxShadow:"inset 0 -1px 0 rgba(0,0,0,0.05)"},children:c.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[c.jsx(qf,{content:e("common.parentFolder"),placement:"bottom",children:c.jsx(Kf,{isIconOnly:!0,size:"sm",variant:"flat",isDisabled:!u,onPress:()=>a(),className:"flex-shrink-0 bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] disabled:opacity-30",children:c.jsx(gp,{size:18})})}),c.jsx(gb,{}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--color-text-muted)] flex-shrink-0 ml-auto",children:[r.filter(g=>g.isFolder).length>0&&c.jsxs("span",{children:[r.filter(g=>g.isFolder).length," ",e("statusBar.folders")]}),r.filter(g=>g.isFolder).length>0&&r.filter(g=>!g.isFolder).length>0&&c.jsx("span",{children:""}),r.filter(g=>!g.isFolder).length>0&&c.jsxs("span",{children:[r.filter(g=>!g.isFolder).length," ",e("statusBar.images")]})]})]})}),c.jsx("div",{className:"flex-1 min-h-0",children:c.jsx(db,{})}),f.length>0&&c.jsx("div",{className:"border-t border-[var(--glass-border)] bg-[var(--glass-bg)] overflow-hidden animate-slide-up",children:c.jsx("div",{className:"p-3",children:c.jsxs("div",{className:"rounded-xl p-3 relative overflow-hidden",style:{background:"linear-gradient(135deg, rgba(6, 182, 212, 0.12) 0%, rgba(6, 182, 212, 0.04) 100%)",border:"1px solid rgba(6, 182, 212, 0.20)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)"},children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px]",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.25) 50%, transparent 100%)"}}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(sr,{size:14,className:"text-cyan-400"}),c.jsx("span",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("mainContent.selectedTags")}),c.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["(",f.length,")"]})]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:f.map(({name:g,count:m})=>c.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs text-[var(--color-text-primary)] cursor-pointer group/tag
                                     transition-transform duration-200 ease-out hover:scale-105 hover:-translate-y-0.5 active:scale-95`,style:{background:"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:"1px solid rgba(6, 182, 212, 0.25)",boxShadow:"0 4px 12px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[c.jsx(sr,{size:10,className:"text-cyan-400"}),c.jsx("span",{children:g}),o.size>1&&c.jsx("span",{className:"text-cyan-400 text-[10px] font-medium",children:m}),c.jsx("button",{onClick:y=>{y.stopPropagation(),p(g)},className:"ml-0.5 p-0.5 rounded-full hover:bg-red-500/30 hover:scale-110 transition-all",children:c.jsx(dn,{size:10,className:"text-[var(--color-text-muted)] group-hover/tag:text-red-400"})})]},g))})]})})})]},"grid")})})}const Gn=()=>crypto.randomUUID(),Nd="tagfusion-tag-library",hb=()=>{try{const e=localStorage.getItem(Nd);if(e)return JSON.parse(e).categories.map(n=>({...n,id:n.id||Gn(),subcategories:n.subcategories.map(r=>({...r,id:r.id||Gn()}))}))}catch(e){console.error("Failed to load tag library:",e)}return[]},vt=e=>{const t={version:"1.0",exportDate:new Date().toISOString(),categories:e};localStorage.setItem(Nd,JSON.stringify(t)),et.saveTagLibrary(t).catch(n=>{Me.getState().setError(n.message)})},Ia=mn((e,t)=>({categories:hb(),isModalOpen:!1,initialize:async()=>{const{categories:n}=t();if(n.length===0)try{const r=await et.getTagLibrary();r&&t().importLibrary(JSON.stringify(r))}catch(r){Me.getState().setError(r.message)}},openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1}),addCategory:n=>{const{categories:r}=t(),s={id:Gn(),name:n,subcategories:[],isExpanded:!0},o=[...r,s];vt(o),e({categories:o})},renameCategory:(n,r)=>{const{categories:s}=t(),o=s.map(i=>i.id===n?{...i,name:r}:i);vt(o),e({categories:o})},deleteCategory:n=>{const{categories:r}=t(),s=r.filter(o=>o.id!==n);vt(s),e({categories:s})},toggleCategoryExpand:n=>{const{categories:r}=t(),s=r.map(o=>o.id===n?{...o,isExpanded:!o.isExpanded}:o);e({categories:s})},addSubcategory:(n,r)=>{const{categories:s}=t(),o={id:Gn(),name:r,tags:[]},i=s.map(a=>a.id===n?{...a,subcategories:[...a.subcategories,o]}:a);vt(i),e({categories:i})},renameSubcategory:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r?{...l,name:s}:l)}:a);vt(i),e({categories:i})},deleteSubcategory:(n,r)=>{const{categories:s}=t(),o=s.map(i=>i.id===n?{...i,subcategories:i.subcategories.filter(a=>a.id!==r)}:i);vt(o),e({categories:o})},addTag:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r&&!l.tags.includes(s)?{...l,tags:[...l.tags,s]}:l)}:a);vt(i),e({categories:i})},removeTag:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>a.id===n?{...a,subcategories:a.subcategories.map(l=>l.id===r?{...l,tags:l.tags.filter(u=>u!==s)}:l)}:a);vt(i),e({categories:i})},reorderCategories:(n,r)=>{const{categories:s}=t(),o=Array.from(s),[i]=o.splice(n,1);o.splice(r,0,i),vt(o),e({categories:o})},reorderSubcategories:(n,r,s)=>{const{categories:o}=t(),i=o.map(a=>{if(a.id!==n)return a;const l=Array.from(a.subcategories),[u]=l.splice(r,1);return l.splice(s,0,u),{...a,subcategories:l}});vt(i),e({categories:i})},reorderTags:(n,r,s,o)=>{const{categories:i}=t(),a=i.map(l=>l.id!==n?l:{...l,subcategories:l.subcategories.map(u=>{if(u.id!==r)return u;const f=Array.from(u.tags),[p]=f.splice(s,1);return f.splice(o,0,p),{...u,tags:f}})});vt(a),e({categories:a})},importLibrary:n=>{try{const r=JSON.parse(n),s=r.categories||r;if(!Array.isArray(s))return!1;const o=s.map(i=>({id:i.id||Gn(),name:i.name||"Unbenannte Kategorie",isExpanded:!0,subcategories:(i.subcategories||[]).map(a=>({id:a.id||Gn(),name:a.name||"Unbenannte Unterkategorie",tags:a.tags||[]}))}));return vt(o),e({categories:o}),!0}catch(r){return Me.getState().setError(r.message),!1}},exportLibrary:()=>{const{categories:n}=t(),r={version:"1.0",exportDate:new Date().toISOString(),categories:n.map(({id:s,name:o,subcategories:i})=>({id:s,name:o,subcategories:i.map(({id:a,name:l,tags:u})=>({id:a,name:l,tags:u}))}))};return JSON.stringify(r,null,2)}}));let Xl=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const xb={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},bb={valid(e){return e===null?null:e?{[Xl.valid]:""}:{[Xl.invalid]:""}}},vb=d.createContext({invalid:void 0,name:void 0,validityData:{state:xb,errors:[],error:"",value:"",initialValue:null},setValidityData:Xe,disabled:void 0,touched:!1,setTouched:Xe,dirty:!1,setDirty:Xe,filled:!1,setFilled:Xe,focused:!1,setFocused:Xe,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=He)=>e,getInputValidationProps:(e=He)=>e,inputRef:{current:null},commit:async()=>{}}});function wo(e=!0){const t=d.useContext(vb);if(t.setValidityData===Xe&&!e)throw new Error(qe(28));return t}const yb=d.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:Xe,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function jd(){return d.useContext(yb)}const wb=d.createContext({controlId:void 0,setControlId:Xe,labelId:void 0,setLabelId:Xe,messageIds:[],setMessageIds:Xe,getDescriptionProps:e=>e});function Ad(){return d.useContext(wb)}function Sb(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function Rb(e={}){const{id:t,implicit:n=!1,controlRef:r}=e,{controlId:s,setControlId:o}=Ad(),i=Dn(t);return ne(()=>{if(!(!n&&!t||o===Xe)){if(n){const a=r?.current;Fe(a)&&a.closest("label")!=null?o(t??null):o(s??i)}else t&&o(t);return()=>{t&&o(void 0)}}},[t,r,s,o,n,i]),s??i}function Eb(e){const{enabled:t=!0,value:n,id:r,name:s,controlRef:o,commit:i}=e,{formRef:a}=jd(),{invalid:l,markedDirtyRef:u,validityData:f,setValidityData:p}=wo(),g=Z(e.getValue);ne(()=>{if(!t)return;let m=n;m===void 0&&(m=g()),f.initialValue===null&&m!==null&&p(y=>({...y,initialValue:m}))},[t,p,n,f.initialValue,g]),ne(()=>{!t||!r||a.current.fields.set(r,{getValue:g,name:s,controlRef:o,validityData:Sb(f,l),validate(){let m=n;m===void 0&&(m=g()),u.current=!0,nt.flushSync(()=>i(m))}})},[i,o,t,a,g,r,l,u,s,f,n]),ne(()=>{const m=a.current.fields;return()=>{r&&m.delete(r)}},[a,r])}var Ta=us(),Ie=e=>cs(e,Ta),Pa=us();Ie.write=e=>cs(e,Pa);var So=us();Ie.onStart=e=>cs(e,So);var Oa=us();Ie.onFrame=e=>cs(e,Oa);var Ma=us();Ie.onFinish=e=>cs(e,Ma);var er=[];Ie.setTimeout=(e,t)=>{const n=Ie.now()+t,r=()=>{const o=er.findIndex(i=>i.cancel==r);~o&&er.splice(o,1),rn-=~o?1:0},s={time:n,handler:e,cancel:r};return er.splice(Fd(n),0,s),rn+=1,Ld(),s};var Fd=e=>~(~er.findIndex(t=>t.time>e)||~er.length);Ie.cancel=e=>{So.delete(e),Oa.delete(e),Ma.delete(e),Ta.delete(e),Pa.delete(e)};Ie.sync=e=>{Ii=!0,Ie.batchedUpdates(e),Ii=!1};Ie.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,Ie.onStart(n)}return r.handler=e,r.cancel=()=>{So.delete(n),t=null},r};var ka=typeof window<"u"?window.requestAnimationFrame:()=>{};Ie.use=e=>ka=e;Ie.now=typeof performance<"u"?()=>performance.now():Date.now;Ie.batchedUpdates=e=>e();Ie.catch=console.error;Ie.frameLoop="always";Ie.advance=()=>{Ie.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):_d()};var nn=-1,rn=0,Ii=!1;function cs(e,t){Ii?(t.delete(e),e(0)):(t.add(e),Ld())}function Ld(){nn<0&&(nn=0,Ie.frameLoop!=="demand"&&ka(Dd))}function Cb(){nn=-1}function Dd(){~nn&&(ka(Dd),Ie.batchedUpdates(_d))}function _d(){const e=nn;nn=Ie.now();const t=Fd(nn);if(t&&(zd(er.splice(0,t),n=>n.handler()),rn-=t),!rn){Cb();return}So.flush(),Ta.flush(e?Math.min(64,nn-e):16.667),Oa.flush(),Pa.flush(),Ma.flush()}function us(){let e=new Set,t=e;return{add(n){rn+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return rn-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,rn-=t.size,zd(t,r=>r(n)&&e.add(r)),rn+=e.size,t=e)}}}function zd(e,t){e.forEach(n=>{try{t(n)}catch(r){Ie.catch(r)}})}var Ib=Object.defineProperty,Tb=(e,t)=>{for(var n in t)Ib(e,n,{get:t[n],enumerable:!0})},kt={};Tb(kt,{assign:()=>Ob,colors:()=>cn,createStringInterpolator:()=>ja,skipAnimation:()=>Hd,to:()=>Vd,willAdvance:()=>Aa});function Ti(){}var Pb=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),G={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Yt(e,t){if(G.arr(e)){if(!G.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ne=(e,t)=>e.forEach(t);function Vt(e,t,n){if(G.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ht=e=>G.und(e)?[]:G.arr(e)?e:[e];function _r(e,t){if(e.size){const n=Array.from(e);e.clear(),Ne(n,t)}}var jr=(e,...t)=>_r(e,n=>n(...t)),Na=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ja,Vd,cn=null,Hd=!1,Aa=Ti,Ob=e=>{e.to&&(Vd=e.to),e.now&&(Ie.now=e.now),e.colors!==void 0&&(cn=e.colors),e.skipAnimation!=null&&(Hd=e.skipAnimation),e.createStringInterpolator&&(ja=e.createStringInterpolator),e.requestAnimationFrame&&Ie.use(e.requestAnimationFrame),e.batchedUpdates&&(Ie.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Aa=e.willAdvance),e.frameLoop&&(Ie.frameLoop=e.frameLoop)},zr=new Set,Rt=[],Jo=[],eo=0,Ro={get idle(){return!zr.size&&!Rt.length},start(e){eo>e.priority?(zr.add(e),Ie.onStart(Mb)):($d(e),Ie(Pi))},advance:Pi,sort(e){if(eo)Ie.onFrame(()=>Ro.sort(e));else{const t=Rt.indexOf(e);~t&&(Rt.splice(t,1),Bd(e))}},clear(){Rt=[],zr.clear()}};function Mb(){zr.forEach($d),zr.clear(),Ie(Pi)}function $d(e){Rt.includes(e)||Bd(e)}function Bd(e){Rt.splice(kb(Rt,t=>t.priority>e.priority),0,e)}function Pi(e){const t=Jo;for(let n=0;n<Rt.length;n++){const r=Rt[n];eo=r.priority,r.idle||(Aa(r),r.advance(e),r.idle||t.push(r))}return eo=0,Jo=Rt,Jo.length=0,Rt=t,Rt.length>0}function kb(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Nb={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ot="[-+]?\\d*\\.?\\d+",to=Ot+"%";function Eo(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var jb=new RegExp("rgb"+Eo(Ot,Ot,Ot)),Ab=new RegExp("rgba"+Eo(Ot,Ot,Ot,Ot)),Fb=new RegExp("hsl"+Eo(Ot,to,to)),Lb=new RegExp("hsla"+Eo(Ot,to,to,Ot)),Db=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_b=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zb=/^#([0-9a-fA-F]{6})$/,Vb=/^#([0-9a-fA-F]{8})$/;function Hb(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=zb.exec(e))?parseInt(t[1]+"ff",16)>>>0:cn&&cn[e]!==void 0?cn[e]:(t=jb.exec(e))?(Yn(t[1])<<24|Yn(t[2])<<16|Yn(t[3])<<8|255)>>>0:(t=Ab.exec(e))?(Yn(t[1])<<24|Yn(t[2])<<16|Yn(t[3])<<8|Kl(t[4]))>>>0:(t=Db.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Vb.exec(e))?parseInt(t[1],16)>>>0:(t=_b.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Fb.exec(e))?(Gl(ql(t[1]),Ps(t[2]),Ps(t[3]))|255)>>>0:(t=Lb.exec(e))?(Gl(ql(t[1]),Ps(t[2]),Ps(t[3]))|Kl(t[4]))>>>0:null}function ei(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Gl(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,o=ei(s,r,e+1/3),i=ei(s,r,e),a=ei(s,r,e-1/3);return Math.round(o*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function Yn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function ql(e){return(parseFloat(e)%360+360)%360/360}function Kl(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Ps(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ql(e){let t=Hb(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,o=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}var Yr=(e,t,n)=>{if(G.fun(e))return e;if(G.arr(e))return Yr({range:e,output:t,extrapolate:n});if(G.str(e.output[0]))return ja(e);const r=e,s=r.output,o=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const f=Bb(u,o);return $b(u,o[f],o[f+1],s[f],s[f+1],l,i,a,r.map)}};function $b(e,t,n,r,s,o,i,a,l){let u=l?l(e):e;if(u<t){if(i==="identity")return u;i==="clamp"&&(u=t)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=o(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function Bb(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Wb={linear:e=>e},Xr=Symbol.for("FluidValue.get"),dr=Symbol.for("FluidValue.observers"),St=e=>!!(e&&e[Xr]),ft=e=>e&&e[Xr]?e[Xr]():e,Zl=e=>e[dr]||null;function Ub(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Gr(e,t){const n=e[dr];n&&n.forEach(r=>{Ub(r,t)})}var Wd=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Yb(this,e)}},Yb=(e,t)=>Ud(e,Xr,t);function br(e,t){if(e[Xr]){let n=e[dr];n||Ud(e,dr,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function qr(e,t){const n=e[dr];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[dr]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ud=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),_s=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Xb=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Jl=new RegExp(`(${_s.source})(%|[a-z]+)`,"i"),Gb=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Co=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Yd=e=>{const[t,n]=qb(e);if(!t||Na())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&Co.test(n))return Yd(n);if(n)return n}return e},qb=e=>{const t=Co.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},ti,Kb=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Xd=e=>{ti||(ti=cn?new RegExp(`(${Object.keys(cn).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(o=>ft(o).replace(Co,Yd).replace(Xb,Ql).replace(ti,Ql)),n=t.map(o=>o.match(_s).map(Number)),s=n[0].map((o,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(o=>Yr({...e,output:o}));return o=>{const i=!Jl.test(t[0])&&t.find(l=>Jl.test(l))?.replace(_s,"");let a=0;return t[0].replace(_s,()=>`${s[a++](o)}${i||""}`).replace(Gb,Kb)}},Fa="react-spring: ",Gd=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Fa}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Qb=Gd(console.warn);function Zb(){Qb(`${Fa}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Jb=Gd(console.warn);function ev(){Jb(`${Fa}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Io(e){return G.str(e)&&(e[0]=="#"||/\d/.test(e)||!Na()&&Co.test(e)||e in(cn||{}))}var La=Na()?d.useEffect:d.useLayoutEffect,tv=()=>{const e=d.useRef(!1);return La(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function qd(){const e=d.useState()[1],t=tv();return()=>{t.current&&e(Math.random())}}var Kd=e=>d.useEffect(e,nv),nv=[];function ec(e){const t=d.useRef(void 0);return d.useEffect(()=>{t.current=e}),t.current}var Kr=Symbol.for("Animated:node"),rv=e=>!!e&&e[Kr]===e,At=e=>e&&e[Kr],Da=(e,t)=>Pb(e,Kr,t),To=e=>e&&e[Kr]&&e[Kr].getPayload(),Qd=class{constructor(){Da(this,this)}getPayload(){return this.payload||[]}},Po=class Zd extends Qd{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,G.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Zd(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,n){return G.num(t)&&(this.lastPosition=t,n&&(t=Math.round(t/n)*n,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,G.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},no=class Jd extends Po{constructor(t){super(0),this._string=null,this._toString=Yr({output:[t,t]})}static create(t){return new Jd(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(G.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Yr({output:[this.getValue(),t]})),this._value=0,super.reset()}},ro={dependencies:null},Oo=class extends Qd{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Vt(this.source,(n,r)=>{rv(n)?t[r]=n.getValue(e):St(n)?t[r]=ft(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ne(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Vt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){ro.dependencies&&St(e)&&ro.dependencies.add(e);const t=To(e);t&&Ne(t,n=>this.add(n))}},sv=class ef extends Oo{constructor(t){super(t)}static create(t){return new ef(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const n=this.getPayload();return t.length==n.length?n.map((r,s)=>r.setValue(t[s])).some(Boolean):(super.setValue(t.map(ov)),!0)}};function ov(e){return(Io(e)?no:Po).create(e)}function Oi(e){const t=At(e);return t?t.constructor:G.arr(e)?sv:Io(e)?no:Po}var tc=(e,t)=>{const n=!G.fun(e)||e.prototype&&e.prototype.isReactComponent;return d.forwardRef((r,s)=>{const o=d.useRef(null),i=n&&d.useCallback(y=>{o.current=lv(s,y)},[s]),[a,l]=av(r,t),u=qd(),f=()=>{const y=o.current;if(n&&!y)return;(y?t.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&u()},p=new iv(f,l),g=d.useRef(void 0);La(()=>(g.current=p,Ne(l,y=>br(y,p)),()=>{g.current&&(Ne(g.current.deps,y=>qr(y,g.current)),Ie.cancel(g.current.update))})),d.useEffect(f,[]),Kd(()=>()=>{const y=g.current;Ne(y.deps,b=>qr(b,y))});const m=t.getComponentProps(a.getValue());return d.createElement(e,{...m,ref:i})})},iv=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Ie.write(this.update)}};function av(e,t){const n=new Set;return ro.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Oo(e),ro.dependencies=null,[e,n]}function lv(e,t){return e&&(G.fun(e)?e(t):e.current=t),t}var nc=Symbol.for("AnimatedComponent"),cv=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Oo(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=i=>{const a=rc(i)||"Anonymous";return G.str(i)?i=o[i]||(o[i]=tc(i,s)):i=i[nc]||(i[nc]=tc(i,s)),i.displayName=`Animated(${a})`,i};return Vt(e,(i,a)=>{G.arr(e)&&(a=rc(i)),o[a]=o(i)}),{animated:o}},rc=e=>G.str(e)?e:e&&G.str(e.displayName)?e.displayName:G.fun(e)&&e.name||null;function Mn(e,...t){return G.fun(e)?e(...t):e}var Vr=(e,t)=>e===!0||!!(t&&e&&(G.fun(e)?e(t):ht(e).includes(t))),tf=(e,t)=>G.obj(e)?t&&e[t]:e,nf=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,uv=e=>e,_a=(e,t=uv)=>{let n=dv;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const o=t(e[s],s);G.und(o)||(r[s]=o)}return r},dv=["config","onProps","onStart","onChange","onPause","onResume","onRest"],fv={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function pv(e){const t={};let n=0;if(Vt(e,(r,s)=>{fv[s]||(t[s]=r,n++)}),n)return t}function rf(e){const t=pv(e);if(t){const n={to:t};return Vt(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Qr(e){return e=ft(e),G.arr(e)?e.map(Qr):Io(e)?kt.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function gv(e){for(const t in e)return!0;return!1}function Mi(e){return G.fun(e)||G.arr(e)&&G.obj(e[0])}function mv(e,t){e.ref?.delete(e),t?.delete(e)}function hv(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var xv={default:{tension:170,friction:26}},ki={...xv.default,mass:1,damping:1,easing:Wb.linear,clamp:!1},bv=class{constructor(){this.velocity=0,Object.assign(this,ki)}};function vv(e,t,n){n&&(n={...n},sc(n,t),t={...n,...t}),sc(e,t),Object.assign(e,t);for(const i in ki)e[i]==null&&(e[i]=ki[i]);let{frequency:r,damping:s}=e;const{mass:o}=e;return G.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*s*o/r),e}function sc(e,t){if(!G.und(t.decay))e.duration=void 0;else{const n=!G.und(t.tension)||!G.und(t.friction);(n||!G.und(t.frequency)||!G.und(t.damping)||!G.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var oc=[],yv=class{constructor(){this.changed=!1,this.values=oc,this.toValues=null,this.fromValues=oc,this.config=new bv,this.immediate=!1}};function sf(e,{key:t,props:n,defaultProps:r,state:s,actions:o}){return new Promise((i,a)=>{let l,u,f=Vr(n.cancel??r?.cancel,t);if(f)m();else{G.und(n.pause)||(s.paused=Vr(n.pause,t));let y=r?.pause;y!==!0&&(y=s.paused||Vr(y,t)),l=Mn(n.delay||0,t),y?(s.resumeQueue.add(g),o.pause()):(o.resume(),g())}function p(){s.resumeQueue.add(g),s.timeouts.delete(u),u.cancel(),l=u.time-Ie.now()}function g(){l>0&&!kt.skipAnimation?(s.delayed=!0,u=Ie.setTimeout(m,l),s.pauseQueue.add(p),s.timeouts.add(u)):m()}function m(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(p),s.timeouts.delete(u),e<=(s.cancelId||0)&&(f=!0);try{o.start({...n,callId:e,cancel:f},i)}catch(y){a(y)}}})}var za=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?tr(e.get()):t.every(n=>n.noop)?of(e.get()):Pt(e.get(),t.every(n=>n.finished)),of=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Pt=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),tr=e=>({value:e,cancelled:!0,finished:!1});function af(e,t,n,r){const{callId:s,parentId:o,onRest:i}=t,{asyncTo:a,promise:l}=n;return!o&&e===a&&!t.reset?l:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=_a(t,(v,x)=>x==="onRest"?void 0:v);let f,p;const g=new Promise((v,x)=>(f=v,p=x)),m=v=>{const x=s<=(n.cancelId||0)&&tr(r)||s!==n.asyncId&&Pt(r,!1);if(x)throw v.result=x,p(v),v},y=(v,x)=>{const h=new ic,S=new ac;return(async()=>{if(kt.skipAnimation)throw Zr(n),S.result=Pt(r,!1),p(S),S;m(h);const R=G.obj(v)?{...v}:{...x,to:v};R.parentId=s,Vt(u,(T,E)=>{G.und(R[E])&&(R[E]=T)});const w=await r.start(R);return m(h),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),w})()};let b;if(kt.skipAnimation)return Zr(n),Pt(r,!1);try{let v;G.arr(e)?v=(async x=>{for(const h of x)await y(h)})(e):v=Promise.resolve(e(y,r.stop.bind(r))),await Promise.all([v.then(f),g]),b=Pt(r.get(),!0,!1)}catch(v){if(v instanceof ic)b=v.result;else if(v instanceof ac)b=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=o,n.asyncTo=o?a:void 0,n.promise=o?l:void 0)}return G.fun(i)&&Ie.batchedUpdates(()=>{i(b,r,r.item)}),b})()}function Zr(e,t){_r(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ic=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},ac=class extends Error{constructor(){super("SkipAnimationSignal")}},Ni=e=>e instanceof Va,wv=1,Va=class extends Wd{constructor(){super(...arguments),this.id=wv++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=At(this);return e&&e.getValue()}to(...e){return kt.to(this,e)}interpolate(...e){return Zb(),kt.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Gr(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Ro.sort(this),Gr(this,{type:"priority",parent:this,priority:e})}},Fn=Symbol.for("SpringPhase"),lf=1,ji=2,Ai=4,ni=e=>(e[Fn]&lf)>0,Zt=e=>(e[Fn]&ji)>0,Ir=e=>(e[Fn]&Ai)>0,lc=(e,t)=>t?e[Fn]|=ji|lf:e[Fn]&=~ji,cc=(e,t)=>t?e[Fn]|=Ai:e[Fn]&=~Ai,Sv=class extends Va{constructor(e,t){if(super(),this.animation=new yv,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!G.und(e)||!G.und(t)){const n=G.obj(e)?{...e}:{...t,from:e};G.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Zt(this)||this._state.asyncTo)||Ir(this)}get goal(){return ft(this.animation.to)}get velocity(){const e=At(this);return e instanceof Po?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return ni(this)}get isAnimating(){return Zt(this)}get isPaused(){return Ir(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,i=To(r.to);!i&&St(r.to)&&(s=ht(ft(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const p=u.constructor==no?1:i?i[f].lastPosition:s[f];let g=r.immediate,m=p;if(!g){if(m=u.lastPosition,o.tension<=0){u.done=!0;return}let y=u.elapsedTime+=e;const b=r.fromValues[f],v=u.v0!=null?u.v0:u.v0=G.arr(o.velocity)?o.velocity[f]:o.velocity;let x;const h=o.precision||(b==p?.005:Math.min(1,Math.abs(p-b)*.001));if(G.und(o.duration))if(o.decay){const S=o.decay===!0?.998:o.decay,R=Math.exp(-(1-S)*y);m=b+v/(1-S)*(1-R),g=Math.abs(u.lastPosition-m)<=h,x=v*R}else{x=u.lastVelocity==null?v:u.lastVelocity;const S=o.restVelocity||h/10,R=o.clamp?0:o.bounce,w=!G.und(R),T=b==p?u.v0>0:b<p;let E,I=!1;const j=1,M=Math.ceil(e/j);for(let N=0;N<M&&(E=Math.abs(x)>S,!(!E&&(g=Math.abs(p-m)<=h,g)));++N){w&&(I=m==p||m>p==T,I&&(x=-x*R,m=p));const P=-o.tension*1e-6*(m-p),C=-o.friction*.001*x,A=(P+C)/o.mass;x=x+A*j,m=m+x*j}}else{let S=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,y=u.elapsedTime+=e)),S=(o.progress||0)+y/this._memoizedDuration,S=S>1?1:S<0?0:S,u.durationProgress=S),m=b+o.easing(S)*(p-b),x=(m-u.lastPosition)/e,g=S==1}u.lastVelocity=x,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),g=!0)}i&&!i[f].done&&(g=!1),g?u.done=!0:t=!1,u.setValue(m,o.round)&&(n=!0)});const a=At(this),l=a.getValue();if(t){const u=ft(r.to);(l!==u||n)&&!o.decay?(a.setValue(u),this._onChange(u)):n&&o.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(e){return Ie.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Zt(this)){const{to:e,config:t}=this.animation;Ie.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return G.und(e)?(n=this.queue||[],this.queue=[]):n=[G.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>za(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Zr(this._state,e&&this._lastCallId),Ie.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=G.obj(n)?n[t]:n,(n==null||Mi(n))&&(n=void 0),r=G.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return ni(this)||(e.reverse&&([n,r]=[r,n]),r=ft(r),G.und(r)?At(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,_a(e,(i,a)=>/^on/.test(a)?tf(i,n):i)),dc(this,e,"onProps"),Pr(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return sf(++this._lastCallId,{key:n,props:e,defaultProps:r,state:o,actions:{pause:()=>{Ir(this)||(cc(this,!0),jr(o.pauseQueue),Pr(this,"onPause",Pt(this,Tr(this,this.animation.to)),this))},resume:()=>{Ir(this)&&(cc(this,!1),Zt(this)&&this._resume(),jr(o.resumeQueue),Pr(this,"onResume",Pt(this,Tr(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){const a=cf(e);if(a)return this._update(a,!0)}return i})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(tr(this));const r=!G.und(e.to),s=!G.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(tr(this));const{key:o,defaultProps:i,animation:a}=this,{to:l,from:u}=a;let{to:f=l,from:p=u}=e;s&&!r&&(!t.default||G.und(f))&&(f=p),t.reverse&&([f,p]=[p,f]);const g=!Yt(p,u);g&&(a.from=p),p=ft(p);const m=!Yt(f,l);m&&this._focus(f);const y=Mi(t.to),{config:b}=a,{decay:v,velocity:x}=b;(r||s)&&(b.velocity=0),t.config&&!y&&vv(b,Mn(t.config,o),t.config!==i.config?Mn(i.config,o):void 0);let h=At(this);if(!h||G.und(f))return n(Pt(this,!0));const S=G.und(t.reset)?s&&!t.default:!G.und(p)&&Vr(t.reset,o),R=S?p:this.get(),w=Qr(f),T=G.num(w)||G.arr(w)||Io(w),E=!y&&(!T||Vr(i.immediate||t.immediate,o));if(m){const N=Oi(f);if(N!==h.constructor)if(E)h=this._set(w);else throw Error(`Cannot animate between ${h.constructor.name} and ${N.name}, as the "to" prop suggests`)}const I=h.constructor;let j=St(f),M=!1;if(!j){const N=S||!ni(this)&&g;(m||N)&&(M=Yt(Qr(R),w),j=!M),(!Yt(a.immediate,E)&&!E||!Yt(b.decay,v)||!Yt(b.velocity,x))&&(j=!0)}if(M&&Zt(this)&&(a.changed&&!S?j=!0:j||this._stop(l)),!y&&((j||St(l))&&(a.values=h.getPayload(),a.toValues=St(f)?null:I==no?[1]:ht(w)),a.immediate!=E&&(a.immediate=E,!E&&!S&&this._set(l)),j)){const{onRest:N}=a;Ne(Ev,C=>dc(this,t,C));const P=Pt(this,Tr(this,l));jr(this._pendingCalls,P),this._pendingCalls.add(n),a.changed&&Ie.batchedUpdates(()=>{a.changed=!S,N?.(P,this),S?Mn(i.onRest,P):a.onStart?.(P,this)})}S&&this._set(R),y?n(af(t.to,t,this._state,this)):j?this._start():Zt(this)&&!m?this._pendingCalls.add(n):n(of(R))}_focus(e){const t=this.animation;e!==t.to&&(Zl(this)&&this._detach(),t.to=e,Zl(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;St(t)&&(br(t,this),Ni(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;St(e)&&qr(e,this)}_set(e,t=!0){const n=ft(e);if(!G.und(n)){const r=At(this);if(!r||!Yt(n,r.getValue())){const s=Oi(n);!r||r.constructor!=s?Da(this,s.create(n)):r.setValue(n),r&&Ie.batchedUpdates(()=>{this._onChange(n,t)})}}return At(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Pr(this,"onStart",Pt(this,Tr(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Mn(this.animation.onChange,e,this)),Mn(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;At(this).reset(ft(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Zt(this)||(lc(this,!0),Ir(this)||this._resume())}_resume(){kt.skipAnimation?this.finish():Ro.start(this)}_stop(e,t){if(Zt(this)){lc(this,!1);const n=this.animation;Ne(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Gr(this,{type:"idle",parent:this});const r=t?tr(this.get()):Pt(this.get(),Tr(this,e??n.to));jr(this._pendingCalls,r),n.changed&&(n.changed=!1,Pr(this,"onRest",r,this))}}};function Tr(e,t){const n=Qr(t),r=Qr(e.get());return Yt(r,n)}function cf(e,t=e.loop,n=e.to){const r=Mn(t);if(r){const s=r!==!0&&rf(r),o=(s||e).reverse,i=!s||s.reset;return Jr({...e,loop:t,default:!1,pause:void 0,to:!o||Mi(n)?n:void 0,from:i?e.from:void 0,reset:i,...s})}}function Jr(e){const{to:t,from:n}=e=rf(e),r=new Set;return G.obj(t)&&uc(t,r),G.obj(n)&&uc(n,r),e.keys=r.size?Array.from(r):null,e}function Rv(e){const t=Jr(e);return G.und(t.default)&&(t.default=_a(t)),t}function uc(e,t){Vt(e,(n,r)=>n!=null&&t.add(r))}var Ev=["onStart","onRest","onChange","onPause","onResume"];function dc(e,t,n){e.animation[n]=t[n]!==nf(t,n)?tf(t[n],e.key):void 0}function Pr(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var Cv=["onStart","onChange","onRest"],Iv=1,Tv=class{constructor(e,t){this.id=Iv++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];G.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Jr(e)),this}start(e){let{queue:t}=this;return e?t=ht(e).map(Jr):this.queue=[],this._flush?this._flush(this,t):(gf(this,t),Fi(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Ne(ht(t),r=>n[r].stop(!!e))}else Zr(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(G.und(e))this.start({pause:!0});else{const t=this.springs;Ne(ht(e),n=>t[n].pause())}return this}resume(e){if(G.und(e))this.start({pause:!1});else{const t=this.springs;Ne(ht(e),n=>t[n].resume())}return this}each(e){Vt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,_r(e,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const o=!r&&this._started,i=s||o&&n.size?this.get():null;s&&t.size&&_r(t,([a,l])=>{l.value=i,a(l,this,this._item)}),o&&(this._started=!1,_r(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Ie.onFrame(this._onFrame)}};function Fi(e,t){return Promise.all(t.map(n=>uf(e,n))).then(n=>za(e,n))}async function uf(e,t,n){const{keys:r,to:s,from:o,loop:i,onRest:a,onResolve:l}=t,u=G.obj(t.default)&&t.default;i&&(t.loop=!1),s===!1&&(t.to=null),o===!1&&(t.from=null);const f=G.arr(s)||G.fun(s)?s:void 0;f?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Ne(Cv,b=>{const v=t[b];if(G.fun(v)){const x=e._events[b];t[b]=({finished:h,cancelled:S})=>{const R=x.get(v);R?(h||(R.finished=!1),S&&(R.cancelled=!0)):x.set(v,{value:null,finished:h||!1,cancelled:S||!1})},u&&(u[b]=t[b])}});const p=e._state;t.pause===!p.paused?(p.paused=t.pause,jr(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const g=(r||Object.keys(e.springs)).map(b=>e.springs[b].start(t)),m=t.cancel===!0||nf(t,"cancel")===!0;(f||m&&p.asyncId)&&g.push(sf(++e._lastAsyncId,{props:t,state:p,actions:{pause:Ti,resume:Ti,start(b,v){m?(Zr(p,e._lastAsyncId),v(tr(e))):(b.onRest=a,v(af(f,b,p,e)))}}})),p.paused&&await new Promise(b=>{p.resumeQueue.add(b)});const y=za(e,await Promise.all(g));if(i&&y.finished&&!(n&&y.noop)){const b=cf(t,i,s);if(b)return gf(e,[b]),uf(e,b,!0)}return l&&Ie.batchedUpdates(()=>l(y,e,e.item)),y}function fc(e,t){const n={...e.springs};return t&&Ne(ht(t),r=>{G.und(r.keys)&&(r=Jr(r)),G.obj(r.to)||(r={...r,to:void 0}),pf(n,r,s=>ff(s))}),df(e,n),n}function df(e,t){Vt(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,br(n,e))})}function ff(e,t){const n=new Sv;return n.key=e,t&&br(n,t),n}function pf(e,t,n){t.keys&&Ne(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function gf(e,t){Ne(t,n=>{pf(e.springs,n,r=>ff(r,e))})}var Pv=d.createContext({pause:!1,immediate:!1}),Ov=()=>{const e=[],t=function(r){ev();const s=[];return Ne(e,(o,i)=>{if(G.und(r))s.push(o.start());else{const a=n(r,o,i);a&&s.push(o.start(a))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Ne(e,r=>r.pause(...arguments)),this},t.resume=function(){return Ne(e,r=>r.resume(...arguments)),this},t.set=function(r){Ne(e,(s,o)=>{const i=G.fun(r)?r(o,s):r;i&&s.set(i)})},t.start=function(r){const s=[];return Ne(e,(o,i)=>{if(G.und(r))s.push(o.start());else{const a=this._getProps(r,o,i);a&&s.push(o.start(a))}}),s},t.stop=function(){return Ne(e,r=>r.stop(...arguments)),this},t.update=function(r){return Ne(e,(s,o)=>s.update(this._getProps(r,s,o))),this};const n=function(r,s,o){return G.fun(r)?r(o,s):r};return t._getProps=n,t};function Mv(e,t,n){const r=G.fun(t)&&t;r&&!n&&(n=[]);const s=d.useMemo(()=>r||arguments.length==3?Ov():void 0,[]),o=d.useRef(0),i=qd(),a=d.useMemo(()=>({ctrls:[],queue:[],flush(x,h){const S=fc(x,h);return o.current>0&&!a.queue.length&&!Object.keys(S).some(w=>!x.springs[w])?Fi(x,h):new Promise(w=>{df(x,S),a.queue.push(()=>{w(Fi(x,h))}),i()})}}),[]),l=d.useRef([...a.ctrls]),u=d.useRef([]),f=ec(e)||0;d.useMemo(()=>{Ne(l.current.slice(e,f),x=>{mv(x,s),x.stop(!0)}),l.current.length=e,p(f,e)},[e]),d.useMemo(()=>{p(0,Math.min(f,e))},n);function p(x,h){for(let S=x;S<h;S++){const R=l.current[S]||(l.current[S]=new Tv(null,a.flush)),w=r?r(S,R):t[S];w&&(u.current[S]=Rv(w))}}const g=l.current.map((x,h)=>fc(x,u.current[h])),m=d.useContext(Pv),y=ec(m),b=m!==y&&gv(m);La(()=>{o.current++,a.ctrls=l.current;const{queue:x}=a;x.length&&(a.queue=[],Ne(x,h=>h())),Ne(l.current,(h,S)=>{s?.add(h),b&&h.start({default:m});const R=u.current[S];R&&(hv(h,R.ref),h.ref?h.queue.push(R):h.start(R))})}),Kd(()=>()=>{Ne(a.ctrls,x=>x.stop(!0))});const v=g.map(x=>({...x}));return s?[v,s]:v}function kv(e,t){const n=G.fun(e),[[r],s]=Mv(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}var Nv=class extends Va{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Yr(...t);const n=this._get(),r=Oi(n);Da(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Yt(t,n)||(At(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&pc(this._active)&&ri(this)}_get(){const e=G.arr(this.source)?this.source.map(ft):ht(ft(this.source));return this.calc(...e)}_start(){this.idle&&!pc(this._active)&&(this.idle=!1,Ne(To(this),e=>{e.done=!1}),kt.skipAnimation?(Ie.batchedUpdates(()=>this.advance()),ri(this)):Ro.start(this))}_attach(){let e=1;Ne(ht(this.source),t=>{St(t)&&br(t,this),Ni(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Ne(ht(this.source),e=>{St(e)&&qr(e,this)}),this._active.clear(),ri(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ht(this.source).reduce((t,n)=>Math.max(t,(Ni(n)?n.priority:0)+1),0))}};function jv(e){return e.idle!==!1}function pc(e){return!e.size||Array.from(e).every(jv)}function ri(e){e.idle||(e.idle=!0,Ne(To(e),t=>{t.done=!0}),Gr(e,{type:"idle",parent:e}))}kt.assign({createStringInterpolator:Xd,to:(e,t)=>new Nv(e,t)});var mf=/^--/;function Av(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!mf.test(e)&&!(Hr.hasOwnProperty(e)&&Hr[e])?t+"px":(""+t).trim()}var gc={};function Fv(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:o,scrollTop:i,scrollLeft:a,viewBox:l,...u}=t,f=Object.values(u),p=Object.keys(u).map(g=>n||e.hasAttribute(g)?g:gc[g]||(gc[g]=g.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));o!==void 0&&(e.textContent=o);for(const g in s)if(s.hasOwnProperty(g)){const m=Av(g,s[g]);mf.test(g)?e.style.setProperty(g,m):e.style[g]=m}p.forEach((g,m)=>{e.setAttribute(g,f[m])}),r!==void 0&&(e.className=r),i!==void 0&&(e.scrollTop=i),a!==void 0&&(e.scrollLeft=a),l!==void 0&&e.setAttribute("viewBox",l)}var Hr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lv=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Dv=["Webkit","Ms","Moz","O"];Hr=Object.keys(Hr).reduce((e,t)=>(Dv.forEach(n=>e[Lv(n,t)]=e[t]),e),Hr);var _v=/^(matrix|translate|scale|rotate|skew)/,zv=/^(translate)/,Vv=/^(rotate|skew)/,si=(e,t)=>G.num(e)&&e!==0?e+t:e,zs=(e,t)=>G.arr(e)?e.every(n=>zs(n,t)):G.num(e)?e===t:parseFloat(e)===t,Hv=class extends Oo{constructor({x:e,y:t,z:n,...r}){const s=[],o=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),o.push(i=>[`translate3d(${i.map(a=>si(a,"px")).join(",")})`,zs(i,0)])),Vt(r,(i,a)=>{if(a==="transform")s.push([i||""]),o.push(l=>[l,l===""]);else if(_v.test(a)){if(delete r[a],G.und(i))return;const l=zv.test(a)?"px":Vv.test(a)?"deg":"";s.push(ht(i)),o.push(a==="rotate3d"?([u,f,p,g])=>[`rotate3d(${u},${f},${p},${si(g,l)})`,zs(g,0)]:u=>[`${a}(${u.map(f=>si(f,l)).join(",")})`,zs(u,a.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new $v(s,o)),super(r)}},$v=class extends Wd{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Ne(this.inputs,(n,r)=>{const s=ft(n[0]),[o,i]=this.transforms[r](G.arr(s)?s:n.map(ft));e+=" "+o,t=t&&i}),t?"none":e}observerAdded(e){e==1&&Ne(this.inputs,t=>Ne(t,n=>St(n)&&br(n,this)))}observerRemoved(e){e==0&&Ne(this.inputs,t=>Ne(t,n=>St(n)&&qr(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Gr(this,e)}},Bv=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];kt.assign({batchedUpdates:nt.unstable_batchedUpdates,createStringInterpolator:Xd,colors:Nb});var Wv=cv(Bv,{applyAnimatedValues:Fv,createAnimatedStyle:e=>new Hv(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Uv=Wv.animated;function Vs({value:e,duration:t=500,className:n=""}){const r=d.useRef(0),{number:s}=kv({from:{number:r.current},to:{number:e},config:{duration:t}});return d.useEffect(()=>{r.current=e},[e]),c.jsx(Uv.span,{className:n,children:s.to(o=>Math.round(o))})}const Yv={search:"Bilder oder Tags suchen...",home:"Startseite",sort:{name:"Name",date:"Datum",size:"Gre",rating:"Bewertung"},rating:"Bewertung",clearFilters:"Alle Filter zurcksetzen",resetFilter:"Filter zurcksetzen",rotate90Left:"90 links drehen",rotate90Right:"90 rechts drehen",rotate180:"180 drehen",flipHorizontal:"Horizontal spiegeln",flipVertical:"Vertikal spiegeln",selected:"ausgewhlt",file:"Datei",tag:"Tag",noSuggestions:"Keine Vorschlge gefunden"},Xv={openFile:"Datei ffnen",selectFolder:"Ordner auswhlen",recentFolders:"Zuletzt geffnet",favorites:"Favoriten",noFavorites:"Keine Favoriten",noRecentFolders:"Keine Ordner"},Gv={title:"Tags",addTag:"Tag hinzufgen",noTags:"Keine Tags",folderTags:"Tags im Ordner",imageTags:"Bild-Tags",selectImage:"Bild auswhlen"},qv={title:"Einstellungen",language:"Sprache",theme:"Design",themeLight:"Hell",themeDark:"Dunkel",performanceMode:"Leistungsmodus",performanceModeDesc:"Reduziert Glaseffekte"},Kv={loading:"Laden...",loadingItems:"Lade Elemente...",error:"Fehler",save:"Speichern",cancel:"Abbrechen",delete:"Lschen",edit:"Bearbeiten",close:"Schlieen",parentFolder:"bergeordneter Ordner"},Qv={noResults:"Keine Treffer",noResultsHint:"Versuche andere Suchbegriffe oder Filter",resetFilters:"Filter zurcksetzen",folderEmpty:"Ordner ist leer",noImages:"Dieser Ordner enthlt keine Unterordner oder untersttzten Bilddateien.",noTags:"Keine Tags vorhanden",noTagsHint:"Whle Bilder aus und vergebe Tags",openTagManager:"Tag-Manager ffnen"},Zv={ratingSet:"Bewertung:",ratingFailed:"Bewertung konnte nicht gespeichert werden"},Jv={close:"Schlieen (ESC)",previous:"Vorheriges ()",next:"Nchstes ()",info:"Info (I)",rotateLeft:"Links drehen",rotateRight:"Rechts drehen",flipHorizontal:"Horizontal spiegeln",flipVertical:"Vertikal spiegeln",zoomOut:"Verkleinern (-)",zoomIn:"Vergrern (+)",filmstrip:"Filmstreifen"},ey={selectedTags:"Tags der Auswahl"},ty={images:"Bilder",folders:"Ordner",selected:"ausgewhlt"},ny={title:"Tag Manager",newCategory:"Neue Kategorie hinzufgen...",newSubcategory:"Neue Unterkategorie...",newTag:"Neuer Tag...",import:"Importieren",export:"Exportieren"},ry={title:"Willkommen bei TagFusion",subtitle:"Organisiere deine Bildersammlung mit modernem Tagging, blitzschneller Suche und intuitiver Bedienung.",drives:"Gerte und Laufwerke",freeOf:"frei von"},sy={toolbar:Yv,sidebar:Xv,tagPanel:Gv,settings:qv,common:Kv,emptyState:Qv,imageCard:Zv,lightbox:Jv,mainContent:ey,statusBar:ty,tagManager:ny,hero:ry},oy={search:"Search images or tags...",home:"Home",sort:{name:"Name",date:"Date",size:"Size",rating:"Rating"},rating:"Rating",clearFilters:"Clear all filters",resetFilter:"Reset filter",rotate90Left:"Rotate 90 left",rotate90Right:"Rotate 90 right",rotate180:"Rotate 180",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",selected:"selected",file:"File",tag:"Tag",noSuggestions:"No suggestions found"},iy={openFile:"Open file",selectFolder:"Select folder",recentFolders:"Recent folders",favorites:"Favorites",noFavorites:"No favorites",noRecentFolders:"No folders"},ay={title:"Tags",addTag:"Add tag",noTags:"No tags",folderTags:"Folder tags",imageTags:"Image tags",selectImage:"Select image"},ly={title:"Settings",language:"Language",theme:"Theme",themeLight:"Light",themeDark:"Dark",performanceMode:"Performance mode",performanceModeDesc:"Reduces glass effects"},cy={loading:"Loading...",loadingItems:"Loading items...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",parentFolder:"Parent folder"},uy={noResults:"No results",noResultsHint:"Try different search terms or filters",resetFilters:"Reset filters",folderEmpty:"Folder is empty",noImages:"This folder contains no subfolders or supported image files.",noTags:"No tags available",noTagsHint:"Select images and assign tags",openTagManager:"Open Tag Manager"},dy={ratingSet:"Rating:",ratingFailed:"Failed to save rating"},fy={close:"Close (ESC)",previous:"Previous ()",next:"Next ()",info:"Info (I)",rotateLeft:"Rotate left",rotateRight:"Rotate right",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",zoomOut:"Zoom out (-)",zoomIn:"Zoom in (+)",filmstrip:"Filmstrip"},py={selectedTags:"Selection tags"},gy={images:"images",folders:"folders",selected:"selected"},my={title:"Tag Manager",newCategory:"Add new category...",newSubcategory:"New subcategory...",newTag:"New tag...",import:"Import",export:"Export"},hy={title:"Welcome to TagFusion",subtitle:"Organize your image collection with modern tagging, lightning-fast search, and intuitive controls.",drives:"Devices and Drives",freeOf:"free of"},xy={toolbar:oy,sidebar:iy,tagPanel:ay,settings:ly,common:cy,emptyState:uy,imageCard:dy,lightbox:fy,mainContent:py,statusBar:gy,tagManager:my,hero:hy},by={de:{common:sy},en:{common:xy}};li.use(Jf).use(ep).init({resources:by,fallbackLng:"de",defaultNS:"common",ns:["common"],detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"tagfusion-language"},interpolation:{escapeValue:!1},react:{useSuspense:!1}});const oi=e=>{e==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light-mode")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light-mode"))},hf=mn()(km(e=>({performanceMode:!1,language:"de",theme:"dark",setPerformanceMode:t=>{e({performanceMode:t}),t?document.documentElement.classList.add("performance-mode"):document.documentElement.classList.remove("performance-mode")},togglePerformanceMode:()=>{e(t=>{const n=!t.performanceMode;return n?document.documentElement.classList.add("performance-mode"):document.documentElement.classList.remove("performance-mode"),{performanceMode:n}})},setLanguage:t=>{e({language:t}),li.changeLanguage(t)},setTheme:t=>{e({theme:t}),oi(t)},toggleTheme:()=>{e(t=>{const n=t.theme==="dark"?"light":"dark";return oi(n),{theme:n}})}}),{name:"tagfusion-settings",onRehydrateStorage:()=>e=>{e?.performanceMode&&document.documentElement.classList.add("performance-mode"),e?.theme&&oi(e.theme),e?.language&&li.changeLanguage(e.language)}}));function vy({onTagClick:e,searchQuery:t=""}){const{categories:n}=Ia(),r=is(),s=os(),o=Su(),i=d.useMemo(()=>new Map(s.map(p=>[p.path,p])),[s]),a=d.useMemo(()=>{const p=Array.from(r).map(g=>i.get(g)).filter(Boolean);return new Set(p.flatMap(g=>g.tags))},[i,r]),l=d.useMemo(()=>{if(!t.trim())return n;const p=t.toLowerCase();return n.map(g=>({...g,subcategories:g.subcategories.map(m=>({...m,tags:m.tags.filter(y=>y.toLowerCase().includes(p))})).filter(m=>m.tags.length>0)})).filter(g=>g.subcategories.length>0)},[n,t]),u=async p=>{if(e){e(p);return}if(r.size!==0)for(const g of r){const m=i.get(g);m&&!m.tags.includes(p)&&await o(g,[...m.tags,p])}},f=async(p,g)=>{if(g.stopPropagation(),r.size!==0)for(const m of r){const y=i.get(m);y&&y.tags.includes(p)&&await o(m,y.tags.filter(b=>b!==p))}};return l.length===0?c.jsxs("div",{className:"text-center py-4 text-slate-500",children:[c.jsx(Ec,{size:20,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-xs",children:t?"Keine Tags gefunden":"Keine Tag-Bibliothek"})]}):c.jsx("div",{className:"space-y-2",children:l.map(p=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 text-sm text-cyan-400 font-medium",children:[c.jsx("span",{children:p.name}),c.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:p.subcategories.reduce((g,m)=>g+m.tags.length,0)})]}),c.jsx("div",{className:"pl-2 space-y-1",children:p.subcategories.map(g=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 text-xs text-slate-400",children:[c.jsx("span",{children:g.name}),c.jsx("span",{className:"text-slate-500 ml-auto",children:g.tags.length})]}),g.tags.length>0&&c.jsx("div",{className:"pl-3 py-1 flex flex-wrap gap-1.5",children:g.tags.map(m=>{const y=r.size>0&&a.has(m);return c.jsxs("div",{className:"inline-flex items-center gap-0.5 rounded-full text-xs cursor-pointer hover:scale-105 transition-transform",style:{background:y?"linear-gradient(135deg, rgba(6, 182, 212, 0.4) 0%, rgba(6, 182, 212, 0.2) 100%)":"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:y?"1px solid rgba(6, 182, 212, 0.6)":"1px solid rgba(6, 182, 212, 0.25)"},children:[c.jsx("button",{onClick:()=>u(m),className:`px-2 py-0.5 ${y?"text-cyan-300":"text-slate-200"}`,title:r.size>0?`"${m}" zu ${r.size} Bild(ern) hinzufgen`:m,children:m}),y&&c.jsx("button",{onClick:b=>f(m,b),className:"pr-1.5 pl-0.5 py-0.5 text-cyan-400 hover:text-red-400 transition-colors",title:`"${m}" von ${r.size} Bild(ern) entfernen`,children:c.jsx(dn,{size:12})})]},m)})})]},g.id))})]},p.id))})}function yy(){const{t:e}=Nt(),{images:t,tagPanelWidth:n,setTagPanelWidth:r,filterTags:s,setFilterTags:o}=ah(),{openModal:i,categories:a}=Ia(),[l,u]=d.useState(!1),[f,p]=d.useState(""),g=d.useRef(null),[m,y]=d.useState(()=>localStorage.getItem("tagfusion-folder-tags-collapsed")==="true");d.useEffect(()=>{localStorage.setItem("tagfusion-folder-tags-collapsed",String(m))},[m]);const b=d.useCallback(x=>{x.preventDefault(),u(!0);const h=x.clientX,S=n,R=T=>{const E=h-T.clientX,I=Math.min(Wm,Math.max(Bm,S+E));r(I)},w=()=>{u(!1),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",w)},[n,r]),v=d.useMemo(()=>{const x=new Map;return t.forEach(h=>{h.tags?.forEach(S=>{x.set(S,(x.get(S)||0)+1)})}),Array.from(x.entries()).map(([h,S])=>({name:h,count:S})).sort((h,S)=>S.count-h.count)},[t]);return c.jsxs("aside",{ref:g,className:"h-full flex flex-col glass-tagpanel relative",style:{width:n},"data-testid":"tag-panel",children:[c.jsx("div",{onMouseDown:b,className:`absolute left-0 top-0 bottom-0 w-1 cursor-ew-resize group hover:bg-cyan-500/30 transition-colors z-10 ${l?"bg-cyan-500/50":""}`,children:c.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(mp,{size:12,className:"text-cyan-400"})})}),c.jsxs(fu,{className:"flex-1 overflow-hidden",children:[c.jsxs(pu,{className:"h-full w-full p-4 space-y-4",children:[c.jsxs("div",{className:"glass-section p-3",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("button",{onClick:()=>y(x=>!x),className:`flex items-center gap-2 w-full text-left cursor-pointer group ${m?"":"mb-3"}`,children:[c.jsx(rr,{size:14,className:"text-cyan-400"}),c.jsx("h4",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("tagPanel.folderTags")}),c.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["(",c.jsx(Vs,{value:v.length,className:"text-cyan-400"}),")"]}),c.jsx(zi,{size:14,className:`text-cyan-400 ml-auto transition-transform duration-200 ${m?"-rotate-90":""}`})]}),c.jsx(un,{initial:!1,children:!m&&c.jsx(he.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:v.length===0?c.jsxs("div",{className:"text-center py-6 text-[var(--color-text-muted)]",children:[c.jsx(sr,{size:24,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-sm",children:e("tagPanel.noTags")})]}):c.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(({name:x,count:h},S)=>{const R=s.includes(x);return c.jsx($0,{active:R,count:h,variant:"cyan",delay:S,onClick:()=>{o(R?s.filter(w=>w!==x):[...s,x])},removable:!1,children:x},x)})})})})]}),c.jsxs("div",{className:"glass-section p-3",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ec,{size:14,className:"text-cyan-400"}),c.jsx("h4",{className:"text-xs font-semibold text-cyan-400 uppercase tracking-wider",children:e("tagPanel.title")})]}),c.jsx(wt,{onClick:i,title:e("common.edit"),size:"xs",variant:"ghost",children:c.jsx(hp,{size:14})})]}),c.jsx(Cu,{leftIcon:c.jsx(Cc,{size:14}),value:f,onChange:x=>p(x.target.value),placeholder:e("tagPanel.addTag"),className:"mb-3"}),a.length>0?c.jsx(vy,{searchQuery:f}):c.jsx("p",{className:"text-xs text-[var(--color-text-muted)] text-center py-2",children:e("tagPanel.selectImage")})]})]}),c.jsx(mu,{orientation:"vertical",className:"w-2 p-0.5 flex touch-none select-none transition-colors bg-transparent hover:bg-white/5",children:c.jsx(hu,{className:"flex-1 rounded-full bg-cyan-500/30 hover:bg-cyan-500/50 transition-colors"})})]})]})}function wy(e){const t=d.useRef(!0);t.current&&(t.current=!1,e())}const xf=d.createContext(void 0),bf=d.createContext(void 0),vf=d.createContext(void 0),yf=d.createContext("");function vn(){const e=d.useContext(xf);if(!e)throw new Error(qe(22));return e}function Ha(){const e=d.useContext(bf);if(!e)throw new Error(qe(23));return e}function $n(){const e=d.useContext(vf);if(!e)throw new Error(qe(24));return e}function wf(){return d.useContext(yf)}const Sy=(e,t)=>Object.is(e,t);function fr(e,t,n){return e==null||t==null?Object.is(e,t):n(e,t)}function Os(e,t,n){return!e||e.length===0?!1:e.some(r=>r===void 0?!1:fr(r,t,n))}function Li(e,t,n){return!e||e.length===0?-1:e.findIndex(r=>r===void 0?!1:fr(r,t,n))}function Ry(e,t,n){return e.filter(r=>!fr(r,t,n))}const ge={id:$(e=>e.id),query:$(e=>e.query),items:$(e=>e.items),selectedValue:$(e=>e.selectedValue),open:$(e=>e.open),mounted:$(e=>e.mounted),forceMounted:$(e=>e.forceMounted),inline:$(e=>e.inline),activeIndex:$(e=>e.activeIndex),selectedIndex:$(e=>e.selectedIndex),isActive:$((e,t)=>e.activeIndex===t),isSelected:$((e,t)=>{const n=e.isItemEqualToValue,r=e.selectedValue;return Array.isArray(r)?r.some(s=>fr(s,t,n)):fr(r,t,n)}),transitionStatus:$(e=>e.transitionStatus),popupProps:$(e=>e.popupProps),inputProps:$(e=>e.inputProps),triggerProps:$(e=>e.triggerProps),getItemProps:$(e=>e.getItemProps),positionerElement:$(e=>e.positionerElement),listElement:$(e=>e.listElement),triggerElement:$(e=>e.triggerElement),inputElement:$(e=>e.inputElement),popupSide:$(e=>e.popupSide),openMethod:$(e=>e.openMethod),inputInsidePopup:$(e=>e.inputInsidePopup),selectionMode:$(e=>e.selectionMode),listRef:$(e=>e.listRef),labelsRef:$(e=>e.labelsRef),popupRef:$(e=>e.popupRef),emptyRef:$(e=>e.emptyRef),inputRef:$(e=>e.inputRef),keyboardActiveRef:$(e=>e.keyboardActiveRef),chipsContainerRef:$(e=>e.chipsContainerRef),clearRef:$(e=>e.clearRef),valuesRef:$(e=>e.valuesRef),allValuesRef:$(e=>e.allValuesRef),name:$(e=>e.name),disabled:$(e=>e.disabled),readOnly:$(e=>e.readOnly),required:$(e=>e.required),grid:$(e=>e.grid),isGrouped:$(e=>e.isGrouped),virtualized:$(e=>e.virtualized),onOpenChangeComplete:$(e=>e.onOpenChangeComplete),openOnInputClick:$(e=>e.openOnInputClick),itemToStringLabel:$(e=>e.itemToStringLabel),isItemEqualToValue:$(e=>e.isItemEqualToValue),modal:$(e=>e.modal),autoHighlight:$(e=>e.autoHighlight),submitOnItemClick:$(e=>e.submitOnItemClick)};function Di(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Ey(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function dt(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return Di(e)}function ii(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?Di(e.value):Di(e)}function Cy(e,t){return(n,r)=>{if(n==null)return!1;const s=dt(n,t);return e.contains(s,r)}}function Iy(e,t,n){return(r,s)=>{if(r==null)return!1;if(!s)return!0;const o=dt(r,t),i=n!=null?dt(n,t):"";return i&&e.contains(i,s)&&i.length===s.length?!0:e.contains(o,s)}}const mc=new Map;function Sf(e){return Array.isArray(e)?e.map(t=>Sf(t)).join(","):e==null?"":String(e)}function Ty(e={}){const t={usage:"search",sensitivity:"base",ignorePunctuation:!0,...e},n=`${Sf(e.locale)}|${JSON.stringify(t)}`,r=mc.get(n);if(r)return r;const s=new Intl.Collator(e.locale,t),o={contains(i,a,l){if(!a)return!0;const u=dt(i,l);for(let f=0;f<=u.length-a.length;f+=1)if(s.compare(u.slice(f,f+a.length),a)===0)return!0;return!1},startsWith(i,a,l){if(!a)return!0;const u=dt(i,l);return s.compare(u.slice(0,a.length),a)===0},endsWith(i,a,l){if(!a)return!0;const u=dt(i,l),f=a.length;return u.length>=f&&s.compare(u.slice(u.length-f),a)===0}};return mc.set(n,o),o}const Py=Ty;function Ms(e,t){const n=d.useRef(e),r=Z(t);ne(()=>{n.current!==e&&r(n.current)},[e,r]),ne(()=>{n.current=e},[e])}const Rf=Symbol("none"),Pn={value:Rf,index:-1};function Oy(e){const{id:t,onOpenChangeComplete:n,defaultSelectedValue:r=null,selectedValue:s,onSelectedValueChange:o,defaultInputValue:i,inputValue:a,selectionMode:l="none",onItemHighlighted:u,name:f,disabled:p=!1,readOnly:g=!1,required:m=!1,inputRef:y,grid:b=!1,items:v,filteredItems:x,filter:h,openOnInputClick:S=!0,autoHighlight:R=!1,keepHighlight:w=!1,highlightItemOnHover:T=!0,itemToStringLabel:E,itemToStringValue:I,isItemEqualToValue:j=Sy,virtualized:M=!1,inline:N=!1,fillInputOnItemPress:P=!0,modal:C=!1,limit:A=-1,autoComplete:O="list",locale:F,submitOnItemClick:L=!1}=e,{clearErrors:k}=jd(),{setDirty:_,validityData:z,shouldValidateOnChange:X,setFilled:H,name:B,disabled:Q,validation:re}=wo(),le=Rb({id:t}),ue=Py({locale:F}),[J,ce]=d.useState(!1),[V,D]=d.useState(null),se=d.useRef([]),K=d.useRef([]),ae=d.useRef(null),W=d.useRef(null),U=d.useRef(null),Y=d.useRef(!0),ve=d.useRef(!1),xe=d.useRef(null),Re=d.useRef(null),ee=d.useRef(null),fe=d.useRef(Pn),te=d.useRef(null),de=d.useRef([]),oe=d.useRef([]),Ee=Q||p,Pe=B??f,ye=l==="multiple",je=l==="single",_e=a!==void 0||i!==void 0,Be=v!==void 0,Ke=x!==void 0;let Le;R==="always"?Le="always":Le=R?"input-change":!1;const[q,Ae]=Ns({controlled:s,default:ye?r??Xt:r,name:"Combobox",state:"selectedValue"}),De=d.useMemo(()=>h===null?()=>!0:h!==void 0?h:je&&!J?Iy(ue,E,q):Cy(ue,E),[h,je,q,J,ue,E]),be=ut(()=>_e?i??"":je?dt(q,E):"").current,[Se,Qe]=Ns({controlled:a,default:be,name:"Combobox",state:"inputValue"}),[ke,It]=Ns({controlled:e.open,default:e.defaultOpen,name:"Combobox",state:"open"}),We=Ey(v),Ue=V??(Se===""?"":String(Se).trim()),yn=je?dt(q,E):"",yr=je&&!J&&Ue!==""&&yn!==""&&yn.length===Ue.length&&ue.contains(yn,Ue),wn=yr?"":Ue,ds=Be&&Ke&&yr,jt=d.useMemo(()=>v?We?v.flatMap(ie=>ie.items):v:Xt,[v,We]),Sn=d.useMemo(()=>{if(x&&!ds)return x;if(!v)return Xt;if(We){const we=v,Te=[];let Ve=0;for(const Ze of we){if(A>-1&&Ve>=A)break;const at=wn===""?Ze.items:Ze.items.filter(ms=>De(ms,wn,E));if(at.length===0)continue;const Cn=A>-1?A-Ve:1/0,In=at.slice(0,Cn);if(In.length>0){const ms={...Ze,items:In};Te.push(ms),Ve+=In.length}}return Te}if(wn==="")return A>-1?jt.slice(0,A):jt;const ie=[];for(const we of jt){if(A>-1&&ie.length>=A)break;De(we,wn,E)&&ie.push(we)}return ie},[x,ds,v,We,wn,A,De,E,jt]),ct=d.useMemo(()=>We?Sn.flatMap(we=>we.items):Sn,[Sn,We]),Ce=ut(()=>new Qn({id:le,selectedValue:q,open:ke,filter:De,query:Ue,items:v,selectionMode:l,listRef:se,labelsRef:K,popupRef:ae,emptyRef:U,inputRef:W,keyboardActiveRef:Y,chipsContainerRef:xe,clearRef:Re,valuesRef:de,allValuesRef:oe,selectionEventRef:ee,name:Pe,disabled:Ee,readOnly:g,required:m,grid:b,isGrouped:We,virtualized:M,openOnInputClick:S,itemToStringLabel:E,isItemEqualToValue:j,modal:C,autoHighlight:Le,submitOnItemClick:L,hasInputValue:_e,mounted:!1,forceMounted:!1,transitionStatus:"idle",inline:N,activeIndex:null,selectedIndex:null,popupProps:{},inputProps:{},triggerProps:{},positionerElement:null,listElement:null,triggerElement:null,inputElement:null,popupSide:null,openMethod:null,inputInsidePopup:!0,onOpenChangeComplete:n||Xe,setOpen:Xe,setInputValue:Xe,setSelectedValue:Xe,setIndices:Xe,onItemHighlighted:Xe,handleSelection:Xe,getItemProps:()=>He,forceMount:Xe,requestSubmit:Xe})).current,Rn=l==="none"?Se:q,wr=Z(u),Bt=Z(n),Bn=pe(Ce,ge.activeIndex),Mo=pe(Ce,ge.selectedIndex),Wn=pe(Ce,ge.positionerElement),Wa=pe(Ce,ge.listElement),Sr=pe(Ce,ge.triggerElement),ko=pe(Ce,ge.inputElement),Wt=pe(Ce,ge.inline),En=pe(Ce,ge.inputInsidePopup),Of=rt(Sr),{mounted:Ua,setMounted:Mf,transitionStatus:No}=lo(ke),{openMethod:Ya,triggerProps:jo,reset:kf}=ya(ke);Eb({id:le,name:Pe,commit:re.commit,value:Rn,controlRef:En?Of:W,getValue:()=>Rn});const fs=Z(()=>{v?K.current=ct.map(ie=>dt(ie,E)):Ce.set("forceMounted",!0)}),Nf=d.useRef(q);ne(()=>{q!==Nf.current&&fs()},[fs,q]);const xt=Z(ie=>{Ce.update(ie);const we=ie.type||"none";if(ie.activeIndex!==void 0)if(ie.activeIndex===null)fe.current!==Pn&&(fe.current=Pn,wr(void 0,Er(we,void 0,{index:-1})));else{const Te=de.current[ie.activeIndex];fe.current={value:Te,index:ie.activeIndex},wr(Te,Er(we,void 0,{index:ie.activeIndex}))}}),bt=Z((ie,we)=>{if(ve.current=we.reason===Jt,e.onInputValueChange?.(ie,we),!we.isCanceled){if(we.reason===kn){const Te=ie.trim()!=="";Te&&ce(!0),te.current={hasQuery:Te},Te&&Le&&Ce.state.activeIndex==null&&Ce.set("activeIndex",0)}Qe(ie)}}),Rr=Z((ie,we)=>{ke!==ie&&(we.reason==="escape-key"&&Be&&ct.length===0&&!Ce.state.emptyRef.current&&we.allowPropagation(),e.onOpenChange?.(ie,we),!we.isCanceled&&(!ie&&J&&(je?(D(Ue),Ue===""&&ce(!1)):ye&&(Wt||En?xt({activeIndex:null}):D(Ue),bt("",me(Jt,we.event)))),It(ie)))}),ps=Z((ie,we)=>{if(o?.(ie,we),we.isCanceled)return;Ae(ie),(l==="none"&&ae.current&&P||je&&!Ce.state.inputInsidePopup)&&bt(dt(ie,E),me(we.reason,we.event)),je&&ie!=null&&we.reason!==kn&&J&&D(Ue)}),jf=Z((ie,we)=>{let Te=we;if(Te===void 0){if(Bn===null)return;Te=de.current[Bn]}const Ve=st(ie),Ze=ee.current??ie;ee.current=null;const at=me(Bi,Ze),Cn=Ve?.closest("a")?.getAttribute("href");if(Cn){Cn.startsWith("#")&&Rr(!1,at);return}if(ye){const In=Array.isArray(q)?q:[],Uf=Os(In,Te,Ce.state.isItemEqualToValue)?Ry(In,Te,Ce.state.isItemEqualToValue):[...In,Te];if(ps(Uf,at),!(W.current?W.current.value.trim()!=="":!1))return;Ce.state.inputInsidePopup?bt("",me(Jt,at.event)):Rr(!1,at)}else ps(Te,at),Rr(!1,at)}),Ao=Z(()=>{if(!Ce.state.submitOnItemClick)return;const ie=Ce.state.inputElement?.form;ie&&typeof ie.requestSubmit=="function"&&ie.requestSubmit()}),Fo=Z(()=>{if(Mf(!1),Bt?.(!1),ce(!1),kf(),D(null),xt(l==="none"?{activeIndex:null,selectedIndex:null}:{activeIndex:null}),ye&&W.current&&W.current.value!==""&&!ve.current&&bt("",me(Jt)),je)if(Ce.state.inputInsidePopup)W.current&&W.current.value!==""&&bt("",me(Jt));else{const ie=dt(q,E);W.current&&W.current.value!==ie&&bt(ie,me(ie===""?Jt:yt))}}),Af=d.useMemo(()=>Wt&&Wn?{current:Wn.closest('[role="dialog"]')}:ae,[Wt,Wn]);zn({enabled:!e.actionsRef,open:ke,ref:Af,onComplete(){ke||Fo()}}),d.useImperativeHandle(e.actionsRef,()=>({unmount:Fo}),[Fo]),ne(function(){if(ke||l==="none")return;const we=v?jt:oe.current;if(ye){const Te=Array.isArray(q)?q:[],Ve=Te[Te.length-1],Ze=Li(we,Ve,j);xt({selectedIndex:Ze===-1?null:Ze})}else{const Te=Li(we,q,j);xt({selectedIndex:Te===-1?null:Te})}},[ke,q,v,l,jt,ye,j,xt]),ne(()=>{v&&(de.current=ct,se.current.length=ct.length)},[v,ct]),ne(()=>{const ie=te.current;if(ie&&(ie.hasQuery?Le&&Ce.set("activeIndex",0):Le==="always"&&Ce.set("activeIndex",0),te.current=null),!ke&&!Wt)return;const Te=Be||Ke?ct:de.current,Ve=Ce.state.activeIndex;if(Ve==null){if(Le==="always"&&Te.length>0){Ce.set("activeIndex",0);return}fe.current!==Pn&&(fe.current=Pn,Ce.state.onItemHighlighted(void 0,Er(yt,void 0,{index:-1})));return}if(Ve>=Te.length){fe.current!==Pn&&(fe.current=Pn,Ce.state.onItemHighlighted(void 0,Er(yt,void 0,{index:-1}))),Ce.set("activeIndex",null);return}const Ze=Te[Ve],at=fe.current.value,Cn=at!==Rf&&Ce.state.isItemEqualToValue(Ze,at);(fe.current.index!==Ve||!Cn)&&(fe.current={value:Ze,index:Ve},Ce.state.onItemHighlighted(Ze,Er(yt,void 0,{index:Ve})))},[Bn,Le,Ke,Be,ct,Wt,ke,Ce]),ne(()=>{if(!v||l==="none")return;const ie=jt;if(ye){const Ve=Array.isArray(q)?q:Xt,Ze=Ve.filter(at=>Os(ie,at,Ce.state.isItemEqualToValue));Ze.length!==Ve.length&&Ae(Ze);return}if(q==null?!0:Os(ie,q,Ce.state.isItemEqualToValue))return;let Te=null;if(r!=null&&Os(ie,r,Ce.state.isItemEqualToValue)&&(Te=r),Ae(Te),!Ce.state.inputInsidePopup){const Ve=dt(Te,E);W.current&&W.current.value!==Ve&&bt(Ve,me(yt))}},[v,jt,ye,l,q,r,Ae,E,Ce,bt]),ne(()=>{if(l==="none"){H(String(Se)!=="");return}H(ye?Array.isArray(q)&&q.length>0:q!=null)},[H,l,Se,q,ye]),d.useEffect(()=>{Be&&Le&&ct.length===0&&xt({activeIndex:null})},[Be,Le,ct.length,xt]),Ms(Ue,()=>{!ke||Ue===""||Ue===String(be)||ce(!0)}),Ms(q,()=>{if(l!=="none"&&(k(Pe),_(q!==z.initialValue),X()?re.commit(q):re.commit(q,!0),ye&&Ce.state.selectedIndex!==null&&(!Array.isArray(q)||q.length===0)&&xt({activeIndex:null,selectedIndex:null}),je&&!_e&&!En)){const ie=dt(q,E);Se!==ie&&bt(ie,me(yt))}}),Ms(Se,()=>{l==="none"&&(k(Pe),_(Se!==z.initialValue),X()?re.commit(Se):re.commit(Se,!0))}),Ms(v,()=>{if(!je||_e||En||J)return;const ie=dt(q,E);Se!==ie&&bt(ie,me(yt))});const gs=td({open:Wt?!0:ke,onOpenChange:Rr,elements:{reference:En?Sr:ko,floating:Wn}});let Lo,Do;Wt||(Lo=b?"grid":"listbox",Do=ke?"true":"false");const Ff=d.useMemo(()=>{const ie=ko?.tagName==="INPUT",we=ie||ke,Te=ie?{autoComplete:"off",spellCheck:"false",autoCorrect:"off",autoCapitalize:"none"}:{};return we&&(Te.role="combobox",Te["aria-expanded"]=Do,Te["aria-haspopup"]=Lo,Te["aria-controls"]=ke?Wa?.id:void 0,Te["aria-autocomplete"]=O),{reference:Te,floating:{role:"presentation"}}},[ko,ke,Do,Lo,Wa?.id,O]),Lf=da(gs,{enabled:!g&&!Ee&&S,event:"mousedown-only",toggle:!1,touchOpenDelay:En?0:50}),Df=pa(gs,{enabled:!g&&!Ee&&!Wt,outsidePressEvent:{mouse:"sloppy",touch:"intentional"},bubbles:Wt?!0:void 0,outsidePress(ie){const we=st(ie);return!Oe(Sr,we)&&!Oe(Re.current,we)&&!Oe(xe.current,we)}}),_f=id(gs,{enabled:!g&&!Ee,id:le,listRef:se,activeIndex:Bn,selectedIndex:Mo,virtual:!0,loopFocus:!0,allowEscape:!Le,focusItemOnOpen:J||l==="none"&&!Le?!1:"auto",focusItemOnHover:T,resetOnPointerLeave:!w,cols:b?2:1,orientation:b?"horizontal":void 0,disabledIndices:Xt,onNavigate(ie,we){!we&&!ke||No==="ending"||xt(we?{activeIndex:ie,type:Y.current?"keyboard":"pointer"}:{activeIndex:ie})}}),{getReferenceProps:_o,getFloatingProps:zo,getItemProps:Vo}=ls([Ff,Lf,Df,_f]);wy(()=>{Ce.update({inline:N,popupProps:zo(),inputProps:_o(),triggerProps:jo,getItemProps:Vo,setOpen:Rr,setInputValue:bt,setSelectedValue:ps,setIndices:xt,onItemHighlighted:wr,handleSelection:jf,forceMount:fs,requestSubmit:Ao})}),ne(()=>{Ce.update({id:le,selectedValue:q,open:ke,mounted:Ua,transitionStatus:No,items:v,inline:N,popupProps:zo(),inputProps:_o(),triggerProps:jo,openMethod:Ya,getItemProps:Vo,selectionMode:l,name:Pe,disabled:Ee,readOnly:g,required:m,grid:b,isGrouped:We,virtualized:M,onOpenChangeComplete:Bt,openOnInputClick:S,itemToStringLabel:E,modal:C,autoHighlight:Le,isItemEqualToValue:j,submitOnItemClick:L,hasInputValue:_e,requestSubmit:Ao})},[Ce,le,q,ke,Ua,No,v,zo,_o,Vo,Ya,jo,l,Pe,Ee,g,m,re,b,We,M,Bt,S,E,C,j,L,_e,N,Ao,Le]);const zf=fn(y,re.inputRef),Vf=d.useMemo(()=>({query:Ue,filteredItems:Sn,flatFilteredItems:ct}),[Ue,Sn,ct]),Hf=d.useMemo(()=>Array.isArray(Rn)?"":ii(Rn,I),[Rn,I]),$f=ye&&Array.isArray(q)&&q.length>0,Bf=d.useMemo(()=>!ye||!Array.isArray(q)||!Pe?null:q.map(ie=>{const we=ii(ie,I);return c.jsx("input",{type:"hidden",name:Pe,value:we},we)}),[ye,q,Pe,I]),Wf=c.jsxs(d.Fragment,{children:[e.children,c.jsx("input",{...re.getInputValidationProps({onFocus(){if(En){Sr?.focus();return}(W.current||Sr)?.focus()},onChange(ie){if(ie.nativeEvent.defaultPrevented)return;const we=ie.target.value,Te=me(kn,ie.nativeEvent);function Ve(){if(ye)return;if(l==="none"){_(we!==z.initialValue),bt(we,Te),X()&&re.commit(we);return}const Ze=de.current.find(at=>ii(at,I).toLowerCase()===we.toLowerCase());Ze!=null&&(_(Ze!==z.initialValue),ps?.(Ze,Te),X()&&re.commit(Ze))}v?Ve():(fs(),queueMicrotask(Ve))}}),id:le,name:ye||l==="none"?void 0:Pe,disabled:Ee,required:m&&!$f,readOnly:g,value:Hf,ref:zf,style:aa,tabIndex:-1,"aria-hidden":!0}),Bf]});return c.jsx(xf.Provider,{value:Ce,children:c.jsx(bf.Provider,{value:gs,children:c.jsx(vf.Provider,{value:Vf,children:c.jsx(yf.Provider,{value:Se,children:Wf})})})})}function My(e){const{multiple:t=!1,defaultValue:n,value:r,onValueChange:s,...o}=e;return c.jsx(Oy,{...o,selectionMode:t?"multiple":"single",selectedValue:r,defaultSelectedValue:n,onSelectedValueChange:s})}const ky=d.createContext(void 0);function Ny(){return d.useContext(ky)}const Ef=d.createContext(void 0);function $a(e){const t=d.useContext(Ef);if(t===void 0&&!e)throw new Error(qe(21));return t}const jy={...Qs,...bb,popupSide:e=>e?{"data-popup-side":e}:null,listEmpty:e=>e?{"data-list-empty":""}:null},Ay=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,id:i,...a}=t,{state:l,disabled:u,setTouched:f,setFocused:p,validationMode:g,validation:m}=wo(),{labelId:y}=Ad(),b=Ny(),x=!!$a(!0),h=vn(),{filteredItems:S}=$n(),R=wf(),w=Dn(i),T=hr(),E=pe(h,ge.disabled),I=pe(h,ge.readOnly),j=pe(h,ge.name),M=pe(h,ge.selectionMode),N=pe(h,ge.autoHighlight),P=pe(h,ge.inputProps),C=pe(h,ge.triggerProps),A=pe(h,ge.open),O=pe(h,ge.mounted),F=pe(h,ge.selectedValue),L=pe(h,ge.popupSide),k=pe(h,ge.positionerElement),_=!!N,z=O&&k?L:null,X=u||E||o,H=S.length===0,[B,Q]=d.useState(null),re=d.useRef(!1),le=Z(V=>{const D=x||h.state.inline;D&&!h.state.hasInputValue&&h.state.setInputValue("",me(yt)),h.update({inputElement:V,inputInsidePopup:D})}),ue=d.useMemo(()=>({...l,open:A,disabled:X,readOnly:I,popupSide:z,listEmpty:H}),[l,A,X,I,z,H]);function J(V){if(!b)return;let D;const{highlightedChipIndex:se}=b;if(se!==void 0){if(V.key==="ArrowLeft")V.preventDefault(),se>0?D=se-1:D=void 0;else if(V.key==="ArrowRight")V.preventDefault(),se<F.length-1?D=se+1:D=void 0;else if(V.key==="Backspace"||V.key==="Delete"){V.preventDefault();const K=se>=F.length-1?F.length-2:se;D=K>=0?K:void 0,h.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"})}return D}return V.key==="ArrowLeft"&&(V.currentTarget.selectionStart??0)===0&&F.length>0?(V.preventDefault(),D=Math.max(F.length-1,0)):V.key==="Backspace"&&V.currentTarget.value===""&&F.length>0&&(h.state.setIndices({activeIndex:null,selectedIndex:null,type:"keyboard"}),V.preventDefault()),D}return $e("input",t,{state:ue,ref:[n,h.state.inputRef,le],props:[P,C,{type:"text",value:t.value??B??R,"aria-readonly":I||void 0,"aria-labelledby":y,disabled:X,readOnly:I,...M==="none"&&j&&{name:j},id:w,onFocus(){p(!0)},onBlur(){if(f(!0),p(!1),g==="onBlur"){const V=M==="none"?R:F;m.commit(V)}},onCompositionStart(V){Bs||(re.current=!0,Q(V.currentTarget.value))},onCompositionEnd(V){re.current=!1;const D=V.currentTarget.value;Q(null),h.state.setInputValue(D,me(kn,V.nativeEvent))},onChange(V){if(re.current){const ae=V.currentTarget.value;Q(ae),ae===""&&!h.state.openOnInputClick&&!h.state.inputInsidePopup&&h.state.setOpen(!1,me(Jt,V.nativeEvent));const W=ae.trim(),U=_&&W!=="";!I&&!X&&W!==""&&(h.state.setOpen(!0,me(kn,V.nativeEvent)),_||h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})),A&&h.state.activeIndex!==null&&!U&&h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"});return}h.state.setInputValue(V.currentTarget.value,me(kn,V.nativeEvent));const D=V.currentTarget.value==="",se=me(Jt,V.nativeEvent);D&&!h.state.inputInsidePopup&&(M==="single"&&h.state.setSelectedValue(null,se),h.state.openOnInputClick||h.state.setOpen(!1,se));const K=V.currentTarget.value.trim();!I&&!X&&K!==""&&(h.state.setOpen(!0,me(kn,V.nativeEvent)),_||h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})),A&&h.state.activeIndex!==null&&!_&&h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"})},onKeyDown(V){if(X||I||V.ctrlKey||V.shiftKey||V.altKey||V.metaKey)return;h.state.keyboardActiveRef.current=!0;const D=V.currentTarget,se=D.scrollWidth-D.clientWidth,K=T==="rtl";if(V.key==="Home"){Je(V);const W=sl&&K?D.value.length:0;D.setSelectionRange(W,W),D.scrollLeft=0;return}if(V.key==="End"){Je(V);const W=sl&&K?0:D.value.length;D.setSelectionRange(W,W),D.scrollLeft=K?-se:se;return}if(!O&&V.key==="Escape"){const W=M==="multiple"&&Array.isArray(F)?F.length===0:F===null,U=me(ts,V.nativeEvent),Y=M==="multiple"?[]:null;h.state.setInputValue("",U),h.state.setSelectedValue(Y,U),!W&&!h.state.inline&&!U.isPropagationAllowed&&V.stopPropagation();return}if(b&&V.key==="Backspace"&&D.value===""&&b.highlightedChipIndex===void 0&&Array.isArray(F)&&F.length>0){const W=F.slice(0,-1);h.state.setIndices({activeIndex:null,selectedIndex:null,type:h.state.keyboardActiveRef.current?"keyboard":"pointer"}),h.state.setSelectedValue(W,me(yt,V.nativeEvent));return}const ae=J(V);if(b?.setHighlightedChipIndex(ae),ae!==void 0?b?.chipsRef.current[ae]?.focus():h.state.inputRef.current?.focus(),V.which!==229&&V.key==="Enter"&&A){const W=h.state.activeIndex,U=V.nativeEvent;if(W===null){h.state.setOpen(!1,me(yt,U));return}Je(V);const Y=h.state.listRef.current[W];Y&&(h.state.selectionEventRef.current=U,Y.click(),h.state.selectionEventRef.current=null)}},onPointerMove(){h.state.keyboardActiveRef.current=!1},onPointerDown(){h.state.keyboardActiveRef.current=!1}},m?m.getValidationProps(a):a],stateAttributesMapping:jy})}),Fy=d.createContext(null);function Ly(){return d.useContext(Fy)}function Dy(e){const{children:t}=e,{filteredItems:n}=$n(),r=Ly(),s=r?r.items:n;return s?c.jsx(d.Fragment,{children:s.map(t)}):null}const _y=d.forwardRef(function(t,n){var r;const{render:s,className:o,children:i,...a}=t,l=vn(),u=Ha(),f=!!$a(!0),{filteredItems:p}=$n(),g=pe(l,ge.items),m=pe(l,ge.labelsRef),y=pe(l,ge.listRef),b=pe(l,ge.selectionMode),v=pe(l,ge.grid),x=pe(l,ge.popupProps),h=pe(l,ge.disabled),S=pe(l,ge.readOnly),R=pe(l,ge.virtualized),w=b==="multiple",T=p.length===0,E=Z(C=>{l.set("positionerElement",C)}),I=Z(C=>{l.set("listElement",C)}),j=d.useMemo(()=>typeof i=="function"?r||(r=c.jsx(Dy,{children:i})):i,[i]),M=d.useMemo(()=>({empty:T}),[T]),N=u.useState("floatingId"),P=$e("div",t,{state:M,ref:[n,I,f?null:E],props:[x,{children:j,tabIndex:-1,id:N,role:v?"grid":"listbox","aria-multiselectable":w?"true":void 0,onKeyDown(C){if(!(h||S)&&C.key==="Enter"){const A=l.state.activeIndex;if(A==null)return;Je(C);const O=C.nativeEvent,F=l.state.listRef.current[A];F&&(l.state.selectionEventRef.current=O,F.click(),l.state.selectionEventRef.current=null)}},onKeyDownCapture(){l.state.keyboardActiveRef.current=!0},onPointerMoveCapture(){l.state.keyboardActiveRef.current=!1}},a]});return R?P:c.jsx(wd,{elementsRef:y,labelsRef:g?void 0:m,children:P})}),Cf=d.createContext(void 0);function zy(){const e=d.useContext(Cf);if(e===void 0)throw new Error(qe(20));return e}const Vy=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,o=vn(),i=pe(o,ge.mounted),a=pe(o,ge.forceMounted);return i||r||a?c.jsx(Cf.Provider,{value:r,children:c.jsx(la,{ref:n,...s})}):null}),Hy=d.forwardRef(function(t,n){const{render:r,className:s,anchor:o,positionMethod:i="absolute",side:a="bottom",align:l="center",sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=Lc,...x}=t,h=vn(),{filteredItems:S}=$n(),R=Ha(),w=zy(),T=pe(h,ge.modal),E=pe(h,ge.open),I=pe(h,ge.mounted),j=pe(h,ge.openMethod),M=pe(h,ge.triggerElement),N=pe(h,ge.inputElement),P=pe(h,ge.inputInsidePopup),C=S.length===0,O=xa({anchor:o??(P?M:N),floatingRootContext:R,positionMethod:i,mounted:I,side:a,sideOffset:u,align:l,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:y,disableAnchorTracking:b,keepMounted:w,collisionAvoidance:v,lazyFlip:!0});va(E&&T&&j!=="touch",M);const F=d.useMemo(()=>{const X={...O.positionerStyles};return E||(X.pointerEvents="none"),{role:"presentation",hidden:!I,style:X}},[E,I,O.positionerStyles]),L=d.useMemo(()=>({open:E,side:O.side,align:O.align,anchorHidden:O.anchorHidden,empty:C}),[E,O.side,O.align,O.anchorHidden,C]);ne(()=>{h.set("popupSide",O.side)},[h,O.side]);const k=d.useMemo(()=>({side:O.side,align:O.align,arrowRef:O.arrowRef,arrowUncentered:O.arrowUncentered,arrowStyles:O.arrowStyles,anchorHidden:O.anchorHidden,isPositioned:O.isPositioned}),[O.side,O.align,O.arrowRef,O.arrowUncentered,O.arrowStyles,O.anchorHidden,O.isPositioned]),_=Z(X=>{h.set("positionerElement",X)}),z=$e("div",t,{state:L,ref:[n,_],props:[F,x],stateAttributesMapping:xr});return c.jsxs(Ef.Provider,{value:k,children:[I&&T&&c.jsx(ba,{inert:ha(!E),cutout:N??M}),z]})}),$y={...xr,...ns},By=d.forwardRef(function(t,n){const{render:r,className:s,initialFocus:o,finalFocus:i,...a}=t,l=vn(),u=$a(),f=Ha(),{filteredItems:p}=$n(),g=pe(l,ge.mounted),m=pe(l,ge.open),y=pe(l,ge.openMethod),b=pe(l,ge.transitionStatus),v=pe(l,ge.inputInsidePopup),x=pe(l,ge.inputElement),h=p.length===0;zn({open:m,ref:l.state.popupRef,onComplete(){m&&l.state.onOpenChangeComplete(!0)}});const S=d.useMemo(()=>({open:m,side:u.side,align:u.align,anchorHidden:u.anchorHidden,transitionStatus:b,empty:h}),[m,u.side,u.align,u.anchorHidden,b,h]),R=$e("div",t,{state:S,ref:[n,l.state.popupRef],props:[{role:v?"dialog":"presentation",tabIndex:-1,onFocus(I){const j=st(I.nativeEvent);y!=="touch"&&(Oe(l.state.listElement,j)||j===I.currentTarget)&&l.state.inputRef.current?.focus()}},yo(b),a],stateAttributesMapping:$y}),T=o===void 0?v?I=>I==="touch"?l.state.popupRef.current:x:!1:o;let E;return i!=null?E=i:E=v?void 0:!1,c.jsx(ua,{context:f,disabled:!g,modal:!v,openInteractionType:y,initialFocus:T,returnFocus:E,children:R})}),Wy=d.createContext(void 0),Uy=d.createContext(!1);function Yy(){return d.useContext(Uy)}const Xy=d.memo(d.forwardRef(function(t,n){const{render:r,className:s,value:o=null,index:i,disabled:a=!1,nativeButton:l=!1,...u}=t,f=d.useRef(!1),p=d.useRef(null),g=sa({index:i,textRef:p,indexGuessBehavior:ku.GuessFromOrder}),m=vn(),y=Yy(),{flatFilteredItems:b}=$n(),v=pe(m,ge.open),x=pe(m,ge.selectionMode),h=pe(m,ge.readOnly),S=pe(m,ge.virtualized),R=pe(m,ge.isItemEqualToValue),w=x!=="none",T=i??(S?Li(b,o,R):g.index),E=g.index!==-1,I=pe(m,ge.id),j=pe(m,ge.isActive,T),M=pe(m,ge.isSelected,o),N=pe(m,ge.items),P=pe(m,ge.getItemProps),C=d.useRef(null),A=I!=null&&E?`${I}-${T}`:void 0,O=M&&w;ne(()=>{if(!(E&&(S||i!=null)))return;const re=m.state.listRef.current;return re[T]=C.current,()=>{delete re[T]}},[E,S,T,i,m]),ne(()=>{if(!E||N)return;const Q=m.state.valuesRef.current;return Q[T]=o,x!=="none"&&m.state.allValuesRef.current.push(o),()=>{delete Q[T]}},[E,N,T,o,m,x]),ne(()=>{if(!v){f.current=!1;return}if(!E||N)return;const Q=m.state.selectedValue,re=Array.isArray(Q)?Q[Q.length-1]:Q;fr(re,o,R)&&m.set("selectedIndex",T)},[E,N,v,m,T,o,R]);const F=d.useMemo(()=>({disabled:a,selected:O,highlighted:j}),[a,O,j]),L=P({active:j,selected:O});L.id=void 0,L.onFocus=void 0;const{getButtonProps:k,buttonRef:_}=gr({disabled:a,focusableWhenDisabled:!0,native:l});function z(Q){function re(){m.state.handleSelection(Q,o)}m.state.submitOnItemClick?(nt.flushSync(re),m.state.requestSubmit()):re()}const X={id:A,role:y?"gridcell":"option","aria-disabled":a||void 0,"aria-selected":w?O:void 0,tabIndex:void 0,onPointerDownCapture(Q){f.current=!0,Q.preventDefault()},onClick(Q){a||h||z(Q.nativeEvent)},onMouseUp(Q){const re=f.current;f.current=!1,!(a||h||Q.button!==0||re||!j)&&z(Q.nativeEvent)}},H=$e("div",t,{ref:[_,n,g.ref,C],state:F,props:[L,X,u,k]}),B=d.useMemo(()=>({selected:O,textRef:p}),[O,p]);return c.jsx(Wy.Provider,{value:B,children:H})})),Gy=d.forwardRef(function(t,n){const{render:r,className:s,children:o,...i}=t,{filteredItems:a}=$n(),l=vn(),u=a.length===0?o:null;return $e("div",t,{ref:[n,l.state.emptyRef],props:[{children:u,role:"status","aria-live":"polite","aria-atomic":!0},i]})}),qy={...ns,...Ou},Ky=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,keepMounted:a=!1,...l}=t,{disabled:u}=wo(),f=vn(),p=pe(f,ge.selectionMode),g=pe(f,ge.disabled),m=pe(f,ge.readOnly),y=pe(f,ge.open),b=pe(f,ge.selectedValue),v=wf();let x=!1;p==="none"?x=v!=="":p==="single"?x=b!=null:x=Array.isArray(b)&&b.length>0;const h=u||g||o,{buttonRef:S,getButtonProps:R}=gr({native:i,disabled:h}),{mounted:w,transitionStatus:T,setMounted:E}=lo(x),I=d.useMemo(()=>({disabled:h,open:y,transitionStatus:T}),[h,y,T]);zn({open:x,ref:f.state.clearRef,onComplete(){x||E(!1)}});const j=$e("button",t,{state:I,ref:[n,S,f.state.clearRef],props:[{tabIndex:-1,children:"x",disabled:h,"aria-readonly":m||void 0,onMouseDown(N){N.preventDefault()},onClick(N){if(h||m)return;const P=f.state.keyboardActiveRef;f.state.setInputValue("",me(tl,N.nativeEvent)),p!=="none"?(f.state.setSelectedValue(Array.isArray(b)?[]:null,me(tl,N.nativeEvent)),f.state.setIndices({activeIndex:null,selectedIndex:null,type:P.current?"keyboard":"pointer"})):f.state.setIndices({activeIndex:null,type:P.current?"keyboard":"pointer"}),f.state.inputRef.current?.focus()}},l,R],stateAttributesMapping:qy});return a||w?j:null}),If=d.createContext(void 0);function vr(e){const t=d.useContext(If);if(t===void 0&&!e)throw new Error(qe(47));return t}function Qy(){return{...Ju(),disabled:!1,modal:!1,instantType:void 0,openMethod:null,openChangeReason:null,titleElementId:void 0,descriptionElementId:void 0,stickIfOpen:!0,nested:!1,openOnHover:!1,closeDelay:0}}const Zy={...ed,disabled:$(e=>e.disabled),instantType:$(e=>e.instantType),openMethod:$(e=>e.openMethod),openChangeReason:$(e=>e.openChangeReason),modal:$(e=>e.modal),stickIfOpen:$(e=>e.stickIfOpen),titleElementId:$(e=>e.titleElementId),descriptionElementId:$(e=>e.descriptionElementId),openOnHover:$(e=>e.openOnHover),closeDelay:$(e=>e.closeDelay)};class Ba extends ga{constructor(t){const n={...Qy(),...t};n.open&&t?.mounted===void 0&&(n.mounted=!0),super(n,{popupRef:d.createRef(),backdropRef:d.createRef(),internalBackdropRef:d.createRef(),onOpenChange:void 0,onOpenChangeComplete:void 0,triggerFocusTargetRef:d.createRef(),beforeContentFocusGuardRef:d.createRef(),stickIfOpenTimeout:new pn,triggerElements:new bo},Zy)}setOpen=(t,n)=>{const r=n.reason===ot,s=n.reason===Mt&&n.event.detail===0,o=!t&&(n.reason===ts||n.reason==null);if(n.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},this.context.onOpenChange?.(t,n),n.isCanceled)return;const i={open:t,nativeEvent:n.event,reason:n.reason,nested:this.state.nested,triggerElement:n.trigger};this.state.floatingRootContext.context.events?.emit("openchange",i);const l=()=>{const u={open:t,openChangeReason:n.reason},f=n.trigger?.id??null;(f||t)&&(u.activeTriggerId=f,u.activeTriggerElement=n.trigger??null),this.update(u)};r?(this.set("stickIfOpen",!0),this.context.stickIfOpenTimeout.start(Ac,()=>{this.set("stickIfOpen",!1)}),nt.flushSync(l)):l(),s||o?this.set("instantType",s?"click":"dismiss"):n.reason===qt?this.set("instantType","focus"):this.set("instantType",void 0)};static useStore(t,n){const r=ut(()=>t??new Ba(n)).current;return io(r.disposeEffect),r}disposeEffect=()=>this.context.stickIfOpenTimeout.disposeEffect()}function hc({props:e}){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:s,onOpenChangeComplete:o,modal:i=!1,handle:a,triggerId:l,defaultTriggerId:u=null}=e,f=Ba.useStore(a?.store,{open:n??r,modal:i,activeTriggerId:l!==void 0?l:u});f.useControlledProp("open",n,r),f.useControlledProp("activeTriggerId",l,u);const p=f.useState("open"),g=f.useState("positionerElement"),m=f.useState("payload"),y=f.useState("openChangeReason");f.useContextCallback("onOpenChange",s),f.useContextCallback("onOpenChangeComplete",o);const{openMethod:b,triggerProps:v,reset:x}=ya(p);Qu(f);const{forceUnmount:h}=Zu(p,f,()=>{f.update({stickIfOpen:!0,openChangeReason:null}),x()});va(p&&i===!0&&y!==ot&&b!=="touch",g),d.useEffect(()=>{p||f.context.stickIfOpenTimeout.clear()},[f,p]);const S=d.useCallback(O=>{const F=me(O);return F.preventUnmountOnClose=()=>{f.set("preventUnmountingOnClose",!0)},F},[f]),R=d.useCallback(()=>{f.setOpen(!1,S(Dc))},[f,S]);d.useImperativeHandle(e.actionsRef,()=>({unmount:h,close:R}),[h,R]);const w=nd({popupStore:f,onOpenChange:f.setOpen}),T=pa(w,{outsidePressEvent:{mouse:i==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}}),E=ad(w),{getReferenceProps:I,getFloatingProps:j,getTriggerProps:M}=ls([T,E]),N=d.useMemo(()=>I(v),[I,v]),P=d.useMemo(()=>M(v),[M,v]),C=d.useMemo(()=>j(),[j]);f.useSyncedValues({modal:i,openMethod:b,activeTriggerProps:N,inactiveTriggerProps:P,popupProps:C,floatingRootContext:w,nested:$t()!=null});const A=d.useMemo(()=>({store:f}),[f]);return c.jsx(If.Provider,{value:A,children:typeof t=="function"?t({payload:m}):t})}function Jy(e){return vr(!0)?c.jsx(hc,{props:e}):c.jsx(Lu,{children:c.jsx(hc,{props:e})})}const ew=300,tw=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,handle:a,payload:l,openOnHover:u=!1,delay:f=ew,closeDelay:p=0,id:g,...m}=t,y=vr(!0),b=a?.store??y?.store;if(!b)throw new Error(qe(74));const v=Dn(g),x=b.useState("isTriggerActive",v),h=b.useState("floatingRootContext"),S=b.useState("isOpenedByTrigger",v),R=d.useRef(null),{registerTrigger:w,isMountedByThisTrigger:T}=Ku(v,R,b,{payload:l,disabled:o,openOnHover:u,closeDelay:p}),E=b.useState("openChangeReason"),I=b.useState("stickIfOpen"),j=b.useState("openMethod"),M=od(h,{enabled:h!=null&&u&&(j!=="touch"||E!==Mt),mouseOnly:!0,move:!1,handleClose:ld(),restMs:f,delay:{close:p},triggerElementRef:R,isActiveTrigger:x}),N=da(h,{enabled:h!=null,stickIfOpen:I}),P=ls([N]),C=b.useState("triggerProps",T),A=d.useMemo(()=>({disabled:o,open:S}),[o,S]),{getButtonProps:O,buttonRef:F}=gr({disabled:o,native:i}),L=d.useMemo(()=>({open(H){return H&&E===Mt?Qs.open(H):Ou.open(H)}}),[E]),k=$e("button",t,{state:A,ref:[F,n,w,R],props:[P.getReferenceProps(),M,C,{[Fc]:"",id:v},m,O],stateAttributesMapping:L}),_=d.useRef(null),z=Z(H=>{nt.flushSync(()=>{b.setOpen(!1,me(qt,H.nativeEvent,H.currentTarget))}),du(_.current)?.focus()}),X=Z(H=>{const B=b.select("positionerElement");if(B&&jn(H,B))b.context.beforeContentFocusGuardRef.current?.focus();else{nt.flushSync(()=>{b.setOpen(!1,me(qt,H.nativeEvent,H.currentTarget))});let Q=uu(R.current);for(;Q!==null&&Oe(B,Q)||Q?.hasAttribute("aria-hidden");){const re=Q;if(Q=go(Q),Q===re)break}Q?.focus()}});return x?c.jsxs(d.Fragment,{children:[c.jsx(gn,{ref:_,onFocus:z}),c.jsx(d.Fragment,{children:k},v),c.jsx(gn,{ref:b.context.triggerFocusTargetRef,onFocus:X})]}):c.jsx(d.Fragment,{children:k},v)}),Tf=d.createContext(void 0);function nw(){const e=d.useContext(Tf);if(e===void 0)throw new Error(qe(45));return e}const rw=d.forwardRef(function(t,n){const{keepMounted:r=!1,...s}=t,{store:o}=vr();return o.useState("mounted")||r?c.jsx(Tf.Provider,{value:r,children:c.jsx(la,{ref:n,...s,renderGuards:!1})}):null}),Pf=d.createContext(void 0);function sw(){const e=d.useContext(Pf);if(!e)throw new Error(qe(46));return e}const ow=d.forwardRef(function(t,n){const{render:r,className:s,anchor:o,positionMethod:i="absolute",side:a="bottom",align:l="center",sideOffset:u=0,alignOffset:f=0,collisionBoundary:p="clipping-ancestors",collisionPadding:g=5,arrowPadding:m=5,sticky:y=!1,disableAnchorTracking:b=!1,collisionAvoidance:v=qp,...x}=t,{store:h}=vr(),S=nw(),R=ia(),w=h.useState("floatingRootContext"),T=h.useState("mounted"),E=h.useState("open"),I=h.useState("openChangeReason"),j=h.useState("activeTriggerElement"),M=h.useState("modal"),N=h.useState("positionerElement"),P=h.useState("instantType"),C=h.useState("transitionStatus"),A=d.useRef(null),O=ao(N,!1,!1),F=xa({anchor:o,floatingRootContext:w,positionMethod:i,mounted:T,side:a,sideOffset:u,align:l,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:y,disableAnchorTracking:b,keepMounted:S,nodeId:R,collisionAvoidance:v,adaptiveOrigin:v0}),L=d.useMemo(()=>{const B={};return E||(B.pointerEvents="none"),{role:"presentation",hidden:!T,style:{...F.positionerStyles,...B}}},[E,T,F.positionerStyles]),k=d.useMemo(()=>({props:L,...F}),[L,F]),_=w?.select("domReferenceElement");ne(()=>{const B=_,Q=A.current;if(B&&(A.current=B),Q&&B&&B!==Q){h.set("instantType",void 0);const re=new AbortController;return O(()=>{h.set("instantType","trigger-change")},re.signal),()=>{re.abort()}}},[_,O,h]);const z=d.useMemo(()=>({open:E,side:k.side,align:k.align,anchorHidden:k.anchorHidden,instant:P}),[E,k.side,k.align,k.anchorHidden,P]),X=d.useCallback(B=>{h.set("positionerElement",B)},[h]),H=$e("div",t,{state:z,props:[k.props,yo(C),x],ref:[n,X],stateAttributesMapping:xr});return c.jsxs(Pf.Provider,{value:k,children:[T&&M===!0&&I!==ot&&c.jsx(ba,{ref:h.context.internalBackdropRef,inert:ha(!E),cutout:j}),c.jsx(Fu,{id:R,children:H})]})});function xc(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ze(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r;return(lr(n)!==o||lr(r)!==i)&&(n=o,r=i),{width:n,height:r}}const iw=typeof ResizeObserver<"u",aw=()=>!0;function lw(e){const{popupElement:t,positionerElement:n,content:r,mounted:s,enabled:o=aw,onMeasureLayout:i,onMeasureLayoutComplete:a,side:l,direction:u}=e,f=d.useRef(!0),p=ao(t,!0,!1),g=pr(),m=d.useRef(null),y=Z(i),b=Z(a),v=d.useMemo(()=>{let x=l==="top",h=l==="left";return u==="rtl"?(x=x||l==="inline-end",h=h||l==="inline-end"):(x=x||l==="inline-start",h=h||l==="inline-start"),x?{position:"absolute",[l==="top"?"bottom":"top"]:"0",[h?"right":"left"]:"0"}:He},[l,u]);ne(()=>{if(!s||!o()||!iw){f.current=!0,m.current=null;return}if(!t||!n)return;Object.entries(v).forEach(([j,M])=>{t.style.setProperty(j,M)});const x=new ResizeObserver(j=>{const M=j[0];M&&(m.current===null?m.current={width:Math.ceil(M.borderBoxSize[0].inlineSize),height:Math.ceil(M.borderBoxSize[0].blockSize)}:(m.current.width=Math.ceil(M.borderBoxSize[0].inlineSize),m.current.height=Math.ceil(M.borderBoxSize[0].blockSize)))});x.observe(t),t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto");const h=Or(t,"position","static"),S=Or(t,"transform","none"),R=Or(t,"scale","1"),w=Or(n,"--available-width","max-content"),T=Or(n,"--available-height","max-content");if(y?.(),f.current||m.current===null){n.style.setProperty("--positioner-width","max-content"),n.style.setProperty("--positioner-height","max-content");const j=xc(t);return n.style.setProperty("--positioner-width",`${j.width}px`),n.style.setProperty("--positioner-height",`${j.height}px`),h(),S(),R(),w(),T(),b?.(null,j),f.current=!1,()=>{x.disconnect()}}t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto"),n.style.setProperty("--positioner-width","max-content"),n.style.setProperty("--positioner-height","max-content");const E=xc(t);t.style.setProperty("--popup-width",`${m.current.width}px`),t.style.setProperty("--popup-height",`${m.current.height}px`),h(),S(),w(),T(),b?.(m.current,E),n.style.setProperty("--positioner-width",`${E.width}px`),n.style.setProperty("--positioner-height",`${E.height}px`);const I=new AbortController;return g.request(()=>{t.style.setProperty("--popup-width",`${E.width}px`),t.style.setProperty("--popup-height",`${E.height}px`),p(()=>{t.style.setProperty("--popup-width","auto"),t.style.setProperty("--popup-height","auto")},I.signal)}),()=>{x.disconnect(),I.abort(),g.cancel()}},[r,t,n,p,g,o,s,y,b,v])}function Or(e,t,n){const r=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{e.style.setProperty(t,r)}}const cw={...xr,...ns},uw=d.forwardRef(function(t,n){const{className:r,render:s,initialFocus:o,finalFocus:i,...a}=t,{store:l}=vr(),u=sw(),f=cd()!=null,p=hr(),g=l.useState("open"),m=l.useState("openMethod"),y=l.useState("instantType"),b=l.useState("transitionStatus"),v=l.useState("popupProps"),x=l.useState("titleElementId"),h=l.useState("descriptionElementId"),S=l.useState("modal"),R=l.useState("mounted"),w=l.useState("openChangeReason"),T=l.useState("popupElement"),E=l.useState("payload"),I=l.useState("positionerElement"),j=l.useState("activeTriggerElement"),M=l.useState("floatingRootContext");zn({open:g,ref:l.context.popupRef,onComplete(){g&&l.context.onOpenChangeComplete?.(!0)}});const N=l.useState("disabled"),P=l.useState("openOnHover"),C=l.useState("closeDelay");sd(M,{enabled:P&&!N,closeDelay:C});function A(H){return H==="touch"?l.context.popupRef.current:!0}const O=o===void 0?A:o,F=d.useMemo(()=>({open:g,side:u.side,align:u.align,instant:y,transitionStatus:b}),[g,u.side,u.align,y,b]),L=d.useCallback(H=>{l.set("popupElement",H)},[l]);function k(){M.context.events.emit("measure-layout")}function _(H,B){M.context.events.emit("measure-layout-complete",{previousDimensions:H,nextDimensions:B})}const z=d.useCallback(()=>l.context.triggerElements.size>1,[l]);lw({popupElement:T,positionerElement:I,mounted:R,content:E,enabled:z,onMeasureLayout:k,onMeasureLayoutComplete:_,side:u.side,direction:p});const X=$e("div",t,{state:F,ref:[n,l.context.popupRef,L],props:[v,{"aria-labelledby":x,"aria-describedby":h,onKeyDown(H){f&&hd.has(H.key)&&H.stopPropagation()}},yo(b),a],stateAttributesMapping:cw});return c.jsx(ua,{context:M,openInteractionType:m,modal:S==="trap-focus",disabled:!R||w===ot,initialFocus:O,returnFocus:i,restoreFocus:"popup",previousFocusableElement:ze(j)?j:void 0,nextFocusableElement:l.context.triggerFocusTargetRef,beforeContentFocusGuardRef:l.context.beforeContentFocusGuardRef,children:X})}),dw=d.forwardRef(function(t,n){const{render:r,className:s,disabled:o=!1,nativeButton:i=!0,...a}=t,{buttonRef:l,getButtonProps:u}=gr({disabled:o,focusableWhenDisabled:!1,native:i}),{store:f}=vr();return $e("button",t,{ref:[n,l],props:[{onClick(g){f.setOpen(!1,me(rg,g.nativeEvent,g.currentTarget))}},a,u]})});function fw(){const{theme:e,toggleTheme:t}=hf(),n=e==="dark";return c.jsx(wt,{onClick:t,title:n?"Light Mode":"Dark Mode",variant:"ghost",size:"sm",className:"relative w-8 h-8",children:c.jsx(un,{mode:"wait",children:n?c.jsx(he.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:c.jsx(Ic,{size:18,className:"text-cyan-400"})},"moon"):c.jsx(he.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:c.jsx(Tc,{size:18,className:"text-amber-500"})},"sun")})})}function pw(){const{t:e}=Nt(),{language:t,setLanguage:n,theme:r,setTheme:s,performanceMode:o,togglePerformanceMode:i}=hf(),[a,l]=d.useState(!1);return c.jsxs(Ed,{open:a,onOpenChange:l,children:[c.jsx(Id,{className:"relative",children:c.jsx(he.div,{animate:{rotate:a?30:0},transition:{duration:.2},children:c.jsx(wt,{variant:"ghost",size:"sm",title:e("settings.title"),children:c.jsx(xp,{size:18,className:"text-[var(--color-text-primary)]"})})})}),c.jsx(vd,{children:c.jsx(Sd,{side:"bottom",align:"end",sideOffset:8,children:c.jsx(un,{children:a&&c.jsx(he.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:c.jsxs(xd,{className:"w-64 py-2 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none",children:[c.jsx("div",{className:"px-4 py-2 border-b border-[var(--glass-border)]",children:c.jsx("h3",{className:"text-sm font-semibold text-[var(--color-text-primary)]",children:e("settings.title")})}),c.jsxs("div",{className:"px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[var(--color-text-secondary)]",children:[c.jsx(bp,{size:14}),c.jsx("span",{className:"text-xs uppercase tracking-wide",children:e("settings.language")})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n("de"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${t==="de"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[t==="de"&&c.jsx(Mr,{size:14}),"DE"]})}),c.jsx("button",{onClick:()=>n("en"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${t==="en"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[t==="en"&&c.jsx(Mr,{size:14}),"EN"]})})]})]}),c.jsxs("div",{className:"px-4 py-3 border-t border-[var(--glass-border)]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[var(--color-text-secondary)]",children:[r==="dark"?c.jsx(Ic,{size:14}):c.jsx(Tc,{size:14}),c.jsx("span",{className:"text-xs uppercase tracking-wide",children:e("settings.theme")})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>s("light"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${r==="light"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[r==="light"&&c.jsx(Mr,{size:14}),e("settings.themeLight")]})}),c.jsx("button",{onClick:()=>s("dark"),className:`flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${r==="dark"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)]"}`,children:c.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[r==="dark"&&c.jsx(Mr,{size:14}),e("settings.themeDark")]})})]})]}),c.jsx("div",{className:"px-4 py-3 border-t border-[var(--glass-border)]",children:c.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-[var(--glass-bg-hover)] transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[var(--color-text-primary)]",children:[c.jsx(vp,{size:16,className:o?"text-amber-400":"text-[var(--color-text-secondary)]"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm",children:e("settings.performanceMode")}),c.jsx("div",{className:"text-xs text-[var(--color-text-muted)]",children:e("settings.performanceModeDesc")})]})]}),c.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${o?"bg-amber-500":"bg-[var(--color-text-muted)]"}`,children:c.jsx("div",{className:`w-4 h-4 rounded-full bg-white mt-0.5 transition-transform ${o?"translate-x-5":"translate-x-0.5"}`})})]})})]})})})})})]})}function gw(){const{t:e}=Nt(),t=[{value:"name",label:e("toolbar.sort.name")},{value:"date",label:e("toolbar.sort.date")},{value:"size",label:e("toolbar.sort.size")},{value:"rating",label:e("toolbar.sort.rating")}],{searchQuery:n,setSearchQuery:r,sortBy:s,setSortBy:o,sortOrder:i,toggleSortOrder:a,filterRating:l,setFilterRating:u,clearFilters:f}=wu(),p=os(),g=oh(),m=is(),y=th(),b=qm(),v=sh(),x=na(),[h,S]=d.useState(!1),R=m.size>0,w=async M=>{if(!(!R||h)){S(!0);try{const N=Array.from(m);await et.rotateImages(N,M),await v()}catch(N){x(N.message)}finally{S(!1)}}},T=async M=>{if(!(!R||h)){S(!0);try{const N=Array.from(m);await et.flipImages(N,M),await v()}catch(N){x(N.message)}finally{S(!1)}}},E=()=>{b(null),y()},I=d.useMemo(()=>{const M=[],N=n.toLowerCase();if(!N||N.length<1)return[];const P=new Set;p.forEach(A=>{A.fileName.toLowerCase().includes(N)&&!P.has(A.fileName)&&(P.add(A.fileName),M.push({value:A.fileName,label:A.fileName,type:"file"}))});const C=new Set;return g.forEach(A=>{A.name.toLowerCase().includes(N)&&!C.has(A.name)&&(C.add(A.name),M.push({value:A.name,label:A.name,type:"tag"}))}),p.forEach(A=>{A.tags?.forEach(O=>{O.toLowerCase().includes(N)&&!C.has(O)&&(C.add(O),M.push({value:O,label:O,type:"tag"}))})}),M.slice(0,10)},[n,p,g]),j=n||l!==null;return c.jsxs(he.div,{initial:{y:-40,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:20,stiffness:300},className:"glass-toolbar flex flex-nowrap items-center gap-2 px-3 py-2 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:"/logo.png",alt:"TagFusion",className:"w-8 h-8",style:{filter:"drop-shadow(0 2px 8px rgba(6,182,212,0.4))"}}),c.jsx("span",{className:"text-lg font-bold text-cyan-400 tracking-wider",style:{fontFamily:"'Orbitron', sans-serif",textShadow:"0 2px 8px rgba(6,182,212,0.3)"},children:"TagFusion"})]}),c.jsx("div",{className:"h-6 w-px bg-[var(--glass-border)]"}),c.jsx(wt,{onClick:E,title:e("toolbar.home"),variant:"ghost",size:"md",children:c.jsx(yp,{size:18})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(My,{value:void 0,onValueChange:M=>{M&&r(M.value)},onInputValueChange:M=>r(M),children:[c.jsxs("div",{className:"w-72 relative",children:[c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:c.jsx(Cc,{size:16,className:"text-[var(--color-text-secondary)]"})}),c.jsx(Ay,{value:n,placeholder:e("toolbar.search"),className:"w-full h-8 pl-9 pr-8 rounded-lg backdrop-blur-glass-xs bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm text-[var(--color-text-primary)] placeholder-[var(--color-text-muted)] focus:outline-none focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 transition-all"}),n&&c.jsx(Ky,{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-[var(--glass-bg-hover)] text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]",children:c.jsx(dn,{size:14})})]}),c.jsx(Vy,{children:c.jsx(Hy,{side:"bottom",align:"start",sideOffset:4,children:c.jsx(By,{className:"w-72 py-1 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-[100] outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:c.jsx(_y,{children:I.length>0?I.map(M=>c.jsxs(Xy,{value:M,className:"flex items-center gap-2 px-3 py-2 text-sm text-[var(--color-text-primary)] hover:bg-[var(--glass-bg-hover)] cursor-pointer outline-none data-[highlighted]:bg-[var(--glass-bg-hover)] data-[highlighted]:text-cyan-400",children:[M.type==="file"?c.jsx(wp,{size:14,className:"text-[var(--color-text-muted)]"}):c.jsx(sr,{size:14,className:"text-cyan-500"}),c.jsx("span",{className:"truncate",children:M.label}),c.jsx("span",{className:"ml-auto text-xs text-[var(--color-text-muted)]",children:M.type==="file"?e("toolbar.file"):e("toolbar.tag")})]},`${M.type}-${M.value}`)):n.length>0?c.jsx(Gy,{className:"px-3 py-2 text-sm text-[var(--color-text-muted)]",children:e("toolbar.noSuggestions")}):null})})})})]}),c.jsxs(Ed,{children:[c.jsxs(Id,{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-glass-xs bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] border border-[var(--glass-border)] text-sm text-[var(--color-text-primary)] transition-colors data-[popup-open]:bg-[var(--glass-bg-hover)]",children:[i==="asc"?c.jsx(Ga,{size:16}):c.jsx(qa,{size:16}),c.jsx("span",{children:t.find(M=>M.value===s)?.label}),c.jsx(zi,{size:14,className:"transition-transform data-[popup-open]:rotate-180"})]}),c.jsx(vd,{children:c.jsx(Sd,{side:"bottom",align:"end",sideOffset:4,children:c.jsx(xd,{className:"w-40 py-1 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:t.map(M=>c.jsxs(kh,{onClick:()=>{s===M.value?a():o(M.value)},className:`w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-[var(--glass-bg-hover)] transition-colors cursor-pointer outline-none data-[highlighted]:bg-[var(--glass-bg-hover)] ${s===M.value?"text-cyan-400":"text-[var(--color-text-primary)]"}`,children:[c.jsx("span",{children:M.label}),s===M.value&&(i==="asc"?c.jsx(Ga,{size:14}):c.jsx(qa,{size:14}))]},M.value))})})})]}),c.jsxs(Jy,{children:[c.jsxs(tw,{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors border ${l!==null?"bg-cyan-500/20 text-cyan-400 border-cyan-500/30":"backdrop-blur-glass-xs bg-[var(--glass-bg)] hover:bg-[var(--glass-bg-hover)] border-[var(--glass-border)] text-[var(--color-text-primary)] data-[popup-open]:bg-[var(--glass-bg-hover)]"}`,children:[c.jsx(nr,{size:16,className:l!==null?"fill-cyan-400":""}),c.jsx("span",{children:l!==null?`${l}`:e("toolbar.rating")})]}),c.jsx(rw,{children:c.jsx(ow,{side:"bottom",align:"end",sideOffset:4,children:c.jsxs(uw,{className:"p-3 rounded-xl backdrop-blur-glass-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-glass-lg z-50 outline-none transition-all data-[ending-style]:opacity-0 data-[ending-style]:scale-95 data-[starting-style]:opacity-0 data-[starting-style]:scale-95",children:[c.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(M=>c.jsx("button",{onClick:()=>u(l===M?null:M),className:"p-1.5 hover:bg-[var(--glass-bg-hover)] rounded-lg transition-colors",children:c.jsx(nr,{size:20,className:`transition-colors ${l!==null&&M<=l?"text-cyan-400 fill-cyan-400":"text-[var(--color-text-muted)]"}`})},M))}),l!==null&&c.jsx(dw,{className:"w-full text-xs text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] py-1",children:e("toolbar.resetFilter")})]})})})]}),j&&c.jsx(wt,{onClick:f,title:e("toolbar.clearFilters"),variant:"danger",size:"sm",children:c.jsx(dn,{size:16})}),R&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-6 w-px bg-[var(--glass-border)]"}),c.jsx("div",{className:"flex items-center gap-1",children:h?c.jsx("div",{className:"px-3 py-1.5",children:c.jsx(_i,{size:"sm",color:"secondary"})}):c.jsxs(c.Fragment,{children:[c.jsx(wt,{onClick:()=>w(-90),title:e("toolbar.rotate90Left"),size:"sm",children:c.jsx(Sp,{size:16})}),c.jsx(wt,{onClick:()=>w(90),title:e("toolbar.rotate90Right"),size:"sm",children:c.jsx(Rp,{size:16})}),c.jsx(wt,{onClick:()=>w(180),title:e("toolbar.rotate180"),size:"sm",children:c.jsx(Pc,{size:16})}),c.jsx("div",{className:"w-px h-4 bg-[var(--glass-border)] mx-1"}),c.jsx(wt,{onClick:()=>T(!0),title:e("toolbar.flipHorizontal"),size:"sm",children:c.jsx(Ep,{size:16})}),c.jsx(wt,{onClick:()=>T(!1),title:e("toolbar.flipVertical"),size:"sm",children:c.jsx(Cp,{size:16})})]})})]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fw,{}),c.jsx(pw,{})]})]})}const mw=()=>{const{t:e}=Nt(),t=os(),n=is(),{zoomLevel:r,setZoomLevel:s,zoomIn:o,zoomOut:i}=rh(),a=d.useMemo(()=>{const f=new Set;return t.forEach(p=>{p.tags?.forEach(g=>f.add(g))}),f.size},[t]),l=d.useMemo(()=>{const f=t.filter(g=>g.rating&&g.rating>0);return f.length===0?0:f.reduce((g,m)=>g+(m.rating||0),0)/f.length},[t]),u=d.useMemo(()=>t.filter(f=>f.rating&&f.rating>0).length,[t]);return c.jsxs(he.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,type:"spring",stiffness:400,damping:25},className:"h-8 px-4 flex items-center justify-between text-xs text-[var(--color-text-secondary)] relative glass-footer",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] glass-specular"}),c.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:c.jsxs(un,{mode:"wait",children:[n.size===1&&c.jsx(he.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"text-[var(--color-text-primary)] truncate",title:Array.from(n)[0],children:Array.from(n)[0]},Array.from(n)[0]),n.size>1&&c.jsxs(he.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"text-[var(--color-text-secondary)]",children:[n.size," ",e("statusBar.selected")]})]})}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(so,{size:12,className:"text-[var(--color-text-muted)]"}),c.jsx(Vs,{value:t.length,className:"text-[var(--color-text-secondary)]",duration:400}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:e("statusBar.images")})]}),c.jsx(un,{children:n.size>0&&c.jsxs(he.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-1.5",children:[c.jsx(Ip,{size:12,className:"text-cyan-400"}),c.jsx(Vs,{value:n.size,className:"text-cyan-400",duration:200}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:e("statusBar.selected")})]})}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(sr,{size:12,className:"text-[var(--color-text-muted)]"}),c.jsx(Vs,{value:a,className:"text-[var(--color-text-secondary)]",duration:600}),c.jsx("span",{className:"text-[var(--color-text-muted)]",children:"Tags"})]}),u>0&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(nr,{size:12,className:"text-cyan-400 fill-cyan-400"}),c.jsx("span",{className:"text-cyan-400",children:l.toFixed(1)}),c.jsxs("span",{className:"text-[var(--color-text-muted)]",children:[" (",u,")"]})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4 pl-4 border-l border-[var(--glass-border)]",children:[c.jsx("button",{onClick:i,className:"p-1 hover:bg-[var(--glass-bg-hover)] rounded transition-colors",title:"Zoom Out (Ctrl+-)",children:c.jsx(Tp,{size:12,className:"text-[var(--color-text-secondary)]"})}),c.jsx("div",{className:"flex items-center gap-2 w-32",children:c.jsx("input",{type:"range",min:"50",max:"200",step:"10",value:r,onChange:f=>s(Number(f.target.value)),className:`w-full h-1 bg-[var(--color-bg-tertiary)] rounded-full appearance-none cursor-pointer
                [&::-webkit-slider-thumb]:appearance-none
                [&::-webkit-slider-thumb]:w-3
                [&::-webkit-slider-thumb]:h-3
                [&::-webkit-slider-thumb]:bg-cyan-400
                [&::-webkit-slider-thumb]:rounded-full
                [&::-webkit-slider-thumb]:cursor-pointer
                [&::-webkit-slider-thumb]:transition-transform
                [&::-webkit-slider-thumb]:hover:scale-125`})}),c.jsx("button",{onClick:o,className:"p-1 hover:bg-[var(--glass-bg-hover)] rounded transition-colors",title:"Zoom In (Ctrl++)",children:c.jsx(Pp,{size:12,className:"text-[var(--color-text-secondary)]"})}),c.jsxs("button",{onClick:()=>s(100),className:"text-[var(--color-text-secondary)] hover:text-cyan-400 transition-colors min-w-[40px] text-right",title:"Reset (Ctrl+0)",children:[r,"%"]})]})]})]})},hw={success:c.jsx(Mp,{className:"w-5 h-5"}),error:c.jsx(Op,{className:"w-5 h-5"}),info:c.jsx(Vi,{className:"w-5 h-5"}),warning:c.jsx(Oc,{className:"w-5 h-5"})},xw={success:{bg:"from-emerald-500/20 to-emerald-500/5",border:"border-emerald-500/30",icon:"text-emerald-400",glow:"shadow-emerald-500/20"},error:{bg:"from-red-500/20 to-red-500/5",border:"border-red-500/30",icon:"text-red-400",glow:"shadow-red-500/20"},info:{bg:"from-cyan-500/20 to-cyan-500/5",border:"border-cyan-500/30",icon:"text-cyan-400",glow:"shadow-cyan-500/20"},warning:{bg:"from-amber-500/20 to-amber-500/5",border:"border-amber-500/30",icon:"text-amber-400",glow:"shadow-amber-500/20"}};function bw({toast:e}){const{removeToast:t}=Gt(),n=xw[e.type];return c.jsxs(he.div,{layout:!0,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",stiffness:400,damping:25},className:`
        relative flex items-center gap-3 px-4 py-3 rounded-xl
        backdrop-blur-xl bg-gradient-to-r ${n.bg}
        border ${n.border}
        shadow-lg ${n.glow}
        min-w-[280px] max-w-[400px]
      `,children:[c.jsx("div",{className:n.icon,children:hw[e.type]}),c.jsx("p",{className:"flex-1 text-sm text-slate-100 font-medium",children:e.message}),c.jsx(he.button,{onClick:()=>t(e.id),className:"p-1 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-white/10 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:c.jsx(dn,{className:"w-4 h-4"})}),e.duration&&e.duration>0&&c.jsx(he.div,{className:`absolute bottom-0 left-0 h-0.5 rounded-b-xl ${n.icon.replace("text-","bg-")}`,initial:{width:"100%"},animate:{width:"0%"},transition:{duration:e.duration/1e3,ease:"linear"}}),c.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-t-xl pointer-events-none"})]})}function vw(){const{toasts:e}=Gt();return c.jsx("div",{className:"fixed bottom-6 right-6 z-[100] flex flex-col gap-3",children:c.jsx(un,{mode:"popLayout",children:e.map(t=>c.jsx(bw,{toast:t},t.id))})})}class ai extends d.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({errorInfo:n}),console.error("ErrorBoundary caught an error:",t,n)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleFullReset=()=>{const t=Me.getState();t.clearSelection(),t.setError(null),this.handleReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsx("div",{className:"h-full w-full flex items-center justify-center p-8",children:c.jsxs("div",{className:"glass rounded-2xl p-8 max-w-lg text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:c.jsx(Oc,{size:32,className:"text-red-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-3",children:"Etwas ist schiefgelaufen"}),c.jsx("p",{className:"text-slate-400 mb-6 px-4",children:"Ein unerwarteter Fehler ist aufgetreten. Dies kann an einer beschdigten Bilddatei oder einem Problem mit der Verbindung zum System liegen."}),this.state.error&&c.jsx("div",{className:"mb-6 mx-4 text-left",children:c.jsxs("details",{className:"group",children:[c.jsxs("summary",{className:"text-sm text-slate-500 cursor-pointer hover:text-slate-400 transition-colors flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/50"}),"Technische Details anzeigen"]}),c.jsxs("div",{className:"mt-3 p-4 rounded-xl bg-slate-900/80 border border-white/5 overflow-auto max-h-48 backdrop-blur-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"Error Stack"}),c.jsx("button",{onClick:()=>{const t=`${this.state.error?.message}

${this.state.error?.stack}

${this.state.errorInfo?.componentStack}`;navigator.clipboard.writeText(t)},className:"text-[10px] text-cyan-400 hover:text-cyan-300 transition-colors",children:"Kopieren"})]}),c.jsxs("code",{className:"text-xs text-red-300/90 whitespace-pre-wrap font-mono leading-relaxed",children:[this.state.error.message,this.state.error.stack&&`

${this.state.error.stack}`]})]})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[c.jsxs("button",{onClick:this.handleReset,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-cyan-500 text-white shadow-lg shadow-cyan-500/20 hover:bg-cyan-400 transition-all duration-300 font-medium",children:[c.jsx(Pc,{size:18}),c.jsx("span",{children:"Neu laden"})]}),c.jsx("button",{onClick:this.handleFullReset,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-white/5 text-slate-300 hover:bg-white/10 transition-all duration-300 border border-white/10",children:"App Neustarten"})]})]})}):this.props.children}}function yw(){const e=d.useCallback(t=>{if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=Me.getState(),{copy:r,cut:s,paste:o}=Ra.getState(),{openModal:i}=Ea.getState();if(t.key==="Escape"){n.clearSelection();return}if(t.key==="F2"&&n.selectedImages.size===1){t.preventDefault();const a=Array.from(n.selectedImages)[0],l=n.images.find(u=>u.path===a);l&&i("rename",{path:a,name:l.fileName,isFolder:!1});return}if(t.key==="Delete"&&n.selectedImages.size>0){t.preventDefault(),i("deleteConfirm",{paths:Array.from(n.selectedImages)});return}if(t.altKey&&t.key==="Enter"&&n.selectedImages.size===1){t.preventDefault();const a=Array.from(n.selectedImages)[0];i("properties",{path:a});return}if(t.ctrlKey){if(t.key==="c"||t.key==="C"){n.selectedImages.size>0&&(t.preventDefault(),r(Array.from(n.selectedImages).map(a=>({path:a,isFolder:!1}))));return}if(t.key==="x"||t.key==="X"){n.selectedImages.size>0&&(t.preventDefault(),s(Array.from(n.selectedImages).map(a=>({path:a,isFolder:!1}))));return}if(t.key==="v"||t.key==="V"){n.currentFolder&&(t.preventDefault(),o(n.currentFolder).then(()=>n.refreshImages()));return}if(t.key==="a"||t.key==="A"){t.preventDefault(),n.selectAllImages();return}t.key==="+"||t.key==="="?(t.preventDefault(),n.zoomIn()):t.key==="-"?(t.preventDefault(),n.zoomOut()):t.key==="0"&&(t.preventDefault(),n.setZoomLevel(100))}},[]);d.useEffect(()=>(window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)),[e])}function ww(){const e=Me(r=>r.setupSubscriptions),t=Me(r=>r.loadAllTags),n=Ia(r=>r.initialize);d.useEffect(()=>{e(),t(),n()},[e,t,n])}const Sw=d.lazy(()=>es(()=>import("./Lightbox-CavWxZB9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>({default:e.Lightbox}))),Rw=d.lazy(()=>es(()=>import("./TagManagerModal-BzXvSA3L.js"),__vite__mapDeps([8,1,2,4,3,5,6,7])).then(e=>({default:e.TagManagerModal}))),Ew=d.lazy(()=>es(()=>import("./RenameModal-BK0_rXap.js"),__vite__mapDeps([9,1,2,10,5,4,6,3,7])).then(e=>({default:e.RenameModal}))),Cw=d.lazy(()=>es(()=>import("./DeleteConfirmModal-BtFMkqVE.js"),__vite__mapDeps([11,1,2,10,5,4,6,3,7])).then(e=>({default:e.DeleteConfirmModal}))),Iw=d.lazy(()=>es(()=>import("./PropertiesModal-WZh7ZRmG.js"),__vite__mapDeps([12,1,2,10,5,4,6,3,7])).then(e=>({default:e.PropertiesModal})));function Tw(){const e=lh(),t=na();return ww(),yw(),d.useEffect(()=>{e&&(Gt.getState().error(e),t(null))},[e,t]),c.jsxs("div",{className:"h-screen w-screen flex flex-col overflow-hidden",children:[c.jsx(gw,{}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx(ai,{children:c.jsx(X0,{})}),c.jsx(ai,{children:c.jsx(mb,{})}),c.jsx(ai,{children:c.jsx(yy,{})})]}),c.jsx(mw,{}),c.jsxs(d.Suspense,{fallback:null,children:[c.jsx(Rw,{}),c.jsx(Sw,{}),c.jsx(Ew,{}),c.jsx(Cw,{}),c.jsx(Iw,{})]}),c.jsx(B0,{}),c.jsx(vw,{})]})}ci.createRoot(document.getElementById("root")).render(c.jsx(vc.StrictMode,{children:c.jsx(Qf,{children:c.jsx(Tw,{})})}));export{Lw as $,Zu as A,Dc as B,ra as C,nd as D,ad as E,ua as F,wt as G,pa as H,ba as I,va as J,ls as K,Tn as L,st as M,Oe as N,$ as O,bo as P,ed as Q,ga as R,Ju as S,ut as T,Dn as U,hf as V,Ia as W,Gt as X,Ea as Y,Cu as Z,Eu as _,Me as a,na as b,et as c,gr as d,$e as e,wo as f,Ad as g,Rb as h,ne as i,Ns as j,Z as k,Eb as l,me as m,yt as n,bb as o,qe as p,xr as q,rg as r,zn as s,ns as t,Pd as u,hd as v,la as w,ha as x,ya as y,Qu as z};
